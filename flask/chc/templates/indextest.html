<!DOCTYPE html>
<html>
<head>
    <title>Progress Bar</title>
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
</head>
<body>
    <form action="/execute" method="post" id="executeForm">
        <button type="submit">Execute Script</button>

    <div id="progress-bar-container">
        <progress id="progress-bar" value="0" max="100"></progress>
    </div>
 </form>
    <script>
        $('#executeForm').submit(function(e) {
            e.preventDefault();
            var source = new EventSource('/execute');

            source.addEventListener('message', function (e) {
                var data = JSON.parse(e.data);
                // 更新进度条
                document.getElementById('progress-bar').value = data.progress;
            }, false);

            source.addEventListener('error', function (e) {
                console.log("EventSource failed.");
            }, false);
        });
    </script>
</body>
</html>