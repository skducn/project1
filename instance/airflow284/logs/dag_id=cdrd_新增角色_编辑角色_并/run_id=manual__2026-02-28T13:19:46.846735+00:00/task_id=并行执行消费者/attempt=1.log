[2026-02-28T21:20:06.845+0800] {local_task_job_runner.py:123} INFO - ::group::Pre task execution logs
[2026-02-28T21:20:06.863+0800] {taskinstance.py:2631} INFO - Dependencies all met for dep_context=non-requeueable deps ti=<TaskInstance: cdrd_新增角色_编辑角色_并.并行执行消费者 manual__2026-02-28T13:19:46.846735+00:00 [queued]>
[2026-02-28T21:20:06.871+0800] {taskinstance.py:2631} INFO - Dependencies all met for dep_context=requeueable deps ti=<TaskInstance: cdrd_新增角色_编辑角色_并.并行执行消费者 manual__2026-02-28T13:19:46.846735+00:00 [queued]>
[2026-02-28T21:20:06.872+0800] {taskinstance.py:2884} INFO - Starting attempt 1 of 1
[2026-02-28T21:20:06.884+0800] {taskinstance.py:2907} INFO - Executing <Task(PythonOperator): 并行执行消费者> on 2026-02-28 13:19:46.846735+00:00
[2026-02-28T21:20:06.887+0800] {standard_task_runner.py:72} INFO - Started process 5356 to run task
[2026-02-28T21:20:06.894+0800] {standard_task_runner.py:104} INFO - Running: ['airflow', 'tasks', 'run', 'cdrd_新增角色_编辑角色_并', '并行执行消费者', 'manual__2026-02-28T13:19:46.846735+00:00', '--job-id', '747', '--raw', '--subdir', 'DAGS_FOLDER/tag_CDRD/系统管理/角色管理/dag_新增角色_编辑角色_并.py', '--cfg-path', '/var/folders/f7/4z7jtb213fs0mtgbw_0vs2600000gn/T/tmpxov84c85']
[2026-02-28T21:20:06.898+0800] {standard_task_runner.py:105} INFO - Job 747: Subtask 并行执行消费者
[2026-02-28T21:20:06.946+0800] {task_command.py:467} INFO - Running <TaskInstance: cdrd_新增角色_编辑角色_并.并行执行消费者 manual__2026-02-28T13:19:46.846735+00:00 [running]> on host localhost-2.local
[2026-02-28T21:20:07.026+0800] {taskinstance.py:3157} INFO - Exporting env vars: AIRFLOW_CTX_DAG_OWNER='airflow' AIRFLOW_CTX_DAG_ID='cdrd_新增角色_编辑角色_并' AIRFLOW_CTX_TASK_ID='并行执行消费者' AIRFLOW_CTX_EXECUTION_DATE='2026-02-28T13:19:46.846735+00:00' AIRFLOW_CTX_TRY_NUMBER='1' AIRFLOW_CTX_DAG_RUN_ID='manual__2026-02-28T13:19:46.846735+00:00'
[2026-02-28T21:20:07.028+0800] {taskinstance.py:740} INFO - ::endgroup::
[2026-02-28T21:20:07.045+0800] {logging_mixin.py:190} INFO - ==================================================
[2026-02-28T21:20:07.045+0800] {logging_mixin.py:190} INFO - 【并行消费者】开始执行测试任务...
[2026-02-28T21:20:07.046+0800] {logging_mixin.py:190} INFO - ==================================================
[2026-02-28T21:20:07.052+0800] {logging_mixin.py:190} INFO - 从XCom获取到的测试用例数据: 2 条
[2026-02-28T21:20:07.053+0800] {logging_mixin.py:190} INFO - 发现 2 种不同的任务类型: ['新增角色', '编辑角色']
[2026-02-28T21:20:07.053+0800] {logging_mixin.py:190} INFO - 提交任务: 新增角色
[2026-02-28T21:20:07.054+0800] {logging_mixin.py:190} INFO - ===================== 新增角色 消费者开始执行 ====================
[2026-02-28T21:20:07.054+0800] {logging_mixin.py:190} INFO - 提交任务: 编辑角色
[2026-02-28T21:20:07.055+0800] {logging_mixin.py:190} INFO - [新增角色] 找到测试用例: 新增角色
[2026-02-28T21:20:07.055+0800] {logging_mixin.py:190} INFO - ===================== 编辑角色 消费者开始执行 ====================
[2026-02-28T21:20:07.055+0800] {logging_mixin.py:190} INFO - 开始等待 2 个任务完成...
[2026-02-28T21:20:07.056+0800] {logging_mixin.py:190} INFO - [Consumer_0] 开始执行测试用例: 系统管理/角色管理/新增角色.py
[2026-02-28T21:20:07.057+0800] {logging_mixin.py:190} INFO - [编辑角色] 跳过不匹配的测试用例: 新增角色
[2026-02-28T21:20:07.057+0800] {logging_mixin.py:190} INFO - [线程 Consumer_0] 准备执行Playwright脚本: /Users/linghuchong/Downloads/51/Python/project/instance/zyjk/CDRD/web/系统管理/角色管理/新增角色.py
[2026-02-28T21:20:07.058+0800] {logging_mixin.py:190} INFO - [编辑角色] 找到测试用例: 编辑角色
[2026-02-28T21:20:07.059+0800] {logging_mixin.py:190} INFO - [Consumer_1] 开始执行测试用例: 系统管理/角色管理/编辑角色.py
[2026-02-28T21:20:07.059+0800] {logging_mixin.py:190} INFO - [线程 Consumer_1] 准备执行Playwright脚本: /Users/linghuchong/Downloads/51/Python/project/instance/zyjk/CDRD/web/系统管理/角色管理/编辑角色.py
[2026-02-28T21:20:07.426+0800] {logging_mixin.py:190} INFO - [线程 Consumer_1] ✅ 找到run_playwright函数，开始执行...
[2026-02-28T21:20:07.426+0800] {logging_mixin.py:190} INFO - 随机生成测试数据: [['刘瑜', '538214', '167581', '湖北省欣县清河黎路W座 929860']]
[2026-02-28T21:20:07.428+0800] {logging_mixin.py:190} INFO - [线程 Consumer_0] ✅ 找到run_playwright函数，开始执行...
[2026-02-28T21:20:14.679+0800] {logging_mixin.py:190} INFO - [线程 Consumer_1] ✅ Playwright执行完成，返回结果: {'role_name': '555', 'remark': '1234'}
[2026-02-28T21:20:14.681+0800] {logging_mixin.py:190} INFO - [Consumer_1] Playwright执行结果: {'role_name': '555', 'remark': '1234'}
[2026-02-28T21:20:14.681+0800] {logging_mixin.py:190} INFO - [线程 Consumer_0] ✅ Playwright执行完成，返回结果: {'role_name': '刘瑜', 'role_key': '538214', 'role_sort': '167581', 'remark': '湖北省欣县清河黎路W座 929860'}
[2026-02-28T21:20:14.682+0800] {logging_mixin.py:190} INFO - [Consumer_1] 正则替换结果: [{"k": "select count(*) as qty from sys_role where role_name='555'", "v": 1}]
[2026-02-28T21:20:14.682+0800] {logging_mixin.py:190} INFO - [Consumer_0] Playwright执行结果: {'role_name': '刘瑜', 'role_key': '538214', 'role_sort': '167581', 'remark': '湖北省欣县清河黎路W座 929860'}
[2026-02-28T21:20:14.683+0800] {logging_mixin.py:190} INFO - [Consumer_1] 解析后的验证数据: [{'k': "select count(*) as qty from sys_role where role_name='555'", 'v': 1}]
[2026-02-28T21:20:14.683+0800] {logging_mixin.py:190} INFO - [Consumer_0] 正则替换结果: [{"k": "select count(*) as qty from sys_role where role_name='刘瑜'", "v": 1}]
[2026-02-28T21:20:14.685+0800] {logging_mixin.py:190} INFO - [Consumer_0] 解析后的验证数据: [{'k': "select count(*) as qty from sys_role where role_name='刘瑜'", 'v': 1}]
[2026-02-28T21:20:14.685+0800] {logging_mixin.py:190} INFO - OperationalError(0, b'Unknown error')
[2026-02-28T21:20:14.686+0800] {logging_mixin.py:190} INFO - Consumer_0] 验证过程出错: 'NoneType' object is not subscriptable
[2026-02-28T21:20:14.686+0800] {logging_mixin.py:190} INFO - [新增角色] 跳过不匹配的测试用例: 编辑角色
[2026-02-28T21:20:14.686+0800] {logging_mixin.py:190} INFO - ===================== 新增角色 消费者执行完成 ====================
[2026-02-28T21:20:14.687+0800] {logging_mixin.py:190} INFO - ✅ 新增角色 执行完成
[2026-02-28T21:20:14.696+0800] {logging_mixin.py:190} INFO - OperationalError(3980, b'The request failed to run because the batch is aborted, this can be caused by abort signal sent from client, or another request is running in the same session, which makes the session busy.DB-Lib error message 20018, severity 16:\nGeneral SQL Server error: Check messages from the SQL Server\n')
[2026-02-28T21:20:14.697+0800] {logging_mixin.py:190} INFO - Consumer_1] 验证过程出错: 'NoneType' object is not subscriptable
[2026-02-28T21:20:14.697+0800] {logging_mixin.py:190} INFO - ===================== 编辑角色 消费者执行完成 ====================
[2026-02-28T21:20:14.698+0800] {logging_mixin.py:190} INFO - ✅ 编辑角色 执行完成
[2026-02-28T21:20:14.698+0800] {logging_mixin.py:190} INFO - ==================================================
[2026-02-28T21:20:14.699+0800] {logging_mixin.py:190} INFO - 【并行消费者】所有测试执行完成
[2026-02-28T21:20:14.699+0800] {logging_mixin.py:190} INFO - ==================================================
[2026-02-28T21:20:14.700+0800] {python.py:240} INFO - Done. Returned value was: None
[2026-02-28T21:20:14.709+0800] {taskinstance.py:349} INFO - ::group::Post task execution logs
[2026-02-28T21:20:14.710+0800] {taskinstance.py:361} INFO - Marking task as SUCCESS. dag_id=cdrd_新增角色_编辑角色_并, task_id=并行执行消费者, run_id=manual__2026-02-28T13:19:46.846735+00:00, execution_date=20260228T131946, start_date=20260228T132006, end_date=20260228T132014
[2026-02-28T21:20:14.774+0800] {local_task_job_runner.py:266} INFO - Task exited with return code 0
[2026-02-28T21:20:14.795+0800] {taskinstance.py:3924} INFO - 0 downstream tasks scheduled from follow-on schedule check
[2026-02-28T21:20:14.796+0800] {local_task_job_runner.py:245} INFO - ::endgroup::
