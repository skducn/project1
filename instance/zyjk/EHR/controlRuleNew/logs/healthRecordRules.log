2020-06-17 09:06:53.416 [INFO ] com.benetech.rules.RulesApplication                - [logStarting:55] Starting RulesApplication v1.0-SNAPSHOT on DESKTOP-EOCO1V0 with PID 10292 (D:\51\python\project\instance\zyjk\EHR\controlRuleNew\config\healthRecordRules.jar started by ZY in D:\51\python\project\instance\zyjk\EHR\controlRuleNew) 
2020-06-17 09:06:53.488 [DEBUG] com.benetech.rules.RulesApplication                - [logStarting:56] Running with Spring Boot v2.2.1.RELEASE, Spring v5.2.1.RELEASE 
2020-06-17 09:06:53.488 [INFO ] com.benetech.rules.RulesApplication                - [logStartupProfileInfo:655] The following profiles are active: test 
2020-06-17 09:06:55.509 [INFO ] o.s.boot.web.embedded.tomcat.TomcatWebServer       - [initialize:92] Tomcat initialized with port(s): 8838 (http) 
2020-06-17 09:06:55.521 [INFO ] org.apache.coyote.http11.Http11NioProtocol         - [log:173] Initializing ProtocolHandler ["http-nio-8838"] 
2020-06-17 09:06:55.522 [INFO ] org.apache.catalina.core.StandardService           - [log:173] Starting service [Tomcat] 
2020-06-17 09:06:55.523 [INFO ] org.apache.catalina.core.StandardEngine            - [log:173] Starting Servlet engine: [Apache Tomcat/9.0.27] 
2020-06-17 09:06:55.593 [INFO ] o.a.c.c.C.[.[localhost].[/healthRecordRules]       - [log:173] Initializing Spring embedded WebApplicationContext 
2020-06-17 09:06:55.594 [INFO ] org.springframework.web.context.ContextLoader      - [prepareWebApplicationContext:284] Root WebApplicationContext: initialization completed in 2047 ms 
2020-06-17 09:06:55.815 [DEBUG] org.apache.ibatis.logging.LogFactory               - [setImplementation:135] Logging initialized using 'class org.apache.ibatis.logging.slf4j.Slf4jImpl' adapter. 
2020-06-17 09:06:56.149 [WARN ] org.mybatis.spring.SqlSessionFactoryBean           - [buildSqlSessionFactory:467] Can't find class in '[com.benetech.rules.*.entity]' package. Please check your configuration. 
2020-06-17 09:06:56.927 [INFO ] com.alibaba.druid.pool.DruidDataSource             - [init:930] {dataSource-1} inited 
2020-06-17 09:06:57.404 [DEBUG] c.b.r.m.e.mapper.RuleEngineMapper.getAllRules      - [debug:159] ==>  Preparing: select a.RuleId as ruleId, a.RuleSql as clazz from HrRule a join HrRuleProps b on a.RuleId = b.RuleId where -- RuleId in ('34278f71cf1d42c88158aaf637fa5203', '8d30baa03bfc4233a8f115c57a0ebf08', '63eb82a44bf64c96a0b9023fa2a3c9d9') a.RuleSql != '' and a.RuleSql is not null and b.Enable = 1  
2020-06-17 09:06:57.420 [DEBUG] c.b.r.m.e.mapper.RuleEngineMapper.getAllRules      - [debug:159] ==> Parameters:  
2020-06-17 09:06:57.517 [DEBUG] c.b.r.m.e.mapper.RuleEngineMapper.getAllRules      - [debug:159] <==      Total: 310 
2020-06-17 09:06:57.785 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [init:68] 加载规则：310 条 
2020-06-17 09:06:57.801 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.getAllCode    - [debug:159] ==>  Preparing: SELECT codeSysType AS type, code AS code, [value] AS value FROM tb_code_value WHERE code != '' AND [value] != ''  
2020-06-17 09:06:57.802 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.getAllCode    - [debug:159] ==> Parameters:  
2020-06-17 09:06:58.290 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.getAllCode    - [debug:159] <==      Total: 44881 
2020-06-17 09:06:58.316 [INFO ] c.b.r.m.m.service.impl.EhrModelBuildServiceImpl    - [init:96] 初始化字典类型: 467 种 
2020-06-17 09:06:58.317 [INFO ] c.b.r.m.m.service.impl.EhrModelBuildServiceImpl    - [init:97] 初始化字典: 44881 条 
2020-06-17 09:06:58.317 [ERROR] c.b.r.m.process.service.impl.QcProcessServiceImpl  - [init:44] 初始化线程池 
2020-06-17 09:06:58.634 [INFO ] o.s.scheduling.concurrent.ThreadPoolTaskExecutor   - [initialize:171] Initializing ExecutorService 'applicationTaskExecutor' 
2020-06-17 09:06:58.885 [INFO ] org.apache.coyote.http11.Http11NioProtocol         - [log:173] Starting ProtocolHandler ["http-nio-8838"] 
2020-06-17 09:06:58.928 [INFO ] o.s.boot.web.embedded.tomcat.TomcatWebServer       - [start:204] Tomcat started on port(s): 8838 (http) with context path '/healthRecordRules' 
2020-06-17 09:06:58.934 [INFO ] com.benetech.rules.RulesApplication                - [logStarted:61] Started RulesApplication in 6.561 seconds (JVM running for 8.198) 
2020-06-17 09:06:58.935 [INFO ] com.benetech.rules.RulesApplication                - [main:20] -------------启动成功------------- 
2020-06-17 09:07:00.552 [INFO ] o.a.c.c.C.[.[localhost].[/healthRecordRules]       - [log:173] Initializing Spring DispatcherServlet 'dispatcherServlet' 
2020-06-17 09:07:00.553 [INFO ] org.springframework.web.servlet.DispatcherServlet  - [initServletBean:525] Initializing Servlet 'dispatcherServlet' 
2020-06-17 09:07:00.561 [INFO ] org.springframework.web.servlet.DispatcherServlet  - [initServletBean:547] Completed initialization in 8 ms 
2020-06-17 09:07:00.725 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 09:07:00.729 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 09:07:00.740 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 09:07:00.746 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 09:07:00.747 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 09:07:00.757 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 09:07:00.762 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 09:07:00.762 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 09:07:00.768 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 15 
2020-06-17 09:07:00.774 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 09:07:00.775 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:07:00.780 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 09:07:00.785 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 09:07:00.786 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:07:00.794 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 09:07:00.798 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 09:07:00.799 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 09:07:00.799 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 09:07:00.800 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 09:07:00.804 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 09:07:00.809 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 09:07:00.809 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 09:07:00.813 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 09:07:00.818 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 09:07:00.818 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:07:00.823 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 09:07:00.826 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 09:07:00.827 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:07:00.842 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 09:07:00.847 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 09:07:00.847 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 09:07:00.848 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 09:07:00.849 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 09:07:00.853 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 09:07:00.858 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 09:07:00.858 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 09:07:00.862 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 09:07:00.867 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 09:07:00.868 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:07:00.873 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 09:07:00.878 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 09:07:00.878 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:07:00.884 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 09:07:01.024 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:个人基本信息表药物过敏史药物过敏史填写内容冲突 
2020-06-17 09:07:01.062 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:RH超出字典范围RH不在字典范围内（1 阴性 2 阳性 3 不详 ） 
2020-06-17 09:07:01.095 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-17 09:07:01.096 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 215a4080eedc48189a956184f531da35(String), 2020-06-17 09:07:01.073(Timestamp), 31011310200312009116(String), 92dc5e8124ba4c5396a3fa7c3d1dd8db(String), 2020-06-17 09:07:01.073(Timestamp) 
2020-06-17 09:07:01.130 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 2 
2020-06-17 09:07:05.305 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 09:07:05.306 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 09:07:05.314 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 09:07:05.320 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 09:07:05.321 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 09:07:05.327 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 09:07:05.332 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 09:07:05.333 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 09:07:05.339 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 12 
2020-06-17 09:07:05.344 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 09:07:05.344 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:07:05.349 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 09:07:05.353 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 09:07:05.354 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:07:05.360 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 09:07:05.365 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 09:07:05.365 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 09:07:05.365 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 09:07:05.366 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 09:07:05.373 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 09:07:05.377 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 09:07:05.380 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 09:07:05.385 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 09:07:05.391 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 09:07:05.391 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:07:05.397 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 09:07:05.402 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 09:07:05.403 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:07:05.417 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 09:07:05.421 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 09:07:05.422 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 09:07:05.422 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 09:07:05.422 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 09:07:05.427 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 09:07:05.433 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 09:07:05.433 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 09:07:05.439 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 09:07:05.443 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 09:07:05.443 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:07:05.448 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 09:07:05.452 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 09:07:05.453 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:07:05.457 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 09:07:05.478 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:药物过敏史未填写药物过敏史为空值 
2020-06-17 09:07:05.492 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:RH超出字典范围RH不在字典范围内（1 阴性 2 阳性 3 不详 ） 
2020-06-17 09:07:05.517 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:个人基本信息表暴露史暴露史未填写 
2020-06-17 09:07:05.537 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-17 09:07:05.538 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 0e82a90122434b1989a6a6fd97ced399(String), 2020-06-17 09:07:05.518(Timestamp), 31011310200312009116(String), 92dc5e8124ba4c5396a3fa7c3d1dd8db(String), 2020-06-17 09:07:05.518(Timestamp), 31011310200312009116(String), fa6c0d8204684279a021f89e0d49e460(String), 2020-06-17 09:07:05.518(Timestamp) 
2020-06-17 09:07:05.558 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 3 
2020-06-17 09:07:09.702 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 09:07:09.703 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 09:07:09.709 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 09:07:09.714 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 09:07:09.715 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 09:07:09.721 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 09:07:09.726 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 09:07:09.727 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 09:07:09.732 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 12 
2020-06-17 09:07:09.737 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 09:07:09.738 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:07:09.742 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 09:07:09.747 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 09:07:09.748 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:07:09.753 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 09:07:09.759 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 09:07:09.759 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 09:07:09.759 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 09:07:09.760 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 09:07:09.764 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 09:07:09.769 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 09:07:09.770 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 09:07:09.776 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 09:07:09.780 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 09:07:09.781 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:07:09.785 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 09:07:09.789 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 09:07:09.790 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:07:09.804 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 09:07:09.808 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 09:07:09.808 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 09:07:09.809 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 09:07:09.809 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 09:07:09.814 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 09:07:09.819 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 09:07:09.820 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 09:07:09.824 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 09:07:09.835 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 09:07:09.836 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:07:09.842 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 09:07:09.848 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 09:07:09.849 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:07:09.855 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 09:07:09.892 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:药物过敏史未填写药物过敏史为空值 
2020-06-17 09:07:09.893 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:个人基本信息表既往史既往史疾病未填写 
2020-06-17 09:07:09.906 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:个人基本信息表既往史既往史疾病确诊时间填写不规范 
2020-06-17 09:07:09.906 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:RH超出字典范围RH不在字典范围内（1 阴性 2 阳性 3 不详 ） 
2020-06-17 09:07:09.917 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-17 09:07:09.918 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 0e82a90122434b1989a6a6fd97ced399(String), 2020-06-17 09:07:09.915(Timestamp), 31011310200312009116(String), 1c6d4ebc12b549398a8a42ff110c4bba(String), 2020-06-17 09:07:09.915(Timestamp), 31011310200312009116(String), 923bfb7880204efa8f26fd200d1bd17e(String), 2020-06-17 09:07:09.915(Timestamp), 31011310200312009116(String), 92dc5e8124ba4c5396a3fa7c3d1dd8db(String), 2020-06-17 09:07:09.915(Timestamp) 
2020-06-17 09:07:09.932 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 4 
2020-06-17 09:07:12.214 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 09:07:12.214 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 09:07:12.219 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 09:07:12.227 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 09:07:12.227 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 09:07:12.234 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 09:07:12.240 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 09:07:12.240 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 09:07:12.247 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 13 
2020-06-17 09:07:12.255 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 09:07:12.256 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:07:12.271 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 09:07:12.279 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 09:07:12.279 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:07:12.291 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 09:07:12.303 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 09:07:12.303 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 09:07:12.304 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 09:07:12.304 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 09:07:12.321 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 09:07:12.329 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 09:07:12.330 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 09:07:12.340 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 09:07:12.344 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 09:07:12.345 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:07:12.355 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 09:07:12.363 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 09:07:12.363 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:07:12.378 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 09:07:12.383 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 09:07:12.384 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 09:07:12.384 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 09:07:12.384 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 09:07:12.389 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 09:07:12.395 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 09:07:12.395 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 09:07:12.398 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 09:07:12.404 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 09:07:12.404 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:07:12.409 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 09:07:12.414 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 09:07:12.414 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:07:12.419 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 09:07:12.445 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:药物过敏史未填写药物过敏史为空值 
2020-06-17 09:07:12.449 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:个人基本信息表既往史疾病名称未填写（恶性肿瘤） 
2020-06-17 09:07:12.449 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:个人基本信息表既往史既往史疾病确诊时间未填写 
2020-06-17 09:07:12.452 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:个人基本信息表既往史既往史疾病确诊时间填写不规范 
2020-06-17 09:07:12.452 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:RH超出字典范围RH不在字典范围内（1 阴性 2 阳性 3 不详 ） 
2020-06-17 09:07:12.457 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-17 09:07:12.458 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 0e82a90122434b1989a6a6fd97ced399(String), 2020-06-17 09:07:12.456(Timestamp), 31011310200312009116(String), 5ffdb7838d8e430596d05929dbd8551e(String), 2020-06-17 09:07:12.456(Timestamp), 31011310200312009116(String), 6302b0fcdcd7482099581602a1fec501(String), 2020-06-17 09:07:12.456(Timestamp), 31011310200312009116(String), 923bfb7880204efa8f26fd200d1bd17e(String), 2020-06-17 09:07:12.456(Timestamp), 31011310200312009116(String), 92dc5e8124ba4c5396a3fa7c3d1dd8db(String), 2020-06-17 09:07:12.456(Timestamp) 
2020-06-17 09:07:12.474 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 5 
2020-06-17 09:07:14.589 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 09:07:14.589 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 09:07:14.594 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 09:07:14.598 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 09:07:14.599 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 09:07:14.605 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 09:07:14.610 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 09:07:14.610 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 09:07:14.615 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 13 
2020-06-17 09:07:14.620 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 09:07:14.620 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:07:14.625 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 09:07:14.630 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 09:07:14.630 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:07:14.635 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 09:07:14.639 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 09:07:14.640 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 09:07:14.640 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 09:07:14.641 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 09:07:14.645 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 09:07:14.650 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 09:07:14.650 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 09:07:14.654 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 09:07:14.658 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 09:07:14.659 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:07:14.663 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 09:07:14.667 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 09:07:14.668 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:07:14.683 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 09:07:14.688 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 09:07:14.688 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 09:07:14.689 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 09:07:14.689 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 09:07:14.696 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 09:07:14.704 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 09:07:14.705 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 09:07:14.714 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 09:07:14.719 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 09:07:14.719 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:07:14.725 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 09:07:14.736 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 09:07:14.736 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:07:14.741 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 09:07:14.754 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:药物过敏史未填写药物过敏史为空值 
2020-06-17 09:07:14.757 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:个人基本信息表既往史既往史疾病确诊时间未填写 
2020-06-17 09:07:14.759 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:个人基本信息表既往史疾病名称未填写（职业病） 
2020-06-17 09:07:14.763 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:个人基本信息表既往史既往史疾病确诊时间填写不规范 
2020-06-17 09:07:14.763 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:RH超出字典范围RH不在字典范围内（1 阴性 2 阳性 3 不详 ） 
2020-06-17 09:07:14.771 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-17 09:07:14.772 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 0e82a90122434b1989a6a6fd97ced399(String), 2020-06-17 09:07:14.77(Timestamp), 31011310200312009116(String), 6302b0fcdcd7482099581602a1fec501(String), 2020-06-17 09:07:14.77(Timestamp), 31011310200312009116(String), 80949448119a47a4a539508ad34af579(String), 2020-06-17 09:07:14.77(Timestamp), 31011310200312009116(String), 923bfb7880204efa8f26fd200d1bd17e(String), 2020-06-17 09:07:14.77(Timestamp), 31011310200312009116(String), 92dc5e8124ba4c5396a3fa7c3d1dd8db(String), 2020-06-17 09:07:14.77(Timestamp) 
2020-06-17 09:07:14.791 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 5 
2020-06-17 09:07:17.450 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 09:07:17.451 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 09:07:17.526 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 09:07:17.552 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 09:07:17.554 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 09:07:17.560 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 09:07:17.566 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 09:07:17.567 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 09:07:17.577 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 13 
2020-06-17 09:07:17.584 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 09:07:17.585 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:07:17.592 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 09:07:17.598 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 09:07:17.599 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:07:17.606 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 09:07:17.611 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 09:07:17.611 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 09:07:17.613 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 09:07:17.614 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 09:07:17.621 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 09:07:17.628 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 09:07:17.639 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 09:07:17.649 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 09:07:17.665 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 09:07:17.666 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:07:17.681 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 09:07:17.709 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 09:07:17.709 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:07:17.727 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 09:07:17.731 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 09:07:17.731 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 09:07:17.732 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 09:07:17.732 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 09:07:17.738 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 09:07:17.742 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 09:07:17.743 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 09:07:17.748 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 09:07:17.752 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 09:07:17.753 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:07:17.758 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 09:07:17.762 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 09:07:17.764 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:07:17.769 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 09:07:17.783 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:药物过敏史未填写药物过敏史为空值 
2020-06-17 09:07:17.787 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:个人基本信息表既往史既往史疾病确诊时间未填写 
2020-06-17 09:07:17.790 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:个人基本信息表既往史既往史疾病确诊时间填写不规范 
2020-06-17 09:07:17.790 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:RH超出字典范围RH不在字典范围内（1 阴性 2 阳性 3 不详 ） 
2020-06-17 09:07:17.793 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:个人基本信息表既往史疾病名称未填写（其他） 
2020-06-17 09:07:17.796 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-17 09:07:17.797 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 0e82a90122434b1989a6a6fd97ced399(String), 2020-06-17 09:07:17.795(Timestamp), 31011310200312009116(String), 6302b0fcdcd7482099581602a1fec501(String), 2020-06-17 09:07:17.795(Timestamp), 31011310200312009116(String), 923bfb7880204efa8f26fd200d1bd17e(String), 2020-06-17 09:07:17.795(Timestamp), 31011310200312009116(String), 92dc5e8124ba4c5396a3fa7c3d1dd8db(String), 2020-06-17 09:07:17.795(Timestamp), 31011310200312009116(String), cecf4941a48048c0ad396cfa4c04c616(String), 2020-06-17 09:07:17.795(Timestamp) 
2020-06-17 09:07:17.826 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 5 
2020-06-17 09:07:20.456 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 09:07:20.457 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 09:07:20.462 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 09:07:20.468 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 09:07:20.469 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 09:07:20.475 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 09:07:20.481 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 09:07:20.482 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 09:07:20.486 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 13 
2020-06-17 09:07:20.491 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 09:07:20.492 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:07:20.496 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 09:07:20.501 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 09:07:20.501 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:07:20.507 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 09:07:20.511 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 09:07:20.512 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 09:07:20.512 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 09:07:20.512 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 09:07:20.516 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 09:07:20.521 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 09:07:20.522 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 09:07:20.526 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 09:07:20.530 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 09:07:20.531 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:07:20.535 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 09:07:20.540 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 09:07:20.540 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:07:20.553 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 09:07:20.557 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 09:07:20.557 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 09:07:20.557 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 09:07:20.558 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 09:07:20.562 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 09:07:20.566 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 09:07:20.566 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 09:07:20.570 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 09:07:20.574 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 09:07:20.575 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:07:20.581 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 09:07:20.585 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 09:07:20.585 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:07:20.589 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 09:07:20.601 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:药物过敏史未填写药物过敏史为空值 
2020-06-17 09:07:20.604 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:个人基本信息表既往史既往史疾病确诊时间未填写 
2020-06-17 09:07:20.606 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:个人基本信息表既往史既往史疾病确诊时间填写不规范 
2020-06-17 09:07:20.606 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:RH超出字典范围RH不在字典范围内（1 阴性 2 阳性 3 不详 ） 
2020-06-17 09:07:20.610 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-17 09:07:20.611 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 0e82a90122434b1989a6a6fd97ced399(String), 2020-06-17 09:07:20.61(Timestamp), 31011310200312009116(String), 6302b0fcdcd7482099581602a1fec501(String), 2020-06-17 09:07:20.61(Timestamp), 31011310200312009116(String), 923bfb7880204efa8f26fd200d1bd17e(String), 2020-06-17 09:07:20.61(Timestamp), 31011310200312009116(String), 92dc5e8124ba4c5396a3fa7c3d1dd8db(String), 2020-06-17 09:07:20.61(Timestamp) 
2020-06-17 09:07:20.639 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 4 
2020-06-17 09:07:23.056 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 09:07:23.057 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 09:07:23.063 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 09:07:23.068 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 09:07:23.069 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 09:07:23.074 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 09:07:23.079 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 09:07:23.079 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 09:07:23.084 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 13 
2020-06-17 09:07:23.089 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 09:07:23.090 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:07:23.094 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 09:07:23.098 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 09:07:23.099 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:07:23.104 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 09:07:23.109 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 09:07:23.109 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 09:07:23.110 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 09:07:23.110 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 09:07:23.114 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 09:07:23.118 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 09:07:23.119 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 09:07:23.123 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 09:07:23.127 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 09:07:23.127 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:07:23.132 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 09:07:23.137 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 09:07:23.137 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:07:23.150 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 09:07:23.155 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 09:07:23.155 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 09:07:23.155 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 09:07:23.156 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 09:07:23.160 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 09:07:23.164 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 09:07:23.164 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 09:07:23.169 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 09:07:23.173 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 09:07:23.173 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:07:23.177 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 09:07:23.182 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 09:07:23.182 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:07:23.187 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 09:07:23.200 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:药物过敏史未填写药物过敏史为空值 
2020-06-17 09:07:23.204 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:RH超出字典范围RH不在字典范围内（1 阴性 2 阳性 3 不详 ） 
2020-06-17 09:07:23.207 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:个人基本信息表既往史既往史疾病确诊时间小于出生日期 
2020-06-17 09:07:23.210 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-17 09:07:23.210 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 0e82a90122434b1989a6a6fd97ced399(String), 2020-06-17 09:07:23.209(Timestamp), 31011310200312009116(String), 92dc5e8124ba4c5396a3fa7c3d1dd8db(String), 2020-06-17 09:07:23.209(Timestamp), 31011310200312009116(String), ec2b097f882c469a92ccd0dc37088dc6(String), 2020-06-17 09:07:23.209(Timestamp) 
2020-06-17 09:07:23.231 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 3 
2020-06-17 09:07:39.852 [INFO ] com.benetech.rules.RulesApplication                - [logStarting:55] Starting RulesApplication v1.0-SNAPSHOT on DESKTOP-EOCO1V0 with PID 9316 (D:\51\python\project\instance\zyjk\EHR\controlRuleNew\config\healthRecordRules.jar started by ZY in D:\51\python\project\instance\zyjk\EHR\controlRuleNew) 
2020-06-17 09:07:39.855 [DEBUG] com.benetech.rules.RulesApplication                - [logStarting:56] Running with Spring Boot v2.2.1.RELEASE, Spring v5.2.1.RELEASE 
2020-06-17 09:07:39.855 [INFO ] com.benetech.rules.RulesApplication                - [logStartupProfileInfo:655] The following profiles are active: test 
2020-06-17 09:07:41.718 [INFO ] o.s.boot.web.embedded.tomcat.TomcatWebServer       - [initialize:92] Tomcat initialized with port(s): 8838 (http) 
2020-06-17 09:07:41.731 [INFO ] org.apache.coyote.http11.Http11NioProtocol         - [log:173] Initializing ProtocolHandler ["http-nio-8838"] 
2020-06-17 09:07:41.731 [INFO ] org.apache.catalina.core.StandardService           - [log:173] Starting service [Tomcat] 
2020-06-17 09:07:41.732 [INFO ] org.apache.catalina.core.StandardEngine            - [log:173] Starting Servlet engine: [Apache Tomcat/9.0.27] 
2020-06-17 09:07:41.802 [INFO ] o.a.c.c.C.[.[localhost].[/healthRecordRules]       - [log:173] Initializing Spring embedded WebApplicationContext 
2020-06-17 09:07:41.803 [INFO ] org.springframework.web.context.ContextLoader      - [prepareWebApplicationContext:284] Root WebApplicationContext: initialization completed in 1869 ms 
2020-06-17 09:07:41.882 [DEBUG] org.apache.ibatis.logging.LogFactory               - [setImplementation:135] Logging initialized using 'class org.apache.ibatis.logging.slf4j.Slf4jImpl' adapter. 
2020-06-17 09:07:42.156 [WARN ] org.mybatis.spring.SqlSessionFactoryBean           - [buildSqlSessionFactory:467] Can't find class in '[com.benetech.rules.*.entity]' package. Please check your configuration. 
2020-06-17 09:07:42.862 [INFO ] com.alibaba.druid.pool.DruidDataSource             - [init:930] {dataSource-1} inited 
2020-06-17 09:07:43.052 [DEBUG] c.b.r.m.e.mapper.RuleEngineMapper.getAllRules      - [debug:159] ==>  Preparing: select a.RuleId as ruleId, a.RuleSql as clazz from HrRule a join HrRuleProps b on a.RuleId = b.RuleId where -- RuleId in ('34278f71cf1d42c88158aaf637fa5203', '8d30baa03bfc4233a8f115c57a0ebf08', '63eb82a44bf64c96a0b9023fa2a3c9d9') a.RuleSql != '' and a.RuleSql is not null and b.Enable = 1  
2020-06-17 09:07:43.074 [DEBUG] c.b.r.m.e.mapper.RuleEngineMapper.getAllRules      - [debug:159] ==> Parameters:  
2020-06-17 09:07:43.188 [DEBUG] c.b.r.m.e.mapper.RuleEngineMapper.getAllRules      - [debug:159] <==      Total: 310 
2020-06-17 09:07:43.422 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [init:68] 加载规则：310 条 
2020-06-17 09:07:43.449 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.getAllCode    - [debug:159] ==>  Preparing: SELECT codeSysType AS type, code AS code, [value] AS value FROM tb_code_value WHERE code != '' AND [value] != ''  
2020-06-17 09:07:43.451 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.getAllCode    - [debug:159] ==> Parameters:  
2020-06-17 09:07:44.057 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.getAllCode    - [debug:159] <==      Total: 44881 
2020-06-17 09:07:44.093 [INFO ] c.b.r.m.m.service.impl.EhrModelBuildServiceImpl    - [init:96] 初始化字典类型: 467 种 
2020-06-17 09:07:44.094 [INFO ] c.b.r.m.m.service.impl.EhrModelBuildServiceImpl    - [init:97] 初始化字典: 44881 条 
2020-06-17 09:07:44.094 [ERROR] c.b.r.m.process.service.impl.QcProcessServiceImpl  - [init:44] 初始化线程池 
2020-06-17 09:07:44.203 [INFO ] o.s.scheduling.concurrent.ThreadPoolTaskExecutor   - [initialize:171] Initializing ExecutorService 'applicationTaskExecutor' 
2020-06-17 09:07:44.444 [INFO ] org.apache.coyote.http11.Http11NioProtocol         - [log:173] Starting ProtocolHandler ["http-nio-8838"] 
2020-06-17 09:07:44.469 [INFO ] o.s.boot.web.embedded.tomcat.TomcatWebServer       - [start:204] Tomcat started on port(s): 8838 (http) with context path '/healthRecordRules' 
2020-06-17 09:07:44.473 [INFO ] com.benetech.rules.RulesApplication                - [logStarted:61] Started RulesApplication in 5.139 seconds (JVM running for 5.584) 
2020-06-17 09:07:44.478 [INFO ] com.benetech.rules.RulesApplication                - [main:20] -------------启动成功------------- 
2020-06-17 09:07:44.652 [INFO ] o.a.c.c.C.[.[localhost].[/healthRecordRules]       - [log:173] Initializing Spring DispatcherServlet 'dispatcherServlet' 
2020-06-17 09:07:44.653 [INFO ] org.springframework.web.servlet.DispatcherServlet  - [initServletBean:525] Initializing Servlet 'dispatcherServlet' 
2020-06-17 09:07:44.660 [INFO ] org.springframework.web.servlet.DispatcherServlet  - [initServletBean:547] Completed initialization in 7 ms 
2020-06-17 09:07:44.699 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 09:07:44.704 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 09:07:44.723 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 09:07:44.735 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 09:07:44.735 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 09:07:44.752 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 09:07:44.771 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 09:07:44.771 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 09:07:44.791 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 13 
2020-06-17 09:07:44.802 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 09:07:44.803 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:07:44.819 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 09:07:44.848 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 09:07:44.849 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:07:44.863 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 09:07:44.873 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 09:07:44.873 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 09:07:44.874 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 09:07:44.875 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 09:07:44.906 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 09:07:44.923 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 09:07:44.923 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 09:07:44.942 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 09:07:44.959 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 09:07:44.959 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:07:44.974 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 09:07:44.985 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 09:07:44.986 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:07:45.004 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 09:07:45.010 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 09:07:45.010 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 09:07:45.011 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 09:07:45.011 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 09:07:45.016 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 09:07:45.020 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 09:07:45.021 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 09:07:45.025 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 09:07:45.030 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 09:07:45.030 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:07:45.037 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 09:07:45.043 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 09:07:45.044 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:07:45.049 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 09:07:45.137 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:药物过敏史未填写药物过敏史为空值 
2020-06-17 09:07:45.195 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:RH超出字典范围RH不在字典范围内（1 阴性 2 阳性 3 不详 ） 
2020-06-17 09:07:45.206 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:个人基本信息表既往史既往史疾病确诊时间小于出生日期 
2020-06-17 09:07:45.231 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-17 09:07:45.233 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 0e82a90122434b1989a6a6fd97ced399(String), 2020-06-17 09:07:45.208(Timestamp), 31011310200312009116(String), 92dc5e8124ba4c5396a3fa7c3d1dd8db(String), 2020-06-17 09:07:45.208(Timestamp), 31011310200312009116(String), ec2b097f882c469a92ccd0dc37088dc6(String), 2020-06-17 09:07:45.208(Timestamp) 
2020-06-17 09:07:45.254 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 3 
2020-06-17 09:07:48.684 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 09:07:48.686 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 09:07:48.698 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 09:07:48.704 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 09:07:48.705 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 09:07:48.712 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 09:07:48.717 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 09:07:48.717 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 09:07:48.724 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 15 
2020-06-17 09:07:48.728 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 09:07:48.729 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:07:48.733 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 09:07:48.740 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 09:07:48.740 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:07:48.746 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 09:07:48.750 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 09:07:48.751 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 09:07:48.751 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 09:07:48.752 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 09:07:48.756 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 09:07:48.761 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 09:07:48.761 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 09:07:48.766 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 09:07:48.771 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 09:07:48.771 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:07:48.776 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 09:07:48.780 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 09:07:48.781 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:07:48.794 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 09:07:48.798 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 09:07:48.798 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 09:07:48.799 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 09:07:48.799 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 09:07:48.803 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 09:07:48.808 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 09:07:48.809 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 09:07:48.813 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 09:07:48.818 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 09:07:48.818 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:07:48.823 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 09:07:48.827 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 09:07:48.828 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:07:48.833 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 09:07:48.895 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:个人基本信息表药物过敏史药物过敏史填写内容冲突 
2020-06-17 09:07:48.910 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:RH超出字典范围RH不在字典范围内（1 阴性 2 阳性 3 不详 ） 
2020-06-17 09:07:48.917 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:个人基本信息表既往史既往史疾病确诊时间小于出生日期 
2020-06-17 09:07:48.919 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-17 09:07:48.921 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 215a4080eedc48189a956184f531da35(String), 2020-06-17 09:07:48.918(Timestamp), 31011310200312009116(String), 92dc5e8124ba4c5396a3fa7c3d1dd8db(String), 2020-06-17 09:07:48.918(Timestamp), 31011310200312009116(String), ec2b097f882c469a92ccd0dc37088dc6(String), 2020-06-17 09:07:48.918(Timestamp) 
2020-06-17 09:07:48.944 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 3 
2020-06-17 09:07:54.011 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 09:07:54.011 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 09:07:54.017 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 09:07:54.022 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 09:07:54.023 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 09:07:54.029 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 09:07:54.034 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 09:07:54.035 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 09:07:54.040 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 12 
2020-06-17 09:07:54.044 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 09:07:54.045 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:07:54.049 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 09:07:54.054 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 09:07:54.055 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:07:54.061 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 09:07:54.064 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 09:07:54.065 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 09:07:54.065 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 09:07:54.066 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 09:07:54.069 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 09:07:54.076 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 09:07:54.077 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 09:07:54.082 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 09:07:54.086 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 09:07:54.087 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:07:54.091 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 09:07:54.095 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 09:07:54.096 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:07:54.109 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 09:07:54.114 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 09:07:54.115 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 09:07:54.115 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 09:07:54.116 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 09:07:54.120 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 09:07:54.125 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 09:07:54.125 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 09:07:54.130 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 09:07:54.135 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 09:07:54.135 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:07:54.141 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 09:07:54.146 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 09:07:54.147 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:07:54.152 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 09:07:54.169 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:药物过敏史未填写药物过敏史为空值 
2020-06-17 09:07:54.177 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:RH超出字典范围RH不在字典范围内（1 阴性 2 阳性 3 不详 ） 
2020-06-17 09:07:54.180 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:个人基本信息表既往史既往史疾病确诊时间小于出生日期 
2020-06-17 09:07:54.181 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:个人基本信息表暴露史暴露史未填写 
2020-06-17 09:07:54.184 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-17 09:07:54.185 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 0e82a90122434b1989a6a6fd97ced399(String), 2020-06-17 09:07:54.184(Timestamp), 31011310200312009116(String), 92dc5e8124ba4c5396a3fa7c3d1dd8db(String), 2020-06-17 09:07:54.184(Timestamp), 31011310200312009116(String), ec2b097f882c469a92ccd0dc37088dc6(String), 2020-06-17 09:07:54.184(Timestamp), 31011310200312009116(String), fa6c0d8204684279a021f89e0d49e460(String), 2020-06-17 09:07:54.184(Timestamp) 
2020-06-17 09:07:54.205 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 4 
2020-06-17 09:07:59.839 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 09:07:59.841 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 09:07:59.848 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 09:07:59.863 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 09:07:59.864 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 09:07:59.876 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 09:07:59.882 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 09:07:59.884 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 09:07:59.890 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 12 
2020-06-17 09:07:59.897 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 09:07:59.898 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:07:59.904 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 09:07:59.911 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 09:07:59.913 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:07:59.920 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 09:07:59.925 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 09:07:59.926 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 09:07:59.927 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 09:07:59.928 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 09:07:59.933 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 09:07:59.937 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 09:07:59.939 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 09:07:59.943 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 09:07:59.949 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 09:07:59.950 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:07:59.957 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 09:07:59.961 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 09:07:59.962 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:07:59.976 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 09:07:59.983 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 09:07:59.983 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 09:07:59.983 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 09:07:59.984 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 09:07:59.989 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 09:07:59.995 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 09:07:59.996 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 09:08:00.000 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 09:08:00.006 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 09:08:00.007 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:08:00.012 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 09:08:00.018 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 09:08:00.018 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:08:00.023 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 09:08:00.042 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:药物过敏史未填写药物过敏史为空值 
2020-06-17 09:08:00.044 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:个人基本信息表既往史既往史疾病未填写 
2020-06-17 09:08:00.049 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:个人基本信息表既往史既往史疾病确诊时间填写不规范 
2020-06-17 09:08:00.049 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:RH超出字典范围RH不在字典范围内（1 阴性 2 阳性 3 不详 ） 
2020-06-17 09:08:00.055 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-17 09:08:00.057 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 0e82a90122434b1989a6a6fd97ced399(String), 2020-06-17 09:08:00.054(Timestamp), 31011310200312009116(String), 1c6d4ebc12b549398a8a42ff110c4bba(String), 2020-06-17 09:08:00.054(Timestamp), 31011310200312009116(String), 923bfb7880204efa8f26fd200d1bd17e(String), 2020-06-17 09:08:00.054(Timestamp), 31011310200312009116(String), 92dc5e8124ba4c5396a3fa7c3d1dd8db(String), 2020-06-17 09:08:00.054(Timestamp) 
2020-06-17 09:08:00.076 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 4 
2020-06-17 09:08:04.192 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 09:08:04.193 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 09:08:04.239 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 09:08:04.273 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 09:08:04.274 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 09:08:04.316 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 09:08:04.357 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 09:08:04.357 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 09:08:04.385 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 13 
2020-06-17 09:08:04.400 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 09:08:04.400 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:08:04.421 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 09:08:04.444 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 09:08:04.444 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:08:04.474 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 09:08:04.512 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 09:08:04.512 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 09:08:04.512 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 09:08:04.513 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 09:08:04.540 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 09:08:04.565 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 09:08:04.566 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 09:08:04.591 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 09:08:04.615 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 09:08:04.615 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:08:04.641 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 09:08:04.672 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 09:08:04.673 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:08:04.704 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 09:08:04.720 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 09:08:04.720 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 09:08:04.721 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 09:08:04.721 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 09:08:04.741 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 09:08:04.756 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 09:08:04.757 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 09:08:04.772 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 09:08:04.786 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 09:08:04.787 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:08:04.799 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 09:08:04.810 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 09:08:04.810 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:08:04.818 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 09:08:04.838 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:药物过敏史未填写药物过敏史为空值 
2020-06-17 09:08:04.841 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:个人基本信息表既往史疾病名称未填写（恶性肿瘤） 
2020-06-17 09:08:04.842 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:个人基本信息表既往史既往史疾病确诊时间未填写 
2020-06-17 09:08:04.863 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:个人基本信息表既往史既往史疾病确诊时间填写不规范 
2020-06-17 09:08:04.864 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:RH超出字典范围RH不在字典范围内（1 阴性 2 阳性 3 不详 ） 
2020-06-17 09:08:04.896 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-17 09:08:04.898 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 0e82a90122434b1989a6a6fd97ced399(String), 2020-06-17 09:08:04.89(Timestamp), 31011310200312009116(String), 5ffdb7838d8e430596d05929dbd8551e(String), 2020-06-17 09:08:04.89(Timestamp), 31011310200312009116(String), 6302b0fcdcd7482099581602a1fec501(String), 2020-06-17 09:08:04.89(Timestamp), 31011310200312009116(String), 923bfb7880204efa8f26fd200d1bd17e(String), 2020-06-17 09:08:04.89(Timestamp), 31011310200312009116(String), 92dc5e8124ba4c5396a3fa7c3d1dd8db(String), 2020-06-17 09:08:04.89(Timestamp) 
2020-06-17 09:08:04.918 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 5 
2020-06-17 09:08:08.851 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 09:08:08.852 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 09:08:08.858 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 09:08:08.880 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 09:08:08.881 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 09:08:08.916 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 09:08:08.938 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 09:08:08.939 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 09:08:08.955 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 13 
2020-06-17 09:08:08.970 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 09:08:08.971 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:08:09.001 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 09:08:09.056 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 09:08:09.056 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:08:09.069 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 09:08:09.077 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 09:08:09.077 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 09:08:09.078 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 09:08:09.079 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 09:08:09.088 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 09:08:09.094 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 09:08:09.095 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 09:08:09.102 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 09:08:09.107 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 09:08:09.108 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:08:09.112 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 09:08:09.117 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 09:08:09.118 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:08:09.132 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 09:08:09.138 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 09:08:09.138 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 09:08:09.139 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 09:08:09.139 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 09:08:09.160 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 09:08:09.177 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 09:08:09.178 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 09:08:09.182 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 09:08:09.188 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 09:08:09.189 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:08:09.195 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 09:08:09.246 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 09:08:09.247 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:08:09.261 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 09:08:09.290 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:药物过敏史未填写药物过敏史为空值 
2020-06-17 09:08:09.295 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:个人基本信息表既往史既往史疾病确诊时间未填写 
2020-06-17 09:08:09.298 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:个人基本信息表既往史疾病名称未填写（职业病） 
2020-06-17 09:08:09.300 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:个人基本信息表既往史既往史疾病确诊时间填写不规范 
2020-06-17 09:08:09.301 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:RH超出字典范围RH不在字典范围内（1 阴性 2 阳性 3 不详 ） 
2020-06-17 09:08:09.311 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-17 09:08:09.313 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 0e82a90122434b1989a6a6fd97ced399(String), 2020-06-17 09:08:09.31(Timestamp), 31011310200312009116(String), 6302b0fcdcd7482099581602a1fec501(String), 2020-06-17 09:08:09.31(Timestamp), 31011310200312009116(String), 80949448119a47a4a539508ad34af579(String), 2020-06-17 09:08:09.31(Timestamp), 31011310200312009116(String), 923bfb7880204efa8f26fd200d1bd17e(String), 2020-06-17 09:08:09.31(Timestamp), 31011310200312009116(String), 92dc5e8124ba4c5396a3fa7c3d1dd8db(String), 2020-06-17 09:08:09.31(Timestamp) 
2020-06-17 09:08:09.341 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 5 
2020-06-17 09:08:13.036 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 09:08:13.037 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 09:08:13.054 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 09:08:13.060 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 09:08:13.061 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 09:08:13.067 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 09:08:13.076 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 09:08:13.077 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 09:08:13.083 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 13 
2020-06-17 09:08:13.090 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 09:08:13.091 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:08:13.096 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 09:08:13.101 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 09:08:13.101 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:08:13.109 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 09:08:13.115 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 09:08:13.116 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 09:08:13.116 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 09:08:13.117 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 09:08:13.122 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 09:08:13.128 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 09:08:13.129 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 09:08:13.133 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 09:08:13.138 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 09:08:13.139 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:08:13.144 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 09:08:13.148 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 09:08:13.149 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:08:13.164 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 09:08:13.169 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 09:08:13.169 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 09:08:13.171 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 09:08:13.171 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 09:08:13.176 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 09:08:13.181 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 09:08:13.182 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 09:08:13.187 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 09:08:13.193 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 09:08:13.194 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:08:13.199 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 09:08:13.205 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 09:08:13.206 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:08:13.211 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 09:08:13.226 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:药物过敏史未填写药物过敏史为空值 
2020-06-17 09:08:13.234 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:个人基本信息表既往史既往史疾病确诊时间未填写 
2020-06-17 09:08:13.240 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:个人基本信息表既往史既往史疾病确诊时间填写不规范 
2020-06-17 09:08:13.240 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:RH超出字典范围RH不在字典范围内（1 阴性 2 阳性 3 不详 ） 
2020-06-17 09:08:13.244 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:个人基本信息表既往史疾病名称未填写（其他） 
2020-06-17 09:08:13.248 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-17 09:08:13.249 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 0e82a90122434b1989a6a6fd97ced399(String), 2020-06-17 09:08:13.246(Timestamp), 31011310200312009116(String), 6302b0fcdcd7482099581602a1fec501(String), 2020-06-17 09:08:13.246(Timestamp), 31011310200312009116(String), 923bfb7880204efa8f26fd200d1bd17e(String), 2020-06-17 09:08:13.246(Timestamp), 31011310200312009116(String), 92dc5e8124ba4c5396a3fa7c3d1dd8db(String), 2020-06-17 09:08:13.246(Timestamp), 31011310200312009116(String), cecf4941a48048c0ad396cfa4c04c616(String), 2020-06-17 09:08:13.246(Timestamp) 
2020-06-17 09:08:13.266 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 5 
2020-06-17 09:08:16.894 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 09:08:16.894 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 09:08:16.906 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 09:08:16.911 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 09:08:16.911 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 09:08:16.916 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 09:08:16.921 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 09:08:16.922 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 09:08:16.927 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 13 
2020-06-17 09:08:16.931 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 09:08:16.931 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:08:16.936 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 09:08:16.941 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 09:08:16.941 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:08:16.948 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 09:08:16.953 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 09:08:16.953 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 09:08:16.953 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 09:08:16.954 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 09:08:16.959 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 09:08:16.963 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 09:08:16.964 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 09:08:16.968 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 09:08:16.972 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 09:08:16.973 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:08:16.978 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 09:08:16.982 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 09:08:16.983 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:08:16.996 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 09:08:17.000 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 09:08:17.001 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 09:08:17.001 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 09:08:17.001 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 09:08:17.005 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 09:08:17.009 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 09:08:17.010 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 09:08:17.014 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 09:08:17.019 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 09:08:17.020 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:08:17.025 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 09:08:17.031 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 09:08:17.032 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:08:17.036 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 09:08:17.049 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:药物过敏史未填写药物过敏史为空值 
2020-06-17 09:08:17.052 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:个人基本信息表既往史既往史疾病确诊时间未填写 
2020-06-17 09:08:17.054 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:个人基本信息表既往史既往史疾病确诊时间填写不规范 
2020-06-17 09:08:17.054 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:RH超出字典范围RH不在字典范围内（1 阴性 2 阳性 3 不详 ） 
2020-06-17 09:08:17.060 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-17 09:08:17.060 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 0e82a90122434b1989a6a6fd97ced399(String), 2020-06-17 09:08:17.059(Timestamp), 31011310200312009116(String), 6302b0fcdcd7482099581602a1fec501(String), 2020-06-17 09:08:17.059(Timestamp), 31011310200312009116(String), 923bfb7880204efa8f26fd200d1bd17e(String), 2020-06-17 09:08:17.059(Timestamp), 31011310200312009116(String), 92dc5e8124ba4c5396a3fa7c3d1dd8db(String), 2020-06-17 09:08:17.059(Timestamp) 
2020-06-17 09:08:17.081 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 4 
2020-06-17 09:08:21.127 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 09:08:21.128 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 09:08:21.135 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 09:08:21.140 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 09:08:21.141 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 09:08:21.148 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 09:08:21.155 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 09:08:21.156 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 09:08:21.164 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 13 
2020-06-17 09:08:21.169 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 09:08:21.170 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:08:21.175 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 09:08:21.180 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 09:08:21.180 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:08:21.189 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 09:08:21.195 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 09:08:21.195 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 09:08:21.196 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 09:08:21.196 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 09:08:21.201 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 09:08:21.208 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 09:08:21.208 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 09:08:21.212 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 09:08:21.215 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 09:08:21.216 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:08:21.220 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 09:08:21.224 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 09:08:21.225 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:08:21.239 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 09:08:21.244 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 09:08:21.244 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 09:08:21.244 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 09:08:21.244 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 09:08:21.253 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 09:08:21.257 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 09:08:21.258 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 09:08:21.268 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 09:08:21.273 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 09:08:21.273 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:08:21.278 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 09:08:21.283 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 09:08:21.283 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:08:21.291 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 09:08:21.303 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:药物过敏史未填写药物过敏史为空值 
2020-06-17 09:08:21.308 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:RH超出字典范围RH不在字典范围内（1 阴性 2 阳性 3 不详 ） 
2020-06-17 09:08:21.310 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:个人基本信息表既往史既往史疾病确诊时间小于出生日期 
2020-06-17 09:08:21.312 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-17 09:08:21.313 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 0e82a90122434b1989a6a6fd97ced399(String), 2020-06-17 09:08:21.311(Timestamp), 31011310200312009116(String), 92dc5e8124ba4c5396a3fa7c3d1dd8db(String), 2020-06-17 09:08:21.311(Timestamp), 31011310200312009116(String), ec2b097f882c469a92ccd0dc37088dc6(String), 2020-06-17 09:08:21.311(Timestamp) 
2020-06-17 09:08:21.323 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 3 
2020-06-17 09:10:33.361 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 09:10:33.362 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 09:10:33.369 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 09:10:33.375 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 09:10:33.377 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 09:10:33.383 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 09:10:33.389 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 09:10:33.390 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 09:10:33.398 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 12 
2020-06-17 09:10:33.404 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 09:10:33.405 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:10:33.411 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 09:10:33.418 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 09:10:33.419 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:10:33.433 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 09:10:33.441 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 09:10:33.441 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 09:10:33.442 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 09:10:33.443 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 09:10:33.449 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 09:10:33.454 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 09:10:33.455 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 09:10:33.468 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 09:10:33.475 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 09:10:33.476 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:10:33.481 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 09:10:33.486 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 09:10:33.487 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:10:33.503 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 09:10:33.510 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 09:10:33.511 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 09:10:33.512 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 09:10:33.513 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 09:10:33.519 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 09:10:33.525 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 09:10:33.527 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 09:10:33.531 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 09:10:33.537 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 09:10:33.537 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:10:33.542 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 09:10:33.547 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 09:10:33.549 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:10:33.554 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 09:10:33.567 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:药物过敏史未填写药物过敏史为空值 
2020-06-17 09:10:33.571 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:既往史手术未填写既往史手术为空值 
2020-06-17 09:10:33.572 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:RH超出字典范围RH不在字典范围内（1 阴性 2 阳性 3 不详 ） 
2020-06-17 09:10:33.576 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-17 09:10:33.576 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 0e82a90122434b1989a6a6fd97ced399(String), 2020-06-17 09:10:33.575(Timestamp), 31011310200312009116(String), 80119ac5c3f9438390adc99341babd75(String), 2020-06-17 09:10:33.575(Timestamp), 31011310200312009116(String), 92dc5e8124ba4c5396a3fa7c3d1dd8db(String), 2020-06-17 09:10:33.575(Timestamp) 
2020-06-17 09:10:33.604 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 3 
2020-06-17 09:10:37.444 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 09:10:37.444 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 09:10:37.458 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 09:10:37.462 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 09:10:37.462 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 09:10:37.467 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 09:10:37.472 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 09:10:37.472 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 09:10:37.477 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 13 
2020-06-17 09:10:37.481 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 09:10:37.481 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:10:37.486 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 09:10:37.490 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 09:10:37.490 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:10:37.495 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 09:10:37.499 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 09:10:37.499 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 09:10:37.500 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 09:10:37.500 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 09:10:37.504 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 09:10:37.508 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 09:10:37.509 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 09:10:37.513 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 09:10:37.517 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 09:10:37.517 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:10:37.521 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 09:10:37.525 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 09:10:37.525 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:10:37.538 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 09:10:37.542 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 09:10:37.542 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 09:10:37.542 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 09:10:37.543 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 09:10:37.547 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 09:10:37.552 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 09:10:37.553 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 09:10:37.557 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 09:10:37.561 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 09:10:37.561 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:10:37.565 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 09:10:37.569 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 09:10:37.569 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:10:37.573 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 09:10:37.586 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:药物过敏史未填写药物过敏史为空值 
2020-06-17 09:10:37.587 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:既往史手术名称未填写同时满足以下条件： 1、既往史手术选“有” 2、既往史手术名称为空值 
2020-06-17 09:10:37.590 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:RH超出字典范围RH不在字典范围内（1 阴性 2 阳性 3 不详 ） 
2020-06-17 09:10:37.594 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-17 09:10:37.594 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 0e82a90122434b1989a6a6fd97ced399(String), 2020-06-17 09:10:37.593(Timestamp), 31011310200312009116(String), 4bc34fc151244d1782a933cb2e20e7b1(String), 2020-06-17 09:10:37.593(Timestamp), 31011310200312009116(String), 92dc5e8124ba4c5396a3fa7c3d1dd8db(String), 2020-06-17 09:10:37.593(Timestamp) 
2020-06-17 09:10:37.621 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 3 
2020-06-17 09:10:58.071 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 09:10:58.072 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 09:10:58.077 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 09:10:58.082 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 09:10:58.082 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 09:10:58.087 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 09:10:58.091 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 09:10:58.091 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 09:10:58.098 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 12 
2020-06-17 09:10:58.102 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 09:10:58.103 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:10:58.107 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 09:10:58.121 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 09:10:58.121 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:10:58.128 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 09:10:58.132 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 09:10:58.132 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 09:10:58.132 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 09:10:58.133 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 09:10:58.138 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 09:10:58.142 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 09:10:58.142 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 09:10:58.147 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 09:10:58.151 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 09:10:58.151 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:10:58.157 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 09:10:58.161 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 09:10:58.161 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:10:58.175 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 09:10:58.179 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 09:10:58.179 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 09:10:58.180 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 09:10:58.180 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 09:10:58.185 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 09:10:58.190 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 09:10:58.190 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 09:10:58.195 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 09:10:58.199 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 09:10:58.199 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:10:58.203 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 09:10:58.207 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 09:10:58.208 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:10:58.212 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 09:10:58.223 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:药物过敏史未填写药物过敏史为空值 
2020-06-17 09:10:58.227 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:RH超出字典范围RH不在字典范围内（1 阴性 2 阳性 3 不详 ） 
2020-06-17 09:10:58.227 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:既往史手术时间未填写同时满足以下条件： 1、既往史手术选“有” 2、既往史手术填写了手术名称 3、手术时间为空值 
2020-06-17 09:10:58.230 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:既往史输血未填写既往史输血为空值 
2020-06-17 09:10:58.232 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-17 09:10:58.233 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 0e82a90122434b1989a6a6fd97ced399(String), 2020-06-17 09:10:58.232(Timestamp), 31011310200312009116(String), 92dc5e8124ba4c5396a3fa7c3d1dd8db(String), 2020-06-17 09:10:58.232(Timestamp), 31011310200312009116(String), 9dd8f43bbd5f4c6bb27aeca1774bc345(String), 2020-06-17 09:10:58.232(Timestamp), 31011310200312009116(String), daa41bd0401e41fcb3523f1abb6e08d1(String), 2020-06-17 09:10:58.232(Timestamp) 
2020-06-17 09:10:58.253 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 4 
2020-06-17 09:11:03.231 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 09:11:03.232 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 09:11:03.242 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 09:11:03.247 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 09:11:03.248 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 09:11:03.260 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 09:11:03.265 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 09:11:03.265 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 09:11:03.271 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 12 
2020-06-17 09:11:03.278 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 09:11:03.279 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:11:03.284 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 09:11:03.289 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 09:11:03.290 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:11:03.295 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 09:11:03.302 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 09:11:03.302 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 09:11:03.303 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 09:11:03.304 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 09:11:03.310 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 09:11:03.315 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 09:11:03.316 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 09:11:03.322 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 09:11:03.328 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 09:11:03.329 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:11:03.335 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 09:11:03.341 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 09:11:03.342 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:11:03.357 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 09:11:03.363 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 09:11:03.364 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 09:11:03.365 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 09:11:03.366 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 09:11:03.371 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 09:11:03.376 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 09:11:03.377 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 09:11:03.382 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 09:11:03.387 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 09:11:03.388 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:11:03.393 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 09:11:03.399 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 09:11:03.400 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:11:03.405 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 09:11:03.432 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:药物过敏史未填写药物过敏史为空值 
2020-06-17 09:11:03.439 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:家族史（父亲）未填写家族史父亲为空值 
2020-06-17 09:11:03.440 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:既往史输血时间未填写同时满足以下条件： 1、既往史输血选“有” 2、既往史输血填写了输血原因 3、输血时间为空值 
2020-06-17 09:11:03.440 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:RH超出字典范围RH不在字典范围内（1 阴性 2 阳性 3 不详 ） 
2020-06-17 09:11:03.441 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:既往史手术时间未填写同时满足以下条件： 1、既往史手术选“有” 2、既往史手术填写了手术名称 3、手术时间为空值 
2020-06-17 09:11:03.446 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-17 09:11:03.448 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 0e82a90122434b1989a6a6fd97ced399(String), 2020-06-17 09:11:03.446(Timestamp), 31011310200312009116(String), 84550b227fcd42be9a28d596d2095866(String), 2020-06-17 09:11:03.446(Timestamp), 31011310200312009116(String), 8987ac9747cd44aa9e6570e08c8dd822(String), 2020-06-17 09:11:03.446(Timestamp), 31011310200312009116(String), 92dc5e8124ba4c5396a3fa7c3d1dd8db(String), 2020-06-17 09:11:03.446(Timestamp), 31011310200312009116(String), 9dd8f43bbd5f4c6bb27aeca1774bc345(String), 2020-06-17 09:11:03.446(Timestamp) 
2020-06-17 09:11:03.468 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 5 
2020-06-17 09:11:08.089 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 09:11:08.090 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 09:11:08.096 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 09:11:08.099 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 09:11:08.100 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 09:11:08.104 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 09:11:08.109 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 09:11:08.109 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 09:11:08.114 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 12 
2020-06-17 09:11:08.119 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 09:11:08.120 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:11:08.132 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 09:11:08.136 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 09:11:08.137 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:11:08.142 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 09:11:08.147 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 09:11:08.147 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 09:11:08.147 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 09:11:08.148 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 09:11:08.153 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 09:11:08.158 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 09:11:08.158 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 09:11:08.162 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 09:11:08.167 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 09:11:08.167 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:11:08.172 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 09:11:08.177 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 09:11:08.178 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:11:08.193 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 09:11:08.197 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 09:11:08.197 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 09:11:08.198 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 09:11:08.198 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 09:11:08.203 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 09:11:08.207 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 09:11:08.208 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 09:11:08.212 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 09:11:08.216 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 09:11:08.217 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:11:08.222 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 09:11:08.226 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 09:11:08.227 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:11:08.232 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 09:11:08.246 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:药物过敏史未填写药物过敏史为空值 
2020-06-17 09:11:08.252 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:既往史输血时间未填写同时满足以下条件： 1、既往史输血选“有” 2、既往史输血填写了输血原因 3、输血时间为空值 
2020-06-17 09:11:08.252 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:RH超出字典范围RH不在字典范围内（1 阴性 2 阳性 3 不详 ） 
2020-06-17 09:11:08.253 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:既往史手术时间未填写同时满足以下条件： 1、既往史手术选“有” 2、既往史手术填写了手术名称 3、手术时间为空值 
2020-06-17 09:11:08.254 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:家族史（母亲）未填写家族史母亲为空值 
2020-06-17 09:11:08.258 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-17 09:11:08.259 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 0e82a90122434b1989a6a6fd97ced399(String), 2020-06-17 09:11:08.257(Timestamp), 31011310200312009116(String), 8987ac9747cd44aa9e6570e08c8dd822(String), 2020-06-17 09:11:08.257(Timestamp), 31011310200312009116(String), 92dc5e8124ba4c5396a3fa7c3d1dd8db(String), 2020-06-17 09:11:08.257(Timestamp), 31011310200312009116(String), 9dd8f43bbd5f4c6bb27aeca1774bc345(String), 2020-06-17 09:11:08.257(Timestamp), 31011310200312009116(String), a8d3c4a4780b451d9c8c8ce38a168e34(String), 2020-06-17 09:11:08.257(Timestamp) 
2020-06-17 09:11:08.322 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 5 
2020-06-17 09:12:41.829 [INFO ] com.benetech.rules.RulesApplication                - [logStarting:55] Starting RulesApplication v1.0-SNAPSHOT on DESKTOP-EOCO1V0 with PID 9304 (D:\51\python\project\instance\zyjk\EHR\controlRuleNew\config\healthRecordRules.jar started by ZY in D:\51\python\project\instance\zyjk\EHR\controlRuleNew) 
2020-06-17 09:12:41.832 [DEBUG] com.benetech.rules.RulesApplication                - [logStarting:56] Running with Spring Boot v2.2.1.RELEASE, Spring v5.2.1.RELEASE 
2020-06-17 09:12:41.832 [INFO ] com.benetech.rules.RulesApplication                - [logStartupProfileInfo:655] The following profiles are active: test 
2020-06-17 09:12:43.290 [INFO ] o.s.boot.web.embedded.tomcat.TomcatWebServer       - [initialize:92] Tomcat initialized with port(s): 8838 (http) 
2020-06-17 09:12:43.302 [INFO ] org.apache.coyote.http11.Http11NioProtocol         - [log:173] Initializing ProtocolHandler ["http-nio-8838"] 
2020-06-17 09:12:43.303 [INFO ] org.apache.catalina.core.StandardService           - [log:173] Starting service [Tomcat] 
2020-06-17 09:12:43.303 [INFO ] org.apache.catalina.core.StandardEngine            - [log:173] Starting Servlet engine: [Apache Tomcat/9.0.27] 
2020-06-17 09:12:43.369 [INFO ] o.a.c.c.C.[.[localhost].[/healthRecordRules]       - [log:173] Initializing Spring embedded WebApplicationContext 
2020-06-17 09:12:43.369 [INFO ] org.springframework.web.context.ContextLoader      - [prepareWebApplicationContext:284] Root WebApplicationContext: initialization completed in 1431 ms 
2020-06-17 09:12:43.445 [DEBUG] org.apache.ibatis.logging.LogFactory               - [setImplementation:135] Logging initialized using 'class org.apache.ibatis.logging.slf4j.Slf4jImpl' adapter. 
2020-06-17 09:12:43.693 [WARN ] org.mybatis.spring.SqlSessionFactoryBean           - [buildSqlSessionFactory:467] Can't find class in '[com.benetech.rules.*.entity]' package. Please check your configuration. 
2020-06-17 09:12:44.294 [INFO ] com.alibaba.druid.pool.DruidDataSource             - [init:930] {dataSource-1} inited 
2020-06-17 09:12:44.493 [DEBUG] c.b.r.m.e.mapper.RuleEngineMapper.getAllRules      - [debug:159] ==>  Preparing: select a.RuleId as ruleId, a.RuleSql as clazz from HrRule a join HrRuleProps b on a.RuleId = b.RuleId where -- RuleId in ('34278f71cf1d42c88158aaf637fa5203', '8d30baa03bfc4233a8f115c57a0ebf08', '63eb82a44bf64c96a0b9023fa2a3c9d9') a.RuleSql != '' and a.RuleSql is not null and b.Enable = 1  
2020-06-17 09:12:44.515 [DEBUG] c.b.r.m.e.mapper.RuleEngineMapper.getAllRules      - [debug:159] ==> Parameters:  
2020-06-17 09:12:44.600 [DEBUG] c.b.r.m.e.mapper.RuleEngineMapper.getAllRules      - [debug:159] <==      Total: 310 
2020-06-17 09:12:44.832 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [init:68] 加载规则：310 条 
2020-06-17 09:12:44.850 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.getAllCode    - [debug:159] ==>  Preparing: SELECT codeSysType AS type, code AS code, [value] AS value FROM tb_code_value WHERE code != '' AND [value] != ''  
2020-06-17 09:12:44.850 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.getAllCode    - [debug:159] ==> Parameters:  
2020-06-17 09:12:45.313 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.getAllCode    - [debug:159] <==      Total: 44881 
2020-06-17 09:12:45.341 [INFO ] c.b.r.m.m.service.impl.EhrModelBuildServiceImpl    - [init:96] 初始化字典类型: 467 种 
2020-06-17 09:12:45.341 [INFO ] c.b.r.m.m.service.impl.EhrModelBuildServiceImpl    - [init:97] 初始化字典: 44881 条 
2020-06-17 09:12:45.342 [ERROR] c.b.r.m.process.service.impl.QcProcessServiceImpl  - [init:44] 初始化线程池 
2020-06-17 09:12:45.469 [INFO ] o.s.scheduling.concurrent.ThreadPoolTaskExecutor   - [initialize:171] Initializing ExecutorService 'applicationTaskExecutor' 
2020-06-17 09:12:45.719 [INFO ] org.apache.coyote.http11.Http11NioProtocol         - [log:173] Starting ProtocolHandler ["http-nio-8838"] 
2020-06-17 09:12:45.745 [INFO ] o.s.boot.web.embedded.tomcat.TomcatWebServer       - [start:204] Tomcat started on port(s): 8838 (http) with context path '/healthRecordRules' 
2020-06-17 09:12:45.748 [INFO ] com.benetech.rules.RulesApplication                - [logStarted:61] Started RulesApplication in 4.475 seconds (JVM running for 4.913) 
2020-06-17 09:12:45.749 [INFO ] com.benetech.rules.RulesApplication                - [main:20] -------------启动成功------------- 
2020-06-17 09:12:46.203 [INFO ] o.a.c.c.C.[.[localhost].[/healthRecordRules]       - [log:173] Initializing Spring DispatcherServlet 'dispatcherServlet' 
2020-06-17 09:12:46.204 [INFO ] org.springframework.web.servlet.DispatcherServlet  - [initServletBean:525] Initializing Servlet 'dispatcherServlet' 
2020-06-17 09:12:46.212 [INFO ] org.springframework.web.servlet.DispatcherServlet  - [initServletBean:547] Completed initialization in 8 ms 
2020-06-17 09:12:46.259 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 09:12:46.266 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 09:12:46.274 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 09:12:46.279 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 09:12:46.280 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 09:12:46.289 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 09:12:46.294 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 09:12:46.295 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 09:12:46.300 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 12 
2020-06-17 09:12:46.306 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 09:12:46.306 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:12:46.310 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 09:12:46.315 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 09:12:46.315 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:12:46.323 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 09:12:46.328 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 09:12:46.329 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 09:12:46.330 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 09:12:46.330 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 09:12:46.335 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 09:12:46.340 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 09:12:46.341 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 09:12:46.346 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 09:12:46.351 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 09:12:46.352 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:12:46.356 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 09:12:46.361 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 09:12:46.362 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:12:46.377 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 09:12:46.381 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 09:12:46.382 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 09:12:46.382 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 09:12:46.383 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 09:12:46.388 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 09:12:46.394 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 09:12:46.395 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 09:12:46.399 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 09:12:46.404 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 09:12:46.405 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:12:46.410 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 09:12:46.414 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 09:12:46.415 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:12:46.420 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 09:12:46.530 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:药物过敏史未填写药物过敏史为空值 
2020-06-17 09:12:46.596 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:既往史输血时间未填写同时满足以下条件： 1、既往史输血选“有” 2、既往史输血填写了输血原因 3、输血时间为空值 
2020-06-17 09:12:46.599 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:RH超出字典范围RH不在字典范围内（1 阴性 2 阳性 3 不详 ） 
2020-06-17 09:12:46.604 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:既往史手术时间未填写同时满足以下条件： 1、既往史手术选“有” 2、既往史手术填写了手术名称 3、手术时间为空值 
2020-06-17 09:12:46.606 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:家族史（母亲）未填写家族史母亲为空值 
2020-06-17 09:12:46.673 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-17 09:12:46.675 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 0e82a90122434b1989a6a6fd97ced399(String), 2020-06-17 09:12:46.641(Timestamp), 31011310200312009116(String), 8987ac9747cd44aa9e6570e08c8dd822(String), 2020-06-17 09:12:46.641(Timestamp), 31011310200312009116(String), 92dc5e8124ba4c5396a3fa7c3d1dd8db(String), 2020-06-17 09:12:46.641(Timestamp), 31011310200312009116(String), 9dd8f43bbd5f4c6bb27aeca1774bc345(String), 2020-06-17 09:12:46.641(Timestamp), 31011310200312009116(String), a8d3c4a4780b451d9c8c8ce38a168e34(String), 2020-06-17 09:12:46.641(Timestamp) 
2020-06-17 09:12:46.706 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 5 
2020-06-17 09:14:19.927 [INFO ] com.benetech.rules.RulesApplication                - [logStarting:55] Starting RulesApplication v1.0-SNAPSHOT on DESKTOP-EOCO1V0 with PID 11352 (D:\51\python\project\instance\zyjk\EHR\controlRuleNew\config\healthRecordRules.jar started by ZY in D:\51\python\project\instance\zyjk\EHR\controlRuleNew) 
2020-06-17 09:14:19.930 [DEBUG] com.benetech.rules.RulesApplication                - [logStarting:56] Running with Spring Boot v2.2.1.RELEASE, Spring v5.2.1.RELEASE 
2020-06-17 09:14:19.931 [INFO ] com.benetech.rules.RulesApplication                - [logStartupProfileInfo:655] The following profiles are active: test 
2020-06-17 09:14:21.381 [INFO ] o.s.boot.web.embedded.tomcat.TomcatWebServer       - [initialize:92] Tomcat initialized with port(s): 8838 (http) 
2020-06-17 09:14:21.391 [INFO ] org.apache.coyote.http11.Http11NioProtocol         - [log:173] Initializing ProtocolHandler ["http-nio-8838"] 
2020-06-17 09:14:21.392 [INFO ] org.apache.catalina.core.StandardService           - [log:173] Starting service [Tomcat] 
2020-06-17 09:14:21.392 [INFO ] org.apache.catalina.core.StandardEngine            - [log:173] Starting Servlet engine: [Apache Tomcat/9.0.27] 
2020-06-17 09:14:21.457 [INFO ] o.a.c.c.C.[.[localhost].[/healthRecordRules]       - [log:173] Initializing Spring embedded WebApplicationContext 
2020-06-17 09:14:21.457 [INFO ] org.springframework.web.context.ContextLoader      - [prepareWebApplicationContext:284] Root WebApplicationContext: initialization completed in 1445 ms 
2020-06-17 09:14:21.538 [DEBUG] org.apache.ibatis.logging.LogFactory               - [setImplementation:135] Logging initialized using 'class org.apache.ibatis.logging.slf4j.Slf4jImpl' adapter. 
2020-06-17 09:14:21.784 [WARN ] org.mybatis.spring.SqlSessionFactoryBean           - [buildSqlSessionFactory:467] Can't find class in '[com.benetech.rules.*.entity]' package. Please check your configuration. 
2020-06-17 09:14:22.391 [INFO ] com.alibaba.druid.pool.DruidDataSource             - [init:930] {dataSource-1} inited 
2020-06-17 09:14:22.581 [DEBUG] c.b.r.m.e.mapper.RuleEngineMapper.getAllRules      - [debug:159] ==>  Preparing: select a.RuleId as ruleId, a.RuleSql as clazz from HrRule a join HrRuleProps b on a.RuleId = b.RuleId where -- RuleId in ('34278f71cf1d42c88158aaf637fa5203', '8d30baa03bfc4233a8f115c57a0ebf08', '63eb82a44bf64c96a0b9023fa2a3c9d9') a.RuleSql != '' and a.RuleSql is not null and b.Enable = 1  
2020-06-17 09:14:22.600 [DEBUG] c.b.r.m.e.mapper.RuleEngineMapper.getAllRules      - [debug:159] ==> Parameters:  
2020-06-17 09:14:22.677 [DEBUG] c.b.r.m.e.mapper.RuleEngineMapper.getAllRules      - [debug:159] <==      Total: 310 
2020-06-17 09:14:22.921 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [init:68] 加载规则：310 条 
2020-06-17 09:14:22.936 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.getAllCode    - [debug:159] ==>  Preparing: SELECT codeSysType AS type, code AS code, [value] AS value FROM tb_code_value WHERE code != '' AND [value] != ''  
2020-06-17 09:14:22.937 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.getAllCode    - [debug:159] ==> Parameters:  
2020-06-17 09:14:23.415 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.getAllCode    - [debug:159] <==      Total: 44881 
2020-06-17 09:14:23.441 [INFO ] c.b.r.m.m.service.impl.EhrModelBuildServiceImpl    - [init:96] 初始化字典类型: 467 种 
2020-06-17 09:14:23.441 [INFO ] c.b.r.m.m.service.impl.EhrModelBuildServiceImpl    - [init:97] 初始化字典: 44881 条 
2020-06-17 09:14:23.442 [ERROR] c.b.r.m.process.service.impl.QcProcessServiceImpl  - [init:44] 初始化线程池 
2020-06-17 09:14:23.560 [INFO ] o.s.scheduling.concurrent.ThreadPoolTaskExecutor   - [initialize:171] Initializing ExecutorService 'applicationTaskExecutor' 
2020-06-17 09:14:23.813 [INFO ] org.apache.coyote.http11.Http11NioProtocol         - [log:173] Starting ProtocolHandler ["http-nio-8838"] 
2020-06-17 09:14:23.839 [INFO ] o.s.boot.web.embedded.tomcat.TomcatWebServer       - [start:204] Tomcat started on port(s): 8838 (http) with context path '/healthRecordRules' 
2020-06-17 09:14:23.841 [INFO ] com.benetech.rules.RulesApplication                - [logStarted:61] Started RulesApplication in 4.438 seconds (JVM running for 4.883) 
2020-06-17 09:14:23.843 [INFO ] com.benetech.rules.RulesApplication                - [main:20] -------------启动成功------------- 
2020-06-17 09:14:24.239 [INFO ] o.a.c.c.C.[.[localhost].[/healthRecordRules]       - [log:173] Initializing Spring DispatcherServlet 'dispatcherServlet' 
2020-06-17 09:14:24.239 [INFO ] org.springframework.web.servlet.DispatcherServlet  - [initServletBean:525] Initializing Servlet 'dispatcherServlet' 
2020-06-17 09:14:24.249 [INFO ] org.springframework.web.servlet.DispatcherServlet  - [initServletBean:547] Completed initialization in 10 ms 
2020-06-17 09:14:24.284 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 09:14:24.290 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 09:14:24.297 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 09:14:24.302 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 09:14:24.303 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 09:14:24.310 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 09:14:24.316 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 09:14:24.317 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 09:14:24.324 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 12 
2020-06-17 09:14:24.330 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 09:14:24.330 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:14:24.335 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 09:14:24.340 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 09:14:24.341 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:14:24.350 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 09:14:24.354 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 09:14:24.355 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 09:14:24.356 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 09:14:24.356 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 09:14:24.361 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 09:14:24.366 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 09:14:24.368 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 09:14:24.378 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 09:14:24.383 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 09:14:24.384 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:14:24.389 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 09:14:24.393 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 09:14:24.394 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:14:24.409 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 09:14:24.414 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 09:14:24.415 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 09:14:24.415 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 09:14:24.416 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 09:14:24.421 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 09:14:24.429 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 09:14:24.430 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 09:14:24.435 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 09:14:24.442 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 09:14:24.443 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:14:24.447 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 09:14:24.452 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 09:14:24.453 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:14:24.458 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 09:14:24.527 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:药物过敏史未填写药物过敏史为空值 
2020-06-17 09:14:24.579 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:既往史输血时间未填写同时满足以下条件： 1、既往史输血选“有” 2、既往史输血填写了输血原因 3、输血时间为空值 
2020-06-17 09:14:24.581 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:RH超出字典范围RH不在字典范围内（1 阴性 2 阳性 3 不详 ） 
2020-06-17 09:14:24.584 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:既往史手术时间未填写同时满足以下条件： 1、既往史手术选“有” 2、既往史手术填写了手术名称 3、手术时间为空值 
2020-06-17 09:14:24.585 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:家族史（母亲）未填写家族史母亲为空值 
2020-06-17 09:14:24.633 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-17 09:14:24.635 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 0e82a90122434b1989a6a6fd97ced399(String), 2020-06-17 09:14:24.601(Timestamp), 31011310200312009116(String), 8987ac9747cd44aa9e6570e08c8dd822(String), 2020-06-17 09:14:24.601(Timestamp), 31011310200312009116(String), 92dc5e8124ba4c5396a3fa7c3d1dd8db(String), 2020-06-17 09:14:24.601(Timestamp), 31011310200312009116(String), 9dd8f43bbd5f4c6bb27aeca1774bc345(String), 2020-06-17 09:14:24.601(Timestamp), 31011310200312009116(String), a8d3c4a4780b451d9c8c8ce38a168e34(String), 2020-06-17 09:14:24.601(Timestamp) 
2020-06-17 09:14:24.673 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 5 
2020-06-17 09:14:29.279 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 09:14:29.280 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 09:14:29.288 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 09:14:29.294 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 09:14:29.295 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 09:14:29.301 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 09:14:29.306 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 09:14:29.307 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 09:14:29.313 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 12 
2020-06-17 09:14:29.319 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 09:14:29.320 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:14:29.324 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 09:14:29.329 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 09:14:29.330 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:14:29.336 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 09:14:29.340 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 09:14:29.340 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 09:14:29.341 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 09:14:29.341 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 09:14:29.346 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 09:14:29.350 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 09:14:29.351 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 09:14:29.355 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 09:14:29.359 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 09:14:29.360 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:14:29.364 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 09:14:29.369 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 09:14:29.369 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:14:29.383 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 09:14:29.388 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 09:14:29.388 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 09:14:29.389 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 09:14:29.389 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 09:14:29.393 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 09:14:29.398 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 09:14:29.399 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 09:14:29.403 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 09:14:29.408 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 09:14:29.408 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:14:29.413 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 09:14:29.420 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 09:14:29.420 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:14:29.425 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 09:14:29.471 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:家族史（兄弟姐妹）未填写家族史兄弟姐妹为空值 
2020-06-17 09:14:29.472 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:药物过敏史未填写药物过敏史为空值 
2020-06-17 09:14:29.497 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:既往史输血时间未填写同时满足以下条件： 1、既往史输血选“有” 2、既往史输血填写了输血原因 3、输血时间为空值 
2020-06-17 09:14:29.498 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:RH超出字典范围RH不在字典范围内（1 阴性 2 阳性 3 不详 ） 
2020-06-17 09:14:29.499 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:既往史手术时间未填写同时满足以下条件： 1、既往史手术选“有” 2、既往史手术填写了手术名称 3、手术时间为空值 
2020-06-17 09:14:29.512 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-17 09:14:29.517 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 063e61b0210a4375ad1df0522af17295(String), 2020-06-17 09:14:29.511(Timestamp), 31011310200312009116(String), 0e82a90122434b1989a6a6fd97ced399(String), 2020-06-17 09:14:29.511(Timestamp), 31011310200312009116(String), 8987ac9747cd44aa9e6570e08c8dd822(String), 2020-06-17 09:14:29.511(Timestamp), 31011310200312009116(String), 92dc5e8124ba4c5396a3fa7c3d1dd8db(String), 2020-06-17 09:14:29.511(Timestamp), 31011310200312009116(String), 9dd8f43bbd5f4c6bb27aeca1774bc345(String), 2020-06-17 09:14:29.511(Timestamp) 
2020-06-17 09:14:29.547 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 5 
2020-06-17 09:14:34.239 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 09:14:34.240 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 09:14:34.246 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 09:14:34.252 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 09:14:34.253 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 09:14:34.260 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 09:14:34.266 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 09:14:34.267 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 09:14:34.274 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 12 
2020-06-17 09:14:34.280 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 09:14:34.281 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:14:34.286 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 09:14:34.291 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 09:14:34.291 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:14:34.296 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 09:14:34.300 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 09:14:34.301 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 09:14:34.301 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 09:14:34.302 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 09:14:34.306 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 09:14:34.311 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 09:14:34.311 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 09:14:34.315 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 09:14:34.319 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 09:14:34.320 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:14:34.324 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 09:14:34.329 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 09:14:34.329 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:14:34.343 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 09:14:34.347 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 09:14:34.347 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 09:14:34.348 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 09:14:34.348 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 09:14:34.352 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 09:14:34.357 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 09:14:34.357 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 09:14:34.362 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 09:14:34.366 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 09:14:34.367 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:14:34.371 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 09:14:34.377 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 09:14:34.378 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:14:34.383 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 09:14:34.399 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:药物过敏史未填写药物过敏史为空值 
2020-06-17 09:14:34.407 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:既往史输血时间未填写同时满足以下条件： 1、既往史输血选“有” 2、既往史输血填写了输血原因 3、输血时间为空值 
2020-06-17 09:14:34.407 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:RH超出字典范围RH不在字典范围内（1 阴性 2 阳性 3 不详 ） 
2020-06-17 09:14:34.408 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:家族史（儿子）未填写家族史兄弟姐妹为空值 
2020-06-17 09:14:34.408 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:既往史手术时间未填写同时满足以下条件： 1、既往史手术选“有” 2、既往史手术填写了手术名称 3、手术时间为空值 
2020-06-17 09:14:34.417 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-17 09:14:34.418 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 0e82a90122434b1989a6a6fd97ced399(String), 2020-06-17 09:14:34.416(Timestamp), 31011310200312009116(String), 8987ac9747cd44aa9e6570e08c8dd822(String), 2020-06-17 09:14:34.416(Timestamp), 31011310200312009116(String), 92dc5e8124ba4c5396a3fa7c3d1dd8db(String), 2020-06-17 09:14:34.416(Timestamp), 31011310200312009116(String), 9be1b4d7723e4208963bb95278bbf25f(String), 2020-06-17 09:14:34.416(Timestamp), 31011310200312009116(String), 9dd8f43bbd5f4c6bb27aeca1774bc345(String), 2020-06-17 09:14:34.416(Timestamp) 
2020-06-17 09:14:34.438 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 5 
2020-06-17 09:14:38.922 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 09:14:38.923 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 09:14:38.928 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 09:14:38.933 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 09:14:38.934 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 09:14:38.939 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 09:14:38.946 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 09:14:38.946 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 09:14:38.951 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 13 
2020-06-17 09:14:38.956 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 09:14:38.957 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:14:38.962 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 09:14:38.967 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 09:14:38.967 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:14:38.973 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 09:14:38.981 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 09:14:38.981 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 09:14:38.982 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 09:14:38.982 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 09:14:38.989 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 09:14:38.994 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 09:14:38.995 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 09:14:39.000 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 09:14:39.004 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 09:14:39.005 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:14:39.012 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 09:14:39.016 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 09:14:39.017 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:14:39.032 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 09:14:39.037 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 09:14:39.037 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 09:14:39.037 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 09:14:39.037 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 09:14:39.043 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 09:14:39.048 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 09:14:39.048 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 09:14:39.054 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 09:14:39.061 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 09:14:39.062 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:14:39.068 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 09:14:39.075 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 09:14:39.077 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:14:39.082 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 09:14:39.105 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:药物过敏史未填写药物过敏史为空值 
2020-06-17 09:14:39.112 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:遗传史未填写遗传史为空值 
2020-06-17 09:14:39.118 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:既往史输血时间未填写同时满足以下条件： 1、既往史输血选“有” 2、既往史输血填写了输血原因 3、输血时间为空值 
2020-06-17 09:14:39.119 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:RH超出字典范围RH不在字典范围内（1 阴性 2 阳性 3 不详 ） 
2020-06-17 09:14:39.121 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:既往史手术时间未填写同时满足以下条件： 1、既往史手术选“有” 2、既往史手术填写了手术名称 3、手术时间为空值 
2020-06-17 09:14:39.127 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-17 09:14:39.130 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 0e82a90122434b1989a6a6fd97ced399(String), 2020-06-17 09:14:39.126(Timestamp), 31011310200312009116(String), 309c992a7fcb41b0959cf342b8e4e0ad(String), 2020-06-17 09:14:39.126(Timestamp), 31011310200312009116(String), 8987ac9747cd44aa9e6570e08c8dd822(String), 2020-06-17 09:14:39.126(Timestamp), 31011310200312009116(String), 92dc5e8124ba4c5396a3fa7c3d1dd8db(String), 2020-06-17 09:14:39.126(Timestamp), 31011310200312009116(String), 9dd8f43bbd5f4c6bb27aeca1774bc345(String), 2020-06-17 09:14:39.126(Timestamp) 
2020-06-17 09:14:39.149 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 5 
2020-06-17 09:14:44.043 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 09:14:44.044 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 09:14:44.051 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 09:14:44.057 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 09:14:44.058 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 09:14:44.063 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 09:14:44.069 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 09:14:44.069 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 09:14:44.074 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 13 
2020-06-17 09:14:44.079 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 09:14:44.080 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:14:44.085 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 09:14:44.090 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 09:14:44.090 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:14:44.096 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 09:14:44.100 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 09:14:44.101 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 09:14:44.101 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 09:14:44.102 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 09:14:44.106 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 09:14:44.111 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 09:14:44.111 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 09:14:44.122 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 09:14:44.126 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 09:14:44.126 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:14:44.132 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 09:14:44.136 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 09:14:44.137 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:14:44.150 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 09:14:44.154 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 09:14:44.155 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 09:14:44.157 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 09:14:44.158 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 09:14:44.165 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 09:14:44.171 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 09:14:44.172 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 09:14:44.177 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 09:14:44.185 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 09:14:44.185 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:14:44.190 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 09:14:44.194 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 09:14:44.195 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:14:44.200 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 09:14:44.216 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:药物过敏史未填写药物过敏史为空值 
2020-06-17 09:14:44.226 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:既往史输血时间未填写同时满足以下条件： 1、既往史输血选“有” 2、既往史输血填写了输血原因 3、输血时间为空值 
2020-06-17 09:14:44.228 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:RH超出字典范围RH不在字典范围内（1 阴性 2 阳性 3 不详 ） 
2020-06-17 09:14:44.229 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:既往史手术时间未填写同时满足以下条件： 1、既往史手术选“有” 2、既往史手术填写了手术名称 3、手术时间为空值 
2020-06-17 09:14:44.234 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:厨房排风设施未填写生活环境厨房排风设施为空值 
2020-06-17 09:14:44.239 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-17 09:14:44.242 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 0e82a90122434b1989a6a6fd97ced399(String), 2020-06-17 09:14:44.236(Timestamp), 31011310200312009116(String), 8987ac9747cd44aa9e6570e08c8dd822(String), 2020-06-17 09:14:44.236(Timestamp), 31011310200312009116(String), 92dc5e8124ba4c5396a3fa7c3d1dd8db(String), 2020-06-17 09:14:44.236(Timestamp), 31011310200312009116(String), 9dd8f43bbd5f4c6bb27aeca1774bc345(String), 2020-06-17 09:14:44.236(Timestamp), 31011310200312009116(String), f2ada73ddc464ea5bdc843a94afdcc58(String), 2020-06-17 09:14:44.236(Timestamp) 
2020-06-17 09:14:44.262 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 5 
2020-06-17 09:14:47.691 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 09:14:47.692 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 09:14:47.698 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 09:14:47.703 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 09:14:47.704 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 09:14:47.709 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 09:14:47.715 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 09:14:47.715 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 09:14:47.721 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 13 
2020-06-17 09:14:47.726 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 09:14:47.726 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:14:47.731 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 09:14:47.735 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 09:14:47.735 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:14:47.740 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 09:14:47.744 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 09:14:47.745 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 09:14:47.745 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 09:14:47.746 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 09:14:47.750 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 09:14:47.754 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 09:14:47.754 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 09:14:47.758 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 09:14:47.763 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 09:14:47.764 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:14:47.770 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 09:14:47.774 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 09:14:47.774 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:14:47.788 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 09:14:47.798 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 09:14:47.798 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 09:14:47.798 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 09:14:47.799 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 09:14:47.803 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 09:14:47.807 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 09:14:47.808 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 09:14:47.812 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 09:14:47.817 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 09:14:47.817 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:14:47.822 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 09:14:47.827 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 09:14:47.827 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:14:47.831 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 09:14:47.843 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:药物过敏史未填写药物过敏史为空值 
2020-06-17 09:14:47.847 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:既往史输血时间未填写同时满足以下条件： 1、既往史输血选“有” 2、既往史输血填写了输血原因 3、输血时间为空值 
2020-06-17 09:14:47.848 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:RH超出字典范围RH不在字典范围内（1 阴性 2 阳性 3 不详 ） 
2020-06-17 09:14:47.849 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:既往史手术时间未填写同时满足以下条件： 1、既往史手术选“有” 2、既往史手术填写了手术名称 3、手术时间为空值 
2020-06-17 09:14:47.850 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:厨房排风设施超出字典范围厨房排风设施选项不在字典范围（1 无, 2 油烟机, 3 换气扇, 4 烟囱） 
2020-06-17 09:14:47.853 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-17 09:14:47.854 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 0e82a90122434b1989a6a6fd97ced399(String), 2020-06-17 09:14:47.852(Timestamp), 31011310200312009116(String), 8987ac9747cd44aa9e6570e08c8dd822(String), 2020-06-17 09:14:47.852(Timestamp), 31011310200312009116(String), 92dc5e8124ba4c5396a3fa7c3d1dd8db(String), 2020-06-17 09:14:47.852(Timestamp), 31011310200312009116(String), 9dd8f43bbd5f4c6bb27aeca1774bc345(String), 2020-06-17 09:14:47.852(Timestamp), 31011310200312009116(String), caee967163d44945a84844b7d912b993(String), 2020-06-17 09:14:47.852(Timestamp) 
2020-06-17 09:14:47.873 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 5 
2020-06-17 09:14:51.290 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 09:14:51.291 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 09:14:51.303 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 09:14:51.309 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 09:14:51.309 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 09:14:51.314 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 09:14:51.319 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 09:14:51.320 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 09:14:51.325 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 13 
2020-06-17 09:14:51.329 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 09:14:51.330 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:14:51.335 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 09:14:51.343 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 09:14:51.343 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:14:51.349 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 09:14:51.355 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 09:14:51.355 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 09:14:51.356 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 09:14:51.356 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 09:14:51.361 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 09:14:51.366 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 09:14:51.367 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 09:14:51.374 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 09:14:51.382 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 09:14:51.382 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:14:51.388 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 09:14:51.394 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 09:14:51.395 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:14:51.410 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 09:14:51.417 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 09:14:51.418 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 09:14:51.419 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 09:14:51.420 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 09:14:51.427 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 09:14:51.433 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 09:14:51.435 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 09:14:51.440 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 09:14:51.447 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 09:14:51.449 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:14:51.454 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 09:14:51.460 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 09:14:51.461 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:14:51.467 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 09:14:51.487 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:药物过敏史未填写药物过敏史为空值 
2020-06-17 09:14:51.498 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:既往史输血时间未填写同时满足以下条件： 1、既往史输血选“有” 2、既往史输血填写了输血原因 3、输血时间为空值 
2020-06-17 09:14:51.500 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:RH超出字典范围RH不在字典范围内（1 阴性 2 阳性 3 不详 ） 
2020-06-17 09:14:51.501 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:既往史手术时间未填写同时满足以下条件： 1、既往史手术选“有” 2、既往史手术填写了手术名称 3、手术时间为空值 
2020-06-17 09:14:51.505 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:燃料类型未填写生活环境燃料类型为空值 
2020-06-17 09:14:51.508 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-17 09:14:51.509 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 0e82a90122434b1989a6a6fd97ced399(String), 2020-06-17 09:14:51.507(Timestamp), 31011310200312009116(String), 8987ac9747cd44aa9e6570e08c8dd822(String), 2020-06-17 09:14:51.507(Timestamp), 31011310200312009116(String), 92dc5e8124ba4c5396a3fa7c3d1dd8db(String), 2020-06-17 09:14:51.507(Timestamp), 31011310200312009116(String), 9dd8f43bbd5f4c6bb27aeca1774bc345(String), 2020-06-17 09:14:51.507(Timestamp), 31011310200312009116(String), e9926def7bf94b0997175c2784419105(String), 2020-06-17 09:14:51.507(Timestamp) 
2020-06-17 09:14:51.570 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 5 
2020-06-17 09:14:55.097 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 09:14:55.097 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 09:14:55.103 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 09:14:55.111 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 09:14:55.111 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 09:14:55.117 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 09:14:55.123 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 09:14:55.123 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 09:14:55.129 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 13 
2020-06-17 09:14:55.134 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 09:14:55.135 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:14:55.140 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 09:14:55.145 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 09:14:55.146 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:14:55.158 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 09:14:55.162 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 09:14:55.162 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 09:14:55.163 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 09:14:55.164 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 09:14:55.169 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 09:14:55.174 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 09:14:55.175 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 09:14:55.180 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 09:14:55.185 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 09:14:55.185 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:14:55.191 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 09:14:55.196 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 09:14:55.196 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:14:55.211 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 09:14:55.216 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 09:14:55.216 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 09:14:55.217 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 09:14:55.217 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 09:14:55.222 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 09:14:55.229 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 09:14:55.229 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 09:14:55.233 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 09:14:55.238 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 09:14:55.239 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:14:55.244 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 09:14:55.249 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 09:14:55.249 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:14:55.254 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 09:14:55.272 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:药物过敏史未填写药物过敏史为空值 
2020-06-17 09:14:55.274 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:燃料类型超出字典范围燃料类型选项不在字典范围（1 液化气, 2 煤, 3 天然气,m 4 沼气, 5 柴火, 6 其他） 
2020-06-17 09:14:55.282 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:既往史输血时间未填写同时满足以下条件： 1、既往史输血选“有” 2、既往史输血填写了输血原因 3、输血时间为空值 
2020-06-17 09:14:55.283 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:RH超出字典范围RH不在字典范围内（1 阴性 2 阳性 3 不详 ） 
2020-06-17 09:14:55.284 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:既往史手术时间未填写同时满足以下条件： 1、既往史手术选“有” 2、既往史手术填写了手术名称 3、手术时间为空值 
2020-06-17 09:14:55.288 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-17 09:14:55.289 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 0e82a90122434b1989a6a6fd97ced399(String), 2020-06-17 09:14:55.287(Timestamp), 31011310200312009116(String), 2b41b4683ac44aa885e0d0ef089a3ca5(String), 2020-06-17 09:14:55.287(Timestamp), 31011310200312009116(String), 8987ac9747cd44aa9e6570e08c8dd822(String), 2020-06-17 09:14:55.287(Timestamp), 31011310200312009116(String), 92dc5e8124ba4c5396a3fa7c3d1dd8db(String), 2020-06-17 09:14:55.287(Timestamp), 31011310200312009116(String), 9dd8f43bbd5f4c6bb27aeca1774bc345(String), 2020-06-17 09:14:55.287(Timestamp) 
2020-06-17 09:14:55.319 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 5 
2020-06-17 09:14:58.734 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 09:14:58.734 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 09:14:58.740 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 09:14:58.745 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 09:14:58.745 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 09:14:58.750 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 09:14:58.754 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 09:14:58.755 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 09:14:58.760 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 13 
2020-06-17 09:14:58.764 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 09:14:58.764 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:14:58.769 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 09:14:58.774 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 09:14:58.774 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:14:58.779 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 09:14:58.783 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 09:14:58.783 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 09:14:58.784 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 09:14:58.784 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 09:14:58.788 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 09:14:58.792 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 09:14:58.793 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 09:14:58.797 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 09:14:58.801 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 09:14:58.801 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:14:58.806 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 09:14:58.812 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 09:14:58.813 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:14:58.830 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 09:14:58.835 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 09:14:58.835 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 09:14:58.835 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 09:14:58.836 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 09:14:58.840 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 09:14:58.844 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 09:14:58.845 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 09:14:58.849 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 09:14:58.854 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 09:14:58.854 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:14:58.859 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 09:14:58.862 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 09:14:58.863 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:14:58.868 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 09:14:58.881 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:药物过敏史未填写药物过敏史为空值 
2020-06-17 09:14:58.885 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:既往史输血时间未填写同时满足以下条件： 1、既往史输血选“有” 2、既往史输血填写了输血原因 3、输血时间为空值 
2020-06-17 09:14:58.886 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:RH超出字典范围RH不在字典范围内（1 阴性 2 阳性 3 不详 ） 
2020-06-17 09:14:58.886 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:既往史手术时间未填写同时满足以下条件： 1、既往史手术选“有” 2、既往史手术填写了手术名称 3、手术时间为空值 
2020-06-17 09:14:58.888 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:饮水未填写生活环境饮水为空值 
2020-06-17 09:14:58.891 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-17 09:14:58.892 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 0e82a90122434b1989a6a6fd97ced399(String), 2020-06-17 09:14:58.89(Timestamp), 31011310200312009116(String), 8987ac9747cd44aa9e6570e08c8dd822(String), 2020-06-17 09:14:58.89(Timestamp), 31011310200312009116(String), 92dc5e8124ba4c5396a3fa7c3d1dd8db(String), 2020-06-17 09:14:58.89(Timestamp), 31011310200312009116(String), 9dd8f43bbd5f4c6bb27aeca1774bc345(String), 2020-06-17 09:14:58.89(Timestamp), 31011310200312009116(String), d70a24821287417d808263f40bc73679(String), 2020-06-17 09:14:58.89(Timestamp) 
2020-06-17 09:14:58.927 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 5 
2020-06-17 09:15:02.527 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 09:15:02.528 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 09:15:02.535 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 09:15:02.540 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 09:15:02.541 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 09:15:02.545 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 09:15:02.550 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 09:15:02.551 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 09:15:02.557 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 13 
2020-06-17 09:15:02.561 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 09:15:02.561 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:15:02.565 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 09:15:02.569 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 09:15:02.570 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:15:02.575 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 09:15:02.579 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 09:15:02.579 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 09:15:02.579 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 09:15:02.580 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 09:15:02.584 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 09:15:02.588 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 09:15:02.588 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 09:15:02.593 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 09:15:02.598 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 09:15:02.598 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:15:02.603 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 09:15:02.608 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 09:15:02.609 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:15:02.623 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 09:15:02.628 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 09:15:02.628 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 09:15:02.629 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 09:15:02.630 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 09:15:02.634 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 09:15:02.640 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 09:15:02.640 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 09:15:02.644 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 09:15:02.649 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 09:15:02.649 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:15:02.655 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 09:15:02.659 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 09:15:02.660 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:15:02.665 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 09:15:02.681 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:药物过敏史未填写药物过敏史为空值 
2020-06-17 09:15:02.688 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:既往史输血时间未填写同时满足以下条件： 1、既往史输血选“有” 2、既往史输血填写了输血原因 3、输血时间为空值 
2020-06-17 09:15:02.689 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:RH超出字典范围RH不在字典范围内（1 阴性 2 阳性 3 不详 ） 
2020-06-17 09:15:02.690 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:既往史手术时间未填写同时满足以下条件： 1、既往史手术选“有” 2、既往史手术填写了手术名称 3、手术时间为空值 
2020-06-17 09:15:02.692 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:饮水超出字典范围饮水选项不在字典范围（1自来水, 2经净化过滤的水, 3井水, 4河湖水, 5 塘水, 6其他） 
2020-06-17 09:15:02.695 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-17 09:15:02.695 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 0e82a90122434b1989a6a6fd97ced399(String), 2020-06-17 09:15:02.694(Timestamp), 31011310200312009116(String), 8987ac9747cd44aa9e6570e08c8dd822(String), 2020-06-17 09:15:02.694(Timestamp), 31011310200312009116(String), 92dc5e8124ba4c5396a3fa7c3d1dd8db(String), 2020-06-17 09:15:02.694(Timestamp), 31011310200312009116(String), 9dd8f43bbd5f4c6bb27aeca1774bc345(String), 2020-06-17 09:15:02.694(Timestamp), 31011310200312009116(String), b617e78f0d204457b8db6cf72d9b1347(String), 2020-06-17 09:15:02.694(Timestamp) 
2020-06-17 09:15:02.718 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 5 
2020-06-17 09:15:06.255 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 09:15:06.256 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 09:15:06.264 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 09:15:06.269 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 09:15:06.269 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 09:15:06.282 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 09:15:06.287 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 09:15:06.288 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 09:15:06.294 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 13 
2020-06-17 09:15:06.300 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 09:15:06.302 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:15:06.307 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 09:15:06.313 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 09:15:06.314 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:15:06.321 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 09:15:06.327 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 09:15:06.328 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 09:15:06.329 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 09:15:06.330 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 09:15:06.339 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 09:15:06.345 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 09:15:06.346 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 09:15:06.350 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 09:15:06.356 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 09:15:06.358 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:15:06.363 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 09:15:06.370 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 09:15:06.371 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:15:06.387 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 09:15:06.393 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 09:15:06.394 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 09:15:06.395 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 09:15:06.396 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 09:15:06.401 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 09:15:06.407 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 09:15:06.408 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 09:15:06.413 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 09:15:06.420 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 09:15:06.421 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:15:06.426 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 09:15:06.435 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 09:15:06.436 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:15:06.442 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 09:15:06.480 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:药物过敏史未填写药物过敏史为空值 
2020-06-17 09:15:06.488 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:厕所未填写生活环境厕所为空值 
2020-06-17 09:15:06.491 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:既往史输血时间未填写同时满足以下条件： 1、既往史输血选“有” 2、既往史输血填写了输血原因 3、输血时间为空值 
2020-06-17 09:15:06.493 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:RH超出字典范围RH不在字典范围内（1 阴性 2 阳性 3 不详 ） 
2020-06-17 09:15:06.494 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:既往史手术时间未填写同时满足以下条件： 1、既往史手术选“有” 2、既往史手术填写了手术名称 3、手术时间为空值 
2020-06-17 09:15:06.500 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-17 09:15:06.500 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 0e82a90122434b1989a6a6fd97ced399(String), 2020-06-17 09:15:06.499(Timestamp), 31011310200312009116(String), 46e5ac5dc6014dd4977cfd7deadaae34(String), 2020-06-17 09:15:06.499(Timestamp), 31011310200312009116(String), 8987ac9747cd44aa9e6570e08c8dd822(String), 2020-06-17 09:15:06.499(Timestamp), 31011310200312009116(String), 92dc5e8124ba4c5396a3fa7c3d1dd8db(String), 2020-06-17 09:15:06.499(Timestamp), 31011310200312009116(String), 9dd8f43bbd5f4c6bb27aeca1774bc345(String), 2020-06-17 09:15:06.499(Timestamp) 
2020-06-17 09:15:06.562 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 5 
2020-06-17 09:15:10.166 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 09:15:10.166 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 09:15:10.187 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 09:15:10.192 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 09:15:10.192 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 09:15:10.198 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 09:15:10.204 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 09:15:10.205 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 09:15:10.210 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 13 
2020-06-17 09:15:10.214 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 09:15:10.215 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:15:10.220 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 09:15:10.225 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 09:15:10.225 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:15:10.232 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 09:15:10.238 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 09:15:10.238 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 09:15:10.239 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 09:15:10.240 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 09:15:10.244 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 09:15:10.248 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 09:15:10.249 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 09:15:10.253 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 09:15:10.258 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 09:15:10.258 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:15:10.264 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 09:15:10.269 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 09:15:10.269 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:15:10.287 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 09:15:10.292 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 09:15:10.292 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 09:15:10.293 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 09:15:10.293 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 09:15:10.301 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 09:15:10.305 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 09:15:10.305 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 09:15:10.310 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 09:15:10.314 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 09:15:10.315 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:15:10.321 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 09:15:10.326 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 09:15:10.326 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:15:10.331 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 09:15:10.346 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:药物过敏史未填写药物过敏史为空值 
2020-06-17 09:15:10.347 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:厕所超出字典范围厕所选项不在字典范围（1 卫生厕所 2 一格或二格粪池式 3 马桶  4 露天粪坑  5 简易棚厕 ） 
2020-06-17 09:15:10.350 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:既往史输血时间未填写同时满足以下条件： 1、既往史输血选“有” 2、既往史输血填写了输血原因 3、输血时间为空值 
2020-06-17 09:15:10.350 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:RH超出字典范围RH不在字典范围内（1 阴性 2 阳性 3 不详 ） 
2020-06-17 09:15:10.351 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:既往史手术时间未填写同时满足以下条件： 1、既往史手术选“有” 2、既往史手术填写了手术名称 3、手术时间为空值 
2020-06-17 09:15:10.355 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-17 09:15:10.356 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 0e82a90122434b1989a6a6fd97ced399(String), 2020-06-17 09:15:10.355(Timestamp), 31011310200312009116(String), 37bdeecdf7044a70a76394b6853245a3(String), 2020-06-17 09:15:10.355(Timestamp), 31011310200312009116(String), 8987ac9747cd44aa9e6570e08c8dd822(String), 2020-06-17 09:15:10.355(Timestamp), 31011310200312009116(String), 92dc5e8124ba4c5396a3fa7c3d1dd8db(String), 2020-06-17 09:15:10.355(Timestamp), 31011310200312009116(String), 9dd8f43bbd5f4c6bb27aeca1774bc345(String), 2020-06-17 09:15:10.355(Timestamp) 
2020-06-17 09:15:10.376 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 5 
2020-06-17 09:15:13.759 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 09:15:13.760 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 09:15:13.765 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 09:15:13.769 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 09:15:13.769 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 09:15:13.774 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 09:15:13.778 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 09:15:13.778 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 09:15:13.783 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 13 
2020-06-17 09:15:13.787 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 09:15:13.788 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:15:13.792 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 09:15:13.796 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 09:15:13.797 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:15:13.802 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 09:15:13.806 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 09:15:13.806 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 09:15:13.806 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 09:15:13.807 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 09:15:13.811 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 09:15:13.815 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 09:15:13.815 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 09:15:13.819 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 09:15:13.824 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 09:15:13.824 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:15:13.829 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 09:15:13.834 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 09:15:13.834 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:15:13.849 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 09:15:13.853 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 09:15:13.853 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 09:15:13.854 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 09:15:13.854 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 09:15:13.858 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 09:15:13.863 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 09:15:13.863 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 09:15:13.868 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 09:15:13.873 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 09:15:13.873 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:15:13.878 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 09:15:13.885 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 09:15:13.886 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:15:13.890 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 09:15:13.903 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:药物过敏史未填写药物过敏史为空值 
2020-06-17 09:15:13.903 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:禽畜栏未填写生活环境禽畜栏为空值 
2020-06-17 09:15:13.906 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:既往史输血时间未填写同时满足以下条件： 1、既往史输血选“有” 2、既往史输血填写了输血原因 3、输血时间为空值 
2020-06-17 09:15:13.907 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:RH超出字典范围RH不在字典范围内（1 阴性 2 阳性 3 不详 ） 
2020-06-17 09:15:13.907 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:既往史手术时间未填写同时满足以下条件： 1、既往史手术选“有” 2、既往史手术填写了手术名称 3、手术时间为空值 
2020-06-17 09:15:13.911 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-17 09:15:13.911 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 0e82a90122434b1989a6a6fd97ced399(String), 2020-06-17 09:15:13.91(Timestamp), 31011310200312009116(String), 1c08fb70e9744af887041d4da5b25ea8(String), 2020-06-17 09:15:13.91(Timestamp), 31011310200312009116(String), 8987ac9747cd44aa9e6570e08c8dd822(String), 2020-06-17 09:15:13.91(Timestamp), 31011310200312009116(String), 92dc5e8124ba4c5396a3fa7c3d1dd8db(String), 2020-06-17 09:15:13.91(Timestamp), 31011310200312009116(String), 9dd8f43bbd5f4c6bb27aeca1774bc345(String), 2020-06-17 09:15:13.91(Timestamp) 
2020-06-17 09:15:13.962 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 5 
2020-06-17 09:15:17.395 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 09:15:17.396 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 09:15:17.402 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 09:15:17.409 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 09:15:17.409 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 09:15:17.417 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 09:15:17.425 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 09:15:17.426 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 09:15:17.431 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 13 
2020-06-17 09:15:17.436 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 09:15:17.436 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:15:17.443 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 09:15:17.451 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 09:15:17.452 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:15:17.461 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 09:15:17.466 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 09:15:17.466 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 09:15:17.467 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 09:15:17.468 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 09:15:17.474 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 09:15:17.479 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 09:15:17.479 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 09:15:17.489 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 09:15:17.495 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 09:15:17.495 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:15:17.501 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 09:15:17.505 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 09:15:17.506 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:15:17.523 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 09:15:17.528 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 09:15:17.529 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 09:15:17.530 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 09:15:17.530 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 09:15:17.535 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 09:15:17.538 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 09:15:17.539 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 09:15:17.545 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 09:15:17.554 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 09:15:17.555 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:15:17.562 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 09:15:17.567 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 09:15:17.568 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:15:17.572 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 09:15:17.591 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:药物过敏史未填写药物过敏史为空值 
2020-06-17 09:15:17.598 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:既往史输血时间未填写同时满足以下条件： 1、既往史输血选“有” 2、既往史输血填写了输血原因 3、输血时间为空值 
2020-06-17 09:15:17.599 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:RH超出字典范围RH不在字典范围内（1 阴性 2 阳性 3 不详 ） 
2020-06-17 09:15:17.600 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:既往史手术时间未填写同时满足以下条件： 1、既往史手术选“有” 2、既往史手术填写了手术名称 3、手术时间为空值 
2020-06-17 09:15:17.601 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:禽畜栏超出字典范围禽畜栏选项不在字典范围（1 无, 2 单设, 3 室内, 4 室外） 
2020-06-17 09:15:17.606 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-17 09:15:17.607 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 0e82a90122434b1989a6a6fd97ced399(String), 2020-06-17 09:15:17.605(Timestamp), 31011310200312009116(String), 8987ac9747cd44aa9e6570e08c8dd822(String), 2020-06-17 09:15:17.605(Timestamp), 31011310200312009116(String), 92dc5e8124ba4c5396a3fa7c3d1dd8db(String), 2020-06-17 09:15:17.605(Timestamp), 31011310200312009116(String), 9dd8f43bbd5f4c6bb27aeca1774bc345(String), 2020-06-17 09:15:17.605(Timestamp), 31011310200312009116(String), a827e00ae95e4c5a8d9e7227ca08b08a(String), 2020-06-17 09:15:17.605(Timestamp) 
2020-06-17 09:15:17.630 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 5 
2020-06-17 09:26:24.198 [INFO ] com.benetech.rules.RulesApplication                - [logStarting:55] Starting RulesApplication v1.0-SNAPSHOT on DESKTOP-EOCO1V0 with PID 7868 (D:\51\python\project\instance\zyjk\EHR\controlRuleNew\config\healthRecordRules.jar started by ZY in D:\51\python\project\instance\zyjk\EHR\controlRuleNew) 
2020-06-17 09:26:24.201 [DEBUG] com.benetech.rules.RulesApplication                - [logStarting:56] Running with Spring Boot v2.2.1.RELEASE, Spring v5.2.1.RELEASE 
2020-06-17 09:26:24.202 [INFO ] com.benetech.rules.RulesApplication                - [logStartupProfileInfo:655] The following profiles are active: test 
2020-06-17 09:26:25.819 [INFO ] o.s.boot.web.embedded.tomcat.TomcatWebServer       - [initialize:92] Tomcat initialized with port(s): 8838 (http) 
2020-06-17 09:26:25.833 [INFO ] org.apache.coyote.http11.Http11NioProtocol         - [log:173] Initializing ProtocolHandler ["http-nio-8838"] 
2020-06-17 09:26:25.834 [INFO ] org.apache.catalina.core.StandardService           - [log:173] Starting service [Tomcat] 
2020-06-17 09:26:25.834 [INFO ] org.apache.catalina.core.StandardEngine            - [log:173] Starting Servlet engine: [Apache Tomcat/9.0.27] 
2020-06-17 09:26:25.947 [INFO ] o.a.c.c.C.[.[localhost].[/healthRecordRules]       - [log:173] Initializing Spring embedded WebApplicationContext 
2020-06-17 09:26:25.947 [INFO ] org.springframework.web.context.ContextLoader      - [prepareWebApplicationContext:284] Root WebApplicationContext: initialization completed in 1658 ms 
2020-06-17 09:26:26.036 [DEBUG] org.apache.ibatis.logging.LogFactory               - [setImplementation:135] Logging initialized using 'class org.apache.ibatis.logging.slf4j.Slf4jImpl' adapter. 
2020-06-17 09:26:26.293 [WARN ] org.mybatis.spring.SqlSessionFactoryBean           - [buildSqlSessionFactory:467] Can't find class in '[com.benetech.rules.*.entity]' package. Please check your configuration. 
2020-06-17 09:26:26.909 [INFO ] com.alibaba.druid.pool.DruidDataSource             - [init:930] {dataSource-1} inited 
2020-06-17 09:26:27.131 [DEBUG] c.b.r.m.e.mapper.RuleEngineMapper.getAllRules      - [debug:159] ==>  Preparing: select a.RuleId as ruleId, a.RuleSql as clazz from HrRule a join HrRuleProps b on a.RuleId = b.RuleId where -- RuleId in ('34278f71cf1d42c88158aaf637fa5203', '8d30baa03bfc4233a8f115c57a0ebf08', '63eb82a44bf64c96a0b9023fa2a3c9d9') a.RuleSql != '' and a.RuleSql is not null and b.Enable = 1  
2020-06-17 09:26:27.152 [DEBUG] c.b.r.m.e.mapper.RuleEngineMapper.getAllRules      - [debug:159] ==> Parameters:  
2020-06-17 09:26:27.258 [DEBUG] c.b.r.m.e.mapper.RuleEngineMapper.getAllRules      - [debug:159] <==      Total: 310 
2020-06-17 09:26:27.515 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [init:68] 加载规则：310 条 
2020-06-17 09:26:27.538 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.getAllCode    - [debug:159] ==>  Preparing: SELECT codeSysType AS type, code AS code, [value] AS value FROM tb_code_value WHERE code != '' AND [value] != ''  
2020-06-17 09:26:27.538 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.getAllCode    - [debug:159] ==> Parameters:  
2020-06-17 09:26:27.935 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.getAllCode    - [debug:159] <==      Total: 44881 
2020-06-17 09:26:27.962 [INFO ] c.b.r.m.m.service.impl.EhrModelBuildServiceImpl    - [init:96] 初始化字典类型: 467 种 
2020-06-17 09:26:27.962 [INFO ] c.b.r.m.m.service.impl.EhrModelBuildServiceImpl    - [init:97] 初始化字典: 44881 条 
2020-06-17 09:26:27.963 [ERROR] c.b.r.m.process.service.impl.QcProcessServiceImpl  - [init:44] 初始化线程池 
2020-06-17 09:26:28.084 [INFO ] o.s.scheduling.concurrent.ThreadPoolTaskExecutor   - [initialize:171] Initializing ExecutorService 'applicationTaskExecutor' 
2020-06-17 09:26:28.760 [INFO ] org.apache.coyote.http11.Http11NioProtocol         - [log:173] Starting ProtocolHandler ["http-nio-8838"] 
2020-06-17 09:26:28.853 [INFO ] org.apache.coyote.http11.Http11NioProtocol         - [log:173] Pausing ProtocolHandler ["http-nio-8838"] 
2020-06-17 09:26:28.854 [INFO ] org.apache.catalina.core.StandardService           - [log:173] Stopping service [Tomcat] 
2020-06-17 09:26:28.928 [INFO ] org.apache.coyote.http11.Http11NioProtocol         - [log:173] Stopping ProtocolHandler ["http-nio-8838"] 
2020-06-17 09:26:28.930 [INFO ] org.apache.coyote.http11.Http11NioProtocol         - [log:173] Destroying ProtocolHandler ["http-nio-8838"] 
2020-06-17 09:26:28.934 [INFO ] o.s.b.a.l.ConditionEvaluationReportLoggingListener - [logMessage:136]     Error starting ApplicationContext. To display the conditions report re-run your application with 'debug' enabled. 
2020-06-17 09:26:28.935 [ERROR] o.s.b.diagnostics.LoggingFailureAnalysisReporter   - [report:40]     ***************************  APPLICATION FAILED TO START  ***************************    Description:    Web server failed to start. Port 8838 was already in use.    Action:    Identify and stop the process that's listening on port 8838 or configure this application to listen on another port.   
2020-06-17 09:26:28.938 [INFO ] o.s.scheduling.concurrent.ThreadPoolTaskExecutor   - [shutdown:208] Shutting down ExecutorService 'applicationTaskExecutor' 
2020-06-17 09:26:28.944 [INFO ] com.alibaba.druid.pool.DruidDataSource             - [close:1825] {dataSource-1} closed 
2020-06-17 09:26:47.869 [INFO ] com.benetech.rules.RulesApplication                - [logStarting:55] Starting RulesApplication v1.0-SNAPSHOT on DESKTOP-EOCO1V0 with PID 8304 (D:\51\python\project\instance\zyjk\EHR\controlRuleNew\config\healthRecordRules.jar started by ZY in D:\51\python\project\instance\zyjk\EHR\controlRuleNew) 
2020-06-17 09:26:47.873 [DEBUG] com.benetech.rules.RulesApplication                - [logStarting:56] Running with Spring Boot v2.2.1.RELEASE, Spring v5.2.1.RELEASE 
2020-06-17 09:26:47.873 [INFO ] com.benetech.rules.RulesApplication                - [logStartupProfileInfo:655] The following profiles are active: test 
2020-06-17 09:26:50.130 [INFO ] o.s.boot.web.embedded.tomcat.TomcatWebServer       - [initialize:92] Tomcat initialized with port(s): 8838 (http) 
2020-06-17 09:26:50.142 [INFO ] org.apache.coyote.http11.Http11NioProtocol         - [log:173] Initializing ProtocolHandler ["http-nio-8838"] 
2020-06-17 09:26:50.143 [INFO ] org.apache.catalina.core.StandardService           - [log:173] Starting service [Tomcat] 
2020-06-17 09:26:50.143 [INFO ] org.apache.catalina.core.StandardEngine            - [log:173] Starting Servlet engine: [Apache Tomcat/9.0.27] 
2020-06-17 09:26:50.210 [INFO ] o.a.c.c.C.[.[localhost].[/healthRecordRules]       - [log:173] Initializing Spring embedded WebApplicationContext 
2020-06-17 09:26:50.211 [INFO ] org.springframework.web.context.ContextLoader      - [prepareWebApplicationContext:284] Root WebApplicationContext: initialization completed in 2221 ms 
2020-06-17 09:26:50.290 [DEBUG] org.apache.ibatis.logging.LogFactory               - [setImplementation:135] Logging initialized using 'class org.apache.ibatis.logging.slf4j.Slf4jImpl' adapter. 
2020-06-17 09:26:50.643 [WARN ] org.mybatis.spring.SqlSessionFactoryBean           - [buildSqlSessionFactory:467] Can't find class in '[com.benetech.rules.*.entity]' package. Please check your configuration. 
2020-06-17 09:26:51.514 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 09:26:51.514 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 09:26:51.520 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 09:26:51.525 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 09:26:51.525 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 09:26:51.530 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 09:26:51.534 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 09:26:51.535 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 09:26:51.539 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 13 
2020-06-17 09:26:51.543 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 09:26:51.544 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:26:51.548 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 09:26:51.552 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 09:26:51.553 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:26:51.557 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 09:26:51.565 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 09:26:51.565 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 09:26:51.565 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 09:26:51.566 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 09:26:51.570 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 09:26:51.574 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 09:26:51.575 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 09:26:51.578 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 09:26:51.582 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 09:26:51.583 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:26:51.587 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 09:26:51.590 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 09:26:51.591 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:26:51.604 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 09:26:51.608 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 09:26:51.608 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 09:26:51.608 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 09:26:51.609 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 09:26:51.612 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 09:26:51.615 [INFO ] com.alibaba.druid.pool.DruidDataSource             - [init:930] {dataSource-1} inited 
2020-06-17 09:26:51.616 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 09:26:51.617 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 09:26:51.621 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 09:26:51.625 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 09:26:51.626 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:26:51.630 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 09:26:51.634 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 09:26:51.634 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:26:51.639 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 09:26:51.651 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:药物过敏史未填写药物过敏史为空值 
2020-06-17 09:26:51.655 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:与三级医院住院就诊记录表姓名不一致同时满足以下条件： 1、封面《姓名》不为空值 2、三级医院住院就诊记录表《患者姓名》不为空 3、封面《姓名》与住院就诊记录表中《患者姓名》不相等 
2020-06-17 09:26:51.657 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:与三级医院门诊就诊记录表姓名不一致同时满足以下条件： 1、封面《姓名》不为空值 2、三级医院门诊就诊记录表《患者姓名》不为空 3、封面《姓名》与门诊就诊记录表中《患者姓名》不相等 
2020-06-17 09:26:51.658 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:既往史输血时间未填写同时满足以下条件： 1、既往史输血选“有” 2、既往史输血填写了输血原因 3、输血时间为空值 
2020-06-17 09:26:51.659 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:RH超出字典范围RH不在字典范围内（1 阴性 2 阳性 3 不详 ） 
2020-06-17 09:26:51.660 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:既往史手术时间未填写同时满足以下条件： 1、既往史手术选“有” 2、既往史手术填写了手术名称 3、手术时间为空值 
2020-06-17 09:26:51.679 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:姓名长度异常长度>50字符 
2020-06-17 09:26:51.682 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-17 09:26:51.683 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 0e82a90122434b1989a6a6fd97ced399(String), 2020-06-17 09:26:51.682(Timestamp), 31011310200312009116(String), 814b3d0aca3642af82ef320f98d4dfba(String), 2020-06-17 09:26:51.682(Timestamp), 31011310200312009116(String), 847bc4b46918417dab4aa917af3355c3(String), 2020-06-17 09:26:51.682(Timestamp), 31011310200312009116(String), 8987ac9747cd44aa9e6570e08c8dd822(String), 2020-06-17 09:26:51.682(Timestamp), 31011310200312009116(String), 92dc5e8124ba4c5396a3fa7c3d1dd8db(String), 2020-06-17 09:26:51.682(Timestamp), 31011310200312009116(String), 9dd8f43bbd5f4c6bb27aeca1774bc345(String), 2020-06-17 09:26:51.682(Timestamp), 31011310200312009116(String), b8eeb38e528544b28133b9ee94c5fbc4(String), 2020-06-17 09:26:51.682(Timestamp) 
2020-06-17 09:26:51.712 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 7 
2020-06-17 09:26:52.077 [DEBUG] c.b.r.m.e.mapper.RuleEngineMapper.getAllRules      - [debug:159] ==>  Preparing: select a.RuleId as ruleId, a.RuleSql as clazz from HrRule a join HrRuleProps b on a.RuleId = b.RuleId where -- RuleId in ('34278f71cf1d42c88158aaf637fa5203', '8d30baa03bfc4233a8f115c57a0ebf08', '63eb82a44bf64c96a0b9023fa2a3c9d9') a.RuleSql != '' and a.RuleSql is not null and b.Enable = 1  
2020-06-17 09:26:52.093 [DEBUG] c.b.r.m.e.mapper.RuleEngineMapper.getAllRules      - [debug:159] ==> Parameters:  
2020-06-17 09:26:52.248 [DEBUG] c.b.r.m.e.mapper.RuleEngineMapper.getAllRules      - [debug:159] <==      Total: 310 
2020-06-17 09:26:52.496 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [init:68] 加载规则：310 条 
2020-06-17 09:26:52.526 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.getAllCode    - [debug:159] ==>  Preparing: SELECT codeSysType AS type, code AS code, [value] AS value FROM tb_code_value WHERE code != '' AND [value] != ''  
2020-06-17 09:26:52.527 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.getAllCode    - [debug:159] ==> Parameters:  
2020-06-17 09:26:53.838 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.getAllCode    - [debug:159] <==      Total: 44881 
2020-06-17 09:26:53.907 [INFO ] c.b.r.m.m.service.impl.EhrModelBuildServiceImpl    - [init:96] 初始化字典类型: 467 种 
2020-06-17 09:26:53.907 [INFO ] c.b.r.m.m.service.impl.EhrModelBuildServiceImpl    - [init:97] 初始化字典: 44881 条 
2020-06-17 09:26:53.908 [ERROR] c.b.r.m.process.service.impl.QcProcessServiceImpl  - [init:44] 初始化线程池 
2020-06-17 09:26:54.690 [INFO ] o.s.scheduling.concurrent.ThreadPoolTaskExecutor   - [initialize:171] Initializing ExecutorService 'applicationTaskExecutor' 
2020-06-17 09:26:55.157 [INFO ] org.apache.coyote.http11.Http11NioProtocol         - [log:173] Starting ProtocolHandler ["http-nio-8838"] 
2020-06-17 09:26:55.169 [INFO ] org.apache.coyote.http11.Http11NioProtocol         - [log:173] Pausing ProtocolHandler ["http-nio-8838"] 
2020-06-17 09:26:55.170 [INFO ] org.apache.catalina.core.StandardService           - [log:173] Stopping service [Tomcat] 
2020-06-17 09:26:55.179 [INFO ] org.apache.coyote.http11.Http11NioProtocol         - [log:173] Stopping ProtocolHandler ["http-nio-8838"] 
2020-06-17 09:26:55.179 [INFO ] org.apache.coyote.http11.Http11NioProtocol         - [log:173] Destroying ProtocolHandler ["http-nio-8838"] 
2020-06-17 09:26:55.182 [INFO ] o.s.b.a.l.ConditionEvaluationReportLoggingListener - [logMessage:136]     Error starting ApplicationContext. To display the conditions report re-run your application with 'debug' enabled. 
2020-06-17 09:26:55.183 [ERROR] o.s.b.diagnostics.LoggingFailureAnalysisReporter   - [report:40]     ***************************  APPLICATION FAILED TO START  ***************************    Description:    Web server failed to start. Port 8838 was already in use.    Action:    Identify and stop the process that's listening on port 8838 or configure this application to listen on another port.   
2020-06-17 09:26:55.222 [INFO ] o.s.scheduling.concurrent.ThreadPoolTaskExecutor   - [shutdown:208] Shutting down ExecutorService 'applicationTaskExecutor' 
2020-06-17 09:26:55.226 [INFO ] com.alibaba.druid.pool.DruidDataSource             - [close:1825] {dataSource-1} closed 
2020-06-17 09:27:08.434 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 09:27:08.434 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 09:27:08.451 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 09:27:08.456 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 09:27:08.456 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 09:27:08.462 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 09:27:08.467 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 09:27:08.468 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 09:27:08.473 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 13 
2020-06-17 09:27:08.478 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 09:27:08.479 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:27:08.483 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 09:27:08.488 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 09:27:08.489 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:27:08.495 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 09:27:08.500 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 09:27:08.501 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 09:27:08.502 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 09:27:08.503 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 09:27:08.509 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 09:27:08.515 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 09:27:08.517 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 09:27:08.521 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 09:27:08.527 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 09:27:08.528 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:27:08.535 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 09:27:08.540 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 09:27:08.541 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:27:08.557 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 09:27:08.561 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 09:27:08.562 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 09:27:08.562 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 09:27:08.562 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 09:27:08.566 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 09:27:08.571 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 09:27:08.571 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 09:27:08.575 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 09:27:08.580 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 09:27:08.581 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:27:08.585 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 09:27:08.589 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 09:27:08.590 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:27:08.594 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 09:27:08.606 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:药物过敏史未填写药物过敏史为空值 
2020-06-17 09:27:08.628 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:既往史输血时间未填写同时满足以下条件： 1、既往史输血选“有” 2、既往史输血填写了输血原因 3、输血时间为空值 
2020-06-17 09:27:08.630 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:现住址长度异常长度>100字符（包含省市区、乡镇街道名称（如有）、村居委会名称（如有）、详细地址） 
2020-06-17 09:27:08.630 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:RH超出字典范围RH不在字典范围内（1 阴性 2 阳性 3 不详 ） 
2020-06-17 09:27:08.633 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:既往史手术时间未填写同时满足以下条件： 1、既往史手术选“有” 2、既往史手术填写了手术名称 3、手术时间为空值 
2020-06-17 09:27:08.651 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-17 09:27:08.652 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 0e82a90122434b1989a6a6fd97ced399(String), 2020-06-17 09:27:08.65(Timestamp), 31011310200312009116(String), 8987ac9747cd44aa9e6570e08c8dd822(String), 2020-06-17 09:27:08.65(Timestamp), 31011310200312009116(String), 91665e0b2efa4f86aea807ec9f4883c3(String), 2020-06-17 09:27:08.65(Timestamp), 31011310200312009116(String), 92dc5e8124ba4c5396a3fa7c3d1dd8db(String), 2020-06-17 09:27:08.65(Timestamp), 31011310200312009116(String), 9dd8f43bbd5f4c6bb27aeca1774bc345(String), 2020-06-17 09:27:08.65(Timestamp) 
2020-06-17 09:27:08.668 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 5 
2020-06-17 09:27:14.202 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 09:27:14.203 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 09:27:14.210 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 09:27:14.215 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 09:27:14.216 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 09:27:14.227 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 09:27:14.233 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 09:27:14.235 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 09:27:14.249 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 13 
2020-06-17 09:27:14.255 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 09:27:14.256 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:27:14.262 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 09:27:14.268 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 09:27:14.269 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:27:14.276 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 09:27:14.281 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 09:27:14.282 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 09:27:14.283 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 09:27:14.284 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 09:27:14.289 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 09:27:14.296 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 09:27:14.297 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 09:27:14.303 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 09:27:14.308 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 09:27:14.310 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:27:14.315 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 09:27:14.322 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 09:27:14.323 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:27:14.338 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 09:27:14.344 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 09:27:14.345 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 09:27:14.346 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 09:27:14.347 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 09:27:14.352 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 09:27:14.358 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 09:27:14.360 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 09:27:14.365 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 09:27:14.370 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 09:27:14.372 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:27:14.377 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 09:27:14.382 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 09:27:14.382 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:27:14.387 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 09:27:14.404 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:药物过敏史未填写药物过敏史为空值 
2020-06-17 09:27:14.406 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:户籍地址长度异常长度>100字符（包含省市区、乡镇街道名称（如有）、村居委会名称（如有）、详细地址） 
2020-06-17 09:27:14.409 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:既往史输血时间未填写同时满足以下条件： 1、既往史输血选“有” 2、既往史输血填写了输血原因 3、输血时间为空值 
2020-06-17 09:27:14.410 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:RH超出字典范围RH不在字典范围内（1 阴性 2 阳性 3 不详 ） 
2020-06-17 09:27:14.411 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:既往史手术时间未填写同时满足以下条件： 1、既往史手术选“有” 2、既往史手术填写了手术名称 3、手术时间为空值 
2020-06-17 09:27:14.415 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-17 09:27:14.415 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 0e82a90122434b1989a6a6fd97ced399(String), 2020-06-17 09:27:14.414(Timestamp), 31011310200312009116(String), 329b69c7855544e986fc0073b77fe9be(String), 2020-06-17 09:27:14.414(Timestamp), 31011310200312009116(String), 8987ac9747cd44aa9e6570e08c8dd822(String), 2020-06-17 09:27:14.414(Timestamp), 31011310200312009116(String), 92dc5e8124ba4c5396a3fa7c3d1dd8db(String), 2020-06-17 09:27:14.414(Timestamp), 31011310200312009116(String), 9dd8f43bbd5f4c6bb27aeca1774bc345(String), 2020-06-17 09:27:14.414(Timestamp) 
2020-06-17 09:27:14.426 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 5 
2020-06-17 09:27:22.733 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 09:27:22.734 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 09:27:22.739 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 09:27:22.743 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 09:27:22.743 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 09:27:22.749 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 09:27:22.754 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 09:27:22.756 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 09:27:22.763 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 13 
2020-06-17 09:27:22.769 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 09:27:22.770 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:27:22.775 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 09:27:22.782 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 09:27:22.784 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:27:22.791 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 09:27:22.797 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 09:27:22.797 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 09:27:22.799 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 09:27:22.800 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 09:27:22.806 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 09:27:22.812 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 09:27:22.813 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 09:27:22.818 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 09:27:22.823 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 09:27:22.824 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:27:22.830 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 09:27:22.835 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 09:27:22.836 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:27:22.851 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 09:27:22.856 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 09:27:22.857 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 09:27:22.858 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 09:27:22.858 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 09:27:22.865 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 09:27:22.870 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 09:27:22.870 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 09:27:22.875 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 09:27:22.880 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 09:27:22.881 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:27:22.886 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 09:27:22.890 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 09:27:22.891 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:27:22.896 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 09:27:22.920 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:药物过敏史未填写药物过敏史为空值 
2020-06-17 09:27:22.928 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:现住址乡镇（街道）名称长度异常长度>100字符 
2020-06-17 09:27:22.930 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:既往史输血时间未填写同时满足以下条件： 1、既往史输血选“有” 2、既往史输血填写了输血原因 3、输血时间为空值 
2020-06-17 09:27:22.931 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:现住址长度异常长度>100字符（包含省市区、乡镇街道名称（如有）、村居委会名称（如有）、详细地址） 
2020-06-17 09:27:22.931 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:RH超出字典范围RH不在字典范围内（1 阴性 2 阳性 3 不详 ） 
2020-06-17 09:27:22.937 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:既往史手术时间未填写同时满足以下条件： 1、既往史手术选“有” 2、既往史手术填写了手术名称 3、手术时间为空值 
2020-06-17 09:27:22.941 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-17 09:27:22.942 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 0e82a90122434b1989a6a6fd97ced399(String), 2020-06-17 09:27:22.94(Timestamp), 31011310200312009116(String), 40c92f3721704bb7a6eb42a8ca1976b6(String), 2020-06-17 09:27:22.94(Timestamp), 31011310200312009116(String), 8987ac9747cd44aa9e6570e08c8dd822(String), 2020-06-17 09:27:22.94(Timestamp), 31011310200312009116(String), 91665e0b2efa4f86aea807ec9f4883c3(String), 2020-06-17 09:27:22.94(Timestamp), 31011310200312009116(String), 92dc5e8124ba4c5396a3fa7c3d1dd8db(String), 2020-06-17 09:27:22.94(Timestamp), 31011310200312009116(String), 9dd8f43bbd5f4c6bb27aeca1774bc345(String), 2020-06-17 09:27:22.94(Timestamp) 
2020-06-17 09:27:22.959 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 6 
2020-06-17 09:27:27.460 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 09:27:27.461 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 09:27:27.467 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 09:27:27.472 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 09:27:27.472 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 09:27:27.478 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 09:27:27.483 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 09:27:27.484 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 09:27:27.489 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 13 
2020-06-17 09:27:27.495 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 09:27:27.496 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:27:27.500 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 09:27:27.505 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 09:27:27.506 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:27:27.512 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 09:27:27.519 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 09:27:27.519 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 09:27:27.520 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 09:27:27.521 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 09:27:27.527 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 09:27:27.535 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 09:27:27.536 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 09:27:27.541 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 09:27:27.546 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 09:27:27.547 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:27:27.555 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 09:27:27.562 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 09:27:27.563 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:27:27.577 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 09:27:27.581 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 09:27:27.582 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 09:27:27.583 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 09:27:27.583 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 09:27:27.589 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 09:27:27.593 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 09:27:27.594 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 09:27:27.599 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 09:27:27.604 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 09:27:27.605 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:27:27.610 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 09:27:27.615 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 09:27:27.616 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:27:27.620 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 09:27:27.636 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:药物过敏史未填写药物过敏史为空值 
2020-06-17 09:27:27.641 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:既往史输血时间未填写同时满足以下条件： 1、既往史输血选“有” 2、既往史输血填写了输血原因 3、输血时间为空值 
2020-06-17 09:27:27.643 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:现住址长度异常长度>100字符（包含省市区、乡镇街道名称（如有）、村居委会名称（如有）、详细地址） 
2020-06-17 09:27:27.644 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:RH超出字典范围RH不在字典范围内（1 阴性 2 阳性 3 不详 ） 
2020-06-17 09:27:27.645 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:既往史手术时间未填写同时满足以下条件： 1、既往史手术选“有” 2、既往史手术填写了手术名称 3、手术时间为空值 
2020-06-17 09:27:27.645 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:现住址村（居）委会名称长度异常长度>100字符 
2020-06-17 09:27:27.650 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-17 09:27:27.650 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 0e82a90122434b1989a6a6fd97ced399(String), 2020-06-17 09:27:27.649(Timestamp), 31011310200312009116(String), 8987ac9747cd44aa9e6570e08c8dd822(String), 2020-06-17 09:27:27.649(Timestamp), 31011310200312009116(String), 91665e0b2efa4f86aea807ec9f4883c3(String), 2020-06-17 09:27:27.649(Timestamp), 31011310200312009116(String), 92dc5e8124ba4c5396a3fa7c3d1dd8db(String), 2020-06-17 09:27:27.649(Timestamp), 31011310200312009116(String), 9dd8f43bbd5f4c6bb27aeca1774bc345(String), 2020-06-17 09:27:27.649(Timestamp), 31011310200312009116(String), 9df07515be3d4c2887e947c6ce5adace(String), 2020-06-17 09:27:27.649(Timestamp) 
2020-06-17 09:27:27.682 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 6 
2020-06-17 09:27:31.460 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 09:27:31.461 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 09:27:31.469 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 09:27:31.477 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 09:27:31.478 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 09:27:31.486 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 09:27:31.495 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 09:27:31.496 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 09:27:31.502 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 13 
2020-06-17 09:27:31.511 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 09:27:31.512 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:27:31.521 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 09:27:31.526 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 09:27:31.527 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:27:31.534 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 09:27:31.542 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 09:27:31.542 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 09:27:31.543 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 09:27:31.543 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 09:27:31.551 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 09:27:31.556 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 09:27:31.557 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 09:27:31.562 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 09:27:31.567 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 09:27:31.568 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:27:31.573 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 09:27:31.577 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 09:27:31.578 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:27:31.591 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 09:27:31.594 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 09:27:31.595 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 09:27:31.595 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 09:27:31.596 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 09:27:31.600 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 09:27:31.604 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 09:27:31.605 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 09:27:31.614 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 09:27:31.619 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 09:27:31.619 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:27:31.624 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 09:27:31.628 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 09:27:31.629 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:27:31.633 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 09:27:31.645 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:药物过敏史未填写药物过敏史为空值 
2020-06-17 09:27:31.647 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:建档单位长度异常长度>100字符 
2020-06-17 09:27:31.649 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:既往史输血时间未填写同时满足以下条件： 1、既往史输血选“有” 2、既往史输血填写了输血原因 3、输血时间为空值 
2020-06-17 09:27:31.650 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:RH超出字典范围RH不在字典范围内（1 阴性 2 阳性 3 不详 ） 
2020-06-17 09:27:31.651 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:既往史手术时间未填写同时满足以下条件： 1、既往史手术选“有” 2、既往史手术填写了手术名称 3、手术时间为空值 
2020-06-17 09:27:31.654 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-17 09:27:31.654 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 0e82a90122434b1989a6a6fd97ced399(String), 2020-06-17 09:27:31.653(Timestamp), 31011310200312009116(String), 403a97f9ec40406b9723b3c6845a6cee(String), 2020-06-17 09:27:31.653(Timestamp), 31011310200312009116(String), 8987ac9747cd44aa9e6570e08c8dd822(String), 2020-06-17 09:27:31.653(Timestamp), 31011310200312009116(String), 92dc5e8124ba4c5396a3fa7c3d1dd8db(String), 2020-06-17 09:27:31.653(Timestamp), 31011310200312009116(String), 9dd8f43bbd5f4c6bb27aeca1774bc345(String), 2020-06-17 09:27:31.653(Timestamp) 
2020-06-17 09:27:31.674 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 5 
2020-06-17 09:27:35.453 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 09:27:35.454 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 09:27:35.458 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 09:27:35.463 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 09:27:35.464 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 09:27:35.469 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 09:27:35.474 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 09:27:35.474 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 09:27:35.479 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 13 
2020-06-17 09:27:35.484 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 09:27:35.485 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:27:35.490 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 09:27:35.496 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 09:27:35.496 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:27:35.503 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 09:27:35.508 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 09:27:35.508 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 09:27:35.508 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 09:27:35.509 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 09:27:35.516 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 09:27:35.521 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 09:27:35.522 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 09:27:35.527 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 09:27:35.531 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 09:27:35.532 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:27:35.537 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 09:27:35.542 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 09:27:35.543 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:27:35.557 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 09:27:35.561 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 09:27:35.561 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 09:27:35.561 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 09:27:35.562 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 09:27:35.566 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 09:27:35.570 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 09:27:35.571 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 09:27:35.575 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 09:27:35.579 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 09:27:35.579 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:27:35.584 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 09:27:35.588 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 09:27:35.588 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:27:35.593 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 09:27:35.605 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:药物过敏史未填写药物过敏史为空值 
2020-06-17 09:27:35.609 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:既往史输血时间未填写同时满足以下条件： 1、既往史输血选“有” 2、既往史输血填写了输血原因 3、输血时间为空值 
2020-06-17 09:27:35.609 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:RH超出字典范围RH不在字典范围内（1 阴性 2 阳性 3 不详 ） 
2020-06-17 09:27:35.610 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:既往史手术时间未填写同时满足以下条件： 1、既往史手术选“有” 2、既往史手术填写了手术名称 3、手术时间为空值 
2020-06-17 09:27:35.613 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-17 09:27:35.613 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 0e82a90122434b1989a6a6fd97ced399(String), 2020-06-17 09:27:35.612(Timestamp), 31011310200312009116(String), 8987ac9747cd44aa9e6570e08c8dd822(String), 2020-06-17 09:27:35.612(Timestamp), 31011310200312009116(String), 92dc5e8124ba4c5396a3fa7c3d1dd8db(String), 2020-06-17 09:27:35.612(Timestamp), 31011310200312009116(String), 9dd8f43bbd5f4c6bb27aeca1774bc345(String), 2020-06-17 09:27:35.612(Timestamp) 
2020-06-17 09:27:35.632 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 4 
2020-06-17 09:27:39.400 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 09:27:39.401 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 09:27:39.413 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 09:27:39.419 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 09:27:39.420 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 09:27:39.425 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 09:27:39.431 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 09:27:39.431 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 09:27:39.436 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 13 
2020-06-17 09:27:39.441 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 09:27:39.441 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:27:39.447 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 09:27:39.452 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 09:27:39.453 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:27:39.459 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 09:27:39.464 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 09:27:39.464 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 09:27:39.465 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 09:27:39.465 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 09:27:39.470 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 09:27:39.475 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 09:27:39.476 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 09:27:39.480 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 09:27:39.485 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 09:27:39.485 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:27:39.490 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 09:27:39.495 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 09:27:39.496 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:27:39.509 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 09:27:39.513 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 09:27:39.514 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 09:27:39.515 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 09:27:39.515 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 09:27:39.520 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 09:27:39.524 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 09:27:39.525 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 09:27:39.529 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 09:27:39.533 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 09:27:39.533 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:27:39.537 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 09:27:39.541 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 09:27:39.542 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:27:39.547 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 09:27:39.559 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:药物过敏史未填写药物过敏史为空值 
2020-06-17 09:27:39.562 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:既往史输血时间未填写同时满足以下条件： 1、既往史输血选“有” 2、既往史输血填写了输血原因 3、输血时间为空值 
2020-06-17 09:27:39.563 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:责任医生长度异常长度>50字符 
2020-06-17 09:27:39.563 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:RH超出字典范围RH不在字典范围内（1 阴性 2 阳性 3 不详 ） 
2020-06-17 09:27:39.564 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:既往史手术时间未填写同时满足以下条件： 1、既往史手术选“有” 2、既往史手术填写了手术名称 3、手术时间为空值 
2020-06-17 09:27:39.566 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-17 09:27:39.567 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 0e82a90122434b1989a6a6fd97ced399(String), 2020-06-17 09:27:39.566(Timestamp), 31011310200312009116(String), 8987ac9747cd44aa9e6570e08c8dd822(String), 2020-06-17 09:27:39.566(Timestamp), 31011310200312009116(String), 9042bba97fb74b558de96e35ab2ffdc2(String), 2020-06-17 09:27:39.566(Timestamp), 31011310200312009116(String), 92dc5e8124ba4c5396a3fa7c3d1dd8db(String), 2020-06-17 09:27:39.566(Timestamp), 31011310200312009116(String), 9dd8f43bbd5f4c6bb27aeca1774bc345(String), 2020-06-17 09:27:39.566(Timestamp) 
2020-06-17 09:27:39.581 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 5 
2020-06-17 09:27:50.157 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 09:27:50.158 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 09:27:50.166 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 09:27:50.170 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 09:27:50.171 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 09:27:50.177 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 09:27:50.186 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 09:27:50.187 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 09:27:50.193 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 13 
2020-06-17 09:27:50.199 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 09:27:50.200 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:27:50.205 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 09:27:50.211 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 09:27:50.212 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:27:50.221 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 09:27:50.229 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 09:27:50.229 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 09:27:50.230 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 09:27:50.230 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 09:27:50.235 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 09:27:50.240 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 09:27:50.240 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 09:27:50.245 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 09:27:50.250 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 09:27:50.250 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:27:50.255 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 09:27:50.260 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 09:27:50.260 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:27:50.273 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 09:27:50.277 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 09:27:50.278 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 09:27:50.278 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 09:27:50.278 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 09:27:50.282 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 09:27:50.287 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 09:27:50.287 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 09:27:50.291 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 09:27:50.296 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 09:27:50.296 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:27:50.300 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 09:27:50.305 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 09:27:50.305 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:27:50.309 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 09:27:50.321 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:药物过敏史未填写药物过敏史为空值 
2020-06-17 09:27:50.323 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:个人基本信息表工作单位工作单位不为汉字 
2020-06-17 09:27:50.325 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:既往史输血时间未填写同时满足以下条件： 1、既往史输血选“有” 2、既往史输血填写了输血原因 3、输血时间为空值 
2020-06-17 09:27:50.325 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:RH超出字典范围RH不在字典范围内（1 阴性 2 阳性 3 不详 ） 
2020-06-17 09:27:50.326 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:既往史手术时间未填写同时满足以下条件： 1、既往史手术选“有” 2、既往史手术填写了手术名称 3、手术时间为空值 
2020-06-17 09:27:50.329 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-17 09:27:50.329 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 0e82a90122434b1989a6a6fd97ced399(String), 2020-06-17 09:27:50.328(Timestamp), 31011310200312009116(String), 4ad5f41e777d499894964fe735a4ed46(String), 2020-06-17 09:27:50.328(Timestamp), 31011310200312009116(String), 8987ac9747cd44aa9e6570e08c8dd822(String), 2020-06-17 09:27:50.328(Timestamp), 31011310200312009116(String), 92dc5e8124ba4c5396a3fa7c3d1dd8db(String), 2020-06-17 09:27:50.328(Timestamp), 31011310200312009116(String), 9dd8f43bbd5f4c6bb27aeca1774bc345(String), 2020-06-17 09:27:50.328(Timestamp) 
2020-06-17 09:27:50.346 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 5 
2020-06-17 09:27:57.673 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 09:27:57.674 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 09:27:57.680 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 09:27:57.685 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 09:27:57.686 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 09:27:57.692 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 09:27:57.697 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 09:27:57.697 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 09:27:57.702 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 13 
2020-06-17 09:27:57.707 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 09:27:57.708 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:27:57.713 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 09:27:57.718 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 09:27:57.719 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:27:57.725 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 09:27:57.731 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 09:27:57.731 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 09:27:57.732 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 09:27:57.732 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 09:27:57.737 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 09:27:57.741 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 09:27:57.742 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 09:27:57.747 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 09:27:57.753 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 09:27:57.754 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:27:57.759 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 09:27:57.764 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 09:27:57.764 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:27:57.782 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 09:27:57.787 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 09:27:57.788 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 09:27:57.789 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 09:27:57.789 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 09:27:57.794 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 09:27:57.799 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 09:27:57.800 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 09:27:57.810 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 09:27:57.815 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 09:27:57.816 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:27:57.821 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 09:27:57.826 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 09:27:57.827 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:27:57.832 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 09:27:57.849 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:药物过敏史未填写药物过敏史为空值 
2020-06-17 09:27:57.850 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:联系人姓名填写为数字同时满足以下条件： 1、联系人姓名不为空值 2、联系人姓名为纯数字 
2020-06-17 09:27:57.852 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:既往史输血时间未填写同时满足以下条件： 1、既往史输血选“有” 2、既往史输血填写了输血原因 3、输血时间为空值 
2020-06-17 09:27:57.853 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:RH超出字典范围RH不在字典范围内（1 阴性 2 阳性 3 不详 ） 
2020-06-17 09:27:57.854 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:既往史手术时间未填写同时满足以下条件： 1、既往史手术选“有” 2、既往史手术填写了手术名称 3、手术时间为空值 
2020-06-17 09:27:57.857 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-17 09:27:57.857 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 0e82a90122434b1989a6a6fd97ced399(String), 2020-06-17 09:27:57.856(Timestamp), 31011310200312009116(String), 1a7e1f2e0bce421585a1fad889411dd4(String), 2020-06-17 09:27:57.856(Timestamp), 31011310200312009116(String), 8987ac9747cd44aa9e6570e08c8dd822(String), 2020-06-17 09:27:57.856(Timestamp), 31011310200312009116(String), 92dc5e8124ba4c5396a3fa7c3d1dd8db(String), 2020-06-17 09:27:57.856(Timestamp), 31011310200312009116(String), 9dd8f43bbd5f4c6bb27aeca1774bc345(String), 2020-06-17 09:27:57.856(Timestamp) 
2020-06-17 09:27:57.878 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 5 
2020-06-17 09:28:01.319 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 09:28:01.320 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 09:28:01.325 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 09:28:01.330 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 09:28:01.331 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 09:28:01.336 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 09:28:01.341 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 09:28:01.341 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 09:28:01.346 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 13 
2020-06-17 09:28:01.351 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 09:28:01.351 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:28:01.356 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 09:28:01.360 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 09:28:01.360 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:28:01.368 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 09:28:01.374 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 09:28:01.374 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 09:28:01.374 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 09:28:01.375 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 09:28:01.380 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 09:28:01.389 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 09:28:01.390 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 09:28:01.395 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 09:28:01.400 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 09:28:01.400 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:28:01.405 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 09:28:01.409 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 09:28:01.410 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:28:01.426 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 09:28:01.432 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 09:28:01.432 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 09:28:01.432 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 09:28:01.433 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 09:28:01.441 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 09:28:01.446 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 09:28:01.446 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 09:28:01.451 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 09:28:01.455 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 09:28:01.456 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:28:01.462 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 09:28:01.467 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 09:28:01.468 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:28:01.473 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 09:28:01.484 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:药物过敏史未填写药物过敏史为空值 
2020-06-17 09:28:01.488 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:既往史输血时间未填写同时满足以下条件： 1、既往史输血选“有” 2、既往史输血填写了输血原因 3、输血时间为空值 
2020-06-17 09:28:01.489 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:RH超出字典范围RH不在字典范围内（1 阴性 2 阳性 3 不详 ） 
2020-06-17 09:28:01.489 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:既往史手术时间未填写同时满足以下条件： 1、既往史手术选“有” 2、既往史手术填写了手术名称 3、手术时间为空值 
2020-06-17 09:28:01.492 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-17 09:28:01.492 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 0e82a90122434b1989a6a6fd97ced399(String), 2020-06-17 09:28:01.491(Timestamp), 31011310200312009116(String), 8987ac9747cd44aa9e6570e08c8dd822(String), 2020-06-17 09:28:01.491(Timestamp), 31011310200312009116(String), 92dc5e8124ba4c5396a3fa7c3d1dd8db(String), 2020-06-17 09:28:01.491(Timestamp), 31011310200312009116(String), 9dd8f43bbd5f4c6bb27aeca1774bc345(String), 2020-06-17 09:28:01.491(Timestamp) 
2020-06-17 09:28:01.511 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 4 
2020-06-17 09:28:07.898 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 09:28:07.898 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 09:28:07.929 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 09:28:07.955 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 09:28:07.956 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 09:28:07.968 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 09:28:07.983 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 09:28:07.985 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 09:28:08.014 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 13 
2020-06-17 09:28:08.058 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 09:28:08.059 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:28:08.074 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 09:28:08.082 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 09:28:08.083 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:28:08.091 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 09:28:08.097 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 09:28:08.098 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 09:28:08.099 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 09:28:08.100 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 09:28:08.106 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 09:28:08.112 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 09:28:08.113 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 09:28:08.118 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 09:28:08.129 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 09:28:08.130 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:28:08.136 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 09:28:08.143 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 09:28:08.143 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:28:08.161 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 09:28:08.174 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 09:28:08.175 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 09:28:08.175 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 09:28:08.176 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 09:28:08.190 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 09:28:08.204 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 09:28:08.205 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 09:28:08.211 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 09:28:08.219 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 09:28:08.220 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:28:08.226 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 09:28:08.235 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 09:28:08.236 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:28:08.250 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 09:28:08.270 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:药物过敏史未填写药物过敏史为空值 
2020-06-17 09:28:08.275 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:既往史输血时间未填写同时满足以下条件： 1、既往史输血选“有” 2、既往史输血填写了输血原因 3、输血时间为空值 
2020-06-17 09:28:08.276 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:RH超出字典范围RH不在字典范围内（1 阴性 2 阳性 3 不详 ） 
2020-06-17 09:28:08.277 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:既往史手术时间未填写同时满足以下条件： 1、既往史手术选“有” 2、既往史手术填写了手术名称 3、手术时间为空值 
2020-06-17 09:28:08.282 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-17 09:28:08.283 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 0e82a90122434b1989a6a6fd97ced399(String), 2020-06-17 09:28:08.281(Timestamp), 31011310200312009116(String), 8987ac9747cd44aa9e6570e08c8dd822(String), 2020-06-17 09:28:08.281(Timestamp), 31011310200312009116(String), 92dc5e8124ba4c5396a3fa7c3d1dd8db(String), 2020-06-17 09:28:08.281(Timestamp), 31011310200312009116(String), 9dd8f43bbd5f4c6bb27aeca1774bc345(String), 2020-06-17 09:28:08.281(Timestamp) 
2020-06-17 09:28:08.319 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 4 
2020-06-17 09:28:15.998 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 09:28:15.999 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 09:28:16.004 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 09:28:16.013 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 09:28:16.014 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 09:28:16.021 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 09:28:16.029 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 09:28:16.029 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 09:28:16.037 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 13 
2020-06-17 09:28:16.045 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 09:28:16.046 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:28:16.054 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 09:28:16.062 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 09:28:16.063 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:28:16.075 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 09:28:16.083 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 09:28:16.083 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 09:28:16.084 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 09:28:16.085 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 09:28:16.091 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 09:28:16.101 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 09:28:16.102 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 09:28:16.109 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 09:28:16.117 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 09:28:16.119 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:28:16.126 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 09:28:16.135 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 09:28:16.136 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:28:16.161 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 09:28:16.168 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 09:28:16.169 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 09:28:16.170 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 09:28:16.172 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 09:28:16.181 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 09:28:16.189 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 09:28:16.190 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 09:28:16.197 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 09:28:16.207 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 09:28:16.208 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:28:16.214 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 09:28:16.268 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 09:28:16.269 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:28:16.278 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 09:28:16.304 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:药物过敏史未填写药物过敏史为空值 
2020-06-17 09:28:16.309 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:既往史输血时间未填写同时满足以下条件： 1、既往史输血选“有” 2、既往史输血填写了输血原因 3、输血时间为空值 
2020-06-17 09:28:16.310 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:RH超出字典范围RH不在字典范围内（1 阴性 2 阳性 3 不详 ） 
2020-06-17 09:28:16.311 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:既往史手术时间未填写同时满足以下条件： 1、既往史手术选“有” 2、既往史手术填写了手术名称 3、手术时间为空值 
2020-06-17 09:28:16.315 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-17 09:28:16.316 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 0e82a90122434b1989a6a6fd97ced399(String), 2020-06-17 09:28:16.315(Timestamp), 31011310200312009116(String), 8987ac9747cd44aa9e6570e08c8dd822(String), 2020-06-17 09:28:16.315(Timestamp), 31011310200312009116(String), 92dc5e8124ba4c5396a3fa7c3d1dd8db(String), 2020-06-17 09:28:16.315(Timestamp), 31011310200312009116(String), 9dd8f43bbd5f4c6bb27aeca1774bc345(String), 2020-06-17 09:28:16.315(Timestamp) 
2020-06-17 09:28:16.342 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 4 
2020-06-17 09:28:24.378 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 09:28:24.378 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 09:28:24.383 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 09:28:24.388 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 09:28:24.389 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 09:28:24.394 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 09:28:24.399 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 09:28:24.399 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 09:28:24.405 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 13 
2020-06-17 09:28:24.410 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 09:28:24.410 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:28:24.415 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 09:28:24.419 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 09:28:24.420 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:28:24.425 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 09:28:24.430 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 09:28:24.430 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 09:28:24.431 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 09:28:24.431 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 09:28:24.435 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 09:28:24.440 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 09:28:24.440 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 09:28:24.445 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 09:28:24.449 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 09:28:24.449 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:28:24.454 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 09:28:24.457 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 09:28:24.457 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:28:24.470 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 09:28:24.474 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 09:28:24.475 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 09:28:24.475 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 09:28:24.475 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 09:28:24.479 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 09:28:24.484 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 09:28:24.484 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 09:28:24.488 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 09:28:24.492 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 09:28:24.493 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:28:24.497 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 09:28:24.501 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 09:28:24.501 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:28:24.505 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 09:28:24.517 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:药物过敏史未填写药物过敏史为空值 
2020-06-17 09:28:24.520 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:既往史输血时间未填写同时满足以下条件： 1、既往史输血选“有” 2、既往史输血填写了输血原因 3、输血时间为空值 
2020-06-17 09:28:24.521 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:既往史手术时间未填写同时满足以下条件： 1、既往史手术选“有” 2、既往史手术填写了手术名称 3、手术时间为空值 
2020-06-17 09:28:24.521 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:血型与RH血型逻辑不符同时满足以下条件： 1、个人基本信息表《血型》填写为“不详” 2、个人基本信息表《RH血型》填写为“阴性”或“阳性” 
2020-06-17 09:28:24.523 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-17 09:28:24.524 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 0e82a90122434b1989a6a6fd97ced399(String), 2020-06-17 09:28:24.523(Timestamp), 31011310200312009116(String), 8987ac9747cd44aa9e6570e08c8dd822(String), 2020-06-17 09:28:24.523(Timestamp), 31011310200312009116(String), 9dd8f43bbd5f4c6bb27aeca1774bc345(String), 2020-06-17 09:28:24.523(Timestamp), 31011310200312009116(String), a58b2894635045b18a63c250d46ce8a8(String), 2020-06-17 09:28:24.523(Timestamp) 
2020-06-17 09:28:24.558 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 4 
2020-06-17 09:28:30.564 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 09:28:30.565 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 09:28:30.582 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 09:28:30.588 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 09:28:30.589 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 09:28:30.593 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 09:28:30.601 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 09:28:30.602 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 09:28:30.608 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 13 
2020-06-17 09:28:30.613 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 09:28:30.614 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:28:30.621 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 09:28:30.628 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 09:28:30.629 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:28:30.638 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 09:28:30.643 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 09:28:30.644 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 09:28:30.645 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 09:28:30.646 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 09:28:30.652 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 09:28:30.658 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 09:28:30.659 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 09:28:30.669 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 09:28:30.674 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 09:28:30.675 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:28:30.681 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 09:28:30.687 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 09:28:30.688 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:28:30.705 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 09:28:30.710 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 09:28:30.711 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 09:28:30.712 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 09:28:30.713 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 09:28:30.718 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 09:28:30.724 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 09:28:30.725 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 09:28:30.731 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 09:28:30.737 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 09:28:30.738 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:28:30.743 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 09:28:30.748 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 09:28:30.749 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:28:30.756 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 09:28:30.779 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:药物过敏史未填写药物过敏史为空值 
2020-06-17 09:28:30.787 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:既往史输血时间未填写同时满足以下条件： 1、既往史输血选“有” 2、既往史输血填写了输血原因 3、输血时间为空值 
2020-06-17 09:28:30.788 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:既往史手术时间未填写同时满足以下条件： 1、既往史手术选“有” 2、既往史手术填写了手术名称 3、手术时间为空值 
2020-06-17 09:28:30.789 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:血型与RH血型逻辑不符同时满足以下条件： 1、个人基本信息表《血型》填写为“不详” 2、个人基本信息表《RH血型》填写为“阴性”或“阳性” 
2020-06-17 09:28:30.792 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-17 09:28:30.792 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 0e82a90122434b1989a6a6fd97ced399(String), 2020-06-17 09:28:30.791(Timestamp), 31011310200312009116(String), 8987ac9747cd44aa9e6570e08c8dd822(String), 2020-06-17 09:28:30.791(Timestamp), 31011310200312009116(String), 9dd8f43bbd5f4c6bb27aeca1774bc345(String), 2020-06-17 09:28:30.791(Timestamp), 31011310200312009116(String), a58b2894635045b18a63c250d46ce8a8(String), 2020-06-17 09:28:30.791(Timestamp) 
2020-06-17 09:28:30.899 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 4 
2020-06-17 09:28:43.266 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 09:28:43.266 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 09:28:43.272 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 09:28:43.278 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 09:28:43.279 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 09:28:43.295 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 09:28:43.299 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 09:28:43.300 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 09:28:43.304 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 13 
2020-06-17 09:28:43.309 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 09:28:43.309 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:28:43.314 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 09:28:43.321 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 09:28:43.322 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:28:43.331 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 09:28:43.336 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 09:28:43.337 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 09:28:43.337 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 09:28:43.338 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 09:28:43.343 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 09:28:43.347 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 09:28:43.348 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 09:28:43.352 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 09:28:43.357 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 09:28:43.358 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:28:43.363 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 09:28:43.368 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 09:28:43.369 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:28:43.385 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 09:28:43.389 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 09:28:43.390 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 09:28:43.390 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 09:28:43.390 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 09:28:43.395 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 09:28:43.400 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 09:28:43.400 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 09:28:43.404 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 09:28:43.408 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 09:28:43.409 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:28:43.413 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 09:28:43.418 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 09:28:43.418 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:28:43.423 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 09:28:43.435 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:药物过敏史未填写药物过敏史为空值 
2020-06-17 09:28:43.437 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:个人基本信息表既往史既往史疾病确诊时间未填写 
2020-06-17 09:28:43.438 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:既往史输血时间未填写同时满足以下条件： 1、既往史输血选“有” 2、既往史输血填写了输血原因 3、输血时间为空值 
2020-06-17 09:28:43.439 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:个人基本信息表既往史既往史疾病确诊时间填写不规范 
2020-06-17 09:28:43.439 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:既往史手术时间未填写同时满足以下条件： 1、既往史手术选“有” 2、既往史手术填写了手术名称 3、手术时间为空值 
2020-06-17 09:28:43.439 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:血型与RH血型逻辑不符同时满足以下条件： 1、个人基本信息表《血型》填写为“不详” 2、个人基本信息表《RH血型》填写为“阴性”或“阳性” 
2020-06-17 09:28:43.442 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-17 09:28:43.443 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 0e82a90122434b1989a6a6fd97ced399(String), 2020-06-17 09:28:43.442(Timestamp), 31011310200312009116(String), 6302b0fcdcd7482099581602a1fec501(String), 2020-06-17 09:28:43.442(Timestamp), 31011310200312009116(String), 8987ac9747cd44aa9e6570e08c8dd822(String), 2020-06-17 09:28:43.442(Timestamp), 31011310200312009116(String), 923bfb7880204efa8f26fd200d1bd17e(String), 2020-06-17 09:28:43.442(Timestamp), 31011310200312009116(String), 9dd8f43bbd5f4c6bb27aeca1774bc345(String), 2020-06-17 09:28:43.442(Timestamp), 31011310200312009116(String), a58b2894635045b18a63c250d46ce8a8(String), 2020-06-17 09:28:43.442(Timestamp) 
2020-06-17 09:28:43.456 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 6 
2020-06-17 09:30:21.128 [INFO ] com.benetech.rules.RulesApplication                - [logStarting:55] Starting RulesApplication v1.0-SNAPSHOT on DESKTOP-EOCO1V0 with PID 10388 (D:\51\python\project\instance\zyjk\EHR\controlRuleNew\config\healthRecordRules.jar started by ZY in D:\51\python\project\instance\zyjk\EHR\controlRuleNew) 
2020-06-17 09:30:21.131 [DEBUG] com.benetech.rules.RulesApplication                - [logStarting:56] Running with Spring Boot v2.2.1.RELEASE, Spring v5.2.1.RELEASE 
2020-06-17 09:30:21.132 [INFO ] com.benetech.rules.RulesApplication                - [logStartupProfileInfo:655] The following profiles are active: test 
2020-06-17 09:30:22.614 [INFO ] o.s.boot.web.embedded.tomcat.TomcatWebServer       - [initialize:92] Tomcat initialized with port(s): 8838 (http) 
2020-06-17 09:30:22.626 [INFO ] org.apache.coyote.http11.Http11NioProtocol         - [log:173] Initializing ProtocolHandler ["http-nio-8838"] 
2020-06-17 09:30:22.627 [INFO ] org.apache.catalina.core.StandardService           - [log:173] Starting service [Tomcat] 
2020-06-17 09:30:22.627 [INFO ] org.apache.catalina.core.StandardEngine            - [log:173] Starting Servlet engine: [Apache Tomcat/9.0.27] 
2020-06-17 09:30:22.694 [INFO ] o.a.c.c.C.[.[localhost].[/healthRecordRules]       - [log:173] Initializing Spring embedded WebApplicationContext 
2020-06-17 09:30:22.695 [INFO ] org.springframework.web.context.ContextLoader      - [prepareWebApplicationContext:284] Root WebApplicationContext: initialization completed in 1456 ms 
2020-06-17 09:30:22.774 [DEBUG] org.apache.ibatis.logging.LogFactory               - [setImplementation:135] Logging initialized using 'class org.apache.ibatis.logging.slf4j.Slf4jImpl' adapter. 
2020-06-17 09:30:23.016 [WARN ] org.mybatis.spring.SqlSessionFactoryBean           - [buildSqlSessionFactory:467] Can't find class in '[com.benetech.rules.*.entity]' package. Please check your configuration. 
2020-06-17 09:30:23.674 [INFO ] com.alibaba.druid.pool.DruidDataSource             - [init:930] {dataSource-1} inited 
2020-06-17 09:30:23.897 [DEBUG] c.b.r.m.e.mapper.RuleEngineMapper.getAllRules      - [debug:159] ==>  Preparing: select a.RuleId as ruleId, a.RuleSql as clazz from HrRule a join HrRuleProps b on a.RuleId = b.RuleId where -- RuleId in ('34278f71cf1d42c88158aaf637fa5203', '8d30baa03bfc4233a8f115c57a0ebf08', '63eb82a44bf64c96a0b9023fa2a3c9d9') a.RuleSql != '' and a.RuleSql is not null and b.Enable = 1  
2020-06-17 09:30:23.920 [DEBUG] c.b.r.m.e.mapper.RuleEngineMapper.getAllRules      - [debug:159] ==> Parameters:  
2020-06-17 09:30:23.996 [DEBUG] c.b.r.m.e.mapper.RuleEngineMapper.getAllRules      - [debug:159] <==      Total: 310 
2020-06-17 09:30:24.208 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [init:68] 加载规则：310 条 
2020-06-17 09:30:24.223 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.getAllCode    - [debug:159] ==>  Preparing: SELECT codeSysType AS type, code AS code, [value] AS value FROM tb_code_value WHERE code != '' AND [value] != ''  
2020-06-17 09:30:24.224 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.getAllCode    - [debug:159] ==> Parameters:  
2020-06-17 09:30:24.709 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.getAllCode    - [debug:159] <==      Total: 44881 
2020-06-17 09:30:24.735 [INFO ] c.b.r.m.m.service.impl.EhrModelBuildServiceImpl    - [init:96] 初始化字典类型: 467 种 
2020-06-17 09:30:24.735 [INFO ] c.b.r.m.m.service.impl.EhrModelBuildServiceImpl    - [init:97] 初始化字典: 44881 条 
2020-06-17 09:30:24.736 [ERROR] c.b.r.m.process.service.impl.QcProcessServiceImpl  - [init:44] 初始化线程池 
2020-06-17 09:30:24.861 [INFO ] o.s.scheduling.concurrent.ThreadPoolTaskExecutor   - [initialize:171] Initializing ExecutorService 'applicationTaskExecutor' 
2020-06-17 09:30:25.090 [INFO ] org.apache.coyote.http11.Http11NioProtocol         - [log:173] Starting ProtocolHandler ["http-nio-8838"] 
2020-06-17 09:30:25.103 [INFO ] org.apache.coyote.http11.Http11NioProtocol         - [log:173] Pausing ProtocolHandler ["http-nio-8838"] 
2020-06-17 09:30:25.104 [INFO ] org.apache.catalina.core.StandardService           - [log:173] Stopping service [Tomcat] 
2020-06-17 09:30:25.107 [INFO ] org.apache.coyote.http11.Http11NioProtocol         - [log:173] Stopping ProtocolHandler ["http-nio-8838"] 
2020-06-17 09:30:25.108 [INFO ] org.apache.coyote.http11.Http11NioProtocol         - [log:173] Destroying ProtocolHandler ["http-nio-8838"] 
2020-06-17 09:30:25.110 [INFO ] o.s.b.a.l.ConditionEvaluationReportLoggingListener - [logMessage:136]     Error starting ApplicationContext. To display the conditions report re-run your application with 'debug' enabled. 
2020-06-17 09:30:25.112 [ERROR] o.s.b.diagnostics.LoggingFailureAnalysisReporter   - [report:40]     ***************************  APPLICATION FAILED TO START  ***************************    Description:    Web server failed to start. Port 8838 was already in use.    Action:    Identify and stop the process that's listening on port 8838 or configure this application to listen on another port.   
2020-06-17 09:30:25.114 [INFO ] o.s.scheduling.concurrent.ThreadPoolTaskExecutor   - [shutdown:208] Shutting down ExecutorService 'applicationTaskExecutor' 
2020-06-17 09:30:25.118 [INFO ] com.alibaba.druid.pool.DruidDataSource             - [close:1825] {dataSource-1} closed 
2020-06-17 09:30:25.705 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 09:30:25.706 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 09:30:25.722 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 09:30:25.727 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 09:30:25.728 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 09:30:25.733 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 09:30:25.737 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 09:30:25.737 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 09:30:25.742 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 13 
2020-06-17 09:30:25.746 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 09:30:25.746 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:30:25.750 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 09:30:25.754 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 09:30:25.754 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:30:25.759 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 09:30:25.764 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 09:30:25.764 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 09:30:25.764 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 09:30:25.765 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 09:30:25.769 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 09:30:25.775 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 09:30:25.776 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 09:30:25.779 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 09:30:25.786 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 09:30:25.787 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:30:25.792 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 09:30:25.798 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 09:30:25.799 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:30:25.813 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 09:30:25.818 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 09:30:25.819 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 09:30:25.820 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 09:30:25.820 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 09:30:25.825 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 09:30:25.830 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 09:30:25.831 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 09:30:25.836 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 09:30:25.842 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 09:30:25.843 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:30:25.848 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 09:30:25.854 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 09:30:25.855 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:30:25.861 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 09:30:25.883 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:药物过敏史未填写药物过敏史为空值 
2020-06-17 09:30:25.891 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:与三级医院住院就诊记录表姓名不一致同时满足以下条件： 1、封面《姓名》不为空值 2、三级医院住院就诊记录表《患者姓名》不为空 3、封面《姓名》与住院就诊记录表中《患者姓名》不相等 
2020-06-17 09:30:25.892 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:与三级医院门诊就诊记录表姓名不一致同时满足以下条件： 1、封面《姓名》不为空值 2、三级医院门诊就诊记录表《患者姓名》不为空 3、封面《姓名》与门诊就诊记录表中《患者姓名》不相等 
2020-06-17 09:30:25.895 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:血型与RH血型逻辑不符同时满足以下条件： 1、个人基本信息表《血型》填写为“不详” 2、个人基本信息表《RH血型》填写为“阴性”或“阳性” 
2020-06-17 09:30:25.896 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:姓名长度异常长度>50字符 
2020-06-17 09:30:25.900 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-17 09:30:25.901 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 0e82a90122434b1989a6a6fd97ced399(String), 2020-06-17 09:30:25.9(Timestamp), 31011310200312009116(String), 814b3d0aca3642af82ef320f98d4dfba(String), 2020-06-17 09:30:25.9(Timestamp), 31011310200312009116(String), 847bc4b46918417dab4aa917af3355c3(String), 2020-06-17 09:30:25.9(Timestamp), 31011310200312009116(String), a58b2894635045b18a63c250d46ce8a8(String), 2020-06-17 09:30:25.9(Timestamp), 31011310200312009116(String), b8eeb38e528544b28133b9ee94c5fbc4(String), 2020-06-17 09:30:25.9(Timestamp) 
2020-06-17 09:30:25.918 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 5 
2020-06-17 09:30:39.186 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 09:30:39.187 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 09:30:39.192 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 09:30:39.197 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 09:30:39.197 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 09:30:39.203 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 09:30:39.208 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 09:30:39.208 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 09:30:39.213 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 13 
2020-06-17 09:30:39.218 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 09:30:39.219 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:30:39.224 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 09:30:39.228 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 09:30:39.229 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:30:39.234 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 09:30:39.239 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 09:30:39.239 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 09:30:39.239 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 09:30:39.240 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 09:30:39.244 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 09:30:39.248 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 09:30:39.248 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 09:30:39.254 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 09:30:39.258 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 09:30:39.259 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:30:39.264 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 09:30:39.268 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 09:30:39.269 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:30:39.282 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 09:30:39.287 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 09:30:39.287 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 09:30:39.287 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 09:30:39.289 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 09:30:39.298 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 09:30:39.302 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 09:30:39.303 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 09:30:39.309 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 09:30:39.315 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 09:30:39.315 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:30:39.320 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 09:30:39.324 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 09:30:39.325 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:30:39.329 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 09:30:39.348 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:药物过敏史未填写药物过敏史为空值 
2020-06-17 09:30:39.352 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:现住址长度异常长度>100字符（包含省市区、乡镇街道名称（如有）、村居委会名称（如有）、详细地址） 
2020-06-17 09:30:39.353 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:血型与RH血型逻辑不符同时满足以下条件： 1、个人基本信息表《血型》填写为“不详” 2、个人基本信息表《RH血型》填写为“阴性”或“阳性” 
2020-06-17 09:30:39.356 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-17 09:30:39.357 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 0e82a90122434b1989a6a6fd97ced399(String), 2020-06-17 09:30:39.356(Timestamp), 31011310200312009116(String), 91665e0b2efa4f86aea807ec9f4883c3(String), 2020-06-17 09:30:39.356(Timestamp), 31011310200312009116(String), a58b2894635045b18a63c250d46ce8a8(String), 2020-06-17 09:30:39.356(Timestamp) 
2020-06-17 09:30:39.383 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 3 
2020-06-17 09:30:45.021 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 09:30:45.022 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 09:30:45.027 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 09:30:45.033 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 09:30:45.033 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 09:30:45.039 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 09:30:45.044 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 09:30:45.046 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 09:30:45.053 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-17 09:30:45.059 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 09:30:45.060 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:30:45.066 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 09:30:45.072 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 09:30:45.073 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:30:45.079 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 09:30:45.084 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 09:30:45.085 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 09:30:45.086 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 09:30:45.087 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 09:30:45.094 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 09:30:45.099 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 09:30:45.100 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 09:30:45.105 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 09:30:45.109 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 09:30:45.110 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:30:45.114 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 09:30:45.119 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 09:30:45.120 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:30:45.134 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 09:30:45.137 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 09:30:45.137 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 09:30:45.138 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 09:30:45.138 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 09:30:45.141 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 09:30:45.145 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 09:30:45.146 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 09:30:45.150 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 09:30:45.154 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 09:30:45.154 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:30:45.159 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 09:30:45.164 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 09:30:45.164 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:30:45.169 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 09:30:45.180 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:户籍地址长度异常长度>100字符（包含省市区、乡镇街道名称（如有）、村居委会名称（如有）、详细地址） 
2020-06-17 09:30:45.183 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:血型与RH血型逻辑不符同时满足以下条件： 1、个人基本信息表《血型》填写为“不详” 2、个人基本信息表《RH血型》填写为“阴性”或“阳性” 
2020-06-17 09:30:45.185 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-17 09:30:45.186 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 329b69c7855544e986fc0073b77fe9be(String), 2020-06-17 09:30:45.185(Timestamp), 31011310200312009116(String), a58b2894635045b18a63c250d46ce8a8(String), 2020-06-17 09:30:45.185(Timestamp) 
2020-06-17 09:30:45.216 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 2 
2020-06-17 09:30:53.578 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 09:30:53.579 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 09:30:53.584 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 09:30:53.587 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 09:30:53.588 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 09:30:53.594 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 09:30:53.598 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 09:30:53.598 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 09:30:53.603 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-17 09:30:53.608 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 09:30:53.609 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:30:53.613 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 09:30:53.618 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 09:30:53.618 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:30:53.625 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 09:30:53.629 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 09:30:53.629 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 09:30:53.629 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 09:30:53.630 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 09:30:53.634 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 09:30:53.639 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 09:30:53.640 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 09:30:53.645 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 09:30:53.649 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 09:30:53.650 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:30:53.654 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 09:30:53.658 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 09:30:53.659 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:30:53.673 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 09:30:53.678 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 09:30:53.678 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 09:30:53.678 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 09:30:53.678 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 09:30:53.683 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 09:30:53.688 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 09:30:53.688 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 09:30:53.693 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 09:30:53.697 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 09:30:53.698 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:30:53.703 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 09:30:53.707 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 09:30:53.707 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:30:53.713 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 09:30:53.726 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:现住址乡镇（街道）名称长度异常长度>100字符 
2020-06-17 09:30:53.729 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:现住址长度异常长度>100字符（包含省市区、乡镇街道名称（如有）、村居委会名称（如有）、详细地址） 
2020-06-17 09:30:53.729 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:血型与RH血型逻辑不符同时满足以下条件： 1、个人基本信息表《血型》填写为“不详” 2、个人基本信息表《RH血型》填写为“阴性”或“阳性” 
2020-06-17 09:30:53.732 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-17 09:30:53.733 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 40c92f3721704bb7a6eb42a8ca1976b6(String), 2020-06-17 09:30:53.732(Timestamp), 31011310200312009116(String), 91665e0b2efa4f86aea807ec9f4883c3(String), 2020-06-17 09:30:53.732(Timestamp), 31011310200312009116(String), a58b2894635045b18a63c250d46ce8a8(String), 2020-06-17 09:30:53.732(Timestamp) 
2020-06-17 09:30:53.771 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 3 
2020-06-17 09:30:58.295 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 09:30:58.296 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 09:30:58.300 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 09:30:58.304 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 09:30:58.305 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 09:30:58.310 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 09:30:58.314 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 09:30:58.314 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 09:30:58.319 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-17 09:30:58.323 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 09:30:58.324 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:30:58.328 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 09:30:58.333 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 09:30:58.334 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:30:58.341 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 09:30:58.347 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 09:30:58.347 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 09:30:58.347 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 09:30:58.348 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 09:30:58.353 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 09:30:58.357 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 09:30:58.357 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 09:30:58.362 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 09:30:58.366 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 09:30:58.367 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:30:58.372 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 09:30:58.376 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 09:30:58.377 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:30:58.391 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 09:30:58.395 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 09:30:58.396 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 09:30:58.396 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 09:30:58.397 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 09:30:58.401 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 09:30:58.406 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 09:30:58.406 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 09:30:58.411 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 09:30:58.416 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 09:30:58.416 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:30:58.422 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 09:30:58.426 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 09:30:58.427 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:30:58.432 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 09:30:58.449 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:现住址长度异常长度>100字符（包含省市区、乡镇街道名称（如有）、村居委会名称（如有）、详细地址） 
2020-06-17 09:30:58.450 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:现住址村（居）委会名称长度异常长度>100字符 
2020-06-17 09:30:58.450 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:血型与RH血型逻辑不符同时满足以下条件： 1、个人基本信息表《血型》填写为“不详” 2、个人基本信息表《RH血型》填写为“阴性”或“阳性” 
2020-06-17 09:30:58.456 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-17 09:30:58.457 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 91665e0b2efa4f86aea807ec9f4883c3(String), 2020-06-17 09:30:58.456(Timestamp), 31011310200312009116(String), 9df07515be3d4c2887e947c6ce5adace(String), 2020-06-17 09:30:58.456(Timestamp), 31011310200312009116(String), a58b2894635045b18a63c250d46ce8a8(String), 2020-06-17 09:30:58.456(Timestamp) 
2020-06-17 09:30:58.489 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 3 
2020-06-17 09:31:02.257 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 09:31:02.258 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 09:31:02.263 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 09:31:02.267 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 09:31:02.268 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 09:31:02.272 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 09:31:02.277 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 09:31:02.277 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 09:31:02.282 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-17 09:31:02.286 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 09:31:02.286 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:31:02.291 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 09:31:02.298 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 09:31:02.298 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:31:02.305 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 09:31:02.308 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 09:31:02.308 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 09:31:02.308 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 09:31:02.309 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 09:31:02.314 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 09:31:02.319 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 09:31:02.319 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 09:31:02.323 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 09:31:02.327 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 09:31:02.327 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:31:02.333 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 09:31:02.338 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 09:31:02.338 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:31:02.351 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 09:31:02.356 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 09:31:02.356 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 09:31:02.356 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 09:31:02.357 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 09:31:02.362 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 09:31:02.366 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 09:31:02.367 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 09:31:02.371 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 09:31:02.375 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 09:31:02.376 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:31:02.380 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 09:31:02.385 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 09:31:02.385 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:31:02.389 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 09:31:02.403 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:建档单位长度异常长度>100字符 
2020-06-17 09:31:02.406 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:血型与RH血型逻辑不符同时满足以下条件： 1、个人基本信息表《血型》填写为“不详” 2、个人基本信息表《RH血型》填写为“阴性”或“阳性” 
2020-06-17 09:31:02.409 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-17 09:31:02.410 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 403a97f9ec40406b9723b3c6845a6cee(String), 2020-06-17 09:31:02.409(Timestamp), 31011310200312009116(String), a58b2894635045b18a63c250d46ce8a8(String), 2020-06-17 09:31:02.409(Timestamp) 
2020-06-17 09:31:02.438 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 2 
2020-06-17 09:31:06.175 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 09:31:06.176 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 09:31:06.184 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 09:31:06.189 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 09:31:06.190 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 09:31:06.194 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 09:31:06.199 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 09:31:06.199 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 09:31:06.205 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-17 09:31:06.210 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 09:31:06.210 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:31:06.214 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 09:31:06.218 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 09:31:06.219 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:31:06.224 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 09:31:06.228 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 09:31:06.228 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 09:31:06.229 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 09:31:06.230 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 09:31:06.234 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 09:31:06.239 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 09:31:06.239 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 09:31:06.243 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 09:31:06.248 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 09:31:06.248 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:31:06.253 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 09:31:06.257 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 09:31:06.258 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:31:06.271 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 09:31:06.276 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 09:31:06.276 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 09:31:06.276 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 09:31:06.276 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 09:31:06.281 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 09:31:06.286 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 09:31:06.286 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 09:31:06.291 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 09:31:06.295 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 09:31:06.295 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:31:06.299 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 09:31:06.304 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 09:31:06.305 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:31:06.313 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 09:31:06.329 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:血型与RH血型逻辑不符同时满足以下条件： 1、个人基本信息表《血型》填写为“不详” 2、个人基本信息表《RH血型》填写为“阴性”或“阳性” 
2020-06-17 09:31:06.332 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1)  
2020-06-17 09:31:06.333 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), a58b2894635045b18a63c250d46ce8a8(String), 2020-06-17 09:31:06.332(Timestamp) 
2020-06-17 09:31:06.362 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 1 
2020-06-17 09:31:10.134 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 09:31:10.135 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 09:31:10.148 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 09:31:10.153 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 09:31:10.154 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 09:31:10.160 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 09:31:10.166 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 09:31:10.167 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 09:31:10.173 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-17 09:31:10.178 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 09:31:10.179 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:31:10.184 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 09:31:10.190 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 09:31:10.192 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:31:10.198 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 09:31:10.204 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 09:31:10.205 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 09:31:10.206 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 09:31:10.207 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 09:31:10.212 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 09:31:10.218 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 09:31:10.219 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 09:31:10.224 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 09:31:10.229 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 09:31:10.230 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:31:10.235 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 09:31:10.241 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 09:31:10.242 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:31:10.257 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 09:31:10.263 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 09:31:10.264 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 09:31:10.265 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 09:31:10.266 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 09:31:10.272 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 09:31:10.277 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 09:31:10.278 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 09:31:10.283 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 09:31:10.289 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 09:31:10.290 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:31:10.295 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 09:31:10.300 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 09:31:10.301 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:31:10.305 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 09:31:10.327 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:责任医生长度异常长度>50字符 
2020-06-17 09:31:10.328 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:血型与RH血型逻辑不符同时满足以下条件： 1、个人基本信息表《血型》填写为“不详” 2、个人基本信息表《RH血型》填写为“阴性”或“阳性” 
2020-06-17 09:31:10.331 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-17 09:31:10.332 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 9042bba97fb74b558de96e35ab2ffdc2(String), 2020-06-17 09:31:10.331(Timestamp), 31011310200312009116(String), a58b2894635045b18a63c250d46ce8a8(String), 2020-06-17 09:31:10.331(Timestamp) 
2020-06-17 09:31:10.361 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 2 
2020-06-17 09:31:20.772 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 09:31:20.773 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 09:31:20.780 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 09:31:20.787 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 09:31:20.789 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 09:31:20.794 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 09:31:20.800 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 09:31:20.801 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 09:31:20.807 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-17 09:31:20.813 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 09:31:20.814 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:31:20.819 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 09:31:20.824 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 09:31:20.825 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:31:20.831 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 09:31:20.835 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 09:31:20.836 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 09:31:20.836 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 09:31:20.836 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 09:31:20.840 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 09:31:20.844 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 09:31:20.845 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 09:31:20.850 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 09:31:20.854 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 09:31:20.855 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:31:20.863 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 09:31:20.868 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 09:31:20.868 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:31:20.881 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 09:31:20.886 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 09:31:20.886 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 09:31:20.886 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 09:31:20.887 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 09:31:20.896 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 09:31:20.907 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 09:31:20.908 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 09:31:20.915 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 09:31:20.921 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 09:31:20.922 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:31:20.929 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 09:31:20.936 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 09:31:20.936 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:31:20.948 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 09:31:20.970 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:个人基本信息表工作单位工作单位不为汉字 
2020-06-17 09:31:20.974 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:血型与RH血型逻辑不符同时满足以下条件： 1、个人基本信息表《血型》填写为“不详” 2、个人基本信息表《RH血型》填写为“阴性”或“阳性” 
2020-06-17 09:31:20.979 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-17 09:31:20.980 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 4ad5f41e777d499894964fe735a4ed46(String), 2020-06-17 09:31:20.978(Timestamp), 31011310200312009116(String), a58b2894635045b18a63c250d46ce8a8(String), 2020-06-17 09:31:20.978(Timestamp) 
2020-06-17 09:31:20.994 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 2 
2020-06-17 09:31:28.294 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 09:31:28.294 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 09:31:28.300 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 09:31:28.304 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 09:31:28.304 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 09:31:28.311 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 09:31:28.316 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 09:31:28.316 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 09:31:28.321 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-17 09:31:28.326 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 09:31:28.326 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:31:28.330 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 09:31:28.335 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 09:31:28.335 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:31:28.341 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 09:31:28.346 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 09:31:28.346 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 09:31:28.347 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 09:31:28.347 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 09:31:28.352 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 09:31:28.356 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 09:31:28.356 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 09:31:28.361 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 09:31:28.366 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 09:31:28.366 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:31:28.371 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 09:31:28.375 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 09:31:28.376 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:31:28.389 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 09:31:28.393 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 09:31:28.393 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 09:31:28.393 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 09:31:28.394 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 09:31:28.399 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 09:31:28.402 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 09:31:28.403 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 09:31:28.407 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 09:31:28.411 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 09:31:28.412 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:31:28.417 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 09:31:28.421 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 09:31:28.421 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:31:28.426 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 09:31:28.437 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:联系人姓名填写为数字同时满足以下条件： 1、联系人姓名不为空值 2、联系人姓名为纯数字 
2020-06-17 09:31:28.440 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:血型与RH血型逻辑不符同时满足以下条件： 1、个人基本信息表《血型》填写为“不详” 2、个人基本信息表《RH血型》填写为“阴性”或“阳性” 
2020-06-17 09:31:28.442 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-17 09:31:28.443 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 1a7e1f2e0bce421585a1fad889411dd4(String), 2020-06-17 09:31:28.442(Timestamp), 31011310200312009116(String), a58b2894635045b18a63c250d46ce8a8(String), 2020-06-17 09:31:28.442(Timestamp) 
2020-06-17 09:31:28.460 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 2 
2020-06-17 09:31:31.835 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 09:31:31.836 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 09:31:31.841 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 09:31:31.846 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 09:31:31.846 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 09:31:31.851 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 09:31:31.856 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 09:31:31.856 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 09:31:31.861 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-17 09:31:31.866 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 09:31:31.866 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:31:31.871 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 09:31:31.875 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 09:31:31.875 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:31:31.881 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 09:31:31.885 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 09:31:31.885 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 09:31:31.885 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 09:31:31.886 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 09:31:31.891 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 09:31:31.895 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 09:31:31.896 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 09:31:31.900 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 09:31:31.904 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 09:31:31.905 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:31:31.910 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 09:31:31.914 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 09:31:31.915 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:31:31.928 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 09:31:31.933 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 09:31:31.933 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 09:31:31.933 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 09:31:31.933 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 09:31:31.938 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 09:31:31.943 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 09:31:31.943 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 09:31:31.947 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 09:31:31.952 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 09:31:31.952 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:31:31.956 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 09:31:31.960 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 09:31:31.961 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:31:31.965 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 09:31:31.981 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:血型与RH血型逻辑不符同时满足以下条件： 1、个人基本信息表《血型》填写为“不详” 2、个人基本信息表《RH血型》填写为“阴性”或“阳性” 
2020-06-17 09:31:31.983 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1)  
2020-06-17 09:31:31.983 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), a58b2894635045b18a63c250d46ce8a8(String), 2020-06-17 09:31:31.983(Timestamp) 
2020-06-17 09:31:32.008 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 1 
2020-06-17 09:31:38.286 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 09:31:38.286 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 09:31:38.293 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 09:31:38.298 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 09:31:38.299 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 09:31:38.305 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 09:31:38.311 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 09:31:38.312 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 09:31:38.319 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-17 09:31:38.323 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 09:31:38.324 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:31:38.329 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 09:31:38.334 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 09:31:38.334 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:31:38.348 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 09:31:38.352 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 09:31:38.353 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 09:31:38.354 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 09:31:38.355 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 09:31:38.361 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 09:31:38.367 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 09:31:38.369 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 09:31:38.373 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 09:31:38.379 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 09:31:38.381 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:31:38.386 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 09:31:38.392 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 09:31:38.392 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:31:38.407 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 09:31:38.412 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 09:31:38.412 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 09:31:38.413 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 09:31:38.414 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 09:31:38.418 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 09:31:38.423 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 09:31:38.424 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 09:31:38.428 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 09:31:38.433 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 09:31:38.433 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:31:38.439 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 09:31:38.442 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 09:31:38.443 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:31:38.448 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 09:31:38.473 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:血型与RH血型逻辑不符同时满足以下条件： 1、个人基本信息表《血型》填写为“不详” 2、个人基本信息表《RH血型》填写为“阴性”或“阳性” 
2020-06-17 09:31:38.475 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1)  
2020-06-17 09:31:38.476 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), a58b2894635045b18a63c250d46ce8a8(String), 2020-06-17 09:31:38.475(Timestamp) 
2020-06-17 09:31:38.507 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 1 
2020-06-17 09:31:46.099 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 09:31:46.099 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 09:31:46.111 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 09:31:46.116 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 09:31:46.117 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 09:31:46.125 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 09:31:46.131 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 09:31:46.132 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 09:31:46.138 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-17 09:31:46.145 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 09:31:46.146 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:31:46.151 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 09:31:46.157 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 09:31:46.158 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:31:46.165 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 09:31:46.171 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 09:31:46.172 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 09:31:46.173 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 09:31:46.174 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 09:31:46.179 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 09:31:46.185 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 09:31:46.186 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 09:31:46.191 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 09:31:46.197 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 09:31:46.198 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:31:46.204 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 09:31:46.210 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 09:31:46.211 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:31:46.225 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 09:31:46.229 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 09:31:46.230 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 09:31:46.230 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 09:31:46.231 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 09:31:46.237 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 09:31:46.242 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 09:31:46.242 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 09:31:46.246 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 09:31:46.250 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 09:31:46.251 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:31:46.255 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 09:31:46.259 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 09:31:46.260 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:31:46.264 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 09:31:46.280 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:血型与RH血型逻辑不符同时满足以下条件： 1、个人基本信息表《血型》填写为“不详” 2、个人基本信息表《RH血型》填写为“阴性”或“阳性” 
2020-06-17 09:31:46.283 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1)  
2020-06-17 09:31:46.283 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), a58b2894635045b18a63c250d46ce8a8(String), 2020-06-17 09:31:46.283(Timestamp) 
2020-06-17 09:31:46.306 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 1 
2020-06-17 09:31:54.377 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 09:31:54.378 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 09:31:54.387 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 09:31:54.393 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 09:31:54.393 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 09:31:54.399 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 09:31:54.404 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 09:31:54.405 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 09:31:54.410 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-17 09:31:54.415 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 09:31:54.415 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:31:54.420 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 09:31:54.425 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 09:31:54.425 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:31:54.440 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 09:31:54.445 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 09:31:54.445 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 09:31:54.445 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 09:31:54.446 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 09:31:54.450 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 09:31:54.455 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 09:31:54.455 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 09:31:54.462 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 09:31:54.467 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 09:31:54.467 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:31:54.471 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 09:31:54.476 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 09:31:54.476 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:31:54.490 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 09:31:54.495 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 09:31:54.495 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 09:31:54.495 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 09:31:54.496 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 09:31:54.502 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 09:31:54.507 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 09:31:54.507 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 09:31:54.512 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 09:31:54.517 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 09:31:54.518 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:31:54.523 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 09:31:54.527 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 09:31:54.527 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:31:54.531 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 09:31:54.551 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:血型与RH血型逻辑不符同时满足以下条件： 1、个人基本信息表《血型》填写为“不详” 2、个人基本信息表《RH血型》填写为“阴性”或“阳性” 
2020-06-17 09:31:54.554 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1)  
2020-06-17 09:31:54.554 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), a58b2894635045b18a63c250d46ce8a8(String), 2020-06-17 09:31:54.553(Timestamp) 
2020-06-17 09:31:54.580 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 1 
2020-06-17 09:32:00.678 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 09:32:00.679 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 09:32:00.684 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 09:32:00.689 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 09:32:00.690 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 09:32:00.695 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 09:32:00.699 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 09:32:00.700 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 09:32:00.707 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-17 09:32:00.713 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 09:32:00.713 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:32:00.718 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 09:32:00.723 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 09:32:00.724 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:32:00.729 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 09:32:00.735 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 09:32:00.735 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 09:32:00.736 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 09:32:00.736 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 09:32:00.741 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 09:32:00.746 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 09:32:00.747 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 09:32:00.751 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 09:32:00.757 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 09:32:00.757 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:32:00.762 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 09:32:00.766 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 09:32:00.766 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:32:00.779 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 09:32:00.783 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 09:32:00.783 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 09:32:00.784 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 09:32:00.784 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 09:32:00.788 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 09:32:00.792 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 09:32:00.792 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 09:32:00.796 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 09:32:00.800 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 09:32:00.801 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:32:00.805 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 09:32:00.809 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 09:32:00.809 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:32:00.813 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 09:32:00.827 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:血型与RH血型逻辑不符同时满足以下条件： 1、个人基本信息表《血型》填写为“不详” 2、个人基本信息表《RH血型》填写为“阴性”或“阳性” 
2020-06-17 09:32:00.830 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1)  
2020-06-17 09:32:00.831 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), a58b2894635045b18a63c250d46ce8a8(String), 2020-06-17 09:32:00.83(Timestamp) 
2020-06-17 09:32:00.849 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 1 
2020-06-17 09:32:13.033 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 09:32:13.034 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 09:32:13.039 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 09:32:13.044 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 09:32:13.045 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 09:32:13.050 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 09:32:13.055 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 09:32:13.056 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 09:32:13.061 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-17 09:32:13.066 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 09:32:13.067 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:32:13.072 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 09:32:13.076 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 09:32:13.077 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:32:13.083 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 09:32:13.088 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 09:32:13.088 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 09:32:13.088 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 09:32:13.089 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 09:32:13.094 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 09:32:13.099 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 09:32:13.099 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 09:32:13.105 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 09:32:13.109 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 09:32:13.110 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:32:13.115 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 09:32:13.120 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 09:32:13.121 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:32:13.135 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 09:32:13.141 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 09:32:13.141 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 09:32:13.142 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 09:32:13.142 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 09:32:13.147 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 09:32:13.152 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 09:32:13.153 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 09:32:13.157 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 09:32:13.163 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 09:32:13.164 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:32:13.169 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 09:32:13.173 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 09:32:13.174 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 09:32:13.178 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 09:32:13.192 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:个人基本信息表既往史既往史疾病确诊时间未填写 
2020-06-17 09:32:13.194 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:个人基本信息表既往史既往史疾病确诊时间填写不规范 
2020-06-17 09:32:13.194 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:血型与RH血型逻辑不符同时满足以下条件： 1、个人基本信息表《血型》填写为“不详” 2、个人基本信息表《RH血型》填写为“阴性”或“阳性” 
2020-06-17 09:32:13.197 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-17 09:32:13.197 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 6302b0fcdcd7482099581602a1fec501(String), 2020-06-17 09:32:13.197(Timestamp), 31011310200312009116(String), 923bfb7880204efa8f26fd200d1bd17e(String), 2020-06-17 09:32:13.197(Timestamp), 31011310200312009116(String), a58b2894635045b18a63c250d46ce8a8(String), 2020-06-17 09:32:13.197(Timestamp) 
2020-06-17 09:32:13.228 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 3 
2020-06-17 09:46:14.253 [INFO ] com.benetech.rules.RulesApplication                - [logStarting:55] Starting RulesApplication v1.0-SNAPSHOT on DESKTOP-EOCO1V0 with PID 4488 (D:\51\python\project\instance\zyjk\EHR\controlRuleNew\config\healthRecordRules.jar started by ZY in D:\51\python\project\instance\zyjk\EHR\controlRuleNew) 
2020-06-17 09:46:14.256 [DEBUG] com.benetech.rules.RulesApplication                - [logStarting:56] Running with Spring Boot v2.2.1.RELEASE, Spring v5.2.1.RELEASE 
2020-06-17 09:46:14.256 [INFO ] com.benetech.rules.RulesApplication                - [logStartupProfileInfo:655] The following profiles are active: test 
2020-06-17 09:46:15.726 [INFO ] o.s.boot.web.embedded.tomcat.TomcatWebServer       - [initialize:92] Tomcat initialized with port(s): 8838 (http) 
2020-06-17 09:46:15.737 [INFO ] org.apache.coyote.http11.Http11NioProtocol         - [log:173] Initializing ProtocolHandler ["http-nio-8838"] 
2020-06-17 09:46:15.738 [INFO ] org.apache.catalina.core.StandardService           - [log:173] Starting service [Tomcat] 
2020-06-17 09:46:15.739 [INFO ] org.apache.catalina.core.StandardEngine            - [log:173] Starting Servlet engine: [Apache Tomcat/9.0.27] 
2020-06-17 09:46:15.805 [INFO ] o.a.c.c.C.[.[localhost].[/healthRecordRules]       - [log:173] Initializing Spring embedded WebApplicationContext 
2020-06-17 09:46:15.806 [INFO ] org.springframework.web.context.ContextLoader      - [prepareWebApplicationContext:284] Root WebApplicationContext: initialization completed in 1471 ms 
2020-06-17 09:46:15.885 [DEBUG] org.apache.ibatis.logging.LogFactory               - [setImplementation:135] Logging initialized using 'class org.apache.ibatis.logging.slf4j.Slf4jImpl' adapter. 
2020-06-17 09:46:16.130 [WARN ] org.mybatis.spring.SqlSessionFactoryBean           - [buildSqlSessionFactory:467] Can't find class in '[com.benetech.rules.*.entity]' package. Please check your configuration. 
2020-06-17 09:46:16.718 [INFO ] com.alibaba.druid.pool.DruidDataSource             - [init:930] {dataSource-1} inited 
2020-06-17 09:46:16.911 [DEBUG] c.b.r.m.e.mapper.RuleEngineMapper.getAllRules      - [debug:159] ==>  Preparing: select a.RuleId as ruleId, a.RuleSql as clazz from HrRule a join HrRuleProps b on a.RuleId = b.RuleId where -- RuleId in ('34278f71cf1d42c88158aaf637fa5203', '8d30baa03bfc4233a8f115c57a0ebf08', '63eb82a44bf64c96a0b9023fa2a3c9d9') a.RuleSql != '' and a.RuleSql is not null and b.Enable = 1  
2020-06-17 09:46:16.930 [DEBUG] c.b.r.m.e.mapper.RuleEngineMapper.getAllRules      - [debug:159] ==> Parameters:  
2020-06-17 09:46:17.011 [DEBUG] c.b.r.m.e.mapper.RuleEngineMapper.getAllRules      - [debug:159] <==      Total: 310 
2020-06-17 09:46:17.226 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [init:68] 加载规则：310 条 
2020-06-17 09:46:17.244 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.getAllCode    - [debug:159] ==>  Preparing: SELECT codeSysType AS type, code AS code, [value] AS value FROM tb_code_value WHERE code != '' AND [value] != ''  
2020-06-17 09:46:17.244 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.getAllCode    - [debug:159] ==> Parameters:  
2020-06-17 09:46:17.712 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.getAllCode    - [debug:159] <==      Total: 44881 
2020-06-17 09:46:17.744 [INFO ] c.b.r.m.m.service.impl.EhrModelBuildServiceImpl    - [init:96] 初始化字典类型: 467 种 
2020-06-17 09:46:17.745 [INFO ] c.b.r.m.m.service.impl.EhrModelBuildServiceImpl    - [init:97] 初始化字典: 44881 条 
2020-06-17 09:46:17.745 [ERROR] c.b.r.m.process.service.impl.QcProcessServiceImpl  - [init:44] 初始化线程池 
2020-06-17 09:46:17.888 [INFO ] o.s.scheduling.concurrent.ThreadPoolTaskExecutor   - [initialize:171] Initializing ExecutorService 'applicationTaskExecutor' 
2020-06-17 09:46:18.108 [INFO ] org.apache.coyote.http11.Http11NioProtocol         - [log:173] Starting ProtocolHandler ["http-nio-8838"] 
2020-06-17 09:46:18.119 [INFO ] org.apache.coyote.http11.Http11NioProtocol         - [log:173] Pausing ProtocolHandler ["http-nio-8838"] 
2020-06-17 09:46:18.119 [INFO ] org.apache.catalina.core.StandardService           - [log:173] Stopping service [Tomcat] 
2020-06-17 09:46:18.125 [INFO ] org.apache.coyote.http11.Http11NioProtocol         - [log:173] Stopping ProtocolHandler ["http-nio-8838"] 
2020-06-17 09:46:18.125 [INFO ] org.apache.coyote.http11.Http11NioProtocol         - [log:173] Destroying ProtocolHandler ["http-nio-8838"] 
2020-06-17 09:46:18.127 [INFO ] o.s.b.a.l.ConditionEvaluationReportLoggingListener - [logMessage:136]     Error starting ApplicationContext. To display the conditions report re-run your application with 'debug' enabled. 
2020-06-17 09:46:18.128 [ERROR] o.s.b.diagnostics.LoggingFailureAnalysisReporter   - [report:40]     ***************************  APPLICATION FAILED TO START  ***************************    Description:    Web server failed to start. Port 8838 was already in use.    Action:    Identify and stop the process that's listening on port 8838 or configure this application to listen on another port.   
2020-06-17 09:46:18.131 [INFO ] o.s.scheduling.concurrent.ThreadPoolTaskExecutor   - [shutdown:208] Shutting down ExecutorService 'applicationTaskExecutor' 
2020-06-17 09:46:18.135 [INFO ] com.alibaba.druid.pool.DruidDataSource             - [close:1825] {dataSource-1} closed 
2020-06-17 11:13:38.192 [INFO ] com.benetech.rules.RulesApplication                - [logStarting:55] Starting RulesApplication v1.0-SNAPSHOT on DESKTOP-EOCO1V0 with PID 9344 (D:\51\python\project\instance\zyjk\EHR\controlRuleNew\config\healthRecordRules.jar started by ZY in D:\51\python\project\instance\zyjk\EHR\controlRuleNew) 
2020-06-17 11:13:38.195 [DEBUG] com.benetech.rules.RulesApplication                - [logStarting:56] Running with Spring Boot v2.2.1.RELEASE, Spring v5.2.1.RELEASE 
2020-06-17 11:13:38.196 [INFO ] com.benetech.rules.RulesApplication                - [logStartupProfileInfo:655] The following profiles are active: test 
2020-06-17 11:13:39.824 [INFO ] o.s.boot.web.embedded.tomcat.TomcatWebServer       - [initialize:92] Tomcat initialized with port(s): 8838 (http) 
2020-06-17 11:13:39.834 [INFO ] org.apache.coyote.http11.Http11NioProtocol         - [log:173] Initializing ProtocolHandler ["http-nio-8838"] 
2020-06-17 11:13:39.835 [INFO ] org.apache.catalina.core.StandardService           - [log:173] Starting service [Tomcat] 
2020-06-17 11:13:39.836 [INFO ] org.apache.catalina.core.StandardEngine            - [log:173] Starting Servlet engine: [Apache Tomcat/9.0.27] 
2020-06-17 11:13:39.916 [INFO ] o.a.c.c.C.[.[localhost].[/healthRecordRules]       - [log:173] Initializing Spring embedded WebApplicationContext 
2020-06-17 11:13:39.917 [INFO ] org.springframework.web.context.ContextLoader      - [prepareWebApplicationContext:284] Root WebApplicationContext: initialization completed in 1628 ms 
2020-06-17 11:13:40.053 [DEBUG] org.apache.ibatis.logging.LogFactory               - [setImplementation:135] Logging initialized using 'class org.apache.ibatis.logging.slf4j.Slf4jImpl' adapter. 
2020-06-17 11:13:40.358 [WARN ] org.mybatis.spring.SqlSessionFactoryBean           - [buildSqlSessionFactory:467] Can't find class in '[com.benetech.rules.*.entity]' package. Please check your configuration. 
2020-06-17 11:13:41.297 [INFO ] com.alibaba.druid.pool.DruidDataSource             - [init:930] {dataSource-1} inited 
2020-06-17 11:13:41.589 [DEBUG] c.b.r.m.e.mapper.RuleEngineMapper.getAllRules      - [debug:159] ==>  Preparing: select a.RuleId as ruleId, a.RuleSql as clazz from HrRule a join HrRuleProps b on a.RuleId = b.RuleId where -- RuleId in ('34278f71cf1d42c88158aaf637fa5203', '8d30baa03bfc4233a8f115c57a0ebf08', '63eb82a44bf64c96a0b9023fa2a3c9d9') a.RuleSql != '' and a.RuleSql is not null and b.Enable = 1  
2020-06-17 11:13:41.609 [DEBUG] c.b.r.m.e.mapper.RuleEngineMapper.getAllRules      - [debug:159] ==> Parameters:  
2020-06-17 11:13:41.766 [DEBUG] c.b.r.m.e.mapper.RuleEngineMapper.getAllRules      - [debug:159] <==      Total: 310 
2020-06-17 11:13:42.015 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [init:68] 加载规则：310 条 
2020-06-17 11:13:42.038 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.getAllCode    - [debug:159] ==>  Preparing: SELECT codeSysType AS type, code AS code, [value] AS value FROM tb_code_value WHERE code != '' AND [value] != ''  
2020-06-17 11:13:42.039 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.getAllCode    - [debug:159] ==> Parameters:  
2020-06-17 11:13:42.326 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 11:13:42.327 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 11:13:42.335 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 11:13:42.342 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 11:13:42.342 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 11:13:42.349 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 11:13:42.353 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 11:13:42.353 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 11:13:42.410 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-17 11:13:42.419 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 11:13:42.419 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:13:42.442 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 11:13:42.446 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 11:13:42.446 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:13:42.460 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 11:13:42.464 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 11:13:42.464 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 11:13:42.464 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 11:13:42.465 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 11:13:42.469 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 11:13:42.475 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 11:13:42.475 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 11:13:42.483 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 11:13:42.487 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 11:13:42.487 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:13:42.496 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 11:13:42.504 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 11:13:42.504 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:13:42.532 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 11:13:42.536 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 11:13:42.536 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 11:13:42.536 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 11:13:42.537 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 11:13:42.548 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 11:13:42.552 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 11:13:42.552 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 11:13:42.562 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 11:13:42.565 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 11:13:42.565 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:13:42.571 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 11:13:42.577 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 11:13:42.577 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:13:42.584 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 11:13:42.601 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:现住址长度异常长度>100字符（包含省市区、乡镇街道名称（如有）、村居委会名称（如有）、详细地址） 
2020-06-17 11:13:42.604 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1)  
2020-06-17 11:13:42.604 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 91665e0b2efa4f86aea807ec9f4883c3(String), 2020-06-17 11:13:42.603(Timestamp) 
2020-06-17 11:13:42.636 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.getAllCode    - [debug:159] <==      Total: 44881 
2020-06-17 11:13:42.649 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 1 
2020-06-17 11:13:42.663 [INFO ] c.b.r.m.m.service.impl.EhrModelBuildServiceImpl    - [init:96] 初始化字典类型: 467 种 
2020-06-17 11:13:42.663 [INFO ] c.b.r.m.m.service.impl.EhrModelBuildServiceImpl    - [init:97] 初始化字典: 44881 条 
2020-06-17 11:13:42.664 [ERROR] c.b.r.m.process.service.impl.QcProcessServiceImpl  - [init:44] 初始化线程池 
2020-06-17 11:13:42.847 [INFO ] o.s.scheduling.concurrent.ThreadPoolTaskExecutor   - [initialize:171] Initializing ExecutorService 'applicationTaskExecutor' 
2020-06-17 11:13:43.128 [INFO ] org.apache.coyote.http11.Http11NioProtocol         - [log:173] Starting ProtocolHandler ["http-nio-8838"] 
2020-06-17 11:13:43.147 [INFO ] org.apache.coyote.http11.Http11NioProtocol         - [log:173] Pausing ProtocolHandler ["http-nio-8838"] 
2020-06-17 11:13:43.148 [INFO ] org.apache.catalina.core.StandardService           - [log:173] Stopping service [Tomcat] 
2020-06-17 11:13:43.152 [INFO ] org.apache.coyote.http11.Http11NioProtocol         - [log:173] Stopping ProtocolHandler ["http-nio-8838"] 
2020-06-17 11:13:43.152 [INFO ] org.apache.coyote.http11.Http11NioProtocol         - [log:173] Destroying ProtocolHandler ["http-nio-8838"] 
2020-06-17 11:13:43.154 [INFO ] o.s.b.a.l.ConditionEvaluationReportLoggingListener - [logMessage:136]     Error starting ApplicationContext. To display the conditions report re-run your application with 'debug' enabled. 
2020-06-17 11:13:43.155 [ERROR] o.s.b.diagnostics.LoggingFailureAnalysisReporter   - [report:40]     ***************************  APPLICATION FAILED TO START  ***************************    Description:    Web server failed to start. Port 8838 was already in use.    Action:    Identify and stop the process that's listening on port 8838 or configure this application to listen on another port.   
2020-06-17 11:13:43.158 [INFO ] o.s.scheduling.concurrent.ThreadPoolTaskExecutor   - [shutdown:208] Shutting down ExecutorService 'applicationTaskExecutor' 
2020-06-17 11:13:43.161 [INFO ] com.alibaba.druid.pool.DruidDataSource             - [close:1825] {dataSource-1} closed 
2020-06-17 11:13:44.814 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 11:13:44.815 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 11:13:44.825 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 11:13:44.829 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 11:13:44.829 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 11:13:44.834 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 11:13:44.839 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 11:13:44.840 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 11:13:44.845 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-17 11:13:44.850 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 11:13:44.851 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:13:44.855 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 11:13:44.860 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 11:13:44.861 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:13:44.867 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 11:13:44.872 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 11:13:44.873 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 11:13:44.874 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 11:13:44.875 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 11:13:44.879 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 11:13:44.885 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 11:13:44.885 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 11:13:44.892 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 11:13:44.897 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 11:13:44.897 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:13:44.902 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 11:13:44.907 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 11:13:44.908 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:13:44.924 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 11:13:44.929 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 11:13:44.929 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 11:13:44.930 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 11:13:44.931 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 11:13:44.935 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 11:13:44.939 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 11:13:44.939 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 11:13:44.943 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 11:13:44.948 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 11:13:44.948 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:13:44.958 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 11:13:44.963 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 11:13:44.963 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:13:44.968 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 11:13:44.984 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:户籍地址长度异常长度>100字符（包含省市区、乡镇街道名称（如有）、村居委会名称（如有）、详细地址） 
2020-06-17 11:13:44.989 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1)  
2020-06-17 11:13:44.990 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 329b69c7855544e986fc0073b77fe9be(String), 2020-06-17 11:13:44.989(Timestamp) 
2020-06-17 11:13:45.006 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 1 
2020-06-17 11:13:48.234 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 11:13:48.234 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 11:13:48.239 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 11:13:48.245 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 11:13:48.245 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 11:13:48.249 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 11:13:48.253 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 11:13:48.254 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 11:13:48.258 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-17 11:13:48.263 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 11:13:48.263 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:13:48.269 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 11:13:48.275 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 11:13:48.276 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:13:48.282 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 11:13:48.286 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 11:13:48.286 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 11:13:48.287 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 11:13:48.288 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 11:13:48.293 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 11:13:48.300 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 11:13:48.301 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 11:13:48.306 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 11:13:48.311 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 11:13:48.312 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:13:48.317 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 11:13:48.322 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 11:13:48.323 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:13:48.338 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 11:13:48.343 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 11:13:48.343 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 11:13:48.344 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 11:13:48.345 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 11:13:48.350 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 11:13:48.355 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 11:13:48.356 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 11:13:48.361 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 11:13:48.367 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 11:13:48.368 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:13:48.373 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 11:13:48.379 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 11:13:48.380 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:13:48.385 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 11:13:48.417 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:现住址长度异常长度>100字符（包含省市区、乡镇街道名称（如有）、村居委会名称（如有）、详细地址） 
2020-06-17 11:13:48.418 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:现住址村（居）委会名称长度异常长度>100字符 
2020-06-17 11:13:48.422 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-17 11:13:48.423 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 91665e0b2efa4f86aea807ec9f4883c3(String), 2020-06-17 11:13:48.421(Timestamp), 31011310200312009116(String), 9df07515be3d4c2887e947c6ce5adace(String), 2020-06-17 11:13:48.421(Timestamp) 
2020-06-17 11:13:48.454 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 2 
2020-06-17 11:13:51.766 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 11:13:51.767 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 11:13:51.772 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 11:13:51.777 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 11:13:51.777 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 11:13:51.782 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 11:13:51.787 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 11:13:51.787 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 11:13:51.791 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-17 11:13:51.796 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 11:13:51.797 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:13:51.801 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 11:13:51.806 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 11:13:51.806 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:13:51.812 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 11:13:51.816 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 11:13:51.816 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 11:13:51.817 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 11:13:51.817 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 11:13:51.822 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 11:13:51.826 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 11:13:51.827 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 11:13:51.860 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 11:13:51.865 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 11:13:51.866 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:13:51.871 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 11:13:51.876 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 11:13:51.877 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:13:51.892 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 11:13:51.898 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 11:13:51.899 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 11:13:51.900 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 11:13:51.901 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 11:13:51.909 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 11:13:51.915 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 11:13:51.916 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 11:13:51.921 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 11:13:51.927 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 11:13:51.929 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:13:51.934 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 11:13:51.940 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 11:13:51.942 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:13:51.948 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 11:13:51.967 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:建档单位长度异常长度>100字符 
2020-06-17 11:13:51.977 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1)  
2020-06-17 11:13:51.977 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 403a97f9ec40406b9723b3c6845a6cee(String), 2020-06-17 11:13:51.976(Timestamp) 
2020-06-17 11:13:51.997 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 1 
2020-06-17 11:13:55.289 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 11:13:55.290 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 11:13:55.296 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 11:13:55.302 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 11:13:55.303 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 11:13:55.309 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 11:13:55.313 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 11:13:55.314 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 11:13:55.321 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-17 11:13:55.328 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 11:13:55.328 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:13:55.334 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 11:13:55.339 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 11:13:55.339 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:13:55.344 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 11:13:55.350 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 11:13:55.350 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 11:13:55.351 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 11:13:55.351 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 11:13:55.355 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 11:13:55.360 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 11:13:55.360 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 11:13:55.365 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 11:13:55.369 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 11:13:55.370 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:13:55.375 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 11:13:55.379 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 11:13:55.380 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:13:55.394 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 11:13:55.399 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 11:13:55.399 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 11:13:55.400 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 11:13:55.400 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 11:13:55.405 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 11:13:55.409 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 11:13:55.410 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 11:13:55.415 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 11:13:55.419 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 11:13:55.420 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:13:55.424 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 11:13:55.429 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 11:13:55.429 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:13:55.434 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 11:13:58.695 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 11:13:58.696 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 11:13:58.700 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 11:13:58.705 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 11:13:58.706 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 11:13:58.710 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 11:13:58.715 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 11:13:58.715 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 11:13:58.722 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-17 11:13:58.726 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 11:13:58.726 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:13:58.733 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 11:13:58.738 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 11:13:58.739 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:13:58.745 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 11:13:58.750 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 11:13:58.750 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 11:13:58.751 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 11:13:58.752 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 11:13:58.757 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 11:13:58.762 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 11:13:58.763 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 11:13:58.767 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 11:13:58.772 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 11:13:58.772 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:13:58.778 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 11:13:58.783 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 11:13:58.784 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:13:58.798 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 11:13:58.804 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 11:13:58.804 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 11:13:58.805 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 11:13:58.806 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 11:13:58.811 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 11:13:58.816 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 11:13:58.817 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 11:13:58.822 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 11:13:58.827 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 11:13:58.828 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:13:58.833 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 11:13:58.837 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 11:13:58.839 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:13:58.843 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 11:13:58.885 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:责任医生长度异常长度>50字符 
2020-06-17 11:13:58.890 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1)  
2020-06-17 11:13:58.890 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 9042bba97fb74b558de96e35ab2ffdc2(String), 2020-06-17 11:13:58.89(Timestamp) 
2020-06-17 11:13:58.932 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 1 
2020-06-17 11:14:02.184 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 11:14:02.185 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 11:14:02.190 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 11:14:02.197 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 11:14:02.198 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 11:14:02.203 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 11:14:02.211 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 11:14:02.212 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 11:14:02.218 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-17 11:14:02.222 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 11:14:02.223 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:14:02.229 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 11:14:02.234 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 11:14:02.234 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:14:02.245 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 11:14:02.249 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 11:14:02.249 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 11:14:02.250 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 11:14:02.250 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 11:14:02.255 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 11:14:02.261 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 11:14:02.262 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 11:14:02.266 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 11:14:02.271 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 11:14:02.272 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:14:02.278 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 11:14:02.284 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 11:14:02.286 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:14:02.301 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 11:14:02.307 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 11:14:02.308 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 11:14:02.309 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 11:14:02.309 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 11:14:02.315 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 11:14:02.320 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 11:14:02.321 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 11:14:02.329 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 11:14:02.335 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 11:14:02.336 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:14:02.341 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 11:14:02.347 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 11:14:02.349 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:14:02.354 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 11:14:02.378 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:个人基本信息表工作单位工作单位不为汉字 
2020-06-17 11:14:02.388 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1)  
2020-06-17 11:14:02.389 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 4ad5f41e777d499894964fe735a4ed46(String), 2020-06-17 11:14:02.387(Timestamp) 
2020-06-17 11:14:02.405 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 1 
2020-06-17 11:14:05.632 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 11:14:05.632 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 11:14:05.638 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 11:14:05.642 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 11:14:05.643 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 11:14:05.649 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 11:14:05.653 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 11:14:05.654 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 11:14:05.660 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-17 11:14:05.665 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 11:14:05.666 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:14:05.671 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 11:14:05.676 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 11:14:05.677 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:14:05.682 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 11:14:05.687 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 11:14:05.687 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 11:14:05.688 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 11:14:05.688 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 11:14:05.693 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 11:14:05.698 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 11:14:05.698 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 11:14:05.703 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 11:14:05.708 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 11:14:05.709 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:14:05.713 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 11:14:05.717 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 11:14:05.718 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:14:05.732 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 11:14:05.736 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 11:14:05.736 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 11:14:05.737 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 11:14:05.737 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 11:14:05.743 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 11:14:05.747 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 11:14:05.748 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 11:14:05.754 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 11:14:05.759 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 11:14:05.759 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:14:05.764 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 11:14:05.770 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 11:14:05.771 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:14:05.774 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 11:14:05.791 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:联系人姓名填写为数字同时满足以下条件： 1、联系人姓名不为空值 2、联系人姓名为纯数字 
2020-06-17 11:14:05.799 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1)  
2020-06-17 11:14:05.800 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 1a7e1f2e0bce421585a1fad889411dd4(String), 2020-06-17 11:14:05.799(Timestamp) 
2020-06-17 11:14:05.827 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 1 
2020-06-17 11:14:09.068 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 11:14:09.068 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 11:14:09.073 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 11:14:09.079 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 11:14:09.079 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 11:14:09.084 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 11:14:09.088 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 11:14:09.089 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 11:14:09.093 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-17 11:14:09.097 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 11:14:09.098 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:14:09.103 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 11:14:09.107 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 11:14:09.107 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:14:09.113 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 11:14:09.117 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 11:14:09.117 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 11:14:09.118 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 11:14:09.118 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 11:14:09.123 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 11:14:09.127 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 11:14:09.128 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 11:14:09.132 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 11:14:09.137 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 11:14:09.138 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:14:09.146 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 11:14:09.150 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 11:14:09.150 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:14:09.164 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 11:14:09.169 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 11:14:09.169 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 11:14:09.169 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 11:14:09.169 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 11:14:09.174 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 11:14:09.178 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 11:14:09.179 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 11:14:09.184 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 11:14:09.189 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 11:14:09.189 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:14:09.194 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 11:14:09.198 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 11:14:09.198 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:14:09.204 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 11:14:12.637 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 11:14:12.637 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 11:14:12.642 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 11:14:12.646 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 11:14:12.647 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 11:14:12.659 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 11:14:12.665 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 11:14:12.665 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 11:14:12.671 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-17 11:14:12.676 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 11:14:12.677 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:14:12.682 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 11:14:12.686 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 11:14:12.686 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:14:12.692 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 11:14:12.696 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 11:14:12.696 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 11:14:12.696 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 11:14:12.697 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 11:14:12.701 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 11:14:12.706 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 11:14:12.706 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 11:14:12.711 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 11:14:12.714 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 11:14:12.714 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:14:12.720 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 11:14:12.724 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 11:14:12.725 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:14:12.740 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 11:14:12.744 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 11:14:12.745 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 11:14:12.745 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 11:14:12.746 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 11:14:12.751 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 11:14:12.756 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 11:14:12.757 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 11:14:12.764 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 11:14:12.769 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 11:14:12.770 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:14:12.775 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 11:14:12.781 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 11:14:12.782 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:14:12.790 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 11:14:16.112 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 11:14:16.112 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 11:14:16.117 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 11:14:16.123 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 11:14:16.123 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 11:14:16.132 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 11:14:16.136 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 11:14:16.137 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 11:14:16.144 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-17 11:14:16.148 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 11:14:16.149 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:14:16.154 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 11:14:16.159 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 11:14:16.159 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:14:16.164 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 11:14:16.169 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 11:14:16.169 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 11:14:16.169 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 11:14:16.170 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 11:14:16.175 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 11:14:16.179 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 11:14:16.179 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 11:14:16.183 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 11:14:16.187 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 11:14:16.187 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:14:16.192 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 11:14:16.198 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 11:14:16.199 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:14:16.211 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 11:14:16.215 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 11:14:16.216 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 11:14:16.216 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 11:14:16.217 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 11:14:16.223 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 11:14:16.228 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 11:14:16.228 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 11:14:16.232 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 11:14:16.236 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 11:14:16.237 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:14:16.243 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 11:14:16.247 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 11:14:16.248 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:14:16.252 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 11:14:16.276 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:血型与RH血型逻辑不符同时满足以下条件： 1、个人基本信息表《血型》填写为“不详” 2、个人基本信息表《RH血型》填写为“阴性”或“阳性” 
2020-06-17 11:14:16.279 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1)  
2020-06-17 11:14:16.280 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), a58b2894635045b18a63c250d46ce8a8(String), 2020-06-17 11:14:16.279(Timestamp) 
2020-06-17 11:14:16.326 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 1 
2020-06-17 11:14:19.711 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 11:14:19.712 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 11:14:19.720 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 11:14:19.724 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 11:14:19.725 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 11:14:19.733 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 11:14:19.738 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 11:14:19.739 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 11:14:19.745 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-17 11:14:19.750 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 11:14:19.750 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:14:19.757 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 11:14:19.762 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 11:14:19.762 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:14:19.768 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 11:14:19.772 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 11:14:19.773 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 11:14:19.773 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 11:14:19.774 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 11:14:19.786 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 11:14:19.790 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 11:14:19.791 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 11:14:19.796 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 11:14:19.800 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 11:14:19.801 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:14:19.806 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 11:14:19.811 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 11:14:19.811 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:14:19.825 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 11:14:19.830 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 11:14:19.830 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 11:14:19.831 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 11:14:19.831 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 11:14:19.836 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 11:14:19.839 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 11:14:19.840 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 11:14:19.844 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 11:14:19.849 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 11:14:19.849 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:14:19.855 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 11:14:19.860 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 11:14:19.860 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:14:19.865 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 11:14:19.885 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:血型与RH血型逻辑不符同时满足以下条件： 1、个人基本信息表《血型》填写为“不详” 2、个人基本信息表《RH血型》填写为“阴性”或“阳性” 
2020-06-17 11:14:19.888 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1)  
2020-06-17 11:14:19.889 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), a58b2894635045b18a63c250d46ce8a8(String), 2020-06-17 11:14:19.888(Timestamp) 
2020-06-17 11:14:19.917 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 1 
2020-06-17 11:14:23.884 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 11:14:23.885 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 11:14:23.891 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 11:14:23.896 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 11:14:23.896 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 11:14:23.901 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 11:14:23.906 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 11:14:23.906 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 11:14:23.911 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-17 11:14:23.916 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 11:14:23.916 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:14:23.922 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 11:14:23.927 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 11:14:23.928 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:14:23.940 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 11:14:23.944 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 11:14:23.945 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 11:14:23.945 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 11:14:23.945 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 11:14:23.949 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 11:14:23.953 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 11:14:23.954 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 11:14:23.958 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 11:14:23.962 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 11:14:23.962 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:14:23.966 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 11:14:23.970 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 11:14:23.970 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:14:23.984 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 11:14:23.989 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 11:14:23.989 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 11:14:23.989 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 11:14:23.990 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 11:14:23.995 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 11:14:23.999 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 11:14:23.999 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 11:14:24.003 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 11:14:24.008 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 11:14:24.008 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:14:24.013 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 11:14:24.017 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 11:14:24.018 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:14:24.023 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 11:14:24.039 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:血型与RH血型逻辑不符同时满足以下条件： 1、个人基本信息表《血型》填写为“不详” 2、个人基本信息表《RH血型》填写为“阴性”或“阳性” 
2020-06-17 11:14:24.041 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1)  
2020-06-17 11:14:24.042 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), a58b2894635045b18a63c250d46ce8a8(String), 2020-06-17 11:14:24.041(Timestamp) 
2020-06-17 11:14:24.059 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 1 
2020-06-17 11:14:27.578 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 11:14:27.578 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 11:14:27.583 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 11:14:27.587 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 11:14:27.587 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 11:14:27.591 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 11:14:27.595 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 11:14:27.595 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 11:14:27.601 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-17 11:14:27.606 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 11:14:27.606 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:14:27.611 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 11:14:27.615 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 11:14:27.616 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:14:27.621 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 11:14:27.624 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 11:14:27.624 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 11:14:27.625 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 11:14:27.625 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 11:14:27.629 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 11:14:27.634 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 11:14:27.634 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 11:14:27.638 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 11:14:27.642 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 11:14:27.642 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:14:27.647 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 11:14:27.651 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 11:14:27.651 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:14:27.665 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 11:14:27.670 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 11:14:27.670 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 11:14:27.670 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 11:14:27.671 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 11:14:27.675 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 11:14:27.679 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 11:14:27.679 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 11:14:27.683 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 11:14:27.688 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 11:14:27.688 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:14:27.693 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 11:14:27.697 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 11:14:27.697 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:14:27.701 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 11:14:27.714 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:个人基本信息表既往史既往史疾病确诊时间未填写 
2020-06-17 11:14:27.716 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:个人基本信息表既往史既往史疾病确诊时间填写不规范 
2020-06-17 11:14:27.716 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:血型与RH血型逻辑不符同时满足以下条件： 1、个人基本信息表《血型》填写为“不详” 2、个人基本信息表《RH血型》填写为“阴性”或“阳性” 
2020-06-17 11:14:27.719 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-17 11:14:27.719 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 6302b0fcdcd7482099581602a1fec501(String), 2020-06-17 11:14:27.718(Timestamp), 31011310200312009116(String), 923bfb7880204efa8f26fd200d1bd17e(String), 2020-06-17 11:14:27.718(Timestamp), 31011310200312009116(String), a58b2894635045b18a63c250d46ce8a8(String), 2020-06-17 11:14:27.718(Timestamp) 
2020-06-17 11:14:27.757 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 3 
2020-06-17 11:16:17.221 [INFO ] com.benetech.rules.RulesApplication                - [logStarting:55] Starting RulesApplication v1.0-SNAPSHOT on DESKTOP-EOCO1V0 with PID 10712 (D:\51\python\project\instance\zyjk\EHR\controlRuleNew\config\healthRecordRules.jar started by ZY in D:\51\python\project\instance\zyjk\EHR\controlRuleNew) 
2020-06-17 11:16:17.267 [DEBUG] com.benetech.rules.RulesApplication                - [logStarting:56] Running with Spring Boot v2.2.1.RELEASE, Spring v5.2.1.RELEASE 
2020-06-17 11:16:17.268 [INFO ] com.benetech.rules.RulesApplication                - [logStartupProfileInfo:655] The following profiles are active: test 
2020-06-17 11:16:18.906 [INFO ] o.s.boot.web.embedded.tomcat.TomcatWebServer       - [initialize:92] Tomcat initialized with port(s): 8838 (http) 
2020-06-17 11:16:18.917 [INFO ] org.apache.coyote.http11.Http11NioProtocol         - [log:173] Initializing ProtocolHandler ["http-nio-8838"] 
2020-06-17 11:16:18.918 [INFO ] org.apache.catalina.core.StandardService           - [log:173] Starting service [Tomcat] 
2020-06-17 11:16:18.919 [INFO ] org.apache.catalina.core.StandardEngine            - [log:173] Starting Servlet engine: [Apache Tomcat/9.0.27] 
2020-06-17 11:16:18.994 [INFO ] o.a.c.c.C.[.[localhost].[/healthRecordRules]       - [log:173] Initializing Spring embedded WebApplicationContext 
2020-06-17 11:16:18.995 [INFO ] org.springframework.web.context.ContextLoader      - [prepareWebApplicationContext:284] Root WebApplicationContext: initialization completed in 1666 ms 
2020-06-17 11:16:19.075 [DEBUG] org.apache.ibatis.logging.LogFactory               - [setImplementation:135] Logging initialized using 'class org.apache.ibatis.logging.slf4j.Slf4jImpl' adapter. 
2020-06-17 11:16:19.369 [WARN ] org.mybatis.spring.SqlSessionFactoryBean           - [buildSqlSessionFactory:467] Can't find class in '[com.benetech.rules.*.entity]' package. Please check your configuration. 
2020-06-17 11:16:20.127 [INFO ] com.alibaba.druid.pool.DruidDataSource             - [init:930] {dataSource-1} inited 
2020-06-17 11:16:20.406 [DEBUG] c.b.r.m.e.mapper.RuleEngineMapper.getAllRules      - [debug:159] ==>  Preparing: select a.RuleId as ruleId, a.RuleSql as clazz from HrRule a join HrRuleProps b on a.RuleId = b.RuleId where -- RuleId in ('34278f71cf1d42c88158aaf637fa5203', '8d30baa03bfc4233a8f115c57a0ebf08', '63eb82a44bf64c96a0b9023fa2a3c9d9') a.RuleSql != '' and a.RuleSql is not null and b.Enable = 1  
2020-06-17 11:16:20.430 [DEBUG] c.b.r.m.e.mapper.RuleEngineMapper.getAllRules      - [debug:159] ==> Parameters:  
2020-06-17 11:16:20.527 [DEBUG] c.b.r.m.e.mapper.RuleEngineMapper.getAllRules      - [debug:159] <==      Total: 310 
2020-06-17 11:16:20.745 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [init:68] 加载规则：310 条 
2020-06-17 11:16:20.761 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.getAllCode    - [debug:159] ==>  Preparing: SELECT codeSysType AS type, code AS code, [value] AS value FROM tb_code_value WHERE code != '' AND [value] != ''  
2020-06-17 11:16:20.761 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.getAllCode    - [debug:159] ==> Parameters:  
2020-06-17 11:16:21.290 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.getAllCode    - [debug:159] <==      Total: 44881 
2020-06-17 11:16:21.319 [INFO ] c.b.r.m.m.service.impl.EhrModelBuildServiceImpl    - [init:96] 初始化字典类型: 467 种 
2020-06-17 11:16:21.320 [INFO ] c.b.r.m.m.service.impl.EhrModelBuildServiceImpl    - [init:97] 初始化字典: 44881 条 
2020-06-17 11:16:21.320 [ERROR] c.b.r.m.process.service.impl.QcProcessServiceImpl  - [init:44] 初始化线程池 
2020-06-17 11:16:21.476 [INFO ] o.s.scheduling.concurrent.ThreadPoolTaskExecutor   - [initialize:171] Initializing ExecutorService 'applicationTaskExecutor' 
2020-06-17 11:16:21.712 [INFO ] org.apache.coyote.http11.Http11NioProtocol         - [log:173] Starting ProtocolHandler ["http-nio-8838"] 
2020-06-17 11:16:21.724 [INFO ] org.apache.coyote.http11.Http11NioProtocol         - [log:173] Pausing ProtocolHandler ["http-nio-8838"] 
2020-06-17 11:16:21.724 [INFO ] org.apache.catalina.core.StandardService           - [log:173] Stopping service [Tomcat] 
2020-06-17 11:16:21.728 [INFO ] org.apache.coyote.http11.Http11NioProtocol         - [log:173] Stopping ProtocolHandler ["http-nio-8838"] 
2020-06-17 11:16:21.728 [INFO ] org.apache.coyote.http11.Http11NioProtocol         - [log:173] Destroying ProtocolHandler ["http-nio-8838"] 
2020-06-17 11:16:21.730 [INFO ] o.s.b.a.l.ConditionEvaluationReportLoggingListener - [logMessage:136]     Error starting ApplicationContext. To display the conditions report re-run your application with 'debug' enabled. 
2020-06-17 11:16:21.731 [ERROR] o.s.b.diagnostics.LoggingFailureAnalysisReporter   - [report:40]     ***************************  APPLICATION FAILED TO START  ***************************    Description:    Web server failed to start. Port 8838 was already in use.    Action:    Identify and stop the process that's listening on port 8838 or configure this application to listen on another port.   
2020-06-17 11:16:21.734 [INFO ] o.s.scheduling.concurrent.ThreadPoolTaskExecutor   - [shutdown:208] Shutting down ExecutorService 'applicationTaskExecutor' 
2020-06-17 11:16:21.738 [INFO ] com.alibaba.druid.pool.DruidDataSource             - [close:1825] {dataSource-1} closed 
2020-06-17 11:19:53.582 [INFO ] com.benetech.rules.RulesApplication                - [logStarting:55] Starting RulesApplication v1.0-SNAPSHOT on DESKTOP-EOCO1V0 with PID 3300 (D:\51\python\project\instance\zyjk\EHR\controlRuleNew\config\healthRecordRules.jar started by ZY in D:\51\python\project\instance\zyjk\EHR\controlRuleNew) 
2020-06-17 11:19:53.586 [DEBUG] com.benetech.rules.RulesApplication                - [logStarting:56] Running with Spring Boot v2.2.1.RELEASE, Spring v5.2.1.RELEASE 
2020-06-17 11:19:53.586 [INFO ] com.benetech.rules.RulesApplication                - [logStartupProfileInfo:655] The following profiles are active: test 
2020-06-17 11:19:55.303 [INFO ] o.s.boot.web.embedded.tomcat.TomcatWebServer       - [initialize:92] Tomcat initialized with port(s): 8838 (http) 
2020-06-17 11:19:55.317 [INFO ] org.apache.coyote.http11.Http11NioProtocol         - [log:173] Initializing ProtocolHandler ["http-nio-8838"] 
2020-06-17 11:19:55.317 [INFO ] org.apache.catalina.core.StandardService           - [log:173] Starting service [Tomcat] 
2020-06-17 11:19:55.318 [INFO ] org.apache.catalina.core.StandardEngine            - [log:173] Starting Servlet engine: [Apache Tomcat/9.0.27] 
2020-06-17 11:19:55.386 [INFO ] o.a.c.c.C.[.[localhost].[/healthRecordRules]       - [log:173] Initializing Spring embedded WebApplicationContext 
2020-06-17 11:19:55.386 [INFO ] org.springframework.web.context.ContextLoader      - [prepareWebApplicationContext:284] Root WebApplicationContext: initialization completed in 1701 ms 
2020-06-17 11:19:55.467 [DEBUG] org.apache.ibatis.logging.LogFactory               - [setImplementation:135] Logging initialized using 'class org.apache.ibatis.logging.slf4j.Slf4jImpl' adapter. 
2020-06-17 11:19:55.775 [WARN ] org.mybatis.spring.SqlSessionFactoryBean           - [buildSqlSessionFactory:467] Can't find class in '[com.benetech.rules.*.entity]' package. Please check your configuration. 
2020-06-17 11:19:56.760 [INFO ] com.alibaba.druid.pool.DruidDataSource             - [init:930] {dataSource-1} inited 
2020-06-17 11:19:56.949 [DEBUG] c.b.r.m.e.mapper.RuleEngineMapper.getAllRules      - [debug:159] ==>  Preparing: select a.RuleId as ruleId, a.RuleSql as clazz from HrRule a join HrRuleProps b on a.RuleId = b.RuleId where -- RuleId in ('34278f71cf1d42c88158aaf637fa5203', '8d30baa03bfc4233a8f115c57a0ebf08', '63eb82a44bf64c96a0b9023fa2a3c9d9') a.RuleSql != '' and a.RuleSql is not null and b.Enable = 1  
2020-06-17 11:19:56.969 [DEBUG] c.b.r.m.e.mapper.RuleEngineMapper.getAllRules      - [debug:159] ==> Parameters:  
2020-06-17 11:19:57.051 [DEBUG] c.b.r.m.e.mapper.RuleEngineMapper.getAllRules      - [debug:159] <==      Total: 310 
2020-06-17 11:19:57.286 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [init:68] 加载规则：310 条 
2020-06-17 11:19:57.306 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.getAllCode    - [debug:159] ==>  Preparing: SELECT codeSysType AS type, code AS code, [value] AS value FROM tb_code_value WHERE code != '' AND [value] != ''  
2020-06-17 11:19:57.306 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.getAllCode    - [debug:159] ==> Parameters:  
2020-06-17 11:19:57.675 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.getAllCode    - [debug:159] <==      Total: 44881 
2020-06-17 11:19:57.701 [INFO ] c.b.r.m.m.service.impl.EhrModelBuildServiceImpl    - [init:96] 初始化字典类型: 467 种 
2020-06-17 11:19:57.702 [INFO ] c.b.r.m.m.service.impl.EhrModelBuildServiceImpl    - [init:97] 初始化字典: 44881 条 
2020-06-17 11:19:57.702 [ERROR] c.b.r.m.process.service.impl.QcProcessServiceImpl  - [init:44] 初始化线程池 
2020-06-17 11:19:57.826 [INFO ] o.s.scheduling.concurrent.ThreadPoolTaskExecutor   - [initialize:171] Initializing ExecutorService 'applicationTaskExecutor' 
2020-06-17 11:19:58.042 [INFO ] org.apache.coyote.http11.Http11NioProtocol         - [log:173] Starting ProtocolHandler ["http-nio-8838"] 
2020-06-17 11:19:58.053 [INFO ] org.apache.coyote.http11.Http11NioProtocol         - [log:173] Pausing ProtocolHandler ["http-nio-8838"] 
2020-06-17 11:19:58.053 [INFO ] org.apache.catalina.core.StandardService           - [log:173] Stopping service [Tomcat] 
2020-06-17 11:19:58.056 [INFO ] org.apache.coyote.http11.Http11NioProtocol         - [log:173] Stopping ProtocolHandler ["http-nio-8838"] 
2020-06-17 11:19:58.057 [INFO ] org.apache.coyote.http11.Http11NioProtocol         - [log:173] Destroying ProtocolHandler ["http-nio-8838"] 
2020-06-17 11:19:58.059 [INFO ] o.s.b.a.l.ConditionEvaluationReportLoggingListener - [logMessage:136]     Error starting ApplicationContext. To display the conditions report re-run your application with 'debug' enabled. 
2020-06-17 11:19:58.061 [ERROR] o.s.b.diagnostics.LoggingFailureAnalysisReporter   - [report:40]     ***************************  APPLICATION FAILED TO START  ***************************    Description:    Web server failed to start. Port 8838 was already in use.    Action:    Identify and stop the process that's listening on port 8838 or configure this application to listen on another port.   
2020-06-17 11:19:58.063 [INFO ] o.s.scheduling.concurrent.ThreadPoolTaskExecutor   - [shutdown:208] Shutting down ExecutorService 'applicationTaskExecutor' 
2020-06-17 11:19:58.066 [INFO ] com.alibaba.druid.pool.DruidDataSource             - [close:1825] {dataSource-1} closed 
2020-06-17 11:21:31.508 [INFO ] com.benetech.rules.RulesApplication                - [logStarting:55] Starting RulesApplication v1.0-SNAPSHOT on DESKTOP-EOCO1V0 with PID 4912 (D:\51\python\project\instance\zyjk\EHR\controlRuleNew\config\healthRecordRules.jar started by ZY in D:\51\python\project\instance\zyjk\EHR\controlRuleNew) 
2020-06-17 11:21:31.514 [DEBUG] com.benetech.rules.RulesApplication                - [logStarting:56] Running with Spring Boot v2.2.1.RELEASE, Spring v5.2.1.RELEASE 
2020-06-17 11:21:31.515 [INFO ] com.benetech.rules.RulesApplication                - [logStartupProfileInfo:655] The following profiles are active: test 
2020-06-17 11:21:33.026 [INFO ] o.s.boot.web.embedded.tomcat.TomcatWebServer       - [initialize:92] Tomcat initialized with port(s): 8838 (http) 
2020-06-17 11:21:33.037 [INFO ] org.apache.coyote.http11.Http11NioProtocol         - [log:173] Initializing ProtocolHandler ["http-nio-8838"] 
2020-06-17 11:21:33.038 [INFO ] org.apache.catalina.core.StandardService           - [log:173] Starting service [Tomcat] 
2020-06-17 11:21:33.038 [INFO ] org.apache.catalina.core.StandardEngine            - [log:173] Starting Servlet engine: [Apache Tomcat/9.0.27] 
2020-06-17 11:21:33.109 [INFO ] o.a.c.c.C.[.[localhost].[/healthRecordRules]       - [log:173] Initializing Spring embedded WebApplicationContext 
2020-06-17 11:21:33.110 [INFO ] org.springframework.web.context.ContextLoader      - [prepareWebApplicationContext:284] Root WebApplicationContext: initialization completed in 1493 ms 
2020-06-17 11:21:33.195 [DEBUG] org.apache.ibatis.logging.LogFactory               - [setImplementation:135] Logging initialized using 'class org.apache.ibatis.logging.slf4j.Slf4jImpl' adapter. 
2020-06-17 11:21:33.453 [WARN ] org.mybatis.spring.SqlSessionFactoryBean           - [buildSqlSessionFactory:467] Can't find class in '[com.benetech.rules.*.entity]' package. Please check your configuration. 
2020-06-17 11:21:34.103 [INFO ] com.alibaba.druid.pool.DruidDataSource             - [init:930] {dataSource-1} inited 
2020-06-17 11:21:34.294 [DEBUG] c.b.r.m.e.mapper.RuleEngineMapper.getAllRules      - [debug:159] ==>  Preparing: select a.RuleId as ruleId, a.RuleSql as clazz from HrRule a join HrRuleProps b on a.RuleId = b.RuleId where -- RuleId in ('34278f71cf1d42c88158aaf637fa5203', '8d30baa03bfc4233a8f115c57a0ebf08', '63eb82a44bf64c96a0b9023fa2a3c9d9') a.RuleSql != '' and a.RuleSql is not null and b.Enable = 1  
2020-06-17 11:21:34.324 [DEBUG] c.b.r.m.e.mapper.RuleEngineMapper.getAllRules      - [debug:159] ==> Parameters:  
2020-06-17 11:21:34.407 [DEBUG] c.b.r.m.e.mapper.RuleEngineMapper.getAllRules      - [debug:159] <==      Total: 310 
2020-06-17 11:21:34.646 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [init:68] 加载规则：310 条 
2020-06-17 11:21:34.665 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.getAllCode    - [debug:159] ==>  Preparing: SELECT codeSysType AS type, code AS code, [value] AS value FROM tb_code_value WHERE code != '' AND [value] != ''  
2020-06-17 11:21:34.665 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.getAllCode    - [debug:159] ==> Parameters:  
2020-06-17 11:21:34.757 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 11:21:34.757 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 11:21:34.767 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 11:21:34.773 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 11:21:34.773 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 11:21:34.779 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 11:21:34.784 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 11:21:34.784 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 11:21:34.790 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-17 11:21:34.801 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 11:21:34.801 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:21:34.809 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 11:21:34.813 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 11:21:34.813 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:21:34.819 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 11:21:34.822 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 11:21:34.822 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 11:21:34.823 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 11:21:34.823 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 11:21:34.828 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 11:21:34.832 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 11:21:34.832 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 11:21:34.838 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 11:21:34.844 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 11:21:34.844 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:21:34.848 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 11:21:34.852 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 11:21:34.852 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:21:34.869 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 11:21:34.877 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 11:21:34.877 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 11:21:34.877 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 11:21:34.878 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 11:21:34.883 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 11:21:34.887 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 11:21:34.888 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 11:21:34.893 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 11:21:34.898 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 11:21:34.898 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:21:34.906 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 11:21:34.912 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 11:21:34.912 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:21:34.917 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 11:21:34.933 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:姓名未填写姓名为空值 
2020-06-17 11:21:34.936 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:血型与RH血型逻辑不符同时满足以下条件： 1、个人基本信息表《血型》填写为“不详” 2、个人基本信息表《RH血型》填写为“阴性”或“阳性” 
2020-06-17 11:21:34.938 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-17 11:21:34.939 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 63eb82a44bf64c96a0b9023fa2a3c9d9(String), 2020-06-17 11:21:34.938(Timestamp), 31011310200312009116(String), a58b2894635045b18a63c250d46ce8a8(String), 2020-06-17 11:21:34.938(Timestamp) 
2020-06-17 11:21:34.971 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 2 
2020-06-17 11:21:35.292 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.getAllCode    - [debug:159] <==      Total: 44881 
2020-06-17 11:21:35.318 [INFO ] c.b.r.m.m.service.impl.EhrModelBuildServiceImpl    - [init:96] 初始化字典类型: 467 种 
2020-06-17 11:21:35.318 [INFO ] c.b.r.m.m.service.impl.EhrModelBuildServiceImpl    - [init:97] 初始化字典: 44881 条 
2020-06-17 11:21:35.319 [ERROR] c.b.r.m.process.service.impl.QcProcessServiceImpl  - [init:44] 初始化线程池 
2020-06-17 11:21:35.458 [INFO ] o.s.scheduling.concurrent.ThreadPoolTaskExecutor   - [initialize:171] Initializing ExecutorService 'applicationTaskExecutor' 
2020-06-17 11:21:35.735 [INFO ] org.apache.coyote.http11.Http11NioProtocol         - [log:173] Starting ProtocolHandler ["http-nio-8838"] 
2020-06-17 11:21:35.748 [INFO ] org.apache.coyote.http11.Http11NioProtocol         - [log:173] Pausing ProtocolHandler ["http-nio-8838"] 
2020-06-17 11:21:35.749 [INFO ] org.apache.catalina.core.StandardService           - [log:173] Stopping service [Tomcat] 
2020-06-17 11:21:35.753 [INFO ] org.apache.coyote.http11.Http11NioProtocol         - [log:173] Stopping ProtocolHandler ["http-nio-8838"] 
2020-06-17 11:21:35.753 [INFO ] org.apache.coyote.http11.Http11NioProtocol         - [log:173] Destroying ProtocolHandler ["http-nio-8838"] 
2020-06-17 11:21:35.755 [INFO ] o.s.b.a.l.ConditionEvaluationReportLoggingListener - [logMessage:136]     Error starting ApplicationContext. To display the conditions report re-run your application with 'debug' enabled. 
2020-06-17 11:21:35.757 [ERROR] o.s.b.diagnostics.LoggingFailureAnalysisReporter   - [report:40]     ***************************  APPLICATION FAILED TO START  ***************************    Description:    Web server failed to start. Port 8838 was already in use.    Action:    Identify and stop the process that's listening on port 8838 or configure this application to listen on another port.   
2020-06-17 11:21:35.759 [INFO ] o.s.scheduling.concurrent.ThreadPoolTaskExecutor   - [shutdown:208] Shutting down ExecutorService 'applicationTaskExecutor' 
2020-06-17 11:21:35.763 [INFO ] com.alibaba.druid.pool.DruidDataSource             - [close:1825] {dataSource-1} closed 
2020-06-17 11:21:38.311 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 11:21:38.312 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 11:21:38.318 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 11:21:38.323 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 11:21:38.324 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 11:21:38.330 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 11:21:38.335 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 11:21:38.336 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 11:21:38.341 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-17 11:21:38.346 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 11:21:38.347 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:21:38.352 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 11:21:38.357 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 11:21:38.358 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:21:38.363 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 11:21:38.369 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 11:21:38.369 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 11:21:38.369 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 11:21:38.370 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 11:21:38.374 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 11:21:38.379 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 11:21:38.380 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 11:21:38.385 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 11:21:38.390 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 11:21:38.390 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:21:38.395 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 11:21:38.399 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 11:21:38.400 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:21:38.413 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 11:21:38.418 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 11:21:38.418 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 11:21:38.418 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 11:21:38.419 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 11:21:38.423 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 11:21:38.427 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 11:21:38.427 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 11:21:38.431 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 11:21:38.436 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 11:21:38.436 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:21:38.441 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 11:21:38.445 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 11:21:38.446 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:21:38.460 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 11:21:38.482 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:姓名填写不规范同时满足以下条件： 1、联系人姓名不为空值 2、联系人姓名为纯数字 
2020-06-17 11:21:38.483 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:与三级医院住院就诊记录表姓名不一致同时满足以下条件： 1、封面《姓名》不为空值 2、三级医院住院就诊记录表《患者姓名》不为空 3、封面《姓名》与住院就诊记录表中《患者姓名》不相等 
2020-06-17 11:21:38.483 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:与三级医院门诊就诊记录表姓名不一致同时满足以下条件： 1、封面《姓名》不为空值 2、三级医院门诊就诊记录表《患者姓名》不为空 3、封面《姓名》与门诊就诊记录表中《患者姓名》不相等 
2020-06-17 11:21:38.484 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:血型与RH血型逻辑不符同时满足以下条件： 1、个人基本信息表《血型》填写为“不详” 2、个人基本信息表《RH血型》填写为“阴性”或“阳性” 
2020-06-17 11:21:38.486 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-17 11:21:38.487 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 61ed70b670f2460a94ebc183f6b86f5d(String), 2020-06-17 11:21:38.486(Timestamp), 31011310200312009116(String), 814b3d0aca3642af82ef320f98d4dfba(String), 2020-06-17 11:21:38.486(Timestamp), 31011310200312009116(String), 847bc4b46918417dab4aa917af3355c3(String), 2020-06-17 11:21:38.486(Timestamp), 31011310200312009116(String), a58b2894635045b18a63c250d46ce8a8(String), 2020-06-17 11:21:38.486(Timestamp) 
2020-06-17 11:21:38.519 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 4 
2020-06-17 11:21:41.766 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 11:21:41.767 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 11:21:41.799 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 11:21:41.815 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 11:21:41.815 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 11:21:41.843 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 11:21:41.849 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 11:21:41.850 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 11:21:41.855 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-17 11:21:41.860 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 11:21:41.861 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:21:41.866 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 11:21:41.870 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 11:21:41.871 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:21:41.877 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 11:21:41.881 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 11:21:41.881 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 11:21:41.882 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 11:21:41.882 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 11:21:41.889 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 11:21:41.893 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 11:21:41.894 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 11:21:41.898 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 11:21:41.904 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 11:21:41.905 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:21:41.910 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 11:21:41.914 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 11:21:41.915 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:21:41.928 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 11:21:41.933 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 11:21:41.933 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 11:21:41.933 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 11:21:41.933 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 11:21:41.937 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 11:21:41.942 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 11:21:41.942 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 11:21:41.946 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 11:21:41.950 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 11:21:41.951 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:21:41.955 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 11:21:41.959 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 11:21:41.959 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:21:41.963 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 11:21:41.977 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:与三级医院住院就诊记录表姓名不一致同时满足以下条件： 1、封面《姓名》不为空值 2、三级医院住院就诊记录表《患者姓名》不为空 3、封面《姓名》与住院就诊记录表中《患者姓名》不相等 
2020-06-17 11:21:41.977 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:与三级医院门诊就诊记录表姓名不一致同时满足以下条件： 1、封面《姓名》不为空值 2、三级医院门诊就诊记录表《患者姓名》不为空 3、封面《姓名》与门诊就诊记录表中《患者姓名》不相等 
2020-06-17 11:21:41.978 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:血型与RH血型逻辑不符同时满足以下条件： 1、个人基本信息表《血型》填写为“不详” 2、个人基本信息表《RH血型》填写为“阴性”或“阳性” 
2020-06-17 11:21:41.979 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:姓名长度异常长度>50字符 
2020-06-17 11:21:41.981 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-17 11:21:41.981 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 814b3d0aca3642af82ef320f98d4dfba(String), 2020-06-17 11:21:41.98(Timestamp), 31011310200312009116(String), 847bc4b46918417dab4aa917af3355c3(String), 2020-06-17 11:21:41.98(Timestamp), 31011310200312009116(String), a58b2894635045b18a63c250d46ce8a8(String), 2020-06-17 11:21:41.98(Timestamp), 31011310200312009116(String), b8eeb38e528544b28133b9ee94c5fbc4(String), 2020-06-17 11:21:41.98(Timestamp) 
2020-06-17 11:21:41.999 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 4 
2020-06-17 11:21:45.166 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 11:21:45.166 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 11:21:45.180 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 11:21:45.185 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 11:21:45.185 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 11:21:45.190 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 11:21:45.193 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 11:21:45.194 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 11:21:45.200 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-17 11:21:45.205 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 11:21:45.205 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:21:45.210 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 11:21:45.215 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 11:21:45.216 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:21:45.222 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 11:21:45.226 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 11:21:45.227 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 11:21:45.227 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 11:21:45.228 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 11:21:45.232 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 11:21:45.236 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 11:21:45.237 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 11:21:45.241 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 11:21:45.245 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 11:21:45.246 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:21:45.251 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 11:21:45.255 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 11:21:45.256 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:21:45.270 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 11:21:45.274 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 11:21:45.274 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 11:21:45.274 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 11:21:45.275 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 11:21:45.280 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 11:21:45.286 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 11:21:45.286 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 11:21:45.290 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 11:21:45.294 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 11:21:45.294 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:21:45.299 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 11:21:45.304 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 11:21:45.304 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:21:45.309 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 11:21:45.326 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:现住址长度异常长度>100字符（包含省市区、乡镇街道名称（如有）、村居委会名称（如有）、详细地址） 
2020-06-17 11:21:45.326 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:血型与RH血型逻辑不符同时满足以下条件： 1、个人基本信息表《血型》填写为“不详” 2、个人基本信息表《RH血型》填写为“阴性”或“阳性” 
2020-06-17 11:21:45.330 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-17 11:21:45.330 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 91665e0b2efa4f86aea807ec9f4883c3(String), 2020-06-17 11:21:45.329(Timestamp), 31011310200312009116(String), a58b2894635045b18a63c250d46ce8a8(String), 2020-06-17 11:21:45.329(Timestamp) 
2020-06-17 11:21:45.342 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 2 
2020-06-17 11:21:48.582 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 11:21:48.583 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 11:21:48.587 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 11:21:48.590 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 11:21:48.591 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 11:21:48.596 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 11:21:48.601 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 11:21:48.601 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 11:21:48.607 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-17 11:21:48.612 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 11:21:48.612 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:21:48.615 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 11:21:48.620 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 11:21:48.620 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:21:48.625 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 11:21:48.630 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 11:21:48.631 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 11:21:48.631 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 11:21:48.631 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 11:21:48.636 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 11:21:48.640 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 11:21:48.640 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 11:21:48.645 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 11:21:48.649 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 11:21:48.649 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:21:48.654 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 11:21:48.658 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 11:21:48.658 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:21:48.672 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 11:21:48.677 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 11:21:48.677 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 11:21:48.678 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 11:21:48.678 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 11:21:48.683 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 11:21:48.687 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 11:21:48.687 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 11:21:48.691 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 11:21:48.696 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 11:21:48.696 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:21:48.702 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 11:21:48.707 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 11:21:48.707 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:21:48.713 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 11:21:48.726 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:户籍地址长度异常长度>100字符（包含省市区、乡镇街道名称（如有）、村居委会名称（如有）、详细地址） 
2020-06-17 11:21:48.729 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:血型与RH血型逻辑不符同时满足以下条件： 1、个人基本信息表《血型》填写为“不详” 2、个人基本信息表《RH血型》填写为“阴性”或“阳性” 
2020-06-17 11:21:48.731 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-17 11:21:48.732 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 329b69c7855544e986fc0073b77fe9be(String), 2020-06-17 11:21:48.731(Timestamp), 31011310200312009116(String), a58b2894635045b18a63c250d46ce8a8(String), 2020-06-17 11:21:48.731(Timestamp) 
2020-06-17 11:21:48.748 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 2 
2020-06-17 11:21:51.952 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 11:21:51.952 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 11:21:51.963 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 11:21:51.967 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 11:21:51.967 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 11:21:51.972 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 11:21:51.976 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 11:21:51.976 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 11:21:51.983 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-17 11:21:51.989 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 11:21:51.989 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:21:51.993 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 11:21:51.997 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 11:21:51.997 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:21:52.004 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 11:21:52.009 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 11:21:52.009 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 11:21:52.009 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 11:21:52.010 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 11:21:52.014 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 11:21:52.018 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 11:21:52.019 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 11:21:52.024 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 11:21:52.028 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 11:21:52.029 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:21:52.033 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 11:21:52.040 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 11:21:52.040 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:21:52.056 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 11:21:52.061 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 11:21:52.061 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 11:21:52.062 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 11:21:52.062 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 11:21:52.070 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 11:21:52.075 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 11:21:52.076 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 11:21:52.081 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 11:21:52.088 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 11:21:52.089 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:21:52.094 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 11:21:52.099 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 11:21:52.100 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:21:52.106 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 11:21:52.134 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:现住址长度异常长度>100字符（包含省市区、乡镇街道名称（如有）、村居委会名称（如有）、详细地址） 
2020-06-17 11:21:52.135 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:现住址村（居）委会名称长度异常长度>100字符 
2020-06-17 11:21:52.135 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:血型与RH血型逻辑不符同时满足以下条件： 1、个人基本信息表《血型》填写为“不详” 2、个人基本信息表《RH血型》填写为“阴性”或“阳性” 
2020-06-17 11:21:52.137 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-17 11:21:52.138 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 91665e0b2efa4f86aea807ec9f4883c3(String), 2020-06-17 11:21:52.137(Timestamp), 31011310200312009116(String), 9df07515be3d4c2887e947c6ce5adace(String), 2020-06-17 11:21:52.137(Timestamp), 31011310200312009116(String), a58b2894635045b18a63c250d46ce8a8(String), 2020-06-17 11:21:52.137(Timestamp) 
2020-06-17 11:21:52.168 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 3 
2020-06-17 11:21:55.390 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 11:21:55.390 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 11:21:55.396 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 11:21:55.399 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 11:21:55.400 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 11:21:55.404 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 11:21:55.408 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 11:21:55.409 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 11:21:55.413 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-17 11:21:55.418 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 11:21:55.418 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:21:55.422 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 11:21:55.427 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 11:21:55.427 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:21:55.433 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 11:21:55.437 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 11:21:55.437 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 11:21:55.437 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 11:21:55.438 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 11:21:55.442 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 11:21:55.446 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 11:21:55.447 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 11:21:55.450 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 11:21:55.456 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 11:21:55.456 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:21:55.461 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 11:21:55.465 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 11:21:55.465 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:21:55.478 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 11:21:55.482 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 11:21:55.482 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 11:21:55.482 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 11:21:55.482 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 11:21:55.486 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 11:21:55.490 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 11:21:55.490 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 11:21:55.494 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 11:21:55.500 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 11:21:55.500 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:21:55.506 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 11:21:55.511 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 11:21:55.511 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:21:55.515 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 11:21:55.529 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:建档单位长度异常长度>100字符 
2020-06-17 11:21:55.532 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:血型与RH血型逻辑不符同时满足以下条件： 1、个人基本信息表《血型》填写为“不详” 2、个人基本信息表《RH血型》填写为“阴性”或“阳性” 
2020-06-17 11:21:55.535 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-17 11:21:55.536 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 403a97f9ec40406b9723b3c6845a6cee(String), 2020-06-17 11:21:55.535(Timestamp), 31011310200312009116(String), a58b2894635045b18a63c250d46ce8a8(String), 2020-06-17 11:21:55.535(Timestamp) 
2020-06-17 11:21:55.555 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 2 
2020-06-17 11:21:58.742 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 11:21:58.743 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 11:21:58.751 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 11:21:58.755 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 11:21:58.756 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 11:21:58.762 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 11:21:58.767 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 11:21:58.768 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 11:21:58.778 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-17 11:21:58.794 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 11:21:58.795 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:21:58.800 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 11:21:58.804 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 11:21:58.804 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:21:58.812 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 11:21:58.815 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 11:21:58.816 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 11:21:58.816 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 11:21:58.816 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 11:21:58.826 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 11:21:58.830 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 11:21:58.831 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 11:21:58.840 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 11:21:58.844 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 11:21:58.844 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:21:58.849 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 11:21:58.854 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 11:21:58.855 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:21:58.871 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 11:21:58.875 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 11:21:58.875 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 11:21:58.876 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 11:21:58.876 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 11:21:58.881 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 11:21:58.885 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 11:21:58.885 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 11:21:58.893 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 11:21:58.897 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 11:21:58.898 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:21:58.902 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 11:21:58.906 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 11:21:58.907 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:21:58.913 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 11:21:58.930 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:血型与RH血型逻辑不符同时满足以下条件： 1、个人基本信息表《血型》填写为“不详” 2、个人基本信息表《RH血型》填写为“阴性”或“阳性” 
2020-06-17 11:21:58.932 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1)  
2020-06-17 11:21:58.932 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), a58b2894635045b18a63c250d46ce8a8(String), 2020-06-17 11:21:58.932(Timestamp) 
2020-06-17 11:21:58.958 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 1 
2020-06-17 11:22:02.181 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 11:22:02.181 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 11:22:02.194 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 11:22:02.198 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 11:22:02.198 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 11:22:02.203 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 11:22:02.207 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 11:22:02.207 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 11:22:02.211 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-17 11:22:02.215 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 11:22:02.216 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:22:02.220 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 11:22:02.224 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 11:22:02.224 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:22:02.232 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 11:22:02.236 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 11:22:02.236 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 11:22:02.237 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 11:22:02.237 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 11:22:02.241 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 11:22:02.245 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 11:22:02.246 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 11:22:02.250 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 11:22:02.254 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 11:22:02.255 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:22:02.262 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 11:22:02.266 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 11:22:02.266 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:22:02.280 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 11:22:02.284 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 11:22:02.284 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 11:22:02.284 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 11:22:02.284 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 11:22:02.289 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 11:22:02.294 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 11:22:02.294 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 11:22:02.298 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 11:22:02.303 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 11:22:02.303 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:22:02.307 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 11:22:02.311 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 11:22:02.311 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:22:02.316 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 11:22:02.330 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:责任医生长度异常长度>50字符 
2020-06-17 11:22:02.331 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:血型与RH血型逻辑不符同时满足以下条件： 1、个人基本信息表《血型》填写为“不详” 2、个人基本信息表《RH血型》填写为“阴性”或“阳性” 
2020-06-17 11:22:02.333 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-17 11:22:02.333 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 9042bba97fb74b558de96e35ab2ffdc2(String), 2020-06-17 11:22:02.333(Timestamp), 31011310200312009116(String), a58b2894635045b18a63c250d46ce8a8(String), 2020-06-17 11:22:02.333(Timestamp) 
2020-06-17 11:22:02.349 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 2 
2020-06-17 11:22:05.558 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 11:22:05.559 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 11:22:05.564 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 11:22:05.568 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 11:22:05.568 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 11:22:05.573 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 11:22:05.578 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 11:22:05.578 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 11:22:05.585 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-17 11:22:05.589 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 11:22:05.589 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:22:05.592 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 11:22:05.597 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 11:22:05.597 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:22:05.603 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 11:22:05.608 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 11:22:05.608 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 11:22:05.608 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 11:22:05.609 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 11:22:05.613 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 11:22:05.618 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 11:22:05.618 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 11:22:05.623 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 11:22:05.628 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 11:22:05.629 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:22:05.634 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 11:22:05.638 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 11:22:05.639 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:22:05.654 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 11:22:05.659 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 11:22:05.660 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 11:22:05.661 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 11:22:05.662 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 11:22:05.667 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 11:22:05.672 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 11:22:05.673 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 11:22:05.678 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 11:22:05.683 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 11:22:05.684 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:22:05.691 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 11:22:05.696 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 11:22:05.697 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:22:05.703 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 11:22:05.730 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:个人基本信息表工作单位工作单位不为汉字 
2020-06-17 11:22:05.734 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:血型与RH血型逻辑不符同时满足以下条件： 1、个人基本信息表《血型》填写为“不详” 2、个人基本信息表《RH血型》填写为“阴性”或“阳性” 
2020-06-17 11:22:05.738 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-17 11:22:05.740 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 4ad5f41e777d499894964fe735a4ed46(String), 2020-06-17 11:22:05.738(Timestamp), 31011310200312009116(String), a58b2894635045b18a63c250d46ce8a8(String), 2020-06-17 11:22:05.738(Timestamp) 
2020-06-17 11:22:05.760 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 2 
2020-06-17 11:22:09.135 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 11:22:09.136 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 11:22:09.141 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 11:22:09.147 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 11:22:09.147 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 11:22:09.154 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 11:22:09.158 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 11:22:09.159 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 11:22:09.164 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-17 11:22:09.169 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 11:22:09.169 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:22:09.174 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 11:22:09.178 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 11:22:09.179 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:22:09.184 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 11:22:09.189 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 11:22:09.189 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 11:22:09.190 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 11:22:09.190 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 11:22:09.195 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 11:22:09.199 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 11:22:09.199 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 11:22:09.206 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 11:22:09.211 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 11:22:09.212 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:22:09.218 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 11:22:09.222 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 11:22:09.223 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:22:09.236 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 11:22:09.241 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 11:22:09.241 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 11:22:09.241 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 11:22:09.242 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 11:22:09.245 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 11:22:09.252 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 11:22:09.252 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 11:22:09.260 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 11:22:09.265 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 11:22:09.266 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:22:09.270 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 11:22:09.275 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 11:22:09.275 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:22:09.279 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 11:22:09.292 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:联系人姓名填写为数字同时满足以下条件： 1、联系人姓名不为空值 2、联系人姓名为纯数字 
2020-06-17 11:22:09.295 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:血型与RH血型逻辑不符同时满足以下条件： 1、个人基本信息表《血型》填写为“不详” 2、个人基本信息表《RH血型》填写为“阴性”或“阳性” 
2020-06-17 11:22:09.298 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-17 11:22:09.299 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 1a7e1f2e0bce421585a1fad889411dd4(String), 2020-06-17 11:22:09.298(Timestamp), 31011310200312009116(String), a58b2894635045b18a63c250d46ce8a8(String), 2020-06-17 11:22:09.298(Timestamp) 
2020-06-17 11:22:09.326 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 2 
2020-06-17 11:22:12.709 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 11:22:12.709 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 11:22:12.714 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 11:22:12.718 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 11:22:12.719 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 11:22:12.723 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 11:22:12.731 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 11:22:12.731 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 11:22:12.736 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-17 11:22:12.740 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 11:22:12.741 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:22:12.747 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 11:22:12.752 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 11:22:12.752 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:22:12.758 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 11:22:12.762 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 11:22:12.762 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 11:22:12.762 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 11:22:12.763 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 11:22:12.768 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 11:22:12.772 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 11:22:12.773 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 11:22:12.778 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 11:22:12.782 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 11:22:12.783 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:22:12.787 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 11:22:12.791 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 11:22:12.792 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:22:12.808 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 11:22:12.812 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 11:22:12.813 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 11:22:12.813 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 11:22:12.814 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 11:22:12.819 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 11:22:12.823 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 11:22:12.824 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 11:22:12.829 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 11:22:12.833 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 11:22:12.834 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:22:12.839 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 11:22:12.844 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 11:22:12.845 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:22:12.850 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 11:22:12.884 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:血型与RH血型逻辑不符同时满足以下条件： 1、个人基本信息表《血型》填写为“不详” 2、个人基本信息表《RH血型》填写为“阴性”或“阳性” 
2020-06-17 11:22:12.888 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1)  
2020-06-17 11:22:12.889 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), a58b2894635045b18a63c250d46ce8a8(String), 2020-06-17 11:22:12.888(Timestamp) 
2020-06-17 11:22:12.902 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 1 
2020-06-17 11:22:16.100 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 11:22:16.100 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 11:22:16.105 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 11:22:16.110 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 11:22:16.111 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 11:22:16.116 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 11:22:16.120 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 11:22:16.120 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 11:22:16.125 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-17 11:22:16.130 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 11:22:16.130 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:22:16.135 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 11:22:16.140 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 11:22:16.141 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:22:16.148 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 11:22:16.153 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 11:22:16.154 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 11:22:16.155 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 11:22:16.156 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 11:22:16.162 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 11:22:16.167 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 11:22:16.169 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 11:22:16.176 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 11:22:16.182 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 11:22:16.183 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:22:16.189 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 11:22:16.194 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 11:22:16.195 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:22:16.210 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 11:22:16.215 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 11:22:16.216 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 11:22:16.216 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 11:22:16.217 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 11:22:16.222 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 11:22:16.226 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 11:22:16.227 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 11:22:16.233 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 11:22:16.238 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 11:22:16.239 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:22:16.244 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 11:22:16.248 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 11:22:16.249 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:22:16.254 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 11:22:16.278 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:血型与RH血型逻辑不符同时满足以下条件： 1、个人基本信息表《血型》填写为“不详” 2、个人基本信息表《RH血型》填写为“阴性”或“阳性” 
2020-06-17 11:22:16.282 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1)  
2020-06-17 11:22:16.283 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), a58b2894635045b18a63c250d46ce8a8(String), 2020-06-17 11:22:16.282(Timestamp) 
2020-06-17 11:22:16.302 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 1 
2020-06-17 11:22:19.435 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 11:22:19.436 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 11:22:19.440 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 11:22:19.445 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 11:22:19.445 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 11:22:19.452 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 11:22:19.456 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 11:22:19.457 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 11:22:19.462 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-17 11:22:19.466 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 11:22:19.467 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:22:19.471 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 11:22:19.475 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 11:22:19.476 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:22:19.483 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 11:22:19.487 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 11:22:19.487 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 11:22:19.488 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 11:22:19.488 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 11:22:19.493 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 11:22:19.497 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 11:22:19.498 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 11:22:19.502 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 11:22:19.506 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 11:22:19.507 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:22:19.511 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 11:22:19.515 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 11:22:19.516 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:22:19.529 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 11:22:19.533 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 11:22:19.533 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 11:22:19.533 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 11:22:19.533 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 11:22:19.537 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 11:22:19.541 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 11:22:19.542 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 11:22:19.546 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 11:22:19.551 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 11:22:19.552 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:22:19.557 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 11:22:19.561 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 11:22:19.562 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:22:19.566 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 11:22:19.581 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:血型与RH血型逻辑不符同时满足以下条件： 1、个人基本信息表《血型》填写为“不详” 2、个人基本信息表《RH血型》填写为“阴性”或“阳性” 
2020-06-17 11:22:19.584 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1)  
2020-06-17 11:22:19.584 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), a58b2894635045b18a63c250d46ce8a8(String), 2020-06-17 11:22:19.583(Timestamp) 
2020-06-17 11:22:19.600 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 1 
2020-06-17 11:22:22.823 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 11:22:22.824 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 11:22:22.841 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 11:22:22.846 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 11:22:22.847 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 11:22:22.852 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 11:22:22.856 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 11:22:22.856 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 11:22:22.861 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-17 11:22:22.864 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 11:22:22.864 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:22:22.868 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 11:22:22.872 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 11:22:22.873 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:22:22.880 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 11:22:22.884 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 11:22:22.884 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 11:22:22.884 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 11:22:22.885 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 11:22:22.889 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 11:22:22.893 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 11:22:22.893 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 11:22:22.898 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 11:22:22.902 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 11:22:22.903 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:22:22.907 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 11:22:22.911 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 11:22:22.912 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:22:22.926 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 11:22:22.930 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 11:22:22.930 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 11:22:22.931 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 11:22:22.931 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 11:22:22.936 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 11:22:22.940 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 11:22:22.941 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 11:22:22.945 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 11:22:22.949 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 11:22:22.950 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:22:22.954 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 11:22:22.958 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 11:22:22.959 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:22:22.964 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 11:22:22.980 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:血型与RH血型逻辑不符同时满足以下条件： 1、个人基本信息表《血型》填写为“不详” 2、个人基本信息表《RH血型》填写为“阴性”或“阳性” 
2020-06-17 11:22:22.982 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1)  
2020-06-17 11:22:22.983 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), a58b2894635045b18a63c250d46ce8a8(String), 2020-06-17 11:22:22.982(Timestamp) 
2020-06-17 11:22:23.016 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 1 
2020-06-17 11:22:26.338 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 11:22:26.338 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 11:22:26.346 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 11:22:26.350 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 11:22:26.351 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 11:22:26.355 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 11:22:26.359 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 11:22:26.360 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 11:22:26.366 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-17 11:22:26.371 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 11:22:26.371 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:22:26.375 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 11:22:26.379 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 11:22:26.379 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:22:26.385 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 11:22:26.389 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 11:22:26.389 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 11:22:26.389 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 11:22:26.389 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 11:22:26.393 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 11:22:26.398 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 11:22:26.398 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 11:22:26.402 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 11:22:26.407 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 11:22:26.407 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:22:26.412 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 11:22:26.417 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 11:22:26.418 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:22:26.432 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 11:22:26.436 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 11:22:26.436 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 11:22:26.436 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 11:22:26.436 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 11:22:26.441 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 11:22:26.445 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 11:22:26.445 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 11:22:26.449 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 11:22:26.454 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 11:22:26.454 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:22:26.459 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 11:22:26.463 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 11:22:26.463 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:22:26.468 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 11:22:26.483 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:血型与RH血型逻辑不符同时满足以下条件： 1、个人基本信息表《血型》填写为“不详” 2、个人基本信息表《RH血型》填写为“阴性”或“阳性” 
2020-06-17 11:22:26.485 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1)  
2020-06-17 11:22:26.485 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), a58b2894635045b18a63c250d46ce8a8(String), 2020-06-17 11:22:26.484(Timestamp) 
2020-06-17 11:22:26.515 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 1 
2020-06-17 11:22:30.007 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 11:22:30.008 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 11:22:30.013 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 11:22:30.018 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 11:22:30.019 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 11:22:30.024 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 11:22:30.028 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 11:22:30.028 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 11:22:30.034 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-17 11:22:30.038 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 11:22:30.039 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:22:30.042 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 11:22:30.047 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 11:22:30.048 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:22:30.053 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 11:22:30.058 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 11:22:30.058 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 11:22:30.059 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 11:22:30.059 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 11:22:30.064 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 11:22:30.068 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 11:22:30.069 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 11:22:30.073 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 11:22:30.077 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 11:22:30.078 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:22:30.082 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 11:22:30.087 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 11:22:30.087 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:22:30.101 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 11:22:30.106 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 11:22:30.106 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 11:22:30.106 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 11:22:30.107 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 11:22:30.111 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 11:22:30.118 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 11:22:30.118 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 11:22:30.123 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 11:22:30.127 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 11:22:30.128 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:22:30.132 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 11:22:30.137 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 11:22:30.137 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:22:30.142 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 11:22:30.157 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:个人基本信息表既往史既往史疾病确诊时间未填写 
2020-06-17 11:22:30.158 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:个人基本信息表既往史既往史疾病确诊时间填写不规范 
2020-06-17 11:22:30.159 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:血型与RH血型逻辑不符同时满足以下条件： 1、个人基本信息表《血型》填写为“不详” 2、个人基本信息表《RH血型》填写为“阴性”或“阳性” 
2020-06-17 11:22:30.162 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-17 11:22:30.163 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 6302b0fcdcd7482099581602a1fec501(String), 2020-06-17 11:22:30.162(Timestamp), 31011310200312009116(String), 923bfb7880204efa8f26fd200d1bd17e(String), 2020-06-17 11:22:30.162(Timestamp), 31011310200312009116(String), a58b2894635045b18a63c250d46ce8a8(String), 2020-06-17 11:22:30.162(Timestamp) 
2020-06-17 11:22:30.175 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 3 
2020-06-17 11:33:17.755 [INFO ] com.benetech.rules.RulesApplication                - [logStarting:55] Starting RulesApplication v1.0-SNAPSHOT on DESKTOP-EOCO1V0 with PID 5092 (D:\51\python\project\instance\zyjk\EHR\controlRuleNew\config\healthRecordRules.jar started by ZY in D:\51\python\project\instance\zyjk\EHR\controlRuleNew) 
2020-06-17 11:33:17.762 [DEBUG] com.benetech.rules.RulesApplication                - [logStarting:56] Running with Spring Boot v2.2.1.RELEASE, Spring v5.2.1.RELEASE 
2020-06-17 11:33:17.762 [INFO ] com.benetech.rules.RulesApplication                - [logStartupProfileInfo:655] The following profiles are active: test 
2020-06-17 11:33:19.328 [INFO ] o.s.boot.web.embedded.tomcat.TomcatWebServer       - [initialize:92] Tomcat initialized with port(s): 8838 (http) 
2020-06-17 11:33:19.338 [INFO ] org.apache.coyote.http11.Http11NioProtocol         - [log:173] Initializing ProtocolHandler ["http-nio-8838"] 
2020-06-17 11:33:19.339 [INFO ] org.apache.catalina.core.StandardService           - [log:173] Starting service [Tomcat] 
2020-06-17 11:33:19.339 [INFO ] org.apache.catalina.core.StandardEngine            - [log:173] Starting Servlet engine: [Apache Tomcat/9.0.27] 
2020-06-17 11:33:19.408 [INFO ] o.a.c.c.C.[.[localhost].[/healthRecordRules]       - [log:173] Initializing Spring embedded WebApplicationContext 
2020-06-17 11:33:19.408 [INFO ] org.springframework.web.context.ContextLoader      - [prepareWebApplicationContext:284] Root WebApplicationContext: initialization completed in 1544 ms 
2020-06-17 11:33:19.490 [DEBUG] org.apache.ibatis.logging.LogFactory               - [setImplementation:135] Logging initialized using 'class org.apache.ibatis.logging.slf4j.Slf4jImpl' adapter. 
2020-06-17 11:33:19.765 [WARN ] org.mybatis.spring.SqlSessionFactoryBean           - [buildSqlSessionFactory:467] Can't find class in '[com.benetech.rules.*.entity]' package. Please check your configuration. 
2020-06-17 11:33:20.651 [INFO ] com.alibaba.druid.pool.DruidDataSource             - [init:930] {dataSource-1} inited 
2020-06-17 11:33:20.987 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 11:33:20.988 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 11:33:20.994 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 11:33:20.999 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 11:33:21.000 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 11:33:21.005 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 11:33:21.010 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 11:33:21.010 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 11:33:21.016 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-17 11:33:21.021 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 11:33:21.021 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:33:21.027 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 11:33:21.032 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 11:33:21.032 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:33:21.039 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 11:33:21.044 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 11:33:21.044 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 11:33:21.045 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 11:33:21.045 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 11:33:21.050 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 11:33:21.055 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 11:33:21.055 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 11:33:21.060 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 11:33:21.064 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 11:33:21.065 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:33:21.070 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 11:33:21.076 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 11:33:21.076 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:33:21.091 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 11:33:21.096 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 11:33:21.096 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 11:33:21.097 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 11:33:21.097 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 11:33:21.102 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 11:33:21.106 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 11:33:21.106 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 11:33:21.111 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 11:33:21.115 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 11:33:21.115 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:33:21.120 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 11:33:21.127 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 11:33:21.128 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:33:21.135 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 11:33:21.160 [DEBUG] c.b.r.m.e.mapper.RuleEngineMapper.getAllRules      - [debug:159] ==>  Preparing: select a.RuleId as ruleId, a.RuleSql as clazz from HrRule a join HrRuleProps b on a.RuleId = b.RuleId where -- RuleId in ('34278f71cf1d42c88158aaf637fa5203', '8d30baa03bfc4233a8f115c57a0ebf08', '63eb82a44bf64c96a0b9023fa2a3c9d9') a.RuleSql != '' and a.RuleSql is not null and b.Enable = 1  
2020-06-17 11:33:21.178 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:现住址长度异常长度>100字符（包含省市区、乡镇街道名称（如有）、村居委会名称（如有）、详细地址） 
2020-06-17 11:33:21.179 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:血型与RH血型逻辑不符同时满足以下条件： 1、个人基本信息表《血型》填写为“不详” 2、个人基本信息表《RH血型》填写为“阴性”或“阳性” 
2020-06-17 11:33:21.183 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-17 11:33:21.183 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 91665e0b2efa4f86aea807ec9f4883c3(String), 2020-06-17 11:33:21.183(Timestamp), 31011310200312009116(String), a58b2894635045b18a63c250d46ce8a8(String), 2020-06-17 11:33:21.183(Timestamp) 
2020-06-17 11:33:21.200 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 2 
2020-06-17 11:33:21.211 [DEBUG] c.b.r.m.e.mapper.RuleEngineMapper.getAllRules      - [debug:159] ==> Parameters:  
2020-06-17 11:33:21.353 [DEBUG] c.b.r.m.e.mapper.RuleEngineMapper.getAllRules      - [debug:159] <==      Total: 310 
2020-06-17 11:33:21.600 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [init:68] 加载规则：310 条 
2020-06-17 11:33:21.617 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.getAllCode    - [debug:159] ==>  Preparing: SELECT codeSysType AS type, code AS code, [value] AS value FROM tb_code_value WHERE code != '' AND [value] != ''  
2020-06-17 11:33:21.617 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.getAllCode    - [debug:159] ==> Parameters:  
2020-06-17 11:33:22.030 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.getAllCode    - [debug:159] <==      Total: 44881 
2020-06-17 11:33:22.057 [INFO ] c.b.r.m.m.service.impl.EhrModelBuildServiceImpl    - [init:96] 初始化字典类型: 467 种 
2020-06-17 11:33:22.057 [INFO ] c.b.r.m.m.service.impl.EhrModelBuildServiceImpl    - [init:97] 初始化字典: 44881 条 
2020-06-17 11:33:22.058 [ERROR] c.b.r.m.process.service.impl.QcProcessServiceImpl  - [init:44] 初始化线程池 
2020-06-17 11:33:22.196 [INFO ] o.s.scheduling.concurrent.ThreadPoolTaskExecutor   - [initialize:171] Initializing ExecutorService 'applicationTaskExecutor' 
2020-06-17 11:33:22.454 [INFO ] org.apache.coyote.http11.Http11NioProtocol         - [log:173] Starting ProtocolHandler ["http-nio-8838"] 
2020-06-17 11:33:22.472 [INFO ] org.apache.coyote.http11.Http11NioProtocol         - [log:173] Pausing ProtocolHandler ["http-nio-8838"] 
2020-06-17 11:33:22.472 [INFO ] org.apache.catalina.core.StandardService           - [log:173] Stopping service [Tomcat] 
2020-06-17 11:33:22.478 [INFO ] org.apache.coyote.http11.Http11NioProtocol         - [log:173] Stopping ProtocolHandler ["http-nio-8838"] 
2020-06-17 11:33:22.478 [INFO ] org.apache.coyote.http11.Http11NioProtocol         - [log:173] Destroying ProtocolHandler ["http-nio-8838"] 
2020-06-17 11:33:22.480 [INFO ] o.s.b.a.l.ConditionEvaluationReportLoggingListener - [logMessage:136]     Error starting ApplicationContext. To display the conditions report re-run your application with 'debug' enabled. 
2020-06-17 11:33:22.481 [ERROR] o.s.b.diagnostics.LoggingFailureAnalysisReporter   - [report:40]     ***************************  APPLICATION FAILED TO START  ***************************    Description:    Web server failed to start. Port 8838 was already in use.    Action:    Identify and stop the process that's listening on port 8838 or configure this application to listen on another port.   
2020-06-17 11:33:22.483 [INFO ] o.s.scheduling.concurrent.ThreadPoolTaskExecutor   - [shutdown:208] Shutting down ExecutorService 'applicationTaskExecutor' 
2020-06-17 11:33:22.488 [INFO ] com.alibaba.druid.pool.DruidDataSource             - [close:1825] {dataSource-1} closed 
2020-06-17 11:35:50.153 [INFO ] com.benetech.rules.RulesApplication                - [logStarting:55] Starting RulesApplication v1.0-SNAPSHOT on DESKTOP-EOCO1V0 with PID 11792 (D:\51\python\project\instance\zyjk\EHR\controlRuleNew\config\healthRecordRules.jar started by ZY in D:\51\python\project\instance\zyjk\EHR\controlRuleNew) 
2020-06-17 11:35:50.156 [DEBUG] com.benetech.rules.RulesApplication                - [logStarting:56] Running with Spring Boot v2.2.1.RELEASE, Spring v5.2.1.RELEASE 
2020-06-17 11:35:50.157 [INFO ] com.benetech.rules.RulesApplication                - [logStartupProfileInfo:655] The following profiles are active: test 
2020-06-17 11:35:51.947 [INFO ] o.s.boot.web.embedded.tomcat.TomcatWebServer       - [initialize:92] Tomcat initialized with port(s): 8838 (http) 
2020-06-17 11:35:51.958 [INFO ] org.apache.coyote.http11.Http11NioProtocol         - [log:173] Initializing ProtocolHandler ["http-nio-8838"] 
2020-06-17 11:35:51.959 [INFO ] org.apache.catalina.core.StandardService           - [log:173] Starting service [Tomcat] 
2020-06-17 11:35:51.960 [INFO ] org.apache.catalina.core.StandardEngine            - [log:173] Starting Servlet engine: [Apache Tomcat/9.0.27] 
2020-06-17 11:35:52.037 [INFO ] o.a.c.c.C.[.[localhost].[/healthRecordRules]       - [log:173] Initializing Spring embedded WebApplicationContext 
2020-06-17 11:35:52.037 [INFO ] org.springframework.web.context.ContextLoader      - [prepareWebApplicationContext:284] Root WebApplicationContext: initialization completed in 1757 ms 
2020-06-17 11:35:52.120 [DEBUG] org.apache.ibatis.logging.LogFactory               - [setImplementation:135] Logging initialized using 'class org.apache.ibatis.logging.slf4j.Slf4jImpl' adapter. 
2020-06-17 11:35:52.381 [WARN ] org.mybatis.spring.SqlSessionFactoryBean           - [buildSqlSessionFactory:467] Can't find class in '[com.benetech.rules.*.entity]' package. Please check your configuration. 
2020-06-17 11:35:53.066 [INFO ] com.alibaba.druid.pool.DruidDataSource             - [init:930] {dataSource-1} inited 
2020-06-17 11:35:53.293 [DEBUG] c.b.r.m.e.mapper.RuleEngineMapper.getAllRules      - [debug:159] ==>  Preparing: select a.RuleId as ruleId, a.RuleSql as clazz from HrRule a join HrRuleProps b on a.RuleId = b.RuleId where -- RuleId in ('34278f71cf1d42c88158aaf637fa5203', '8d30baa03bfc4233a8f115c57a0ebf08', '63eb82a44bf64c96a0b9023fa2a3c9d9') a.RuleSql != '' and a.RuleSql is not null and b.Enable = 1  
2020-06-17 11:35:53.323 [DEBUG] c.b.r.m.e.mapper.RuleEngineMapper.getAllRules      - [debug:159] ==> Parameters:  
2020-06-17 11:35:53.423 [DEBUG] c.b.r.m.e.mapper.RuleEngineMapper.getAllRules      - [debug:159] <==      Total: 310 
2020-06-17 11:35:53.512 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 11:35:53.512 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 11:35:53.518 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 11:35:53.522 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 11:35:53.522 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 11:35:53.528 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 11:35:53.532 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 11:35:53.532 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 11:35:53.536 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-17 11:35:53.541 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 11:35:53.541 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:35:53.546 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 11:35:53.550 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 11:35:53.550 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:35:53.555 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 11:35:53.559 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 11:35:53.560 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 11:35:53.560 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 11:35:53.561 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 11:35:53.565 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 11:35:53.570 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 11:35:53.570 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 11:35:53.577 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 11:35:53.581 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 11:35:53.581 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:35:53.589 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 11:35:53.594 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 11:35:53.594 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:35:53.608 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 11:35:53.611 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 11:35:53.612 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 11:35:53.612 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 11:35:53.612 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 11:35:53.617 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 11:35:53.621 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 11:35:53.621 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 11:35:53.625 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 11:35:53.629 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 11:35:53.629 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:35:53.634 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 11:35:53.639 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 11:35:53.639 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:35:53.644 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 11:35:53.659 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:现住址长度异常长度>100字符（包含省市区、乡镇街道名称（如有）、村居委会名称（如有）、详细地址） 
2020-06-17 11:35:53.660 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:血型与RH血型逻辑不符同时满足以下条件： 1、个人基本信息表《血型》填写为“不详” 2、个人基本信息表《RH血型》填写为“阴性”或“阳性” 
2020-06-17 11:35:53.663 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-17 11:35:53.663 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 91665e0b2efa4f86aea807ec9f4883c3(String), 2020-06-17 11:35:53.662(Timestamp), 31011310200312009116(String), a58b2894635045b18a63c250d46ce8a8(String), 2020-06-17 11:35:53.662(Timestamp) 
2020-06-17 11:35:53.672 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [init:68] 加载规则：310 条 
2020-06-17 11:35:53.676 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 2 
2020-06-17 11:35:53.690 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.getAllCode    - [debug:159] ==>  Preparing: SELECT codeSysType AS type, code AS code, [value] AS value FROM tb_code_value WHERE code != '' AND [value] != ''  
2020-06-17 11:35:53.690 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.getAllCode    - [debug:159] ==> Parameters:  
2020-06-17 11:35:54.240 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.getAllCode    - [debug:159] <==      Total: 44881 
2020-06-17 11:35:54.269 [INFO ] c.b.r.m.m.service.impl.EhrModelBuildServiceImpl    - [init:96] 初始化字典类型: 467 种 
2020-06-17 11:35:54.269 [INFO ] c.b.r.m.m.service.impl.EhrModelBuildServiceImpl    - [init:97] 初始化字典: 44881 条 
2020-06-17 11:35:54.270 [ERROR] c.b.r.m.process.service.impl.QcProcessServiceImpl  - [init:44] 初始化线程池 
2020-06-17 11:35:54.404 [INFO ] o.s.scheduling.concurrent.ThreadPoolTaskExecutor   - [initialize:171] Initializing ExecutorService 'applicationTaskExecutor' 
2020-06-17 11:35:54.653 [INFO ] org.apache.coyote.http11.Http11NioProtocol         - [log:173] Starting ProtocolHandler ["http-nio-8838"] 
2020-06-17 11:35:54.665 [INFO ] org.apache.coyote.http11.Http11NioProtocol         - [log:173] Pausing ProtocolHandler ["http-nio-8838"] 
2020-06-17 11:35:54.665 [INFO ] org.apache.catalina.core.StandardService           - [log:173] Stopping service [Tomcat] 
2020-06-17 11:35:54.672 [INFO ] org.apache.coyote.http11.Http11NioProtocol         - [log:173] Stopping ProtocolHandler ["http-nio-8838"] 
2020-06-17 11:35:54.677 [INFO ] org.apache.coyote.http11.Http11NioProtocol         - [log:173] Destroying ProtocolHandler ["http-nio-8838"] 
2020-06-17 11:35:54.680 [INFO ] o.s.b.a.l.ConditionEvaluationReportLoggingListener - [logMessage:136]     Error starting ApplicationContext. To display the conditions report re-run your application with 'debug' enabled. 
2020-06-17 11:35:54.681 [ERROR] o.s.b.diagnostics.LoggingFailureAnalysisReporter   - [report:40]     ***************************  APPLICATION FAILED TO START  ***************************    Description:    Web server failed to start. Port 8838 was already in use.    Action:    Identify and stop the process that's listening on port 8838 or configure this application to listen on another port.   
2020-06-17 11:35:54.684 [INFO ] o.s.scheduling.concurrent.ThreadPoolTaskExecutor   - [shutdown:208] Shutting down ExecutorService 'applicationTaskExecutor' 
2020-06-17 11:35:54.693 [INFO ] com.alibaba.druid.pool.DruidDataSource             - [close:1825] {dataSource-1} closed 
2020-06-17 11:38:31.249 [INFO ] com.benetech.rules.RulesApplication                - [logStarting:55] Starting RulesApplication v1.0-SNAPSHOT on DESKTOP-EOCO1V0 with PID 8284 (D:\51\python\project\instance\zyjk\EHR\controlRuleNew\config\healthRecordRules.jar started by ZY in D:\51\python\project\instance\zyjk\EHR\controlRuleNew) 
2020-06-17 11:38:31.256 [DEBUG] com.benetech.rules.RulesApplication                - [logStarting:56] Running with Spring Boot v2.2.1.RELEASE, Spring v5.2.1.RELEASE 
2020-06-17 11:38:31.256 [INFO ] com.benetech.rules.RulesApplication                - [logStartupProfileInfo:655] The following profiles are active: test 
2020-06-17 11:38:32.780 [INFO ] o.s.boot.web.embedded.tomcat.TomcatWebServer       - [initialize:92] Tomcat initialized with port(s): 8838 (http) 
2020-06-17 11:38:32.792 [INFO ] org.apache.coyote.http11.Http11NioProtocol         - [log:173] Initializing ProtocolHandler ["http-nio-8838"] 
2020-06-17 11:38:32.793 [INFO ] org.apache.catalina.core.StandardService           - [log:173] Starting service [Tomcat] 
2020-06-17 11:38:32.793 [INFO ] org.apache.catalina.core.StandardEngine            - [log:173] Starting Servlet engine: [Apache Tomcat/9.0.27] 
2020-06-17 11:38:32.864 [INFO ] o.a.c.c.C.[.[localhost].[/healthRecordRules]       - [log:173] Initializing Spring embedded WebApplicationContext 
2020-06-17 11:38:32.865 [INFO ] org.springframework.web.context.ContextLoader      - [prepareWebApplicationContext:284] Root WebApplicationContext: initialization completed in 1524 ms 
2020-06-17 11:38:32.945 [DEBUG] org.apache.ibatis.logging.LogFactory               - [setImplementation:135] Logging initialized using 'class org.apache.ibatis.logging.slf4j.Slf4jImpl' adapter. 
2020-06-17 11:38:33.238 [WARN ] org.mybatis.spring.SqlSessionFactoryBean           - [buildSqlSessionFactory:467] Can't find class in '[com.benetech.rules.*.entity]' package. Please check your configuration. 
2020-06-17 11:38:33.856 [INFO ] com.alibaba.druid.pool.DruidDataSource             - [init:930] {dataSource-1} inited 
2020-06-17 11:38:34.084 [DEBUG] c.b.r.m.e.mapper.RuleEngineMapper.getAllRules      - [debug:159] ==>  Preparing: select a.RuleId as ruleId, a.RuleSql as clazz from HrRule a join HrRuleProps b on a.RuleId = b.RuleId where -- RuleId in ('34278f71cf1d42c88158aaf637fa5203', '8d30baa03bfc4233a8f115c57a0ebf08', '63eb82a44bf64c96a0b9023fa2a3c9d9') a.RuleSql != '' and a.RuleSql is not null and b.Enable = 1  
2020-06-17 11:38:34.114 [DEBUG] c.b.r.m.e.mapper.RuleEngineMapper.getAllRules      - [debug:159] ==> Parameters:  
2020-06-17 11:38:34.193 [DEBUG] c.b.r.m.e.mapper.RuleEngineMapper.getAllRules      - [debug:159] <==      Total: 310 
2020-06-17 11:38:34.409 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 11:38:34.409 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 11:38:34.415 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 11:38:34.418 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 11:38:34.419 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 11:38:34.424 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 11:38:34.430 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 11:38:34.430 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 11:38:34.434 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-17 11:38:34.438 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 11:38:34.438 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:38:34.443 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 11:38:34.447 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 11:38:34.447 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:38:34.453 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 11:38:34.457 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 11:38:34.457 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 11:38:34.457 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 11:38:34.458 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 11:38:34.459 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [init:68] 加载规则：310 条 
2020-06-17 11:38:34.462 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 11:38:34.466 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 11:38:34.467 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 11:38:34.471 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 11:38:34.475 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 11:38:34.475 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:38:34.480 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 11:38:34.484 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 11:38:34.484 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:38:34.487 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.getAllCode    - [debug:159] ==>  Preparing: SELECT codeSysType AS type, code AS code, [value] AS value FROM tb_code_value WHERE code != '' AND [value] != ''  
2020-06-17 11:38:34.488 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.getAllCode    - [debug:159] ==> Parameters:  
2020-06-17 11:38:34.505 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 11:38:34.510 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 11:38:34.510 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 11:38:34.510 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 11:38:34.511 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 11:38:34.521 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 11:38:34.533 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 11:38:34.533 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 11:38:34.544 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 11:38:34.567 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 11:38:34.567 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:38:34.572 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 11:38:34.577 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 11:38:34.577 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:38:34.583 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 11:38:34.600 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:现住址长度异常长度>100字符（包含省市区、乡镇街道名称（如有）、村居委会名称（如有）、详细地址） 
2020-06-17 11:38:34.601 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:血型与RH血型逻辑不符同时满足以下条件： 1、个人基本信息表《血型》填写为“不详” 2、个人基本信息表《RH血型》填写为“阴性”或“阳性” 
2020-06-17 11:38:34.603 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-17 11:38:34.604 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 91665e0b2efa4f86aea807ec9f4883c3(String), 2020-06-17 11:38:34.603(Timestamp), 31011310200312009116(String), a58b2894635045b18a63c250d46ce8a8(String), 2020-06-17 11:38:34.603(Timestamp) 
2020-06-17 11:38:34.634 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 2 
2020-06-17 11:38:34.972 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.getAllCode    - [debug:159] <==      Total: 44881 
2020-06-17 11:38:34.997 [INFO ] c.b.r.m.m.service.impl.EhrModelBuildServiceImpl    - [init:96] 初始化字典类型: 467 种 
2020-06-17 11:38:34.997 [INFO ] c.b.r.m.m.service.impl.EhrModelBuildServiceImpl    - [init:97] 初始化字典: 44881 条 
2020-06-17 11:38:34.997 [ERROR] c.b.r.m.process.service.impl.QcProcessServiceImpl  - [init:44] 初始化线程池 
2020-06-17 11:38:35.128 [INFO ] o.s.scheduling.concurrent.ThreadPoolTaskExecutor   - [initialize:171] Initializing ExecutorService 'applicationTaskExecutor' 
2020-06-17 11:38:35.389 [INFO ] org.apache.coyote.http11.Http11NioProtocol         - [log:173] Starting ProtocolHandler ["http-nio-8838"] 
2020-06-17 11:38:35.403 [INFO ] org.apache.coyote.http11.Http11NioProtocol         - [log:173] Pausing ProtocolHandler ["http-nio-8838"] 
2020-06-17 11:38:35.403 [INFO ] org.apache.catalina.core.StandardService           - [log:173] Stopping service [Tomcat] 
2020-06-17 11:38:35.410 [INFO ] org.apache.coyote.http11.Http11NioProtocol         - [log:173] Stopping ProtocolHandler ["http-nio-8838"] 
2020-06-17 11:38:35.410 [INFO ] org.apache.coyote.http11.Http11NioProtocol         - [log:173] Destroying ProtocolHandler ["http-nio-8838"] 
2020-06-17 11:38:35.412 [INFO ] o.s.b.a.l.ConditionEvaluationReportLoggingListener - [logMessage:136]     Error starting ApplicationContext. To display the conditions report re-run your application with 'debug' enabled. 
2020-06-17 11:38:35.414 [ERROR] o.s.b.diagnostics.LoggingFailureAnalysisReporter   - [report:40]     ***************************  APPLICATION FAILED TO START  ***************************    Description:    Web server failed to start. Port 8838 was already in use.    Action:    Identify and stop the process that's listening on port 8838 or configure this application to listen on another port.   
2020-06-17 11:38:35.416 [INFO ] o.s.scheduling.concurrent.ThreadPoolTaskExecutor   - [shutdown:208] Shutting down ExecutorService 'applicationTaskExecutor' 
2020-06-17 11:38:35.420 [INFO ] com.alibaba.druid.pool.DruidDataSource             - [close:1825] {dataSource-1} closed 
2020-06-17 11:38:37.934 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 11:38:37.934 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 11:38:37.940 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 11:38:37.945 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 11:38:37.945 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 11:38:37.950 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 11:38:37.955 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 11:38:37.955 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 11:38:37.959 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-17 11:38:37.964 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 11:38:37.964 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:38:37.969 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 11:38:37.973 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 11:38:37.973 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:38:37.980 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 11:38:37.984 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 11:38:37.984 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 11:38:37.984 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 11:38:37.985 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 11:38:37.989 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 11:38:37.994 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 11:38:37.994 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 11:38:37.998 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 11:38:38.002 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 11:38:38.003 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:38:38.007 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 11:38:38.012 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 11:38:38.012 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:38:38.026 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 11:38:38.030 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 11:38:38.031 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 11:38:38.031 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 11:38:38.032 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 11:38:38.036 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 11:38:38.041 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 11:38:38.042 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 11:38:38.047 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 11:38:38.051 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 11:38:38.052 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:38:38.057 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 11:38:38.063 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 11:38:38.064 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:38:38.069 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 11:38:38.101 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:户籍地址长度异常长度>100字符（包含省市区、乡镇街道名称（如有）、村居委会名称（如有）、详细地址） 
2020-06-17 11:38:38.105 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:血型与RH血型逻辑不符同时满足以下条件： 1、个人基本信息表《血型》填写为“不详” 2、个人基本信息表《RH血型》填写为“阴性”或“阳性” 
2020-06-17 11:38:38.107 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-17 11:38:38.108 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 329b69c7855544e986fc0073b77fe9be(String), 2020-06-17 11:38:38.107(Timestamp), 31011310200312009116(String), a58b2894635045b18a63c250d46ce8a8(String), 2020-06-17 11:38:38.107(Timestamp) 
2020-06-17 11:38:38.134 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 2 
2020-06-17 11:38:41.435 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 11:38:41.435 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 11:38:41.441 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 11:38:41.445 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 11:38:41.446 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 11:38:41.451 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 11:38:41.456 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 11:38:41.457 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 11:38:41.462 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-17 11:38:41.466 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 11:38:41.466 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:38:41.471 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 11:38:41.474 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 11:38:41.474 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:38:41.479 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 11:38:41.484 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 11:38:41.484 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 11:38:41.485 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 11:38:41.485 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 11:38:41.491 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 11:38:41.495 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 11:38:41.496 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 11:38:41.500 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 11:38:41.505 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 11:38:41.505 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:38:41.509 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 11:38:41.514 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 11:38:41.514 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:38:41.527 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 11:38:41.532 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 11:38:41.532 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 11:38:41.532 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 11:38:41.532 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 11:38:41.537 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 11:38:41.541 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 11:38:41.542 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 11:38:41.545 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 11:38:41.550 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 11:38:41.550 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:38:41.554 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 11:38:41.560 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 11:38:41.560 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:38:41.565 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 11:38:41.578 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:现住址长度异常长度>100字符（包含省市区、乡镇街道名称（如有）、村居委会名称（如有）、详细地址） 
2020-06-17 11:38:41.578 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:现住址村（居）委会名称长度异常长度>100字符 
2020-06-17 11:38:41.579 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:血型与RH血型逻辑不符同时满足以下条件： 1、个人基本信息表《血型》填写为“不详” 2、个人基本信息表《RH血型》填写为“阴性”或“阳性” 
2020-06-17 11:38:41.581 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-17 11:38:41.581 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 91665e0b2efa4f86aea807ec9f4883c3(String), 2020-06-17 11:38:41.58(Timestamp), 31011310200312009116(String), 9df07515be3d4c2887e947c6ce5adace(String), 2020-06-17 11:38:41.58(Timestamp), 31011310200312009116(String), a58b2894635045b18a63c250d46ce8a8(String), 2020-06-17 11:38:41.58(Timestamp) 
2020-06-17 11:38:41.599 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 3 
2020-06-17 11:38:44.878 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 11:38:44.878 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 11:38:44.891 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 11:38:44.894 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 11:38:44.895 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 11:38:44.899 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 11:38:44.903 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 11:38:44.904 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 11:38:44.909 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-17 11:38:44.913 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 11:38:44.914 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:38:44.918 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 11:38:44.922 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 11:38:44.923 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:38:44.928 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 11:38:44.933 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 11:38:44.933 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 11:38:44.933 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 11:38:44.933 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 11:38:44.939 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 11:38:44.943 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 11:38:44.944 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 11:38:44.948 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 11:38:44.951 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 11:38:44.952 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:38:44.957 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 11:38:44.961 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 11:38:44.962 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:38:44.975 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 11:38:44.980 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 11:38:44.980 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 11:38:44.980 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 11:38:44.980 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 11:38:44.985 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 11:38:44.990 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 11:38:44.990 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 11:38:44.994 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 11:38:44.998 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 11:38:44.999 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:38:45.005 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 11:38:45.010 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 11:38:45.010 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:38:45.015 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 11:38:45.026 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:建档单位长度异常长度>100字符 
2020-06-17 11:38:45.029 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:血型与RH血型逻辑不符同时满足以下条件： 1、个人基本信息表《血型》填写为“不详” 2、个人基本信息表《RH血型》填写为“阴性”或“阳性” 
2020-06-17 11:38:45.031 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-17 11:38:45.031 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 403a97f9ec40406b9723b3c6845a6cee(String), 2020-06-17 11:38:45.03(Timestamp), 31011310200312009116(String), a58b2894635045b18a63c250d46ce8a8(String), 2020-06-17 11:38:45.03(Timestamp) 
2020-06-17 11:38:45.048 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 2 
2020-06-17 11:38:48.387 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 11:38:48.387 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 11:38:48.392 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 11:38:48.396 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 11:38:48.396 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 11:38:48.401 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 11:38:48.405 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 11:38:48.406 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 11:38:48.410 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-17 11:38:48.414 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 11:38:48.415 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:38:48.420 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 11:38:48.425 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 11:38:48.426 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:38:48.431 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 11:38:48.436 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 11:38:48.436 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 11:38:48.436 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 11:38:48.437 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 11:38:48.441 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 11:38:48.445 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 11:38:48.445 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 11:38:48.449 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 11:38:48.454 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 11:38:48.455 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:38:48.459 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 11:38:48.463 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 11:38:48.464 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:38:48.477 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 11:38:48.483 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 11:38:48.483 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 11:38:48.483 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 11:38:48.483 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 11:38:48.487 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 11:38:48.492 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 11:38:48.493 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 11:38:48.496 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 11:38:48.501 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 11:38:48.501 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:38:48.506 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 11:38:48.511 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 11:38:48.512 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:38:48.518 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 11:38:48.534 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:血型与RH血型逻辑不符同时满足以下条件： 1、个人基本信息表《血型》填写为“不详” 2、个人基本信息表《RH血型》填写为“阴性”或“阳性” 
2020-06-17 11:38:48.537 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1)  
2020-06-17 11:38:48.537 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), a58b2894635045b18a63c250d46ce8a8(String), 2020-06-17 11:38:48.536(Timestamp) 
2020-06-17 11:38:48.549 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 1 
2020-06-17 11:38:51.884 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 11:38:51.884 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 11:38:51.891 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 11:38:51.894 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 11:38:51.895 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 11:38:51.899 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 11:38:51.905 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 11:38:51.905 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 11:38:51.911 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-17 11:38:51.915 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 11:38:51.916 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:38:51.920 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 11:38:51.925 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 11:38:51.925 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:38:51.931 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 11:38:51.935 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 11:38:51.936 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 11:38:51.936 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 11:38:51.937 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 11:38:51.945 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 11:38:51.954 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 11:38:51.954 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 11:38:51.962 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 11:38:51.968 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 11:38:51.969 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:38:51.973 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 11:38:51.977 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 11:38:51.978 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:38:51.992 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 11:38:51.996 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 11:38:51.996 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 11:38:51.997 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 11:38:51.997 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 11:38:52.002 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 11:38:52.006 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 11:38:52.006 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 11:38:52.011 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 11:38:52.017 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 11:38:52.017 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:38:52.022 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 11:38:52.027 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 11:38:52.027 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:38:52.032 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 11:38:52.047 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:责任医生长度异常长度>50字符 
2020-06-17 11:38:52.048 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:血型与RH血型逻辑不符同时满足以下条件： 1、个人基本信息表《血型》填写为“不详” 2、个人基本信息表《RH血型》填写为“阴性”或“阳性” 
2020-06-17 11:38:52.051 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-17 11:38:52.052 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 9042bba97fb74b558de96e35ab2ffdc2(String), 2020-06-17 11:38:52.051(Timestamp), 31011310200312009116(String), a58b2894635045b18a63c250d46ce8a8(String), 2020-06-17 11:38:52.051(Timestamp) 
2020-06-17 11:38:52.065 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 2 
2020-06-17 11:38:55.381 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 11:38:55.381 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 11:38:55.389 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 11:38:55.393 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 11:38:55.394 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 11:38:55.399 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 11:38:55.403 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 11:38:55.403 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 11:38:55.408 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-17 11:38:55.413 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 11:38:55.413 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:38:55.419 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 11:38:55.424 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 11:38:55.424 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:38:55.430 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 11:38:55.434 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 11:38:55.434 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 11:38:55.434 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 11:38:55.434 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 11:38:55.441 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 11:38:55.446 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 11:38:55.446 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 11:38:55.450 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 11:38:55.454 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 11:38:55.455 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:38:55.459 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 11:38:55.463 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 11:38:55.463 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:38:55.477 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 11:38:55.481 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 11:38:55.481 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 11:38:55.481 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 11:38:55.482 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 11:38:55.487 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 11:38:55.490 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 11:38:55.490 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 11:38:55.495 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 11:38:55.500 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 11:38:55.501 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:38:55.505 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 11:38:55.513 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 11:38:55.514 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:38:55.520 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 11:38:55.536 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:个人基本信息表工作单位工作单位不为汉字 
2020-06-17 11:38:55.547 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:血型与RH血型逻辑不符同时满足以下条件： 1、个人基本信息表《血型》填写为“不详” 2、个人基本信息表《RH血型》填写为“阴性”或“阳性” 
2020-06-17 11:38:55.552 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-17 11:38:55.552 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 4ad5f41e777d499894964fe735a4ed46(String), 2020-06-17 11:38:55.551(Timestamp), 31011310200312009116(String), a58b2894635045b18a63c250d46ce8a8(String), 2020-06-17 11:38:55.551(Timestamp) 
2020-06-17 11:38:55.565 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 2 
2020-06-17 11:38:58.974 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 11:38:58.974 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 11:38:58.979 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 11:38:58.984 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 11:38:58.984 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 11:38:58.988 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 11:38:58.992 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 11:38:58.993 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 11:38:58.997 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-17 11:38:59.005 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 11:38:59.006 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:38:59.010 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 11:38:59.014 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 11:38:59.015 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:38:59.020 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 11:38:59.025 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 11:38:59.025 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 11:38:59.025 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 11:38:59.026 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 11:38:59.029 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 11:38:59.034 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 11:38:59.034 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 11:38:59.039 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 11:38:59.043 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 11:38:59.043 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:38:59.048 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 11:38:59.052 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 11:38:59.052 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:38:59.065 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 11:38:59.070 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 11:38:59.070 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 11:38:59.070 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 11:38:59.071 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 11:38:59.076 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 11:38:59.080 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 11:38:59.080 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 11:38:59.085 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 11:38:59.089 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 11:38:59.090 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:38:59.094 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 11:38:59.098 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 11:38:59.099 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:38:59.104 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 11:38:59.116 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:联系人姓名填写为数字同时满足以下条件： 1、联系人姓名不为空值 2、联系人姓名为纯数字 
2020-06-17 11:38:59.123 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:血型与RH血型逻辑不符同时满足以下条件： 1、个人基本信息表《血型》填写为“不详” 2、个人基本信息表《RH血型》填写为“阴性”或“阳性” 
2020-06-17 11:38:59.125 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-17 11:38:59.126 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 1a7e1f2e0bce421585a1fad889411dd4(String), 2020-06-17 11:38:59.125(Timestamp), 31011310200312009116(String), a58b2894635045b18a63c250d46ce8a8(String), 2020-06-17 11:38:59.125(Timestamp) 
2020-06-17 11:38:59.147 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 2 
2020-06-17 11:39:02.497 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 11:39:02.497 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 11:39:02.502 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 11:39:02.506 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 11:39:02.506 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 11:39:02.510 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 11:39:02.514 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 11:39:02.515 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 11:39:02.519 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-17 11:39:02.523 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 11:39:02.524 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:39:02.528 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 11:39:02.532 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 11:39:02.533 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:39:02.541 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 11:39:02.545 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 11:39:02.545 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 11:39:02.545 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 11:39:02.546 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 11:39:02.550 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 11:39:02.555 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 11:39:02.555 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 11:39:02.559 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 11:39:02.562 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 11:39:02.562 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:39:02.567 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 11:39:02.570 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 11:39:02.571 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:39:02.584 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 11:39:02.588 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 11:39:02.588 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 11:39:02.588 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 11:39:02.589 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 11:39:02.594 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 11:39:02.598 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 11:39:02.598 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 11:39:02.602 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 11:39:02.607 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 11:39:02.607 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:39:02.612 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 11:39:02.616 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 11:39:02.617 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:39:02.621 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 11:39:02.637 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:血型与RH血型逻辑不符同时满足以下条件： 1、个人基本信息表《血型》填写为“不详” 2、个人基本信息表《RH血型》填写为“阴性”或“阳性” 
2020-06-17 11:39:02.641 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1)  
2020-06-17 11:39:02.642 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), a58b2894635045b18a63c250d46ce8a8(String), 2020-06-17 11:39:02.641(Timestamp) 
2020-06-17 11:39:02.687 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 1 
2020-06-17 11:39:06.129 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 11:39:06.130 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 11:39:06.134 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 11:39:06.139 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 11:39:06.139 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 11:39:06.143 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 11:39:06.147 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 11:39:06.147 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 11:39:06.153 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-17 11:39:06.157 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 11:39:06.158 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:39:06.162 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 11:39:06.166 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 11:39:06.166 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:39:06.171 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 11:39:06.177 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 11:39:06.177 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 11:39:06.177 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 11:39:06.178 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 11:39:06.183 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 11:39:06.187 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 11:39:06.188 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 11:39:06.193 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 11:39:06.197 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 11:39:06.197 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:39:06.202 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 11:39:06.205 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 11:39:06.206 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:39:06.219 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 11:39:06.223 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 11:39:06.224 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 11:39:06.224 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 11:39:06.224 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 11:39:06.228 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 11:39:06.233 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 11:39:06.233 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 11:39:06.237 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 11:39:06.242 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 11:39:06.242 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:39:06.246 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 11:39:06.250 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 11:39:06.251 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:39:06.256 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 11:39:06.272 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:血型与RH血型逻辑不符同时满足以下条件： 1、个人基本信息表《血型》填写为“不详” 2、个人基本信息表《RH血型》填写为“阴性”或“阳性” 
2020-06-17 11:39:06.275 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1)  
2020-06-17 11:39:06.276 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), a58b2894635045b18a63c250d46ce8a8(String), 2020-06-17 11:39:06.275(Timestamp) 
2020-06-17 11:39:06.288 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 1 
2020-06-17 11:39:09.598 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 11:39:09.599 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 11:39:09.606 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 11:39:09.609 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 11:39:09.609 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 11:39:09.614 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 11:39:09.620 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 11:39:09.620 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 11:39:09.624 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-17 11:39:09.630 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 11:39:09.630 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:39:09.634 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 11:39:09.638 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 11:39:09.638 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:39:09.644 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 11:39:09.649 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 11:39:09.649 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 11:39:09.650 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 11:39:09.650 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 11:39:09.654 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 11:39:09.659 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 11:39:09.659 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 11:39:09.664 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 11:39:09.668 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 11:39:09.669 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:39:09.674 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 11:39:09.678 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 11:39:09.678 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:39:09.692 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 11:39:09.697 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 11:39:09.697 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 11:39:09.697 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 11:39:09.697 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 11:39:09.702 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 11:39:09.706 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 11:39:09.707 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 11:39:09.712 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 11:39:09.717 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 11:39:09.718 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:39:09.723 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 11:39:09.728 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 11:39:09.728 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:39:09.732 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 11:39:09.754 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:血型与RH血型逻辑不符同时满足以下条件： 1、个人基本信息表《血型》填写为“不详” 2、个人基本信息表《RH血型》填写为“阴性”或“阳性” 
2020-06-17 11:39:09.756 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1)  
2020-06-17 11:39:09.757 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), a58b2894635045b18a63c250d46ce8a8(String), 2020-06-17 11:39:09.756(Timestamp) 
2020-06-17 11:39:09.770 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 1 
2020-06-17 11:39:13.039 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 11:39:13.039 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 11:39:13.044 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 11:39:13.049 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 11:39:13.050 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 11:39:13.054 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 11:39:13.059 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 11:39:13.059 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 11:39:13.063 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-17 11:39:13.068 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 11:39:13.068 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:39:13.073 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 11:39:13.077 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 11:39:13.077 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:39:13.083 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 11:39:13.087 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 11:39:13.087 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 11:39:13.087 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 11:39:13.088 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 11:39:13.091 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 11:39:13.095 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 11:39:13.096 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 11:39:13.100 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 11:39:13.105 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 11:39:13.105 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:39:13.110 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 11:39:13.115 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 11:39:13.115 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:39:13.129 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 11:39:13.133 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 11:39:13.133 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 11:39:13.134 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 11:39:13.134 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 11:39:13.139 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 11:39:13.143 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 11:39:13.144 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 11:39:13.151 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 11:39:13.156 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 11:39:13.156 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:39:13.161 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 11:39:13.165 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 11:39:13.166 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:39:13.171 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 11:39:13.188 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:血型与RH血型逻辑不符同时满足以下条件： 1、个人基本信息表《血型》填写为“不详” 2、个人基本信息表《RH血型》填写为“阴性”或“阳性” 
2020-06-17 11:39:13.191 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1)  
2020-06-17 11:39:13.191 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), a58b2894635045b18a63c250d46ce8a8(String), 2020-06-17 11:39:13.19(Timestamp) 
2020-06-17 11:39:13.211 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 1 
2020-06-17 11:39:16.610 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 11:39:16.610 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 11:39:16.615 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 11:39:16.620 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 11:39:16.620 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 11:39:16.625 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 11:39:16.630 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 11:39:16.630 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 11:39:16.635 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-17 11:39:16.639 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 11:39:16.639 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:39:16.644 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 11:39:16.647 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 11:39:16.648 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:39:16.653 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 11:39:16.659 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 11:39:16.659 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 11:39:16.659 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 11:39:16.659 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 11:39:16.664 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 11:39:16.669 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 11:39:16.669 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 11:39:16.674 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 11:39:16.678 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 11:39:16.678 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:39:16.682 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 11:39:16.687 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 11:39:16.687 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:39:16.701 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 11:39:16.705 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 11:39:16.706 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 11:39:16.707 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 11:39:16.708 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 11:39:16.716 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 11:39:16.722 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 11:39:16.723 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 11:39:16.732 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 11:39:16.738 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 11:39:16.738 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:39:16.744 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 11:39:16.748 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 11:39:16.749 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:39:16.753 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 11:39:16.772 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:血型与RH血型逻辑不符同时满足以下条件： 1、个人基本信息表《血型》填写为“不详” 2、个人基本信息表《RH血型》填写为“阴性”或“阳性” 
2020-06-17 11:39:16.775 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1)  
2020-06-17 11:39:16.775 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), a58b2894635045b18a63c250d46ce8a8(String), 2020-06-17 11:39:16.774(Timestamp) 
2020-06-17 11:39:16.786 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 1 
2020-06-17 11:39:20.331 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 11:39:20.331 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 11:39:20.336 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 11:39:20.340 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 11:39:20.340 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 11:39:20.344 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 11:39:20.349 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 11:39:20.349 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 11:39:20.353 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-17 11:39:20.357 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 11:39:20.357 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:39:20.362 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 11:39:20.367 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 11:39:20.368 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:39:20.373 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 11:39:20.377 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 11:39:20.378 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 11:39:20.378 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 11:39:20.378 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 11:39:20.383 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 11:39:20.386 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 11:39:20.387 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 11:39:20.391 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 11:39:20.395 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 11:39:20.396 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:39:20.401 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 11:39:20.405 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 11:39:20.406 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:39:20.420 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 11:39:20.424 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 11:39:20.424 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 11:39:20.424 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 11:39:20.425 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 11:39:20.430 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 11:39:20.434 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 11:39:20.435 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 11:39:20.439 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 11:39:20.443 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 11:39:20.444 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:39:20.448 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 11:39:20.452 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 11:39:20.452 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:39:20.457 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 11:39:20.470 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:个人基本信息表既往史既往史疾病确诊时间未填写 
2020-06-17 11:39:20.472 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:个人基本信息表既往史既往史疾病确诊时间填写不规范 
2020-06-17 11:39:20.473 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:血型与RH血型逻辑不符同时满足以下条件： 1、个人基本信息表《血型》填写为“不详” 2、个人基本信息表《RH血型》填写为“阴性”或“阳性” 
2020-06-17 11:39:20.475 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-17 11:39:20.475 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 6302b0fcdcd7482099581602a1fec501(String), 2020-06-17 11:39:20.474(Timestamp), 31011310200312009116(String), 923bfb7880204efa8f26fd200d1bd17e(String), 2020-06-17 11:39:20.474(Timestamp), 31011310200312009116(String), a58b2894635045b18a63c250d46ce8a8(String), 2020-06-17 11:39:20.474(Timestamp) 
2020-06-17 11:39:20.486 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 3 
2020-06-17 11:39:32.418 [INFO ] com.benetech.rules.RulesApplication                - [logStarting:55] Starting RulesApplication v1.0-SNAPSHOT on DESKTOP-EOCO1V0 with PID 14132 (D:\51\python\project\instance\zyjk\EHR\controlRuleNew\config\healthRecordRules.jar started by ZY in D:\51\python\project\instance\zyjk\EHR\controlRuleNew) 
2020-06-17 11:39:32.422 [DEBUG] com.benetech.rules.RulesApplication                - [logStarting:56] Running with Spring Boot v2.2.1.RELEASE, Spring v5.2.1.RELEASE 
2020-06-17 11:39:32.424 [INFO ] com.benetech.rules.RulesApplication                - [logStartupProfileInfo:655] The following profiles are active: test 
2020-06-17 11:39:33.981 [INFO ] o.s.boot.web.embedded.tomcat.TomcatWebServer       - [initialize:92] Tomcat initialized with port(s): 8838 (http) 
2020-06-17 11:39:33.994 [INFO ] org.apache.coyote.http11.Http11NioProtocol         - [log:173] Initializing ProtocolHandler ["http-nio-8838"] 
2020-06-17 11:39:33.995 [INFO ] org.apache.catalina.core.StandardService           - [log:173] Starting service [Tomcat] 
2020-06-17 11:39:33.998 [INFO ] org.apache.catalina.core.StandardEngine            - [log:173] Starting Servlet engine: [Apache Tomcat/9.0.27] 
2020-06-17 11:39:34.070 [INFO ] o.a.c.c.C.[.[localhost].[/healthRecordRules]       - [log:173] Initializing Spring embedded WebApplicationContext 
2020-06-17 11:39:34.071 [INFO ] org.springframework.web.context.ContextLoader      - [prepareWebApplicationContext:284] Root WebApplicationContext: initialization completed in 1565 ms 
2020-06-17 11:39:34.152 [DEBUG] org.apache.ibatis.logging.LogFactory               - [setImplementation:135] Logging initialized using 'class org.apache.ibatis.logging.slf4j.Slf4jImpl' adapter. 
2020-06-17 11:39:34.400 [WARN ] org.mybatis.spring.SqlSessionFactoryBean           - [buildSqlSessionFactory:467] Can't find class in '[com.benetech.rules.*.entity]' package. Please check your configuration. 
2020-06-17 11:39:35.022 [INFO ] com.alibaba.druid.pool.DruidDataSource             - [init:930] {dataSource-1} inited 
2020-06-17 11:39:35.242 [DEBUG] c.b.r.m.e.mapper.RuleEngineMapper.getAllRules      - [debug:159] ==>  Preparing: select a.RuleId as ruleId, a.RuleSql as clazz from HrRule a join HrRuleProps b on a.RuleId = b.RuleId where -- RuleId in ('34278f71cf1d42c88158aaf637fa5203', '8d30baa03bfc4233a8f115c57a0ebf08', '63eb82a44bf64c96a0b9023fa2a3c9d9') a.RuleSql != '' and a.RuleSql is not null and b.Enable = 1  
2020-06-17 11:39:35.258 [DEBUG] c.b.r.m.e.mapper.RuleEngineMapper.getAllRules      - [debug:159] ==> Parameters:  
2020-06-17 11:39:35.336 [DEBUG] c.b.r.m.e.mapper.RuleEngineMapper.getAllRules      - [debug:159] <==      Total: 310 
2020-06-17 11:39:35.564 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [init:68] 加载规则：310 条 
2020-06-17 11:39:35.583 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.getAllCode    - [debug:159] ==>  Preparing: SELECT codeSysType AS type, code AS code, [value] AS value FROM tb_code_value WHERE code != '' AND [value] != ''  
2020-06-17 11:39:35.583 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.getAllCode    - [debug:159] ==> Parameters:  
2020-06-17 11:39:35.631 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 11:39:35.632 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 11:39:35.637 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 11:39:35.642 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 11:39:35.642 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 11:39:35.648 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 11:39:35.654 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 11:39:35.654 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 11:39:35.659 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-17 11:39:35.664 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 11:39:35.664 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:39:35.668 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 11:39:35.676 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 11:39:35.676 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:39:35.681 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 11:39:35.685 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 11:39:35.685 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 11:39:35.686 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 11:39:35.686 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 11:39:35.690 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 11:39:35.696 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 11:39:35.697 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 11:39:35.701 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 11:39:35.707 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 11:39:35.707 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:39:35.711 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 11:39:35.719 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 11:39:35.719 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:39:35.732 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 11:39:35.737 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 11:39:35.737 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 11:39:35.737 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 11:39:35.737 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 11:39:35.741 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 11:39:35.746 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 11:39:35.746 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 11:39:35.751 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 11:39:35.756 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 11:39:35.756 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:39:35.761 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 11:39:35.765 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 11:39:35.765 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:39:35.773 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 11:39:35.787 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:姓名未填写姓名为空值 
2020-06-17 11:39:35.789 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:血型与RH血型逻辑不符同时满足以下条件： 1、个人基本信息表《血型》填写为“不详” 2、个人基本信息表《RH血型》填写为“阴性”或“阳性” 
2020-06-17 11:39:35.791 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-17 11:39:35.792 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 63eb82a44bf64c96a0b9023fa2a3c9d9(String), 2020-06-17 11:39:35.791(Timestamp), 31011310200312009116(String), a58b2894635045b18a63c250d46ce8a8(String), 2020-06-17 11:39:35.791(Timestamp) 
2020-06-17 11:39:35.807 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 2 
2020-06-17 11:39:35.988 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.getAllCode    - [debug:159] <==      Total: 44881 
2020-06-17 11:39:36.020 [INFO ] c.b.r.m.m.service.impl.EhrModelBuildServiceImpl    - [init:96] 初始化字典类型: 467 种 
2020-06-17 11:39:36.021 [INFO ] c.b.r.m.m.service.impl.EhrModelBuildServiceImpl    - [init:97] 初始化字典: 44881 条 
2020-06-17 11:39:36.021 [ERROR] c.b.r.m.process.service.impl.QcProcessServiceImpl  - [init:44] 初始化线程池 
2020-06-17 11:39:36.173 [INFO ] o.s.scheduling.concurrent.ThreadPoolTaskExecutor   - [initialize:171] Initializing ExecutorService 'applicationTaskExecutor' 
2020-06-17 11:39:36.414 [INFO ] org.apache.coyote.http11.Http11NioProtocol         - [log:173] Starting ProtocolHandler ["http-nio-8838"] 
2020-06-17 11:39:36.425 [INFO ] org.apache.coyote.http11.Http11NioProtocol         - [log:173] Pausing ProtocolHandler ["http-nio-8838"] 
2020-06-17 11:39:36.425 [INFO ] org.apache.catalina.core.StandardService           - [log:173] Stopping service [Tomcat] 
2020-06-17 11:39:36.432 [INFO ] org.apache.coyote.http11.Http11NioProtocol         - [log:173] Stopping ProtocolHandler ["http-nio-8838"] 
2020-06-17 11:39:36.435 [INFO ] org.apache.coyote.http11.Http11NioProtocol         - [log:173] Destroying ProtocolHandler ["http-nio-8838"] 
2020-06-17 11:39:36.438 [INFO ] o.s.b.a.l.ConditionEvaluationReportLoggingListener - [logMessage:136]     Error starting ApplicationContext. To display the conditions report re-run your application with 'debug' enabled. 
2020-06-17 11:39:36.440 [ERROR] o.s.b.diagnostics.LoggingFailureAnalysisReporter   - [report:40]     ***************************  APPLICATION FAILED TO START  ***************************    Description:    Web server failed to start. Port 8838 was already in use.    Action:    Identify and stop the process that's listening on port 8838 or configure this application to listen on another port.   
2020-06-17 11:39:36.442 [INFO ] o.s.scheduling.concurrent.ThreadPoolTaskExecutor   - [shutdown:208] Shutting down ExecutorService 'applicationTaskExecutor' 
2020-06-17 11:39:36.448 [INFO ] com.alibaba.druid.pool.DruidDataSource             - [close:1825] {dataSource-1} closed 
2020-06-17 11:39:39.385 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 11:39:39.385 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 11:39:39.390 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 11:39:39.394 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 11:39:39.395 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 11:39:39.400 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 11:39:39.404 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 11:39:39.404 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 11:39:39.409 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-17 11:39:39.413 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 11:39:39.413 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:39:39.418 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 11:39:39.422 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 11:39:39.422 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:39:39.427 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 11:39:39.432 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 11:39:39.432 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 11:39:39.432 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 11:39:39.432 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 11:39:39.437 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 11:39:39.442 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 11:39:39.442 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 11:39:39.447 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 11:39:39.451 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 11:39:39.452 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:39:39.456 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 11:39:39.460 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 11:39:39.460 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:39:39.474 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 11:39:39.478 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 11:39:39.478 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 11:39:39.478 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 11:39:39.478 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 11:39:39.485 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 11:39:39.489 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 11:39:39.489 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 11:39:39.494 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 11:39:39.498 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 11:39:39.499 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:39:39.504 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 11:39:39.508 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 11:39:39.509 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:39:39.513 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 11:39:39.533 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:姓名填写不规范同时满足以下条件： 1、联系人姓名不为空值 2、联系人姓名为纯数字 
2020-06-17 11:39:39.535 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:与三级医院住院就诊记录表姓名不一致同时满足以下条件： 1、封面《姓名》不为空值 2、三级医院住院就诊记录表《患者姓名》不为空 3、封面《姓名》与住院就诊记录表中《患者姓名》不相等 
2020-06-17 11:39:39.535 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:与三级医院门诊就诊记录表姓名不一致同时满足以下条件： 1、封面《姓名》不为空值 2、三级医院门诊就诊记录表《患者姓名》不为空 3、封面《姓名》与门诊就诊记录表中《患者姓名》不相等 
2020-06-17 11:39:39.536 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:血型与RH血型逻辑不符同时满足以下条件： 1、个人基本信息表《血型》填写为“不详” 2、个人基本信息表《RH血型》填写为“阴性”或“阳性” 
2020-06-17 11:39:39.539 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-17 11:39:39.539 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 61ed70b670f2460a94ebc183f6b86f5d(String), 2020-06-17 11:39:39.539(Timestamp), 31011310200312009116(String), 814b3d0aca3642af82ef320f98d4dfba(String), 2020-06-17 11:39:39.539(Timestamp), 31011310200312009116(String), 847bc4b46918417dab4aa917af3355c3(String), 2020-06-17 11:39:39.539(Timestamp), 31011310200312009116(String), a58b2894635045b18a63c250d46ce8a8(String), 2020-06-17 11:39:39.539(Timestamp) 
2020-06-17 11:39:39.551 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 4 
2020-06-17 11:39:42.890 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 11:39:42.890 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 11:39:42.895 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 11:39:42.900 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 11:39:42.900 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 11:39:42.905 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 11:39:42.908 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 11:39:42.909 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 11:39:42.914 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-17 11:39:42.918 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 11:39:42.918 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:39:42.923 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 11:39:42.927 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 11:39:42.927 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:39:42.932 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 11:39:42.936 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 11:39:42.937 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 11:39:42.937 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 11:39:42.937 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 11:39:42.942 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 11:39:42.948 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 11:39:42.948 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 11:39:42.952 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 11:39:42.956 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 11:39:42.957 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:39:42.961 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 11:39:42.966 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 11:39:42.966 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:39:42.979 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 11:39:42.984 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 11:39:42.984 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 11:39:42.984 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 11:39:42.985 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 11:39:42.989 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 11:39:42.993 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 11:39:42.994 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 11:39:42.999 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 11:39:43.003 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 11:39:43.003 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:39:43.007 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 11:39:43.012 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 11:39:43.012 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:39:43.016 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 11:39:43.030 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:与三级医院住院就诊记录表姓名不一致同时满足以下条件： 1、封面《姓名》不为空值 2、三级医院住院就诊记录表《患者姓名》不为空 3、封面《姓名》与住院就诊记录表中《患者姓名》不相等 
2020-06-17 11:39:43.031 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:与三级医院门诊就诊记录表姓名不一致同时满足以下条件： 1、封面《姓名》不为空值 2、三级医院门诊就诊记录表《患者姓名》不为空 3、封面《姓名》与门诊就诊记录表中《患者姓名》不相等 
2020-06-17 11:39:43.032 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:血型与RH血型逻辑不符同时满足以下条件： 1、个人基本信息表《血型》填写为“不详” 2、个人基本信息表《RH血型》填写为“阴性”或“阳性” 
2020-06-17 11:39:43.032 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:姓名长度异常长度>50字符 
2020-06-17 11:39:43.034 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-17 11:39:43.034 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 814b3d0aca3642af82ef320f98d4dfba(String), 2020-06-17 11:39:43.034(Timestamp), 31011310200312009116(String), 847bc4b46918417dab4aa917af3355c3(String), 2020-06-17 11:39:43.034(Timestamp), 31011310200312009116(String), a58b2894635045b18a63c250d46ce8a8(String), 2020-06-17 11:39:43.034(Timestamp), 31011310200312009116(String), b8eeb38e528544b28133b9ee94c5fbc4(String), 2020-06-17 11:39:43.034(Timestamp) 
2020-06-17 11:39:43.064 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 4 
2020-06-17 11:39:46.588 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 11:39:46.589 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 11:39:46.599 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 11:39:46.608 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 11:39:46.608 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 11:39:46.619 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 11:39:46.632 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 11:39:46.632 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 11:39:46.644 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-17 11:39:46.655 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 11:39:46.655 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:39:46.667 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 11:39:46.680 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 11:39:46.680 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:39:46.697 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 11:39:46.710 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 11:39:46.710 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 11:39:46.711 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 11:39:46.711 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 11:39:46.720 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 11:39:46.731 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 11:39:46.731 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 11:39:46.741 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 11:39:46.751 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 11:39:46.751 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:39:46.759 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 11:39:46.769 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 11:39:46.769 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:39:46.793 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 11:39:46.806 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 11:39:46.806 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 11:39:46.807 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 11:39:46.807 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 11:39:46.821 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 11:39:46.839 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 11:39:46.840 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 11:39:46.852 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 11:39:46.869 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 11:39:46.870 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:39:46.880 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 11:39:46.892 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 11:39:46.893 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:39:46.905 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 11:39:46.944 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:现住址长度异常长度>100字符（包含省市区、乡镇街道名称（如有）、村居委会名称（如有）、详细地址） 
2020-06-17 11:39:46.945 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:血型与RH血型逻辑不符同时满足以下条件： 1、个人基本信息表《血型》填写为“不详” 2、个人基本信息表《RH血型》填写为“阴性”或“阳性” 
2020-06-17 11:39:46.949 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-17 11:39:46.949 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 91665e0b2efa4f86aea807ec9f4883c3(String), 2020-06-17 11:39:46.948(Timestamp), 31011310200312009116(String), a58b2894635045b18a63c250d46ce8a8(String), 2020-06-17 11:39:46.948(Timestamp) 
2020-06-17 11:39:46.978 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 2 
2020-06-17 11:39:50.293 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 11:39:50.293 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 11:39:50.299 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 11:39:50.302 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 11:39:50.302 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 11:39:50.307 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 11:39:50.312 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 11:39:50.313 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 11:39:50.317 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-17 11:39:50.322 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 11:39:50.322 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:39:50.327 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 11:39:50.332 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 11:39:50.332 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:39:50.337 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 11:39:50.341 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 11:39:50.342 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 11:39:50.342 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 11:39:50.343 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 11:39:50.348 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 11:39:50.352 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 11:39:50.352 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 11:39:50.356 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 11:39:50.360 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 11:39:50.361 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:39:50.365 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 11:39:50.370 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 11:39:50.370 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:39:50.384 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 11:39:50.389 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 11:39:50.389 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 11:39:50.389 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 11:39:50.389 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 11:39:50.394 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 11:39:50.399 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 11:39:50.400 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 11:39:50.404 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 11:39:50.410 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 11:39:50.410 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:39:50.415 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 11:39:50.419 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 11:39:50.419 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:39:50.425 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 11:39:50.439 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:户籍地址长度异常长度>100字符（包含省市区、乡镇街道名称（如有）、村居委会名称（如有）、详细地址） 
2020-06-17 11:39:50.443 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:血型与RH血型逻辑不符同时满足以下条件： 1、个人基本信息表《血型》填写为“不详” 2、个人基本信息表《RH血型》填写为“阴性”或“阳性” 
2020-06-17 11:39:50.446 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-17 11:39:50.446 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 329b69c7855544e986fc0073b77fe9be(String), 2020-06-17 11:39:50.445(Timestamp), 31011310200312009116(String), a58b2894635045b18a63c250d46ce8a8(String), 2020-06-17 11:39:50.445(Timestamp) 
2020-06-17 11:39:50.464 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 2 
2020-06-17 11:39:53.809 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 11:39:53.809 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 11:39:53.815 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 11:39:53.820 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 11:39:53.820 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 11:39:53.825 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 11:39:53.829 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 11:39:53.829 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 11:39:53.833 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-17 11:39:53.837 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 11:39:53.837 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:39:53.841 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 11:39:53.845 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 11:39:53.846 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:39:53.852 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 11:39:53.857 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 11:39:53.859 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 11:39:53.859 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 11:39:53.860 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 11:39:53.865 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 11:39:53.870 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 11:39:53.871 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 11:39:53.876 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 11:39:53.881 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 11:39:53.882 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:39:53.887 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 11:39:53.892 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 11:39:53.893 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:39:53.908 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 11:39:53.917 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 11:39:53.917 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 11:39:53.918 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 11:39:53.919 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 11:39:53.925 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 11:39:53.931 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 11:39:53.932 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 11:39:53.937 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 11:39:53.944 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 11:39:53.945 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:39:53.951 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 11:39:53.955 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 11:39:53.956 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:39:53.961 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 11:39:54.005 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:现住址长度异常长度>100字符（包含省市区、乡镇街道名称（如有）、村居委会名称（如有）、详细地址） 
2020-06-17 11:39:54.006 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:现住址村（居）委会名称长度异常长度>100字符 
2020-06-17 11:39:54.007 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:血型与RH血型逻辑不符同时满足以下条件： 1、个人基本信息表《血型》填写为“不详” 2、个人基本信息表《RH血型》填写为“阴性”或“阳性” 
2020-06-17 11:39:54.010 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-17 11:39:54.010 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 91665e0b2efa4f86aea807ec9f4883c3(String), 2020-06-17 11:39:54.009(Timestamp), 31011310200312009116(String), 9df07515be3d4c2887e947c6ce5adace(String), 2020-06-17 11:39:54.009(Timestamp), 31011310200312009116(String), a58b2894635045b18a63c250d46ce8a8(String), 2020-06-17 11:39:54.009(Timestamp) 
2020-06-17 11:39:54.025 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 3 
2020-06-17 11:39:57.257 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 11:39:57.257 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 11:39:57.263 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 11:39:57.266 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 11:39:57.267 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 11:39:57.273 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 11:39:57.277 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 11:39:57.277 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 11:39:57.282 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-17 11:39:57.288 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 11:39:57.288 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:39:57.292 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 11:39:57.298 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 11:39:57.298 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:39:57.304 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 11:39:57.309 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 11:39:57.309 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 11:39:57.310 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 11:39:57.311 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 11:39:57.316 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 11:39:57.321 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 11:39:57.322 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 11:39:57.326 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 11:39:57.331 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 11:39:57.332 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:39:57.337 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 11:39:57.341 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 11:39:57.342 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:39:57.357 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 11:39:57.363 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 11:39:57.364 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 11:39:57.364 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 11:39:57.365 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 11:39:57.369 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 11:39:57.374 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 11:39:57.375 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 11:39:57.381 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 11:39:57.388 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 11:39:57.389 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:39:57.395 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 11:39:57.400 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 11:39:57.402 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:39:57.407 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 11:39:57.434 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:建档单位长度异常长度>100字符 
2020-06-17 11:39:57.442 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:血型与RH血型逻辑不符同时满足以下条件： 1、个人基本信息表《血型》填写为“不详” 2、个人基本信息表《RH血型》填写为“阴性”或“阳性” 
2020-06-17 11:39:57.446 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-17 11:39:57.447 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 403a97f9ec40406b9723b3c6845a6cee(String), 2020-06-17 11:39:57.446(Timestamp), 31011310200312009116(String), a58b2894635045b18a63c250d46ce8a8(String), 2020-06-17 11:39:57.446(Timestamp) 
2020-06-17 11:39:57.462 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 2 
2020-06-17 11:40:00.749 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 11:40:00.750 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 11:40:00.755 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 11:40:00.759 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 11:40:00.760 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 11:40:00.764 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 11:40:00.769 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 11:40:00.770 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 11:40:00.775 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-17 11:40:00.781 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 11:40:00.781 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:40:00.786 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 11:40:00.790 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 11:40:00.791 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:40:00.796 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 11:40:00.801 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 11:40:00.801 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 11:40:00.802 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 11:40:00.802 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 11:40:00.807 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 11:40:00.812 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 11:40:00.813 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 11:40:00.817 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 11:40:00.821 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 11:40:00.822 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:40:00.829 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 11:40:00.834 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 11:40:00.835 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:40:00.857 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 11:40:00.865 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 11:40:00.865 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 11:40:00.866 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 11:40:00.866 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 11:40:00.872 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 11:40:00.878 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 11:40:00.879 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 11:40:00.888 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 11:40:00.893 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 11:40:00.893 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:40:00.898 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 11:40:00.902 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 11:40:00.902 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:40:00.907 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 11:40:00.921 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:血型与RH血型逻辑不符同时满足以下条件： 1、个人基本信息表《血型》填写为“不详” 2、个人基本信息表《RH血型》填写为“阴性”或“阳性” 
2020-06-17 11:40:00.923 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1)  
2020-06-17 11:40:00.924 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), a58b2894635045b18a63c250d46ce8a8(String), 2020-06-17 11:40:00.923(Timestamp) 
2020-06-17 11:40:00.938 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 1 
2020-06-17 11:40:04.377 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 11:40:04.378 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 11:40:04.384 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 11:40:04.389 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 11:40:04.389 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 11:40:04.394 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 11:40:04.399 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 11:40:04.400 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 11:40:04.405 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-17 11:40:04.410 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 11:40:04.411 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:40:04.416 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 11:40:04.421 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 11:40:04.422 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:40:04.427 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 11:40:04.433 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 11:40:04.434 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 11:40:04.434 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 11:40:04.435 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 11:40:04.441 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 11:40:04.446 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 11:40:04.447 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 11:40:04.452 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 11:40:04.456 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 11:40:04.456 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:40:04.461 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 11:40:04.466 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 11:40:04.466 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:40:04.480 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 11:40:04.484 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 11:40:04.484 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 11:40:04.485 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 11:40:04.485 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 11:40:04.489 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 11:40:04.494 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 11:40:04.494 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 11:40:04.498 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 11:40:04.501 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 11:40:04.502 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:40:04.506 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 11:40:04.511 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 11:40:04.511 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:40:04.515 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 11:40:04.530 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:责任医生长度异常长度>50字符 
2020-06-17 11:40:04.530 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:血型与RH血型逻辑不符同时满足以下条件： 1、个人基本信息表《血型》填写为“不详” 2、个人基本信息表《RH血型》填写为“阴性”或“阳性” 
2020-06-17 11:40:04.533 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-17 11:40:04.533 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 9042bba97fb74b558de96e35ab2ffdc2(String), 2020-06-17 11:40:04.532(Timestamp), 31011310200312009116(String), a58b2894635045b18a63c250d46ce8a8(String), 2020-06-17 11:40:04.532(Timestamp) 
2020-06-17 11:40:04.571 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 2 
2020-06-17 11:40:07.994 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 11:40:08.018 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 11:40:08.023 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 11:40:08.029 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 11:40:08.029 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 11:40:08.034 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 11:40:08.039 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 11:40:08.040 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 11:40:08.045 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-17 11:40:08.051 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 11:40:08.052 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:40:08.057 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 11:40:08.062 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 11:40:08.063 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:40:08.070 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 11:40:08.075 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 11:40:08.076 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 11:40:08.076 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 11:40:08.077 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 11:40:08.082 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 11:40:08.089 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 11:40:08.090 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 11:40:08.094 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 11:40:08.100 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 11:40:08.101 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:40:08.106 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 11:40:08.112 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 11:40:08.113 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:40:08.128 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 11:40:08.135 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 11:40:08.136 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 11:40:08.137 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 11:40:08.138 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 11:40:08.143 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 11:40:08.148 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 11:40:08.149 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 11:40:08.154 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 11:40:08.159 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 11:40:08.161 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:40:08.166 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 11:40:08.172 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 11:40:08.173 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:40:08.178 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 11:40:08.197 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:个人基本信息表工作单位工作单位不为汉字 
2020-06-17 11:40:08.201 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:血型与RH血型逻辑不符同时满足以下条件： 1、个人基本信息表《血型》填写为“不详” 2、个人基本信息表《RH血型》填写为“阴性”或“阳性” 
2020-06-17 11:40:08.205 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-17 11:40:08.205 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 4ad5f41e777d499894964fe735a4ed46(String), 2020-06-17 11:40:08.204(Timestamp), 31011310200312009116(String), a58b2894635045b18a63c250d46ce8a8(String), 2020-06-17 11:40:08.204(Timestamp) 
2020-06-17 11:40:08.246 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 2 
2020-06-17 11:40:11.676 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 11:40:11.677 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 11:40:11.682 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 11:40:11.688 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 11:40:11.689 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 11:40:11.694 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 11:40:11.700 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 11:40:11.701 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 11:40:11.706 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-17 11:40:11.711 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 11:40:11.712 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:40:11.716 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 11:40:11.721 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 11:40:11.721 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:40:11.727 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 11:40:11.732 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 11:40:11.732 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 11:40:11.733 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 11:40:11.733 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 11:40:11.738 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 11:40:11.742 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 11:40:11.743 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 11:40:11.749 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 11:40:11.753 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 11:40:11.754 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:40:11.763 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 11:40:11.767 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 11:40:11.767 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:40:11.780 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 11:40:11.784 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 11:40:11.785 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 11:40:11.785 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 11:40:11.786 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 11:40:11.790 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 11:40:11.794 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 11:40:11.794 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 11:40:11.799 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 11:40:11.803 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 11:40:11.803 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:40:11.807 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 11:40:11.812 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 11:40:11.812 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:40:11.817 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 11:40:11.829 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:联系人姓名填写为数字同时满足以下条件： 1、联系人姓名不为空值 2、联系人姓名为纯数字 
2020-06-17 11:40:11.832 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:血型与RH血型逻辑不符同时满足以下条件： 1、个人基本信息表《血型》填写为“不详” 2、个人基本信息表《RH血型》填写为“阴性”或“阳性” 
2020-06-17 11:40:11.834 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-17 11:40:11.834 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 1a7e1f2e0bce421585a1fad889411dd4(String), 2020-06-17 11:40:11.833(Timestamp), 31011310200312009116(String), a58b2894635045b18a63c250d46ce8a8(String), 2020-06-17 11:40:11.833(Timestamp) 
2020-06-17 11:40:11.851 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 2 
2020-06-17 11:40:15.212 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 11:40:15.213 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 11:40:15.218 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 11:40:15.222 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 11:40:15.223 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 11:40:15.228 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 11:40:15.233 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 11:40:15.234 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 11:40:15.239 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-17 11:40:15.243 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 11:40:15.244 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:40:15.250 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 11:40:15.255 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 11:40:15.255 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:40:15.261 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 11:40:15.266 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 11:40:15.266 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 11:40:15.267 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 11:40:15.268 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 11:40:15.273 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 11:40:15.279 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 11:40:15.280 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 11:40:15.286 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 11:40:15.290 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 11:40:15.291 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:40:15.297 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 11:40:15.304 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 11:40:15.305 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:40:15.320 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 11:40:15.325 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 11:40:15.326 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 11:40:15.327 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 11:40:15.328 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 11:40:15.333 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 11:40:15.338 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 11:40:15.339 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 11:40:15.344 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 11:40:15.349 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 11:40:15.351 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:40:15.356 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 11:40:15.362 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 11:40:15.363 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:40:15.368 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 11:40:15.404 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:血型与RH血型逻辑不符同时满足以下条件： 1、个人基本信息表《血型》填写为“不详” 2、个人基本信息表《RH血型》填写为“阴性”或“阳性” 
2020-06-17 11:40:15.411 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1)  
2020-06-17 11:40:15.412 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), a58b2894635045b18a63c250d46ce8a8(String), 2020-06-17 11:40:15.411(Timestamp) 
2020-06-17 11:40:15.428 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 1 
2020-06-17 11:40:18.717 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 11:40:18.718 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 11:40:18.722 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 11:40:18.727 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 11:40:18.728 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 11:40:18.732 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 11:40:18.735 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 11:40:18.736 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 11:40:18.741 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-17 11:40:18.745 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 11:40:18.746 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:40:18.759 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 11:40:18.763 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 11:40:18.764 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:40:18.769 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 11:40:18.774 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 11:40:18.774 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 11:40:18.775 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 11:40:18.775 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 11:40:18.780 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 11:40:18.785 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 11:40:18.785 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 11:40:18.789 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 11:40:18.793 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 11:40:18.793 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:40:18.799 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 11:40:18.803 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 11:40:18.804 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:40:18.818 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 11:40:18.822 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 11:40:18.822 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 11:40:18.823 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 11:40:18.823 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 11:40:18.827 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 11:40:18.833 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 11:40:18.833 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 11:40:18.837 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 11:40:18.843 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 11:40:18.844 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:40:18.849 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 11:40:18.853 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 11:40:18.853 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:40:18.858 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 11:40:18.878 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:血型与RH血型逻辑不符同时满足以下条件： 1、个人基本信息表《血型》填写为“不详” 2、个人基本信息表《RH血型》填写为“阴性”或“阳性” 
2020-06-17 11:40:18.881 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1)  
2020-06-17 11:40:18.882 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), a58b2894635045b18a63c250d46ce8a8(String), 2020-06-17 11:40:18.881(Timestamp) 
2020-06-17 11:40:18.902 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 1 
2020-06-17 11:40:22.377 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 11:40:22.378 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 11:40:22.383 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 11:40:22.387 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 11:40:22.388 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 11:40:22.393 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 11:40:22.397 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 11:40:22.398 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 11:40:22.403 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-17 11:40:22.408 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 11:40:22.408 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:40:22.413 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 11:40:22.418 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 11:40:22.418 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:40:22.424 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 11:40:22.428 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 11:40:22.428 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 11:40:22.429 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 11:40:22.429 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 11:40:22.434 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 11:40:22.439 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 11:40:22.439 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 11:40:22.447 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 11:40:22.453 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 11:40:22.454 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:40:22.461 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 11:40:22.465 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 11:40:22.466 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:40:22.481 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 11:40:22.487 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 11:40:22.488 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 11:40:22.489 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 11:40:22.490 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 11:40:22.496 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 11:40:22.502 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 11:40:22.503 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 11:40:22.513 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 11:40:22.520 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 11:40:22.521 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:40:22.526 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 11:40:22.531 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 11:40:22.532 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:40:22.538 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 11:40:22.576 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:血型与RH血型逻辑不符同时满足以下条件： 1、个人基本信息表《血型》填写为“不详” 2、个人基本信息表《RH血型》填写为“阴性”或“阳性” 
2020-06-17 11:40:22.584 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1)  
2020-06-17 11:40:22.586 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), a58b2894635045b18a63c250d46ce8a8(String), 2020-06-17 11:40:22.584(Timestamp) 
2020-06-17 11:40:22.627 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 1 
2020-06-17 11:40:25.929 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 11:40:25.930 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 11:40:25.936 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 11:40:25.939 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 11:40:25.940 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 11:40:25.946 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 11:40:25.951 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 11:40:25.952 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 11:40:25.957 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-17 11:40:25.962 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 11:40:25.963 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:40:25.968 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 11:40:25.973 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 11:40:25.974 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:40:25.980 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 11:40:25.985 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 11:40:25.985 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 11:40:25.986 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 11:40:25.986 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 11:40:25.991 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 11:40:25.996 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 11:40:25.997 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 11:40:26.002 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 11:40:26.006 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 11:40:26.007 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:40:26.013 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 11:40:26.017 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 11:40:26.018 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:40:26.033 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 11:40:26.039 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 11:40:26.039 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 11:40:26.040 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 11:40:26.041 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 11:40:26.045 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 11:40:26.050 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 11:40:26.051 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 11:40:26.057 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 11:40:26.062 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 11:40:26.062 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:40:26.067 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 11:40:26.072 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 11:40:26.073 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:40:26.077 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 11:40:26.117 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:血型与RH血型逻辑不符同时满足以下条件： 1、个人基本信息表《血型》填写为“不详” 2、个人基本信息表《RH血型》填写为“阴性”或“阳性” 
2020-06-17 11:40:26.121 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1)  
2020-06-17 11:40:26.122 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), a58b2894635045b18a63c250d46ce8a8(String), 2020-06-17 11:40:26.12(Timestamp) 
2020-06-17 11:40:26.174 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 1 
2020-06-17 11:40:29.589 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 11:40:29.589 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 11:40:29.594 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 11:40:29.599 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 11:40:29.599 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 11:40:29.604 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 11:40:29.608 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 11:40:29.608 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 11:40:29.611 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-17 11:40:29.616 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 11:40:29.616 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:40:29.620 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 11:40:29.625 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 11:40:29.625 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:40:29.632 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 11:40:29.636 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 11:40:29.637 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 11:40:29.637 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 11:40:29.638 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 11:40:29.643 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 11:40:29.648 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 11:40:29.648 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 11:40:29.653 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 11:40:29.658 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 11:40:29.659 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:40:29.664 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 11:40:29.669 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 11:40:29.669 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:40:29.684 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 11:40:29.688 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 11:40:29.689 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 11:40:29.689 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 11:40:29.690 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 11:40:29.694 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 11:40:29.698 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 11:40:29.699 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 11:40:29.703 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 11:40:29.708 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 11:40:29.708 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:40:29.713 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 11:40:29.717 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 11:40:29.718 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:40:29.722 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 11:40:29.738 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:血型与RH血型逻辑不符同时满足以下条件： 1、个人基本信息表《血型》填写为“不详” 2、个人基本信息表《RH血型》填写为“阴性”或“阳性” 
2020-06-17 11:40:29.740 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1)  
2020-06-17 11:40:29.741 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), a58b2894635045b18a63c250d46ce8a8(String), 2020-06-17 11:40:29.74(Timestamp) 
2020-06-17 11:40:29.783 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 1 
2020-06-17 11:40:33.378 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 11:40:33.378 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 11:40:33.385 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 11:40:33.398 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 11:40:33.398 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 11:40:33.403 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 11:40:33.407 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 11:40:33.408 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 11:40:33.412 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-17 11:40:33.420 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 11:40:33.420 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:40:33.425 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 11:40:33.429 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 11:40:33.429 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:40:33.434 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 11:40:33.438 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 11:40:33.438 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 11:40:33.438 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 11:40:33.439 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 11:40:33.443 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 11:40:33.447 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 11:40:33.448 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 11:40:33.451 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 11:40:33.455 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 11:40:33.456 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:40:33.460 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 11:40:33.464 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 11:40:33.464 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:40:33.477 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 11:40:33.481 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 11:40:33.481 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 11:40:33.482 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 11:40:33.482 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 11:40:33.486 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 11:40:33.490 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 11:40:33.490 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 11:40:33.494 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 11:40:33.497 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 11:40:33.498 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:40:33.503 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 11:40:33.507 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 11:40:33.508 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:40:33.512 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 11:40:33.524 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:个人基本信息表既往史既往史疾病确诊时间未填写 
2020-06-17 11:40:33.525 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:个人基本信息表既往史既往史疾病确诊时间填写不规范 
2020-06-17 11:40:33.526 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:血型与RH血型逻辑不符同时满足以下条件： 1、个人基本信息表《血型》填写为“不详” 2、个人基本信息表《RH血型》填写为“阴性”或“阳性” 
2020-06-17 11:40:33.528 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-17 11:40:33.528 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 6302b0fcdcd7482099581602a1fec501(String), 2020-06-17 11:40:33.528(Timestamp), 31011310200312009116(String), 923bfb7880204efa8f26fd200d1bd17e(String), 2020-06-17 11:40:33.528(Timestamp), 31011310200312009116(String), a58b2894635045b18a63c250d46ce8a8(String), 2020-06-17 11:40:33.528(Timestamp) 
2020-06-17 11:40:33.557 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 3 
2020-06-17 11:42:50.421 [INFO ] com.benetech.rules.RulesApplication                - [logStarting:55] Starting RulesApplication v1.0-SNAPSHOT on DESKTOP-EOCO1V0 with PID 11628 (D:\51\python\project\instance\zyjk\EHR\controlRuleNew\config\healthRecordRules.jar started by ZY in D:\51\python\project\instance\zyjk\EHR\controlRuleNew) 
2020-06-17 11:42:50.424 [DEBUG] com.benetech.rules.RulesApplication                - [logStarting:56] Running with Spring Boot v2.2.1.RELEASE, Spring v5.2.1.RELEASE 
2020-06-17 11:42:50.424 [INFO ] com.benetech.rules.RulesApplication                - [logStartupProfileInfo:655] The following profiles are active: test 
2020-06-17 11:42:51.985 [INFO ] o.s.boot.web.embedded.tomcat.TomcatWebServer       - [initialize:92] Tomcat initialized with port(s): 8838 (http) 
2020-06-17 11:42:51.998 [INFO ] org.apache.coyote.http11.Http11NioProtocol         - [log:173] Initializing ProtocolHandler ["http-nio-8838"] 
2020-06-17 11:42:51.998 [INFO ] org.apache.catalina.core.StandardService           - [log:173] Starting service [Tomcat] 
2020-06-17 11:42:51.999 [INFO ] org.apache.catalina.core.StandardEngine            - [log:173] Starting Servlet engine: [Apache Tomcat/9.0.27] 
2020-06-17 11:42:52.072 [INFO ] o.a.c.c.C.[.[localhost].[/healthRecordRules]       - [log:173] Initializing Spring embedded WebApplicationContext 
2020-06-17 11:42:52.073 [INFO ] org.springframework.web.context.ContextLoader      - [prepareWebApplicationContext:284] Root WebApplicationContext: initialization completed in 1563 ms 
2020-06-17 11:42:52.153 [DEBUG] org.apache.ibatis.logging.LogFactory               - [setImplementation:135] Logging initialized using 'class org.apache.ibatis.logging.slf4j.Slf4jImpl' adapter. 
2020-06-17 11:42:52.440 [WARN ] org.mybatis.spring.SqlSessionFactoryBean           - [buildSqlSessionFactory:467] Can't find class in '[com.benetech.rules.*.entity]' package. Please check your configuration. 
2020-06-17 11:42:53.085 [INFO ] com.alibaba.druid.pool.DruidDataSource             - [init:930] {dataSource-1} inited 
2020-06-17 11:42:53.312 [DEBUG] c.b.r.m.e.mapper.RuleEngineMapper.getAllRules      - [debug:159] ==>  Preparing: select a.RuleId as ruleId, a.RuleSql as clazz from HrRule a join HrRuleProps b on a.RuleId = b.RuleId where -- RuleId in ('34278f71cf1d42c88158aaf637fa5203', '8d30baa03bfc4233a8f115c57a0ebf08', '63eb82a44bf64c96a0b9023fa2a3c9d9') a.RuleSql != '' and a.RuleSql is not null and b.Enable = 1  
2020-06-17 11:42:53.338 [DEBUG] c.b.r.m.e.mapper.RuleEngineMapper.getAllRules      - [debug:159] ==> Parameters:  
2020-06-17 11:42:53.418 [DEBUG] c.b.r.m.e.mapper.RuleEngineMapper.getAllRules      - [debug:159] <==      Total: 310 
2020-06-17 11:42:53.610 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 11:42:53.610 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 11:42:53.616 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 11:42:53.620 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 11:42:53.620 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 11:42:53.625 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 11:42:53.630 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 11:42:53.630 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 11:42:53.635 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-17 11:42:53.640 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 11:42:53.640 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:42:53.645 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 11:42:53.648 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 11:42:53.648 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:42:53.653 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 11:42:53.656 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 11:42:53.656 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 11:42:53.656 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 11:42:53.656 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 11:42:53.658 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [init:68] 加载规则：310 条 
2020-06-17 11:42:53.661 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 11:42:53.665 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 11:42:53.665 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 11:42:53.672 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 11:42:53.676 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 11:42:53.676 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:42:53.681 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 11:42:53.681 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.getAllCode    - [debug:159] ==>  Preparing: SELECT codeSysType AS type, code AS code, [value] AS value FROM tb_code_value WHERE code != '' AND [value] != ''  
2020-06-17 11:42:53.681 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.getAllCode    - [debug:159] ==> Parameters:  
2020-06-17 11:42:53.685 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 11:42:53.685 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:42:53.704 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 11:42:53.708 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 11:42:53.708 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 11:42:53.708 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 11:42:53.709 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 11:42:53.715 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 11:42:53.719 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 11:42:53.719 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 11:42:53.725 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 11:42:53.729 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 11:42:53.729 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:42:53.736 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 11:42:53.740 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 11:42:53.740 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:42:53.748 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 11:42:53.767 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:与三级医院住院就诊记录表姓名不一致同时满足以下条件： 1、封面《姓名》不为空值 2、三级医院住院就诊记录表《患者姓名》不为空 3、封面《姓名》与住院就诊记录表中《患者姓名》不相等 
2020-06-17 11:42:53.767 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:与三级医院门诊就诊记录表姓名不一致同时满足以下条件： 1、封面《姓名》不为空值 2、三级医院门诊就诊记录表《患者姓名》不为空 3、封面《姓名》与门诊就诊记录表中《患者姓名》不相等 
2020-06-17 11:42:53.769 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:血型与RH血型逻辑不符同时满足以下条件： 1、个人基本信息表《血型》填写为“不详” 2、个人基本信息表《RH血型》填写为“阴性”或“阳性” 
2020-06-17 11:42:53.770 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:姓名长度异常长度>50字符 
2020-06-17 11:42:53.772 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-17 11:42:53.772 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 814b3d0aca3642af82ef320f98d4dfba(String), 2020-06-17 11:42:53.772(Timestamp), 31011310200312009116(String), 847bc4b46918417dab4aa917af3355c3(String), 2020-06-17 11:42:53.772(Timestamp), 31011310200312009116(String), a58b2894635045b18a63c250d46ce8a8(String), 2020-06-17 11:42:53.772(Timestamp), 31011310200312009116(String), b8eeb38e528544b28133b9ee94c5fbc4(String), 2020-06-17 11:42:53.772(Timestamp) 
2020-06-17 11:42:53.806 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 4 
2020-06-17 11:42:54.107 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.getAllCode    - [debug:159] <==      Total: 44881 
2020-06-17 11:42:54.132 [INFO ] c.b.r.m.m.service.impl.EhrModelBuildServiceImpl    - [init:96] 初始化字典类型: 467 种 
2020-06-17 11:42:54.132 [INFO ] c.b.r.m.m.service.impl.EhrModelBuildServiceImpl    - [init:97] 初始化字典: 44881 条 
2020-06-17 11:42:54.133 [ERROR] c.b.r.m.process.service.impl.QcProcessServiceImpl  - [init:44] 初始化线程池 
2020-06-17 11:42:54.264 [INFO ] o.s.scheduling.concurrent.ThreadPoolTaskExecutor   - [initialize:171] Initializing ExecutorService 'applicationTaskExecutor' 
2020-06-17 11:42:54.537 [INFO ] org.apache.coyote.http11.Http11NioProtocol         - [log:173] Starting ProtocolHandler ["http-nio-8838"] 
2020-06-17 11:42:54.550 [INFO ] org.apache.coyote.http11.Http11NioProtocol         - [log:173] Pausing ProtocolHandler ["http-nio-8838"] 
2020-06-17 11:42:54.550 [INFO ] org.apache.catalina.core.StandardService           - [log:173] Stopping service [Tomcat] 
2020-06-17 11:42:54.554 [INFO ] org.apache.coyote.http11.Http11NioProtocol         - [log:173] Stopping ProtocolHandler ["http-nio-8838"] 
2020-06-17 11:42:54.554 [INFO ] org.apache.coyote.http11.Http11NioProtocol         - [log:173] Destroying ProtocolHandler ["http-nio-8838"] 
2020-06-17 11:42:54.556 [INFO ] o.s.b.a.l.ConditionEvaluationReportLoggingListener - [logMessage:136]     Error starting ApplicationContext. To display the conditions report re-run your application with 'debug' enabled. 
2020-06-17 11:42:54.557 [ERROR] o.s.b.diagnostics.LoggingFailureAnalysisReporter   - [report:40]     ***************************  APPLICATION FAILED TO START  ***************************    Description:    Web server failed to start. Port 8838 was already in use.    Action:    Identify and stop the process that's listening on port 8838 or configure this application to listen on another port.   
2020-06-17 11:42:54.579 [INFO ] o.s.scheduling.concurrent.ThreadPoolTaskExecutor   - [shutdown:208] Shutting down ExecutorService 'applicationTaskExecutor' 
2020-06-17 11:42:54.584 [INFO ] com.alibaba.druid.pool.DruidDataSource             - [close:1825] {dataSource-1} closed 
2020-06-17 11:42:55.748 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 11:42:55.748 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 11:42:55.753 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 11:42:55.757 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 11:42:55.757 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 11:42:55.762 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 11:42:55.766 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 11:42:55.766 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 11:42:55.770 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-17 11:42:55.774 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 11:42:55.774 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:42:55.778 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 11:42:55.782 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 11:42:55.782 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:42:55.790 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 11:42:55.794 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 11:42:55.794 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 11:42:55.794 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 11:42:55.795 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 11:42:55.799 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 11:42:55.804 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 11:42:55.804 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 11:42:55.809 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 11:42:55.813 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 11:42:55.813 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:42:55.818 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 11:42:55.822 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 11:42:55.822 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:42:55.836 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 11:42:55.841 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 11:42:55.841 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 11:42:55.841 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 11:42:55.842 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 11:42:55.847 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 11:42:55.852 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 11:42:55.853 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 11:42:55.857 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 11:42:55.863 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 11:42:55.864 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:42:55.869 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 11:42:55.873 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 11:42:55.874 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:42:55.879 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 11:42:55.902 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:现住址长度异常长度>100字符（包含省市区、乡镇街道名称（如有）、村居委会名称（如有）、详细地址） 
2020-06-17 11:42:55.904 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:血型与RH血型逻辑不符同时满足以下条件： 1、个人基本信息表《血型》填写为“不详” 2、个人基本信息表《RH血型》填写为“阴性”或“阳性” 
2020-06-17 11:42:55.908 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-17 11:42:55.909 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 91665e0b2efa4f86aea807ec9f4883c3(String), 2020-06-17 11:42:55.908(Timestamp), 31011310200312009116(String), a58b2894635045b18a63c250d46ce8a8(String), 2020-06-17 11:42:55.908(Timestamp) 
2020-06-17 11:42:55.955 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 2 
2020-06-17 11:42:59.091 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 11:42:59.091 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 11:42:59.096 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 11:42:59.100 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 11:42:59.100 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 11:42:59.104 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 11:42:59.108 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 11:42:59.108 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 11:42:59.114 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-17 11:42:59.119 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 11:42:59.120 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:42:59.124 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 11:42:59.129 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 11:42:59.130 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:42:59.135 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 11:42:59.141 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 11:42:59.142 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 11:42:59.143 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 11:42:59.143 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 11:42:59.148 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 11:42:59.153 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 11:42:59.153 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 11:42:59.158 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 11:42:59.163 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 11:42:59.164 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:42:59.168 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 11:42:59.173 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 11:42:59.174 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:42:59.187 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 11:42:59.191 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 11:42:59.191 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 11:42:59.192 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 11:42:59.192 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 11:42:59.197 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 11:42:59.202 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 11:42:59.202 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 11:42:59.208 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 11:42:59.214 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 11:42:59.215 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:42:59.221 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 11:42:59.226 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 11:42:59.226 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:42:59.232 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 11:42:59.251 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:户籍地址长度异常长度>100字符（包含省市区、乡镇街道名称（如有）、村居委会名称（如有）、详细地址） 
2020-06-17 11:42:59.256 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:血型与RH血型逻辑不符同时满足以下条件： 1、个人基本信息表《血型》填写为“不详” 2、个人基本信息表《RH血型》填写为“阴性”或“阳性” 
2020-06-17 11:42:59.260 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-17 11:42:59.261 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 329b69c7855544e986fc0073b77fe9be(String), 2020-06-17 11:42:59.26(Timestamp), 31011310200312009116(String), a58b2894635045b18a63c250d46ce8a8(String), 2020-06-17 11:42:59.26(Timestamp) 
2020-06-17 11:42:59.296 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 2 
2020-06-17 11:49:12.445 [INFO ] com.benetech.rules.RulesApplication                - [logStarting:55] Starting RulesApplication v1.0-SNAPSHOT on DESKTOP-EOCO1V0 with PID 7968 (D:\51\python\project\instance\zyjk\EHR\controlRuleNew\config\healthRecordRules.jar started by ZY in D:\51\python\project\instance\zyjk\EHR\controlRuleNew) 
2020-06-17 11:49:12.448 [DEBUG] com.benetech.rules.RulesApplication                - [logStarting:56] Running with Spring Boot v2.2.1.RELEASE, Spring v5.2.1.RELEASE 
2020-06-17 11:49:12.448 [INFO ] com.benetech.rules.RulesApplication                - [logStartupProfileInfo:655] The following profiles are active: test 
2020-06-17 11:49:14.043 [INFO ] o.s.boot.web.embedded.tomcat.TomcatWebServer       - [initialize:92] Tomcat initialized with port(s): 8838 (http) 
2020-06-17 11:49:14.056 [INFO ] org.apache.coyote.http11.Http11NioProtocol         - [log:173] Initializing ProtocolHandler ["http-nio-8838"] 
2020-06-17 11:49:14.057 [INFO ] org.apache.catalina.core.StandardService           - [log:173] Starting service [Tomcat] 
2020-06-17 11:49:14.057 [INFO ] org.apache.catalina.core.StandardEngine            - [log:173] Starting Servlet engine: [Apache Tomcat/9.0.27] 
2020-06-17 11:49:14.146 [INFO ] o.a.c.c.C.[.[localhost].[/healthRecordRules]       - [log:173] Initializing Spring embedded WebApplicationContext 
2020-06-17 11:49:14.146 [INFO ] org.springframework.web.context.ContextLoader      - [prepareWebApplicationContext:284] Root WebApplicationContext: initialization completed in 1589 ms 
2020-06-17 11:49:14.238 [DEBUG] org.apache.ibatis.logging.LogFactory               - [setImplementation:135] Logging initialized using 'class org.apache.ibatis.logging.slf4j.Slf4jImpl' adapter. 
2020-06-17 11:49:14.449 [WARN ] org.mybatis.spring.SqlSessionFactoryBean           - [buildSqlSessionFactory:467] Can't find class in '[com.benetech.rules.*.entity]' package. Please check your configuration. 
2020-06-17 11:49:15.181 [INFO ] com.alibaba.druid.pool.DruidDataSource             - [init:930] {dataSource-1} inited 
2020-06-17 11:49:15.424 [DEBUG] c.b.r.m.e.mapper.RuleEngineMapper.getAllRules      - [debug:159] ==>  Preparing: select a.RuleId as ruleId, a.RuleSql as clazz from HrRule a join HrRuleProps b on a.RuleId = b.RuleId where -- RuleId in ('34278f71cf1d42c88158aaf637fa5203', '8d30baa03bfc4233a8f115c57a0ebf08', '63eb82a44bf64c96a0b9023fa2a3c9d9') a.RuleSql != '' and a.RuleSql is not null and b.Enable = 1  
2020-06-17 11:49:15.444 [DEBUG] c.b.r.m.e.mapper.RuleEngineMapper.getAllRules      - [debug:159] ==> Parameters:  
2020-06-17 11:49:15.522 [DEBUG] c.b.r.m.e.mapper.RuleEngineMapper.getAllRules      - [debug:159] <==      Total: 310 
2020-06-17 11:49:15.741 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [init:68] 加载规则：310 条 
2020-06-17 11:49:15.772 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.getAllCode    - [debug:159] ==>  Preparing: SELECT codeSysType AS type, code AS code, [value] AS value FROM tb_code_value WHERE code != '' AND [value] != ''  
2020-06-17 11:49:15.773 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.getAllCode    - [debug:159] ==> Parameters:  
2020-06-17 11:49:15.861 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 11:49:15.861 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 11:49:15.867 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 11:49:15.877 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 11:49:15.877 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 11:49:15.884 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 11:49:15.894 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 11:49:15.894 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 11:49:15.899 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-17 11:49:15.903 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 11:49:15.903 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:49:15.910 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 11:49:15.914 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 11:49:15.914 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:49:15.922 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 11:49:15.929 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 11:49:15.929 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 11:49:15.930 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 11:49:15.930 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 11:49:15.935 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 11:49:15.939 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 11:49:15.939 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 11:49:15.948 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 11:49:15.953 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 11:49:15.953 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:49:15.958 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 11:49:15.966 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 11:49:15.967 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:49:15.983 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 11:49:15.988 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 11:49:15.988 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 11:49:15.988 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 11:49:15.989 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 11:49:15.993 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 11:49:15.997 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 11:49:15.997 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 11:49:16.005 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 11:49:16.010 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 11:49:16.010 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:49:16.015 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 11:49:16.023 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 11:49:16.023 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:49:16.040 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 11:49:16.057 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:户籍地址长度异常长度>100字符（包含省市区、乡镇街道名称（如有）、村居委会名称（如有）、详细地址） 
2020-06-17 11:49:16.059 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:与三级医院住院就诊记录表姓名不一致同时满足以下条件： 1、封面《姓名》不为空值 2、三级医院住院就诊记录表《患者姓名》不为空 3、封面《姓名》与住院就诊记录表中《患者姓名》不相等 
2020-06-17 11:49:16.059 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:与三级医院门诊就诊记录表姓名不一致同时满足以下条件： 1、封面《姓名》不为空值 2、三级医院门诊就诊记录表《患者姓名》不为空 3、封面《姓名》与门诊就诊记录表中《患者姓名》不相等 
2020-06-17 11:49:16.060 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:血型与RH血型逻辑不符同时满足以下条件： 1、个人基本信息表《血型》填写为“不详” 2、个人基本信息表《RH血型》填写为“阴性”或“阳性” 
2020-06-17 11:49:16.061 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:姓名长度异常长度>50字符 
2020-06-17 11:49:16.063 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-17 11:49:16.064 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 329b69c7855544e986fc0073b77fe9be(String), 2020-06-17 11:49:16.063(Timestamp), 31011310200312009116(String), 814b3d0aca3642af82ef320f98d4dfba(String), 2020-06-17 11:49:16.063(Timestamp), 31011310200312009116(String), 847bc4b46918417dab4aa917af3355c3(String), 2020-06-17 11:49:16.063(Timestamp), 31011310200312009116(String), a58b2894635045b18a63c250d46ce8a8(String), 2020-06-17 11:49:16.063(Timestamp), 31011310200312009116(String), b8eeb38e528544b28133b9ee94c5fbc4(String), 2020-06-17 11:49:16.063(Timestamp) 
2020-06-17 11:49:16.122 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 5 
2020-06-17 11:49:16.361 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.getAllCode    - [debug:159] <==      Total: 44881 
2020-06-17 11:49:16.393 [INFO ] c.b.r.m.m.service.impl.EhrModelBuildServiceImpl    - [init:96] 初始化字典类型: 467 种 
2020-06-17 11:49:16.393 [INFO ] c.b.r.m.m.service.impl.EhrModelBuildServiceImpl    - [init:97] 初始化字典: 44881 条 
2020-06-17 11:49:16.394 [ERROR] c.b.r.m.process.service.impl.QcProcessServiceImpl  - [init:44] 初始化线程池 
2020-06-17 11:49:16.538 [INFO ] o.s.scheduling.concurrent.ThreadPoolTaskExecutor   - [initialize:171] Initializing ExecutorService 'applicationTaskExecutor' 
2020-06-17 11:49:16.796 [INFO ] org.apache.coyote.http11.Http11NioProtocol         - [log:173] Starting ProtocolHandler ["http-nio-8838"] 
2020-06-17 11:49:16.823 [INFO ] org.apache.coyote.http11.Http11NioProtocol         - [log:173] Pausing ProtocolHandler ["http-nio-8838"] 
2020-06-17 11:49:16.824 [INFO ] org.apache.catalina.core.StandardService           - [log:173] Stopping service [Tomcat] 
2020-06-17 11:49:16.827 [INFO ] org.apache.coyote.http11.Http11NioProtocol         - [log:173] Stopping ProtocolHandler ["http-nio-8838"] 
2020-06-17 11:49:16.828 [INFO ] org.apache.coyote.http11.Http11NioProtocol         - [log:173] Destroying ProtocolHandler ["http-nio-8838"] 
2020-06-17 11:49:16.830 [INFO ] o.s.b.a.l.ConditionEvaluationReportLoggingListener - [logMessage:136]     Error starting ApplicationContext. To display the conditions report re-run your application with 'debug' enabled. 
2020-06-17 11:49:16.832 [ERROR] o.s.b.diagnostics.LoggingFailureAnalysisReporter   - [report:40]     ***************************  APPLICATION FAILED TO START  ***************************    Description:    Web server failed to start. Port 8838 was already in use.    Action:    Identify and stop the process that's listening on port 8838 or configure this application to listen on another port.   
2020-06-17 11:49:16.834 [INFO ] o.s.scheduling.concurrent.ThreadPoolTaskExecutor   - [shutdown:208] Shutting down ExecutorService 'applicationTaskExecutor' 
2020-06-17 11:49:16.838 [INFO ] com.alibaba.druid.pool.DruidDataSource             - [close:1825] {dataSource-1} closed 
2020-06-17 11:49:18.350 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 11:49:18.351 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 11:49:18.357 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 11:49:18.361 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 11:49:18.361 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 11:49:18.366 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 11:49:18.371 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 11:49:18.371 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 11:49:18.378 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-17 11:49:18.382 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 11:49:18.382 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:49:18.386 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 11:49:18.389 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 11:49:18.390 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:49:18.396 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 11:49:18.400 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 11:49:18.400 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 11:49:18.400 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 11:49:18.401 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 11:49:18.405 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 11:49:18.409 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 11:49:18.409 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 11:49:18.414 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 11:49:18.418 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 11:49:18.418 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:49:18.423 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 11:49:18.430 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 11:49:18.430 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:49:18.445 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 11:49:18.448 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 11:49:18.449 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 11:49:18.449 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 11:49:18.451 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 11:49:18.455 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 11:49:18.461 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 11:49:18.462 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 11:49:18.467 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 11:49:18.475 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 11:49:18.475 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:49:18.485 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 11:49:18.490 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 11:49:18.491 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:49:18.495 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 11:49:18.513 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:户籍地址长度异常长度>100字符（包含省市区、乡镇街道名称（如有）、村居委会名称（如有）、详细地址） 
2020-06-17 11:49:18.517 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:现住址长度异常长度>100字符（包含省市区、乡镇街道名称（如有）、村居委会名称（如有）、详细地址） 
2020-06-17 11:49:18.519 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:血型与RH血型逻辑不符同时满足以下条件： 1、个人基本信息表《血型》填写为“不详” 2、个人基本信息表《RH血型》填写为“阴性”或“阳性” 
2020-06-17 11:49:18.524 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-17 11:49:18.525 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 329b69c7855544e986fc0073b77fe9be(String), 2020-06-17 11:49:18.523(Timestamp), 31011310200312009116(String), 91665e0b2efa4f86aea807ec9f4883c3(String), 2020-06-17 11:49:18.523(Timestamp), 31011310200312009116(String), a58b2894635045b18a63c250d46ce8a8(String), 2020-06-17 11:49:18.523(Timestamp) 
2020-06-17 11:49:18.540 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 3 
2020-06-17 11:49:21.985 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 11:49:21.985 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 11:49:21.990 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 11:49:21.994 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 11:49:21.995 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 11:49:21.999 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 11:49:22.004 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 11:49:22.004 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 11:49:22.009 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-17 11:49:22.013 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 11:49:22.014 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:49:22.018 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 11:49:22.022 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 11:49:22.023 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:49:22.028 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 11:49:22.032 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 11:49:22.032 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 11:49:22.032 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 11:49:22.033 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 11:49:22.037 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 11:49:22.042 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 11:49:22.042 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 11:49:22.047 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 11:49:22.053 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 11:49:22.054 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:49:22.059 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 11:49:22.063 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 11:49:22.064 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:49:22.079 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 11:49:22.084 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 11:49:22.085 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 11:49:22.086 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 11:49:22.087 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 11:49:22.094 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 11:49:22.099 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 11:49:22.100 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 11:49:22.105 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 11:49:22.110 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 11:49:22.111 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:49:22.117 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 11:49:22.123 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 11:49:22.124 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:49:22.130 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 11:49:22.167 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:户籍地址长度异常长度>100字符（包含省市区、乡镇街道名称（如有）、村居委会名称（如有）、详细地址） 
2020-06-17 11:49:22.170 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:血型与RH血型逻辑不符同时满足以下条件： 1、个人基本信息表《血型》填写为“不详” 2、个人基本信息表《RH血型》填写为“阴性”或“阳性” 
2020-06-17 11:49:22.173 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-17 11:49:22.174 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 329b69c7855544e986fc0073b77fe9be(String), 2020-06-17 11:49:22.173(Timestamp), 31011310200312009116(String), a58b2894635045b18a63c250d46ce8a8(String), 2020-06-17 11:49:22.173(Timestamp) 
2020-06-17 11:49:22.206 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 2 
2020-06-17 11:49:25.515 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 11:49:25.515 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 11:49:25.520 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 11:49:25.523 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 11:49:25.524 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 11:49:25.530 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 11:49:25.534 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 11:49:25.534 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 11:49:25.539 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-17 11:49:25.544 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 11:49:25.544 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:49:25.548 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 11:49:25.552 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 11:49:25.553 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:49:25.558 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 11:49:25.563 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 11:49:25.563 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 11:49:25.563 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 11:49:25.564 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 11:49:25.568 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 11:49:25.573 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 11:49:25.573 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 11:49:25.577 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 11:49:25.582 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 11:49:25.582 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:49:25.586 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 11:49:25.590 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 11:49:25.591 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:49:25.604 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 11:49:25.609 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 11:49:25.609 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 11:49:25.609 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 11:49:25.610 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 11:49:25.614 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 11:49:25.619 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 11:49:25.619 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 11:49:25.623 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 11:49:25.627 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 11:49:25.628 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:49:25.633 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 11:49:25.637 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 11:49:25.637 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:49:25.642 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 11:49:25.656 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:现住址长度异常长度>100字符（包含省市区、乡镇街道名称（如有）、村居委会名称（如有）、详细地址） 
2020-06-17 11:49:25.657 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:现住址村（居）委会名称长度异常长度>100字符 
2020-06-17 11:49:25.657 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:血型与RH血型逻辑不符同时满足以下条件： 1、个人基本信息表《血型》填写为“不详” 2、个人基本信息表《RH血型》填写为“阴性”或“阳性” 
2020-06-17 11:49:25.660 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-17 11:49:25.660 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 91665e0b2efa4f86aea807ec9f4883c3(String), 2020-06-17 11:49:25.659(Timestamp), 31011310200312009116(String), 9df07515be3d4c2887e947c6ce5adace(String), 2020-06-17 11:49:25.659(Timestamp), 31011310200312009116(String), a58b2894635045b18a63c250d46ce8a8(String), 2020-06-17 11:49:25.659(Timestamp) 
2020-06-17 11:49:25.681 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 3 
2020-06-17 11:49:28.962 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 11:49:28.962 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 11:49:28.974 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 11:49:28.978 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 11:49:28.978 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 11:49:28.984 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 11:49:28.988 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 11:49:28.988 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 11:49:28.993 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-17 11:49:28.999 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 11:49:28.999 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:49:29.004 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 11:49:29.009 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 11:49:29.010 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:49:29.016 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 11:49:29.025 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 11:49:29.026 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 11:49:29.027 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 11:49:29.028 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 11:49:29.032 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 11:49:29.038 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 11:49:29.040 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 11:49:29.046 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 11:49:29.052 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 11:49:29.053 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:49:29.058 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 11:49:29.062 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 11:49:29.063 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:49:29.078 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 11:49:29.083 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 11:49:29.084 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 11:49:29.085 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 11:49:29.085 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 11:49:29.090 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 11:49:29.095 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 11:49:29.096 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 11:49:29.101 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 11:49:29.107 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 11:49:29.108 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:49:29.113 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 11:49:29.118 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 11:49:29.119 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:49:29.124 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 11:49:29.163 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:建档单位长度异常长度>100字符 
2020-06-17 11:49:29.173 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:血型与RH血型逻辑不符同时满足以下条件： 1、个人基本信息表《血型》填写为“不详” 2、个人基本信息表《RH血型》填写为“阴性”或“阳性” 
2020-06-17 11:49:29.176 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-17 11:49:29.177 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 403a97f9ec40406b9723b3c6845a6cee(String), 2020-06-17 11:49:29.176(Timestamp), 31011310200312009116(String), a58b2894635045b18a63c250d46ce8a8(String), 2020-06-17 11:49:29.176(Timestamp) 
2020-06-17 11:49:29.197 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 2 
2020-06-17 11:51:10.559 [INFO ] com.benetech.rules.RulesApplication                - [logStarting:55] Starting RulesApplication v1.0-SNAPSHOT on DESKTOP-EOCO1V0 with PID 3968 (D:\51\python\project\instance\zyjk\EHR\controlRuleNew\config\healthRecordRules.jar started by ZY in D:\51\python\project\instance\zyjk\EHR\controlRuleNew) 
2020-06-17 11:51:10.563 [DEBUG] com.benetech.rules.RulesApplication                - [logStarting:56] Running with Spring Boot v2.2.1.RELEASE, Spring v5.2.1.RELEASE 
2020-06-17 11:51:10.563 [INFO ] com.benetech.rules.RulesApplication                - [logStartupProfileInfo:655] The following profiles are active: test 
2020-06-17 11:51:12.116 [INFO ] o.s.boot.web.embedded.tomcat.TomcatWebServer       - [initialize:92] Tomcat initialized with port(s): 8838 (http) 
2020-06-17 11:51:12.128 [INFO ] org.apache.coyote.http11.Http11NioProtocol         - [log:173] Initializing ProtocolHandler ["http-nio-8838"] 
2020-06-17 11:51:12.129 [INFO ] org.apache.catalina.core.StandardService           - [log:173] Starting service [Tomcat] 
2020-06-17 11:51:12.129 [INFO ] org.apache.catalina.core.StandardEngine            - [log:173] Starting Servlet engine: [Apache Tomcat/9.0.27] 
2020-06-17 11:51:12.197 [INFO ] o.a.c.c.C.[.[localhost].[/healthRecordRules]       - [log:173] Initializing Spring embedded WebApplicationContext 
2020-06-17 11:51:12.198 [INFO ] org.springframework.web.context.ContextLoader      - [prepareWebApplicationContext:284] Root WebApplicationContext: initialization completed in 1548 ms 
2020-06-17 11:51:12.274 [DEBUG] org.apache.ibatis.logging.LogFactory               - [setImplementation:135] Logging initialized using 'class org.apache.ibatis.logging.slf4j.Slf4jImpl' adapter. 
2020-06-17 11:51:12.523 [WARN ] org.mybatis.spring.SqlSessionFactoryBean           - [buildSqlSessionFactory:467] Can't find class in '[com.benetech.rules.*.entity]' package. Please check your configuration. 
2020-06-17 11:51:13.209 [INFO ] com.alibaba.druid.pool.DruidDataSource             - [init:930] {dataSource-1} inited 
2020-06-17 11:51:13.427 [DEBUG] c.b.r.m.e.mapper.RuleEngineMapper.getAllRules      - [debug:159] ==>  Preparing: select a.RuleId as ruleId, a.RuleSql as clazz from HrRule a join HrRuleProps b on a.RuleId = b.RuleId where -- RuleId in ('34278f71cf1d42c88158aaf637fa5203', '8d30baa03bfc4233a8f115c57a0ebf08', '63eb82a44bf64c96a0b9023fa2a3c9d9') a.RuleSql != '' and a.RuleSql is not null and b.Enable = 1  
2020-06-17 11:51:13.445 [DEBUG] c.b.r.m.e.mapper.RuleEngineMapper.getAllRules      - [debug:159] ==> Parameters:  
2020-06-17 11:51:13.530 [DEBUG] c.b.r.m.e.mapper.RuleEngineMapper.getAllRules      - [debug:159] <==      Total: 310 
2020-06-17 11:51:13.727 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 11:51:13.728 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 11:51:13.733 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 11:51:13.736 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 11:51:13.737 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 11:51:13.741 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 11:51:13.746 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 11:51:13.746 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 11:51:13.751 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-17 11:51:13.756 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 11:51:13.756 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:51:13.761 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 11:51:13.765 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 11:51:13.765 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:51:13.771 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 11:51:13.775 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 11:51:13.775 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 11:51:13.775 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 11:51:13.776 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 11:51:13.787 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 11:51:13.791 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 11:51:13.791 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 11:51:13.794 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [init:68] 加载规则：310 条 
2020-06-17 11:51:13.796 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 11:51:13.800 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 11:51:13.800 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:51:13.805 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 11:51:13.809 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 11:51:13.809 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:51:13.812 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.getAllCode    - [debug:159] ==>  Preparing: SELECT codeSysType AS type, code AS code, [value] AS value FROM tb_code_value WHERE code != '' AND [value] != ''  
2020-06-17 11:51:13.813 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.getAllCode    - [debug:159] ==> Parameters:  
2020-06-17 11:51:13.829 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 11:51:13.839 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 11:51:13.839 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 11:51:13.839 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 11:51:13.840 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 11:51:13.846 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 11:51:13.851 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 11:51:13.851 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 11:51:13.858 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 11:51:13.863 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 11:51:13.863 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:51:13.868 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 11:51:13.872 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 11:51:13.872 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:51:13.878 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 11:51:13.892 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:建档单位长度异常长度>100字符 
2020-06-17 11:51:13.894 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:与三级医院住院就诊记录表姓名不一致同时满足以下条件： 1、封面《姓名》不为空值 2、三级医院住院就诊记录表《患者姓名》不为空 3、封面《姓名》与住院就诊记录表中《患者姓名》不相等 
2020-06-17 11:51:13.894 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:与三级医院门诊就诊记录表姓名不一致同时满足以下条件： 1、封面《姓名》不为空值 2、三级医院门诊就诊记录表《患者姓名》不为空 3、封面《姓名》与门诊就诊记录表中《患者姓名》不相等 
2020-06-17 11:51:13.895 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:血型与RH血型逻辑不符同时满足以下条件： 1、个人基本信息表《血型》填写为“不详” 2、个人基本信息表《RH血型》填写为“阴性”或“阳性” 
2020-06-17 11:51:13.895 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:姓名长度异常长度>50字符 
2020-06-17 11:51:13.897 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-17 11:51:13.898 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 403a97f9ec40406b9723b3c6845a6cee(String), 2020-06-17 11:51:13.897(Timestamp), 31011310200312009116(String), 814b3d0aca3642af82ef320f98d4dfba(String), 2020-06-17 11:51:13.897(Timestamp), 31011310200312009116(String), 847bc4b46918417dab4aa917af3355c3(String), 2020-06-17 11:51:13.897(Timestamp), 31011310200312009116(String), a58b2894635045b18a63c250d46ce8a8(String), 2020-06-17 11:51:13.897(Timestamp), 31011310200312009116(String), b8eeb38e528544b28133b9ee94c5fbc4(String), 2020-06-17 11:51:13.897(Timestamp) 
2020-06-17 11:51:13.939 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 5 
2020-06-17 11:51:14.212 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.getAllCode    - [debug:159] <==      Total: 44881 
2020-06-17 11:51:14.237 [INFO ] c.b.r.m.m.service.impl.EhrModelBuildServiceImpl    - [init:96] 初始化字典类型: 467 种 
2020-06-17 11:51:14.238 [INFO ] c.b.r.m.m.service.impl.EhrModelBuildServiceImpl    - [init:97] 初始化字典: 44881 条 
2020-06-17 11:51:14.238 [ERROR] c.b.r.m.process.service.impl.QcProcessServiceImpl  - [init:44] 初始化线程池 
2020-06-17 11:51:14.366 [INFO ] o.s.scheduling.concurrent.ThreadPoolTaskExecutor   - [initialize:171] Initializing ExecutorService 'applicationTaskExecutor' 
2020-06-17 11:51:14.605 [INFO ] org.apache.coyote.http11.Http11NioProtocol         - [log:173] Starting ProtocolHandler ["http-nio-8838"] 
2020-06-17 11:51:14.617 [INFO ] org.apache.coyote.http11.Http11NioProtocol         - [log:173] Pausing ProtocolHandler ["http-nio-8838"] 
2020-06-17 11:51:14.617 [INFO ] org.apache.catalina.core.StandardService           - [log:173] Stopping service [Tomcat] 
2020-06-17 11:51:14.621 [INFO ] org.apache.coyote.http11.Http11NioProtocol         - [log:173] Stopping ProtocolHandler ["http-nio-8838"] 
2020-06-17 11:51:14.621 [INFO ] org.apache.coyote.http11.Http11NioProtocol         - [log:173] Destroying ProtocolHandler ["http-nio-8838"] 
2020-06-17 11:51:14.623 [INFO ] o.s.b.a.l.ConditionEvaluationReportLoggingListener - [logMessage:136]     Error starting ApplicationContext. To display the conditions report re-run your application with 'debug' enabled. 
2020-06-17 11:51:14.627 [ERROR] o.s.b.diagnostics.LoggingFailureAnalysisReporter   - [report:40]     ***************************  APPLICATION FAILED TO START  ***************************    Description:    Web server failed to start. Port 8838 was already in use.    Action:    Identify and stop the process that's listening on port 8838 or configure this application to listen on another port.   
2020-06-17 11:51:14.629 [INFO ] o.s.scheduling.concurrent.ThreadPoolTaskExecutor   - [shutdown:208] Shutting down ExecutorService 'applicationTaskExecutor' 
2020-06-17 11:51:14.633 [INFO ] com.alibaba.druid.pool.DruidDataSource             - [close:1825] {dataSource-1} closed 
2020-06-17 11:51:15.868 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 11:51:15.868 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 11:51:15.874 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 11:51:15.879 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 11:51:15.879 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 11:51:15.896 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 11:51:15.901 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 11:51:15.901 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 11:51:15.905 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-17 11:51:15.910 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 11:51:15.911 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:51:15.915 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 11:51:15.919 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 11:51:15.920 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:51:15.924 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 11:51:15.928 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 11:51:15.929 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 11:51:15.929 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 11:51:15.930 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 11:51:15.937 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 11:51:15.942 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 11:51:15.942 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 11:51:15.948 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 11:51:15.953 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 11:51:15.953 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:51:15.958 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 11:51:15.963 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 11:51:15.964 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:51:15.978 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 11:51:15.983 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 11:51:15.984 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 11:51:15.984 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 11:51:15.985 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 11:51:15.989 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 11:51:15.994 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 11:51:15.995 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 11:51:16.000 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 11:51:16.004 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 11:51:16.005 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:51:16.010 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 11:51:16.015 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 11:51:16.015 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:51:16.020 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 11:51:16.040 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:建档单位长度异常长度>100字符 
2020-06-17 11:51:16.045 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:现住址长度异常长度>100字符（包含省市区、乡镇街道名称（如有）、村居委会名称（如有）、详细地址） 
2020-06-17 11:51:16.046 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:血型与RH血型逻辑不符同时满足以下条件： 1、个人基本信息表《血型》填写为“不详” 2、个人基本信息表《RH血型》填写为“阴性”或“阳性” 
2020-06-17 11:51:16.049 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-17 11:51:16.049 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 403a97f9ec40406b9723b3c6845a6cee(String), 2020-06-17 11:51:16.048(Timestamp), 31011310200312009116(String), 91665e0b2efa4f86aea807ec9f4883c3(String), 2020-06-17 11:51:16.048(Timestamp), 31011310200312009116(String), a58b2894635045b18a63c250d46ce8a8(String), 2020-06-17 11:51:16.048(Timestamp) 
2020-06-17 11:51:16.064 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 3 
2020-06-17 11:51:19.302 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 11:51:19.303 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 11:51:19.307 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 11:51:19.312 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 11:51:19.312 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 11:51:19.317 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 11:51:19.321 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 11:51:19.321 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 11:51:19.326 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-17 11:51:19.330 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 11:51:19.331 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:51:19.334 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 11:51:19.339 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 11:51:19.339 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:51:19.344 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 11:51:19.348 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 11:51:19.349 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 11:51:19.350 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 11:51:19.351 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 11:51:19.356 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 11:51:19.361 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 11:51:19.362 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 11:51:19.369 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 11:51:19.374 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 11:51:19.375 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:51:19.381 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 11:51:19.386 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 11:51:19.387 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:51:19.402 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 11:51:19.408 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 11:51:19.408 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 11:51:19.409 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 11:51:19.409 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 11:51:19.414 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 11:51:19.419 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 11:51:19.419 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 11:51:19.425 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 11:51:19.429 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 11:51:19.429 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:51:19.435 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 11:51:19.439 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 11:51:19.439 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 11:51:19.445 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 11:51:19.458 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:户籍地址长度异常长度>100字符（包含省市区、乡镇街道名称（如有）、村居委会名称（如有）、详细地址） 
2020-06-17 11:51:19.459 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:建档单位长度异常长度>100字符 
2020-06-17 11:51:19.461 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:血型与RH血型逻辑不符同时满足以下条件： 1、个人基本信息表《血型》填写为“不详” 2、个人基本信息表《RH血型》填写为“阴性”或“阳性” 
2020-06-17 11:51:19.464 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-17 11:51:19.464 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 329b69c7855544e986fc0073b77fe9be(String), 2020-06-17 11:51:19.463(Timestamp), 31011310200312009116(String), 403a97f9ec40406b9723b3c6845a6cee(String), 2020-06-17 11:51:19.463(Timestamp), 31011310200312009116(String), a58b2894635045b18a63c250d46ce8a8(String), 2020-06-17 11:51:19.463(Timestamp) 
2020-06-17 11:51:19.485 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 3 
2020-06-17 12:27:14.378 [INFO ] com.benetech.rules.RulesApplication                - [logStarting:55] Starting RulesApplication v1.0-SNAPSHOT on DESKTOP-EOCO1V0 with PID 10384 (D:\51\python\project\instance\zyjk\EHR\controlRuleNew\config\healthRecordRules.jar started by ZY in D:\51\python\project\instance\zyjk\EHR\controlRuleNew) 
2020-06-17 12:27:14.382 [DEBUG] com.benetech.rules.RulesApplication                - [logStarting:56] Running with Spring Boot v2.2.1.RELEASE, Spring v5.2.1.RELEASE 
2020-06-17 12:27:14.382 [INFO ] com.benetech.rules.RulesApplication                - [logStartupProfileInfo:655] The following profiles are active: test 
2020-06-17 12:27:16.180 [INFO ] o.s.boot.web.embedded.tomcat.TomcatWebServer       - [initialize:92] Tomcat initialized with port(s): 8838 (http) 
2020-06-17 12:27:16.193 [INFO ] org.apache.coyote.http11.Http11NioProtocol         - [log:173] Initializing ProtocolHandler ["http-nio-8838"] 
2020-06-17 12:27:16.194 [INFO ] org.apache.catalina.core.StandardService           - [log:173] Starting service [Tomcat] 
2020-06-17 12:27:16.194 [INFO ] org.apache.catalina.core.StandardEngine            - [log:173] Starting Servlet engine: [Apache Tomcat/9.0.27] 
2020-06-17 12:27:16.269 [INFO ] o.a.c.c.C.[.[localhost].[/healthRecordRules]       - [log:173] Initializing Spring embedded WebApplicationContext 
2020-06-17 12:27:16.269 [INFO ] org.springframework.web.context.ContextLoader      - [prepareWebApplicationContext:284] Root WebApplicationContext: initialization completed in 1767 ms 
2020-06-17 12:27:16.363 [DEBUG] org.apache.ibatis.logging.LogFactory               - [setImplementation:135] Logging initialized using 'class org.apache.ibatis.logging.slf4j.Slf4jImpl' adapter. 
2020-06-17 12:27:16.641 [WARN ] org.mybatis.spring.SqlSessionFactoryBean           - [buildSqlSessionFactory:467] Can't find class in '[com.benetech.rules.*.entity]' package. Please check your configuration. 
2020-06-17 12:27:17.275 [INFO ] com.alibaba.druid.pool.DruidDataSource             - [init:930] {dataSource-1} inited 
2020-06-17 12:27:17.446 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 12:27:17.447 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 12:27:17.452 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 12:27:17.456 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 12:27:17.456 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 12:27:17.462 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 12:27:17.467 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 12:27:17.468 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 12:27:17.473 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-17 12:27:17.478 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 12:27:17.478 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:27:17.483 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 12:27:17.488 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 12:27:17.488 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:27:17.496 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 12:27:17.501 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 12:27:17.501 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 12:27:17.501 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 12:27:17.502 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:27:17.507 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 12:27:17.512 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 12:27:17.512 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:27:17.517 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 12:27:17.521 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 12:27:17.521 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:27:17.526 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 12:27:17.531 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 12:27:17.531 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:27:17.547 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 12:27:17.551 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 12:27:17.551 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 12:27:17.551 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 12:27:17.551 [DEBUG] c.b.r.m.e.mapper.RuleEngineMapper.getAllRules      - [debug:159] ==>  Preparing: select a.RuleId as ruleId, a.RuleSql as clazz from HrRule a join HrRuleProps b on a.RuleId = b.RuleId where -- RuleId in ('34278f71cf1d42c88158aaf637fa5203', '8d30baa03bfc4233a8f115c57a0ebf08', '63eb82a44bf64c96a0b9023fa2a3c9d9') a.RuleSql != '' and a.RuleSql is not null and b.Enable = 1  
2020-06-17 12:27:17.552 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:27:17.557 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 12:27:17.561 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 12:27:17.561 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:27:17.566 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 12:27:17.570 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 12:27:17.570 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:27:17.573 [DEBUG] c.b.r.m.e.mapper.RuleEngineMapper.getAllRules      - [debug:159] ==> Parameters:  
2020-06-17 12:27:17.575 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 12:27:17.579 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 12:27:17.579 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:27:17.584 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 12:27:17.599 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:建档单位长度异常长度>100字符 
2020-06-17 12:27:17.604 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:与三级医院住院就诊记录表姓名不一致同时满足以下条件： 1、封面《姓名》不为空值 2、三级医院住院就诊记录表《患者姓名》不为空 3、封面《姓名》与住院就诊记录表中《患者姓名》不相等 
2020-06-17 12:27:17.604 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:与三级医院门诊就诊记录表姓名不一致同时满足以下条件： 1、封面《姓名》不为空值 2、三级医院门诊就诊记录表《患者姓名》不为空 3、封面《姓名》与门诊就诊记录表中《患者姓名》不相等 
2020-06-17 12:27:17.605 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:血型与RH血型逻辑不符同时满足以下条件： 1、个人基本信息表《血型》填写为“不详” 2、个人基本信息表《RH血型》填写为“阴性”或“阳性” 
2020-06-17 12:27:17.606 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:姓名长度异常长度>50字符 
2020-06-17 12:27:17.610 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-17 12:27:17.611 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 403a97f9ec40406b9723b3c6845a6cee(String), 2020-06-17 12:27:17.609(Timestamp), 31011310200312009116(String), 814b3d0aca3642af82ef320f98d4dfba(String), 2020-06-17 12:27:17.609(Timestamp), 31011310200312009116(String), 847bc4b46918417dab4aa917af3355c3(String), 2020-06-17 12:27:17.609(Timestamp), 31011310200312009116(String), a58b2894635045b18a63c250d46ce8a8(String), 2020-06-17 12:27:17.609(Timestamp), 31011310200312009116(String), b8eeb38e528544b28133b9ee94c5fbc4(String), 2020-06-17 12:27:17.609(Timestamp) 
2020-06-17 12:27:17.642 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 5 
2020-06-17 12:27:17.662 [DEBUG] c.b.r.m.e.mapper.RuleEngineMapper.getAllRules      - [debug:159] <==      Total: 310 
2020-06-17 12:27:17.970 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [init:68] 加载规则：310 条 
2020-06-17 12:27:17.992 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.getAllCode    - [debug:159] ==>  Preparing: SELECT codeSysType AS type, code AS code, [value] AS value FROM tb_code_value WHERE code != '' AND [value] != ''  
2020-06-17 12:27:17.993 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.getAllCode    - [debug:159] ==> Parameters:  
2020-06-17 12:27:18.662 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.getAllCode    - [debug:159] <==      Total: 44881 
2020-06-17 12:27:18.682 [INFO ] c.b.r.m.m.service.impl.EhrModelBuildServiceImpl    - [init:96] 初始化字典类型: 467 种 
2020-06-17 12:27:18.682 [INFO ] c.b.r.m.m.service.impl.EhrModelBuildServiceImpl    - [init:97] 初始化字典: 44881 条 
2020-06-17 12:27:18.683 [ERROR] c.b.r.m.process.service.impl.QcProcessServiceImpl  - [init:44] 初始化线程池 
2020-06-17 12:27:18.812 [INFO ] o.s.scheduling.concurrent.ThreadPoolTaskExecutor   - [initialize:171] Initializing ExecutorService 'applicationTaskExecutor' 
2020-06-17 12:27:19.073 [INFO ] org.apache.coyote.http11.Http11NioProtocol         - [log:173] Starting ProtocolHandler ["http-nio-8838"] 
2020-06-17 12:27:19.086 [INFO ] org.apache.coyote.http11.Http11NioProtocol         - [log:173] Pausing ProtocolHandler ["http-nio-8838"] 
2020-06-17 12:27:19.086 [INFO ] org.apache.catalina.core.StandardService           - [log:173] Stopping service [Tomcat] 
2020-06-17 12:27:19.092 [INFO ] org.apache.coyote.http11.Http11NioProtocol         - [log:173] Stopping ProtocolHandler ["http-nio-8838"] 
2020-06-17 12:27:19.093 [INFO ] org.apache.coyote.http11.Http11NioProtocol         - [log:173] Destroying ProtocolHandler ["http-nio-8838"] 
2020-06-17 12:27:19.097 [INFO ] o.s.b.a.l.ConditionEvaluationReportLoggingListener - [logMessage:136]     Error starting ApplicationContext. To display the conditions report re-run your application with 'debug' enabled. 
2020-06-17 12:27:19.099 [ERROR] o.s.b.diagnostics.LoggingFailureAnalysisReporter   - [report:40]     ***************************  APPLICATION FAILED TO START  ***************************    Description:    Web server failed to start. Port 8838 was already in use.    Action:    Identify and stop the process that's listening on port 8838 or configure this application to listen on another port.   
2020-06-17 12:27:19.101 [INFO ] o.s.scheduling.concurrent.ThreadPoolTaskExecutor   - [shutdown:208] Shutting down ExecutorService 'applicationTaskExecutor' 
2020-06-17 12:27:19.104 [INFO ] com.alibaba.druid.pool.DruidDataSource             - [close:1825] {dataSource-1} closed 
2020-06-17 12:27:21.192 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 12:27:21.192 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 12:27:21.197 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 12:27:21.202 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 12:27:21.202 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 12:27:21.207 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 12:27:21.211 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 12:27:21.211 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 12:27:21.216 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-17 12:27:21.220 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 12:27:21.220 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:27:21.225 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 12:27:21.230 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 12:27:21.230 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:27:21.235 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 12:27:21.239 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 12:27:21.240 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 12:27:21.241 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 12:27:21.241 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:27:21.246 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 12:27:21.251 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 12:27:21.252 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:27:21.257 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 12:27:21.262 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 12:27:21.263 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:27:21.268 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 12:27:21.274 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 12:27:21.275 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:27:21.290 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 12:27:21.296 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 12:27:21.297 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 12:27:21.298 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 12:27:21.299 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:27:21.303 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 12:27:21.309 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 12:27:21.310 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:27:21.318 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 12:27:21.323 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 12:27:21.324 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:27:21.332 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 12:27:21.343 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 12:27:21.344 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:27:21.350 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 12:27:21.388 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:建档单位长度异常长度>100字符 
2020-06-17 12:27:21.392 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:现住址长度异常长度>100字符（包含省市区、乡镇街道名称（如有）、村居委会名称（如有）、详细地址） 
2020-06-17 12:27:21.393 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:血型与RH血型逻辑不符同时满足以下条件： 1、个人基本信息表《血型》填写为“不详” 2、个人基本信息表《RH血型》填写为“阴性”或“阳性” 
2020-06-17 12:27:21.397 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-17 12:27:21.398 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 403a97f9ec40406b9723b3c6845a6cee(String), 2020-06-17 12:27:21.397(Timestamp), 31011310200312009116(String), 91665e0b2efa4f86aea807ec9f4883c3(String), 2020-06-17 12:27:21.397(Timestamp), 31011310200312009116(String), a58b2894635045b18a63c250d46ce8a8(String), 2020-06-17 12:27:21.397(Timestamp) 
2020-06-17 12:27:21.412 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 3 
2020-06-17 12:27:24.649 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 12:27:24.649 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 12:27:24.662 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 12:27:24.665 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 12:27:24.666 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 12:27:24.672 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 12:27:24.676 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 12:27:24.676 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 12:27:24.681 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-17 12:27:24.686 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 12:27:24.687 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:27:24.691 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 12:27:24.697 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 12:27:24.698 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:27:24.704 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 12:27:24.708 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 12:27:24.709 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 12:27:24.710 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 12:27:24.710 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:27:24.715 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 12:27:24.720 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 12:27:24.721 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:27:24.726 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 12:27:24.731 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 12:27:24.732 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:27:24.737 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 12:27:24.741 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 12:27:24.742 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:27:24.756 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 12:27:24.761 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 12:27:24.762 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 12:27:24.762 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 12:27:24.763 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:27:24.768 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 12:27:24.773 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 12:27:24.774 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:27:24.778 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 12:27:24.783 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 12:27:24.784 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:27:24.789 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 12:27:24.794 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 12:27:24.795 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:27:24.800 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 12:27:24.838 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:户籍地址长度异常长度>100字符（包含省市区、乡镇街道名称（如有）、村居委会名称（如有）、详细地址） 
2020-06-17 12:27:24.838 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:建档单位长度异常长度>100字符 
2020-06-17 12:27:24.841 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:血型与RH血型逻辑不符同时满足以下条件： 1、个人基本信息表《血型》填写为“不详” 2、个人基本信息表《RH血型》填写为“阴性”或“阳性” 
2020-06-17 12:27:24.844 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-17 12:27:24.845 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 329b69c7855544e986fc0073b77fe9be(String), 2020-06-17 12:27:24.844(Timestamp), 31011310200312009116(String), 403a97f9ec40406b9723b3c6845a6cee(String), 2020-06-17 12:27:24.844(Timestamp), 31011310200312009116(String), a58b2894635045b18a63c250d46ce8a8(String), 2020-06-17 12:27:24.844(Timestamp) 
2020-06-17 12:27:24.861 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 3 
2020-06-17 12:28:21.144 [INFO ] com.benetech.rules.RulesApplication                - [logStarting:55] Starting RulesApplication v1.0-SNAPSHOT on DESKTOP-EOCO1V0 with PID 10792 (D:\51\python\project\instance\zyjk\EHR\controlRuleNew\config\healthRecordRules.jar started by ZY in D:\51\python\project\instance\zyjk\EHR\controlRuleNew) 
2020-06-17 12:28:21.147 [DEBUG] com.benetech.rules.RulesApplication                - [logStarting:56] Running with Spring Boot v2.2.1.RELEASE, Spring v5.2.1.RELEASE 
2020-06-17 12:28:21.147 [INFO ] com.benetech.rules.RulesApplication                - [logStartupProfileInfo:655] The following profiles are active: test 
2020-06-17 12:28:22.708 [INFO ] o.s.boot.web.embedded.tomcat.TomcatWebServer       - [initialize:92] Tomcat initialized with port(s): 8838 (http) 
2020-06-17 12:28:22.719 [INFO ] org.apache.coyote.http11.Http11NioProtocol         - [log:173] Initializing ProtocolHandler ["http-nio-8838"] 
2020-06-17 12:28:22.720 [INFO ] org.apache.catalina.core.StandardService           - [log:173] Starting service [Tomcat] 
2020-06-17 12:28:22.720 [INFO ] org.apache.catalina.core.StandardEngine            - [log:173] Starting Servlet engine: [Apache Tomcat/9.0.27] 
2020-06-17 12:28:22.791 [INFO ] o.a.c.c.C.[.[localhost].[/healthRecordRules]       - [log:173] Initializing Spring embedded WebApplicationContext 
2020-06-17 12:28:22.791 [INFO ] org.springframework.web.context.ContextLoader      - [prepareWebApplicationContext:284] Root WebApplicationContext: initialization completed in 1551 ms 
2020-06-17 12:28:22.876 [DEBUG] org.apache.ibatis.logging.LogFactory               - [setImplementation:135] Logging initialized using 'class org.apache.ibatis.logging.slf4j.Slf4jImpl' adapter. 
2020-06-17 12:28:23.140 [WARN ] org.mybatis.spring.SqlSessionFactoryBean           - [buildSqlSessionFactory:467] Can't find class in '[com.benetech.rules.*.entity]' package. Please check your configuration. 
2020-06-17 12:28:23.809 [INFO ] com.alibaba.druid.pool.DruidDataSource             - [init:930] {dataSource-1} inited 
2020-06-17 12:28:24.031 [DEBUG] c.b.r.m.e.mapper.RuleEngineMapper.getAllRules      - [debug:159] ==>  Preparing: select a.RuleId as ruleId, a.RuleSql as clazz from HrRule a join HrRuleProps b on a.RuleId = b.RuleId where -- RuleId in ('34278f71cf1d42c88158aaf637fa5203', '8d30baa03bfc4233a8f115c57a0ebf08', '63eb82a44bf64c96a0b9023fa2a3c9d9') a.RuleSql != '' and a.RuleSql is not null and b.Enable = 1  
2020-06-17 12:28:24.057 [DEBUG] c.b.r.m.e.mapper.RuleEngineMapper.getAllRules      - [debug:159] ==> Parameters:  
2020-06-17 12:28:24.134 [DEBUG] c.b.r.m.e.mapper.RuleEngineMapper.getAllRules      - [debug:159] <==      Total: 310 
2020-06-17 12:28:24.316 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 12:28:24.316 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 12:28:24.329 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 12:28:24.333 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 12:28:24.333 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 12:28:24.338 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 12:28:24.342 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 12:28:24.342 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 12:28:24.347 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-17 12:28:24.351 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 12:28:24.351 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:28:24.356 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 12:28:24.360 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 12:28:24.360 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:28:24.363 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [init:68] 加载规则：310 条 
2020-06-17 12:28:24.368 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 12:28:24.373 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 12:28:24.373 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 12:28:24.373 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 12:28:24.374 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:28:24.378 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 12:28:24.380 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.getAllCode    - [debug:159] ==>  Preparing: SELECT codeSysType AS type, code AS code, [value] AS value FROM tb_code_value WHERE code != '' AND [value] != ''  
2020-06-17 12:28:24.382 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 12:28:24.382 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:28:24.381 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.getAllCode    - [debug:159] ==> Parameters:  
2020-06-17 12:28:24.386 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 12:28:24.396 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 12:28:24.396 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:28:24.407 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 12:28:24.415 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 12:28:24.415 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:28:24.429 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 12:28:24.435 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 12:28:24.435 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 12:28:24.435 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 12:28:24.436 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:28:24.443 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 12:28:24.447 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 12:28:24.447 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:28:24.451 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 12:28:24.456 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 12:28:24.456 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:28:24.462 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 12:28:24.465 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 12:28:24.466 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:28:24.471 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 12:28:24.484 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:户籍地址长度异常长度>100字符（包含省市区、乡镇街道名称（如有）、村居委会名称（如有）、详细地址） 
2020-06-17 12:28:24.485 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:建档单位长度异常长度>100字符 
2020-06-17 12:28:24.486 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:与三级医院住院就诊记录表姓名不一致同时满足以下条件： 1、封面《姓名》不为空值 2、三级医院住院就诊记录表《患者姓名》不为空 3、封面《姓名》与住院就诊记录表中《患者姓名》不相等 
2020-06-17 12:28:24.487 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:与三级医院门诊就诊记录表姓名不一致同时满足以下条件： 1、封面《姓名》不为空值 2、三级医院门诊就诊记录表《患者姓名》不为空 3、封面《姓名》与门诊就诊记录表中《患者姓名》不相等 
2020-06-17 12:28:24.488 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:血型与RH血型逻辑不符同时满足以下条件： 1、个人基本信息表《血型》填写为“不详” 2、个人基本信息表《RH血型》填写为“阴性”或“阳性” 
2020-06-17 12:28:24.489 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:姓名长度异常长度>50字符 
2020-06-17 12:28:24.491 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-17 12:28:24.491 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 329b69c7855544e986fc0073b77fe9be(String), 2020-06-17 12:28:24.49(Timestamp), 31011310200312009116(String), 403a97f9ec40406b9723b3c6845a6cee(String), 2020-06-17 12:28:24.49(Timestamp), 31011310200312009116(String), 814b3d0aca3642af82ef320f98d4dfba(String), 2020-06-17 12:28:24.49(Timestamp), 31011310200312009116(String), 847bc4b46918417dab4aa917af3355c3(String), 2020-06-17 12:28:24.49(Timestamp), 31011310200312009116(String), a58b2894635045b18a63c250d46ce8a8(String), 2020-06-17 12:28:24.49(Timestamp), 31011310200312009116(String), b8eeb38e528544b28133b9ee94c5fbc4(String), 2020-06-17 12:28:24.49(Timestamp) 
2020-06-17 12:28:24.506 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 6 
2020-06-17 12:28:24.891 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.getAllCode    - [debug:159] <==      Total: 44881 
2020-06-17 12:28:24.919 [INFO ] c.b.r.m.m.service.impl.EhrModelBuildServiceImpl    - [init:96] 初始化字典类型: 467 种 
2020-06-17 12:28:24.920 [INFO ] c.b.r.m.m.service.impl.EhrModelBuildServiceImpl    - [init:97] 初始化字典: 44881 条 
2020-06-17 12:28:24.920 [ERROR] c.b.r.m.process.service.impl.QcProcessServiceImpl  - [init:44] 初始化线程池 
2020-06-17 12:28:25.061 [INFO ] o.s.scheduling.concurrent.ThreadPoolTaskExecutor   - [initialize:171] Initializing ExecutorService 'applicationTaskExecutor' 
2020-06-17 12:28:25.311 [INFO ] org.apache.coyote.http11.Http11NioProtocol         - [log:173] Starting ProtocolHandler ["http-nio-8838"] 
2020-06-17 12:28:25.323 [INFO ] org.apache.coyote.http11.Http11NioProtocol         - [log:173] Pausing ProtocolHandler ["http-nio-8838"] 
2020-06-17 12:28:25.324 [INFO ] org.apache.catalina.core.StandardService           - [log:173] Stopping service [Tomcat] 
2020-06-17 12:28:25.330 [INFO ] org.apache.coyote.http11.Http11NioProtocol         - [log:173] Stopping ProtocolHandler ["http-nio-8838"] 
2020-06-17 12:28:25.331 [INFO ] org.apache.coyote.http11.Http11NioProtocol         - [log:173] Destroying ProtocolHandler ["http-nio-8838"] 
2020-06-17 12:28:25.335 [INFO ] o.s.b.a.l.ConditionEvaluationReportLoggingListener - [logMessage:136]     Error starting ApplicationContext. To display the conditions report re-run your application with 'debug' enabled. 
2020-06-17 12:28:25.337 [ERROR] o.s.b.diagnostics.LoggingFailureAnalysisReporter   - [report:40]     ***************************  APPLICATION FAILED TO START  ***************************    Description:    Web server failed to start. Port 8838 was already in use.    Action:    Identify and stop the process that's listening on port 8838 or configure this application to listen on another port.   
2020-06-17 12:28:25.340 [INFO ] o.s.scheduling.concurrent.ThreadPoolTaskExecutor   - [shutdown:208] Shutting down ExecutorService 'applicationTaskExecutor' 
2020-06-17 12:28:25.344 [INFO ] com.alibaba.druid.pool.DruidDataSource             - [close:1825] {dataSource-1} closed 
2020-06-17 12:28:27.830 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 12:28:27.831 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 12:28:27.839 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 12:28:27.842 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 12:28:27.843 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 12:28:27.848 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 12:28:27.852 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 12:28:27.852 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 12:28:27.857 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-17 12:28:27.861 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 12:28:27.861 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:28:27.866 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 12:28:27.870 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 12:28:27.870 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:28:27.875 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 12:28:27.879 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 12:28:27.880 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 12:28:27.880 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 12:28:27.881 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:28:27.885 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 12:28:27.889 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 12:28:27.889 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:28:27.894 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 12:28:27.899 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 12:28:27.899 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:28:27.904 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 12:28:27.908 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 12:28:27.909 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:28:27.922 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 12:28:27.927 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 12:28:27.927 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 12:28:27.928 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 12:28:27.928 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:28:27.933 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 12:28:27.937 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 12:28:27.938 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:28:27.943 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 12:28:27.947 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 12:28:27.947 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:28:27.952 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 12:28:27.957 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 12:28:27.958 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:28:27.970 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 12:28:27.989 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:户籍地址长度异常长度>100字符（包含省市区、乡镇街道名称（如有）、村居委会名称（如有）、详细地址） 
2020-06-17 12:28:27.989 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:建档单位长度异常长度>100字符 
2020-06-17 12:28:27.992 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:现住址长度异常长度>100字符（包含省市区、乡镇街道名称（如有）、村居委会名称（如有）、详细地址） 
2020-06-17 12:28:27.993 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:血型与RH血型逻辑不符同时满足以下条件： 1、个人基本信息表《血型》填写为“不详” 2、个人基本信息表《RH血型》填写为“阴性”或“阳性” 
2020-06-17 12:28:27.997 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-17 12:28:27.997 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 329b69c7855544e986fc0073b77fe9be(String), 2020-06-17 12:28:27.996(Timestamp), 31011310200312009116(String), 403a97f9ec40406b9723b3c6845a6cee(String), 2020-06-17 12:28:27.996(Timestamp), 31011310200312009116(String), 91665e0b2efa4f86aea807ec9f4883c3(String), 2020-06-17 12:28:27.996(Timestamp), 31011310200312009116(String), a58b2894635045b18a63c250d46ce8a8(String), 2020-06-17 12:28:27.996(Timestamp) 
2020-06-17 12:28:28.020 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 4 
2020-06-17 12:28:31.257 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 12:28:31.257 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 12:28:31.262 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 12:28:31.268 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 12:28:31.268 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 12:28:31.273 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 12:28:31.277 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 12:28:31.277 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 12:28:31.282 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-17 12:28:31.286 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 12:28:31.286 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:28:31.291 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 12:28:31.295 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 12:28:31.295 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:28:31.300 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 12:28:31.304 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 12:28:31.305 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 12:28:31.305 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 12:28:31.306 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:28:31.310 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 12:28:31.314 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 12:28:31.314 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:28:31.319 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 12:28:31.324 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 12:28:31.325 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:28:31.329 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 12:28:31.334 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 12:28:31.335 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:28:31.349 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 12:28:31.353 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 12:28:31.354 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 12:28:31.355 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 12:28:31.355 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:28:31.360 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 12:28:31.366 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 12:28:31.367 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:28:31.372 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 12:28:31.377 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 12:28:31.378 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:28:31.383 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 12:28:31.388 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 12:28:31.389 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:28:31.394 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 12:28:31.419 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:户籍地址长度异常长度>100字符（包含省市区、乡镇街道名称（如有）、村居委会名称（如有）、详细地址） 
2020-06-17 12:28:31.421 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:建档单位长度异常长度>100字符 
2020-06-17 12:28:31.427 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:血型与RH血型逻辑不符同时满足以下条件： 1、个人基本信息表《血型》填写为“不详” 2、个人基本信息表《RH血型》填写为“阴性”或“阳性” 
2020-06-17 12:28:31.432 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-17 12:28:31.433 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 329b69c7855544e986fc0073b77fe9be(String), 2020-06-17 12:28:31.432(Timestamp), 31011310200312009116(String), 403a97f9ec40406b9723b3c6845a6cee(String), 2020-06-17 12:28:31.432(Timestamp), 31011310200312009116(String), a58b2894635045b18a63c250d46ce8a8(String), 2020-06-17 12:28:31.432(Timestamp) 
2020-06-17 12:28:31.460 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 3 
2020-06-17 12:28:34.750 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 12:28:34.751 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 12:28:34.758 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 12:28:34.763 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 12:28:34.763 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 12:28:34.770 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 12:28:34.774 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 12:28:34.775 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 12:28:34.779 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-17 12:28:34.784 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 12:28:34.784 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:28:34.789 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 12:28:34.794 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 12:28:34.794 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:28:34.800 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 12:28:34.806 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 12:28:34.807 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 12:28:34.807 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 12:28:34.808 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:28:34.815 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 12:28:34.820 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 12:28:34.820 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:28:34.828 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 12:28:34.833 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 12:28:34.834 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:28:34.840 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 12:28:34.846 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 12:28:34.847 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:28:34.864 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 12:28:34.869 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 12:28:34.869 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 12:28:34.870 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 12:28:34.871 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:28:34.876 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 12:28:34.882 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 12:28:34.883 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:28:34.888 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 12:28:34.892 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 12:28:34.893 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:28:34.898 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 12:28:34.902 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 12:28:34.903 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:28:34.909 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 12:28:34.932 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:建档单位长度异常长度>100字符 
2020-06-17 12:28:34.932 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:现住址乡镇（街道）名称长度异常长度>100字符 
2020-06-17 12:28:34.937 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:现住址长度异常长度>100字符（包含省市区、乡镇街道名称（如有）、村居委会名称（如有）、详细地址） 
2020-06-17 12:28:34.939 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:血型与RH血型逻辑不符同时满足以下条件： 1、个人基本信息表《血型》填写为“不详” 2、个人基本信息表《RH血型》填写为“阴性”或“阳性” 
2020-06-17 12:28:34.944 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-17 12:28:34.945 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 403a97f9ec40406b9723b3c6845a6cee(String), 2020-06-17 12:28:34.944(Timestamp), 31011310200312009116(String), 40c92f3721704bb7a6eb42a8ca1976b6(String), 2020-06-17 12:28:34.944(Timestamp), 31011310200312009116(String), 91665e0b2efa4f86aea807ec9f4883c3(String), 2020-06-17 12:28:34.944(Timestamp), 31011310200312009116(String), a58b2894635045b18a63c250d46ce8a8(String), 2020-06-17 12:28:34.944(Timestamp) 
2020-06-17 12:28:34.969 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 4 
2020-06-17 12:28:38.172 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 12:28:38.173 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 12:28:38.188 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 12:28:38.204 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 12:28:38.205 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 12:28:38.210 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 12:28:38.214 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 12:28:38.215 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 12:28:38.219 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-17 12:28:38.224 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 12:28:38.224 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:28:38.228 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 12:28:38.233 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 12:28:38.233 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:28:38.238 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 12:28:38.242 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 12:28:38.242 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 12:28:38.242 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 12:28:38.243 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:28:38.247 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 12:28:38.252 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 12:28:38.252 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:28:38.256 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 12:28:38.260 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 12:28:38.261 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:28:38.265 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 12:28:38.269 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 12:28:38.269 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:28:38.283 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 12:28:38.287 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 12:28:38.287 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 12:28:38.288 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 12:28:38.288 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:28:38.293 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 12:28:38.297 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 12:28:38.298 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:28:38.302 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 12:28:38.306 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 12:28:38.307 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:28:38.311 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 12:28:38.315 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 12:28:38.315 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:28:38.325 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 12:28:38.344 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:建档单位长度异常长度>100字符 
2020-06-17 12:28:38.346 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:现住址长度异常长度>100字符（包含省市区、乡镇街道名称（如有）、村居委会名称（如有）、详细地址） 
2020-06-17 12:28:38.346 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:现住址村（居）委会名称长度异常长度>100字符 
2020-06-17 12:28:38.347 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:血型与RH血型逻辑不符同时满足以下条件： 1、个人基本信息表《血型》填写为“不详” 2、个人基本信息表《RH血型》填写为“阴性”或“阳性” 
2020-06-17 12:28:38.350 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-17 12:28:38.350 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 403a97f9ec40406b9723b3c6845a6cee(String), 2020-06-17 12:28:38.349(Timestamp), 31011310200312009116(String), 91665e0b2efa4f86aea807ec9f4883c3(String), 2020-06-17 12:28:38.349(Timestamp), 31011310200312009116(String), 9df07515be3d4c2887e947c6ce5adace(String), 2020-06-17 12:28:38.349(Timestamp), 31011310200312009116(String), a58b2894635045b18a63c250d46ce8a8(String), 2020-06-17 12:28:38.349(Timestamp) 
2020-06-17 12:28:38.376 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 4 
2020-06-17 12:28:41.522 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 12:28:41.522 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 12:28:41.527 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 12:28:41.531 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 12:28:41.531 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 12:28:41.535 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 12:28:41.539 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 12:28:41.539 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 12:28:41.544 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-17 12:28:41.549 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 12:28:41.549 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:28:41.553 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 12:28:41.558 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 12:28:41.559 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:28:41.564 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 12:28:41.568 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 12:28:41.568 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 12:28:41.569 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 12:28:41.569 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:28:41.574 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 12:28:41.579 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 12:28:41.580 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:28:41.585 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 12:28:41.589 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 12:28:41.590 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:28:41.596 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 12:28:41.601 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 12:28:41.602 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:28:41.615 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 12:28:41.620 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 12:28:41.620 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 12:28:41.621 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 12:28:41.622 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:28:41.628 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 12:28:41.632 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 12:28:41.633 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:28:41.639 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 12:28:41.643 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 12:28:41.644 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:28:41.649 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 12:28:41.655 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 12:28:41.656 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:28:41.661 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 12:28:41.683 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:建档单位长度异常长度>100字符 
2020-06-17 12:28:41.688 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:血型与RH血型逻辑不符同时满足以下条件： 1、个人基本信息表《血型》填写为“不详” 2、个人基本信息表《RH血型》填写为“阴性”或“阳性” 
2020-06-17 12:28:41.694 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-17 12:28:41.694 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 403a97f9ec40406b9723b3c6845a6cee(String), 2020-06-17 12:28:41.693(Timestamp), 31011310200312009116(String), a58b2894635045b18a63c250d46ce8a8(String), 2020-06-17 12:28:41.693(Timestamp) 
2020-06-17 12:28:41.717 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 2 
2020-06-17 12:28:44.995 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 12:28:44.996 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 12:28:45.001 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 12:28:45.006 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 12:28:45.006 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 12:28:45.012 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 12:28:45.019 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 12:28:45.019 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 12:28:45.024 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-17 12:28:45.029 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 12:28:45.030 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:28:45.034 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 12:28:45.040 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 12:28:45.040 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:28:45.046 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 12:28:45.050 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 12:28:45.051 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 12:28:45.051 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 12:28:45.052 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:28:45.057 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 12:28:45.061 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 12:28:45.062 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:28:45.067 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 12:28:45.071 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 12:28:45.072 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:28:45.079 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 12:28:45.083 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 12:28:45.084 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:28:45.098 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 12:28:45.102 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 12:28:45.103 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 12:28:45.104 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 12:28:45.104 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:28:45.109 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 12:28:45.114 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 12:28:45.115 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:28:45.121 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 12:28:45.127 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 12:28:45.128 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:28:45.133 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 12:28:45.139 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 12:28:45.139 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:28:45.147 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 12:28:45.162 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:血型与RH血型逻辑不符同时满足以下条件： 1、个人基本信息表《血型》填写为“不详” 2、个人基本信息表《RH血型》填写为“阴性”或“阳性” 
2020-06-17 12:28:45.164 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1)  
2020-06-17 12:28:45.164 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), a58b2894635045b18a63c250d46ce8a8(String), 2020-06-17 12:28:45.163(Timestamp) 
2020-06-17 12:28:45.210 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 1 
2020-06-17 12:28:48.415 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 12:28:48.415 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 12:28:48.421 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 12:28:48.425 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 12:28:48.425 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 12:28:48.430 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 12:28:48.434 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 12:28:48.435 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 12:28:48.440 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-17 12:28:48.444 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 12:28:48.444 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:28:48.449 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 12:28:48.453 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 12:28:48.454 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:28:48.459 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 12:28:48.463 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 12:28:48.463 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 12:28:48.464 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 12:28:48.464 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:28:48.469 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 12:28:48.473 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 12:28:48.473 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:28:48.477 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 12:28:48.483 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 12:28:48.484 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:28:48.490 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 12:28:48.495 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 12:28:48.496 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:28:48.510 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 12:28:48.516 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 12:28:48.517 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 12:28:48.518 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 12:28:48.519 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:28:48.524 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 12:28:48.529 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 12:28:48.530 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:28:48.537 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 12:28:48.544 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 12:28:48.545 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:28:48.550 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 12:28:48.557 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 12:28:48.558 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:28:48.564 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 12:28:48.598 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:责任医生长度异常长度>50字符 
2020-06-17 12:28:48.599 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:血型与RH血型逻辑不符同时满足以下条件： 1、个人基本信息表《血型》填写为“不详” 2、个人基本信息表《RH血型》填写为“阴性”或“阳性” 
2020-06-17 12:28:48.601 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-17 12:28:48.601 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 9042bba97fb74b558de96e35ab2ffdc2(String), 2020-06-17 12:28:48.601(Timestamp), 31011310200312009116(String), a58b2894635045b18a63c250d46ce8a8(String), 2020-06-17 12:28:48.601(Timestamp) 
2020-06-17 12:28:48.617 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 2 
2020-06-17 12:28:51.900 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 12:28:51.900 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 12:28:51.905 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 12:28:51.909 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 12:28:51.909 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 12:28:51.914 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 12:28:51.919 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 12:28:51.919 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 12:28:51.924 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-17 12:28:51.928 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 12:28:51.928 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:28:51.932 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 12:28:51.936 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 12:28:51.937 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:28:51.942 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 12:28:51.946 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 12:28:51.946 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 12:28:51.947 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 12:28:51.947 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:28:51.951 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 12:28:51.955 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 12:28:51.955 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:28:51.959 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 12:28:51.963 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 12:28:51.963 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:28:51.967 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 12:28:51.972 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 12:28:51.972 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:28:51.992 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 12:28:51.996 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 12:28:51.996 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 12:28:51.996 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 12:28:51.996 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:28:52.000 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 12:28:52.005 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 12:28:52.005 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:28:52.009 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 12:28:52.013 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 12:28:52.014 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:28:52.018 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 12:28:52.024 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 12:28:52.024 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:28:52.030 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 12:28:52.043 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:个人基本信息表工作单位工作单位不为汉字 
2020-06-17 12:28:52.045 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:血型与RH血型逻辑不符同时满足以下条件： 1、个人基本信息表《血型》填写为“不详” 2、个人基本信息表《RH血型》填写为“阴性”或“阳性” 
2020-06-17 12:28:52.047 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-17 12:28:52.047 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 4ad5f41e777d499894964fe735a4ed46(String), 2020-06-17 12:28:52.047(Timestamp), 31011310200312009116(String), a58b2894635045b18a63c250d46ce8a8(String), 2020-06-17 12:28:52.047(Timestamp) 
2020-06-17 12:28:52.058 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 2 
2020-06-17 12:28:55.409 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 12:28:55.410 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 12:28:55.421 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 12:28:55.435 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 12:28:55.435 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 12:28:55.451 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 12:28:55.458 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 12:28:55.459 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 12:28:55.464 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-17 12:28:55.470 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 12:28:55.471 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:28:55.476 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 12:28:55.481 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 12:28:55.481 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:28:55.498 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 12:28:55.510 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 12:28:55.511 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 12:28:55.512 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 12:28:55.513 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:28:55.522 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 12:28:55.529 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 12:28:55.530 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:28:55.544 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 12:28:55.549 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 12:28:55.550 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:28:55.556 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 12:28:55.574 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 12:28:55.575 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:28:55.590 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 12:28:55.595 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 12:28:55.596 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 12:28:55.597 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 12:28:55.598 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:28:55.603 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 12:28:55.608 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 12:28:55.609 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:28:55.616 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 12:28:55.621 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 12:28:55.621 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:28:55.627 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 12:28:55.632 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 12:28:55.632 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:28:55.637 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 12:28:55.655 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:联系人姓名填写为数字同时满足以下条件： 1、联系人姓名不为空值 2、联系人姓名为纯数字 
2020-06-17 12:28:55.661 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:血型与RH血型逻辑不符同时满足以下条件： 1、个人基本信息表《血型》填写为“不详” 2、个人基本信息表《RH血型》填写为“阴性”或“阳性” 
2020-06-17 12:28:55.665 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-17 12:28:55.666 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 1a7e1f2e0bce421585a1fad889411dd4(String), 2020-06-17 12:28:55.665(Timestamp), 31011310200312009116(String), a58b2894635045b18a63c250d46ce8a8(String), 2020-06-17 12:28:55.665(Timestamp) 
2020-06-17 12:28:55.699 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 2 
2020-06-17 12:28:58.966 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 12:28:58.967 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 12:28:58.973 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 12:28:58.978 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 12:28:58.978 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 12:28:58.983 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 12:28:58.988 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 12:28:58.988 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 12:28:58.993 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-17 12:28:58.997 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 12:28:58.997 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:28:59.002 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 12:28:59.006 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 12:28:59.007 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:28:59.013 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 12:28:59.016 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 12:28:59.017 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 12:28:59.017 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 12:28:59.018 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:28:59.023 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 12:28:59.027 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 12:28:59.028 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:28:59.035 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 12:28:59.040 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 12:28:59.041 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:28:59.046 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 12:28:59.050 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 12:28:59.051 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:28:59.064 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 12:28:59.069 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 12:28:59.069 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 12:28:59.069 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 12:28:59.069 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:28:59.074 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 12:28:59.078 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 12:28:59.078 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:28:59.087 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 12:28:59.094 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 12:28:59.094 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:28:59.100 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 12:28:59.105 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 12:28:59.105 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:28:59.110 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 12:28:59.127 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:血型与RH血型逻辑不符同时满足以下条件： 1、个人基本信息表《血型》填写为“不详” 2、个人基本信息表《RH血型》填写为“阴性”或“阳性” 
2020-06-17 12:28:59.130 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1)  
2020-06-17 12:28:59.131 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), a58b2894635045b18a63c250d46ce8a8(String), 2020-06-17 12:28:59.13(Timestamp) 
2020-06-17 12:28:59.157 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 1 
2020-06-17 12:29:02.415 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 12:29:02.416 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 12:29:02.421 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 12:29:02.426 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 12:29:02.426 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 12:29:02.430 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 12:29:02.436 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 12:29:02.436 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 12:29:02.441 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-17 12:29:02.445 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 12:29:02.445 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:29:02.449 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 12:29:02.454 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 12:29:02.454 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:29:02.459 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 12:29:02.464 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 12:29:02.464 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 12:29:02.464 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 12:29:02.465 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:29:02.469 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 12:29:02.480 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 12:29:02.480 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:29:02.486 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 12:29:02.490 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 12:29:02.490 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:29:02.495 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 12:29:02.500 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 12:29:02.500 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:29:02.514 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 12:29:02.518 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 12:29:02.518 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 12:29:02.519 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 12:29:02.519 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:29:02.523 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 12:29:02.527 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 12:29:02.528 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:29:02.532 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 12:29:02.537 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 12:29:02.537 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:29:02.542 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 12:29:02.546 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 12:29:02.546 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:29:02.551 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 12:29:02.564 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:血型与RH血型逻辑不符同时满足以下条件： 1、个人基本信息表《血型》填写为“不详” 2、个人基本信息表《RH血型》填写为“阴性”或“阳性” 
2020-06-17 12:29:02.567 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1)  
2020-06-17 12:29:02.567 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), a58b2894635045b18a63c250d46ce8a8(String), 2020-06-17 12:29:02.566(Timestamp) 
2020-06-17 12:29:02.581 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 1 
2020-06-17 12:29:05.839 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 12:29:05.840 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 12:29:05.846 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 12:29:05.850 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 12:29:05.851 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 12:29:05.856 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 12:29:05.860 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 12:29:05.861 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 12:29:05.865 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-17 12:29:05.870 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 12:29:05.871 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:29:05.876 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 12:29:05.879 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 12:29:05.880 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:29:05.885 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 12:29:05.890 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 12:29:05.890 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 12:29:05.890 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 12:29:05.892 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:29:05.896 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 12:29:05.900 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 12:29:05.900 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:29:05.906 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 12:29:05.910 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 12:29:05.911 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:29:05.916 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 12:29:05.920 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 12:29:05.921 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:29:05.935 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 12:29:05.939 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 12:29:05.939 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 12:29:05.940 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 12:29:05.940 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:29:05.944 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 12:29:05.949 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 12:29:05.949 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:29:05.954 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 12:29:05.958 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 12:29:05.958 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:29:05.963 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 12:29:05.968 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 12:29:05.968 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:29:05.973 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 12:29:05.996 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:血型与RH血型逻辑不符同时满足以下条件： 1、个人基本信息表《血型》填写为“不详” 2、个人基本信息表《RH血型》填写为“阴性”或“阳性” 
2020-06-17 12:29:05.999 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1)  
2020-06-17 12:29:06.000 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), a58b2894635045b18a63c250d46ce8a8(String), 2020-06-17 12:29:05.999(Timestamp) 
2020-06-17 12:29:06.014 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 1 
2020-06-17 12:29:09.271 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 12:29:09.272 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 12:29:09.277 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 12:29:09.282 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 12:29:09.282 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 12:29:09.289 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 12:29:09.294 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 12:29:09.294 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 12:29:09.298 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-17 12:29:09.303 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 12:29:09.304 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:29:09.309 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 12:29:09.313 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 12:29:09.314 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:29:09.320 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 12:29:09.325 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 12:29:09.325 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 12:29:09.326 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 12:29:09.326 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:29:09.330 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 12:29:09.335 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 12:29:09.336 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:29:09.340 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 12:29:09.345 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 12:29:09.346 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:29:09.350 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 12:29:09.355 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 12:29:09.355 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:29:09.373 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 12:29:09.377 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 12:29:09.378 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 12:29:09.378 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 12:29:09.379 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:29:09.383 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 12:29:09.388 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 12:29:09.389 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:29:09.393 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 12:29:09.398 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 12:29:09.398 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:29:09.403 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 12:29:09.408 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 12:29:09.408 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:29:09.413 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 12:29:09.428 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:血型与RH血型逻辑不符同时满足以下条件： 1、个人基本信息表《血型》填写为“不详” 2、个人基本信息表《RH血型》填写为“阴性”或“阳性” 
2020-06-17 12:29:09.430 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1)  
2020-06-17 12:29:09.431 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), a58b2894635045b18a63c250d46ce8a8(String), 2020-06-17 12:29:09.43(Timestamp) 
2020-06-17 12:29:09.470 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 1 
2020-06-17 12:29:12.881 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 12:29:12.881 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 12:29:12.886 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 12:29:12.890 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 12:29:12.890 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 12:29:12.895 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 12:29:12.899 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 12:29:12.899 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 12:29:12.904 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-17 12:29:12.908 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 12:29:12.908 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:29:12.913 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 12:29:12.917 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 12:29:12.918 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:29:12.923 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 12:29:12.927 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 12:29:12.928 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 12:29:12.928 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 12:29:12.928 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:29:12.932 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 12:29:12.936 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 12:29:12.937 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:29:12.941 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 12:29:12.945 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 12:29:12.945 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:29:12.951 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 12:29:12.954 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 12:29:12.955 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:29:12.969 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 12:29:12.973 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 12:29:12.973 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 12:29:12.973 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 12:29:12.974 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:29:12.980 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 12:29:12.984 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 12:29:12.984 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:29:12.989 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 12:29:12.993 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 12:29:12.994 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:29:13.004 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 12:29:13.011 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 12:29:13.012 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:29:13.017 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 12:29:13.035 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:血型与RH血型逻辑不符同时满足以下条件： 1、个人基本信息表《血型》填写为“不详” 2、个人基本信息表《RH血型》填写为“阴性”或“阳性” 
2020-06-17 12:29:13.037 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1)  
2020-06-17 12:29:13.037 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), a58b2894635045b18a63c250d46ce8a8(String), 2020-06-17 12:29:13.037(Timestamp) 
2020-06-17 12:29:13.055 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 1 
2020-06-17 12:29:16.532 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 12:29:16.533 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 12:29:16.538 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 12:29:16.543 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 12:29:16.543 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 12:29:16.548 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 12:29:16.553 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 12:29:16.554 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 12:29:16.562 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-17 12:29:16.566 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 12:29:16.567 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:29:16.577 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 12:29:16.585 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 12:29:16.586 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:29:16.600 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 12:29:16.605 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 12:29:16.605 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 12:29:16.607 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 12:29:16.607 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:29:16.610 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 12:29:16.615 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 12:29:16.616 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:29:16.623 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 12:29:16.629 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 12:29:16.629 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:29:16.635 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 12:29:16.640 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 12:29:16.640 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:29:16.655 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 12:29:16.660 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 12:29:16.660 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 12:29:16.661 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 12:29:16.661 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:29:16.667 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 12:29:16.676 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 12:29:16.676 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:29:16.683 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 12:29:16.687 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 12:29:16.687 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:29:16.692 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 12:29:16.697 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 12:29:16.697 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:29:16.709 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 12:29:16.735 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:个人基本信息表既往史既往史疾病确诊时间未填写 
2020-06-17 12:29:16.736 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:个人基本信息表既往史既往史疾病确诊时间填写不规范 
2020-06-17 12:29:16.737 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:血型与RH血型逻辑不符同时满足以下条件： 1、个人基本信息表《血型》填写为“不详” 2、个人基本信息表《RH血型》填写为“阴性”或“阳性” 
2020-06-17 12:29:16.739 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-17 12:29:16.739 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 6302b0fcdcd7482099581602a1fec501(String), 2020-06-17 12:29:16.739(Timestamp), 31011310200312009116(String), 923bfb7880204efa8f26fd200d1bd17e(String), 2020-06-17 12:29:16.739(Timestamp), 31011310200312009116(String), a58b2894635045b18a63c250d46ce8a8(String), 2020-06-17 12:29:16.739(Timestamp) 
2020-06-17 12:29:16.780 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 3 
2020-06-17 12:31:50.240 [INFO ] com.benetech.rules.RulesApplication                - [logStarting:55] Starting RulesApplication v1.0-SNAPSHOT on DESKTOP-EOCO1V0 with PID 9228 (D:\51\python\project\instance\zyjk\EHR\controlRuleNew\config\healthRecordRules.jar started by ZY in D:\51\python\project\instance\zyjk\EHR\controlRuleNew) 
2020-06-17 12:31:50.244 [DEBUG] com.benetech.rules.RulesApplication                - [logStarting:56] Running with Spring Boot v2.2.1.RELEASE, Spring v5.2.1.RELEASE 
2020-06-17 12:31:50.244 [INFO ] com.benetech.rules.RulesApplication                - [logStartupProfileInfo:655] The following profiles are active: test 
2020-06-17 12:31:51.816 [INFO ] o.s.boot.web.embedded.tomcat.TomcatWebServer       - [initialize:92] Tomcat initialized with port(s): 8838 (http) 
2020-06-17 12:31:51.826 [INFO ] org.apache.coyote.http11.Http11NioProtocol         - [log:173] Initializing ProtocolHandler ["http-nio-8838"] 
2020-06-17 12:31:51.827 [INFO ] org.apache.catalina.core.StandardService           - [log:173] Starting service [Tomcat] 
2020-06-17 12:31:51.827 [INFO ] org.apache.catalina.core.StandardEngine            - [log:173] Starting Servlet engine: [Apache Tomcat/9.0.27] 
2020-06-17 12:31:51.893 [INFO ] o.a.c.c.C.[.[localhost].[/healthRecordRules]       - [log:173] Initializing Spring embedded WebApplicationContext 
2020-06-17 12:31:51.894 [INFO ] org.springframework.web.context.ContextLoader      - [prepareWebApplicationContext:284] Root WebApplicationContext: initialization completed in 1566 ms 
2020-06-17 12:31:51.971 [DEBUG] org.apache.ibatis.logging.LogFactory               - [setImplementation:135] Logging initialized using 'class org.apache.ibatis.logging.slf4j.Slf4jImpl' adapter. 
2020-06-17 12:31:52.212 [WARN ] org.mybatis.spring.SqlSessionFactoryBean           - [buildSqlSessionFactory:467] Can't find class in '[com.benetech.rules.*.entity]' package. Please check your configuration. 
2020-06-17 12:31:52.855 [INFO ] com.alibaba.druid.pool.DruidDataSource             - [init:930] {dataSource-1} inited 
2020-06-17 12:31:53.100 [DEBUG] c.b.r.m.e.mapper.RuleEngineMapper.getAllRules      - [debug:159] ==>  Preparing: select a.RuleId as ruleId, a.RuleSql as clazz from HrRule a join HrRuleProps b on a.RuleId = b.RuleId where -- RuleId in ('34278f71cf1d42c88158aaf637fa5203', '8d30baa03bfc4233a8f115c57a0ebf08', '63eb82a44bf64c96a0b9023fa2a3c9d9') a.RuleSql != '' and a.RuleSql is not null and b.Enable = 1  
2020-06-17 12:31:53.124 [DEBUG] c.b.r.m.e.mapper.RuleEngineMapper.getAllRules      - [debug:159] ==> Parameters:  
2020-06-17 12:31:53.210 [DEBUG] c.b.r.m.e.mapper.RuleEngineMapper.getAllRules      - [debug:159] <==      Total: 310 
2020-06-17 12:31:53.457 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [init:68] 加载规则：310 条 
2020-06-17 12:31:53.474 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.getAllCode    - [debug:159] ==>  Preparing: SELECT codeSysType AS type, code AS code, [value] AS value FROM tb_code_value WHERE code != '' AND [value] != ''  
2020-06-17 12:31:53.474 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.getAllCode    - [debug:159] ==> Parameters:  
2020-06-17 12:31:53.984 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.getAllCode    - [debug:159] <==      Total: 44881 
2020-06-17 12:31:54.008 [INFO ] c.b.r.m.m.service.impl.EhrModelBuildServiceImpl    - [init:96] 初始化字典类型: 467 种 
2020-06-17 12:31:54.008 [INFO ] c.b.r.m.m.service.impl.EhrModelBuildServiceImpl    - [init:97] 初始化字典: 44881 条 
2020-06-17 12:31:54.009 [ERROR] c.b.r.m.process.service.impl.QcProcessServiceImpl  - [init:44] 初始化线程池 
2020-06-17 12:31:54.118 [INFO ] o.s.scheduling.concurrent.ThreadPoolTaskExecutor   - [initialize:171] Initializing ExecutorService 'applicationTaskExecutor' 
2020-06-17 12:31:54.313 [INFO ] org.apache.coyote.http11.Http11NioProtocol         - [log:173] Starting ProtocolHandler ["http-nio-8838"] 
2020-06-17 12:31:54.324 [INFO ] org.apache.coyote.http11.Http11NioProtocol         - [log:173] Pausing ProtocolHandler ["http-nio-8838"] 
2020-06-17 12:31:54.324 [INFO ] org.apache.catalina.core.StandardService           - [log:173] Stopping service [Tomcat] 
2020-06-17 12:31:54.328 [INFO ] org.apache.coyote.http11.Http11NioProtocol         - [log:173] Stopping ProtocolHandler ["http-nio-8838"] 
2020-06-17 12:31:54.328 [INFO ] org.apache.coyote.http11.Http11NioProtocol         - [log:173] Destroying ProtocolHandler ["http-nio-8838"] 
2020-06-17 12:31:54.330 [INFO ] o.s.b.a.l.ConditionEvaluationReportLoggingListener - [logMessage:136]     Error starting ApplicationContext. To display the conditions report re-run your application with 'debug' enabled. 
2020-06-17 12:31:54.331 [ERROR] o.s.b.diagnostics.LoggingFailureAnalysisReporter   - [report:40]     ***************************  APPLICATION FAILED TO START  ***************************    Description:    Web server failed to start. Port 8838 was already in use.    Action:    Identify and stop the process that's listening on port 8838 or configure this application to listen on another port.   
2020-06-17 12:31:54.333 [INFO ] o.s.scheduling.concurrent.ThreadPoolTaskExecutor   - [shutdown:208] Shutting down ExecutorService 'applicationTaskExecutor' 
2020-06-17 12:31:54.337 [INFO ] com.alibaba.druid.pool.DruidDataSource             - [close:1825] {dataSource-1} closed 
2020-06-17 12:32:43.855 [INFO ] com.benetech.rules.RulesApplication                - [logStarting:55] Starting RulesApplication v1.0-SNAPSHOT on DESKTOP-EOCO1V0 with PID 9232 (D:\51\python\project\instance\zyjk\EHR\controlRuleNew\config\healthRecordRules.jar started by ZY in D:\51\python\project\instance\zyjk\EHR\controlRuleNew) 
2020-06-17 12:32:43.858 [DEBUG] com.benetech.rules.RulesApplication                - [logStarting:56] Running with Spring Boot v2.2.1.RELEASE, Spring v5.2.1.RELEASE 
2020-06-17 12:32:43.859 [INFO ] com.benetech.rules.RulesApplication                - [logStartupProfileInfo:655] The following profiles are active: test 
2020-06-17 12:32:45.535 [INFO ] o.s.boot.web.embedded.tomcat.TomcatWebServer       - [initialize:92] Tomcat initialized with port(s): 8838 (http) 
2020-06-17 12:32:45.554 [INFO ] org.apache.coyote.http11.Http11NioProtocol         - [log:173] Initializing ProtocolHandler ["http-nio-8838"] 
2020-06-17 12:32:45.555 [INFO ] org.apache.catalina.core.StandardService           - [log:173] Starting service [Tomcat] 
2020-06-17 12:32:45.557 [INFO ] org.apache.catalina.core.StandardEngine            - [log:173] Starting Servlet engine: [Apache Tomcat/9.0.27] 
2020-06-17 12:32:45.641 [INFO ] o.a.c.c.C.[.[localhost].[/healthRecordRules]       - [log:173] Initializing Spring embedded WebApplicationContext 
2020-06-17 12:32:45.641 [INFO ] org.springframework.web.context.ContextLoader      - [prepareWebApplicationContext:284] Root WebApplicationContext: initialization completed in 1690 ms 
2020-06-17 12:32:45.725 [DEBUG] org.apache.ibatis.logging.LogFactory               - [setImplementation:135] Logging initialized using 'class org.apache.ibatis.logging.slf4j.Slf4jImpl' adapter. 
2020-06-17 12:32:46.009 [WARN ] org.mybatis.spring.SqlSessionFactoryBean           - [buildSqlSessionFactory:467] Can't find class in '[com.benetech.rules.*.entity]' package. Please check your configuration. 
2020-06-17 12:32:46.772 [INFO ] com.alibaba.druid.pool.DruidDataSource             - [init:930] {dataSource-1} inited 
2020-06-17 12:32:47.008 [DEBUG] c.b.r.m.e.mapper.RuleEngineMapper.getAllRules      - [debug:159] ==>  Preparing: select a.RuleId as ruleId, a.RuleSql as clazz from HrRule a join HrRuleProps b on a.RuleId = b.RuleId where -- RuleId in ('34278f71cf1d42c88158aaf637fa5203', '8d30baa03bfc4233a8f115c57a0ebf08', '63eb82a44bf64c96a0b9023fa2a3c9d9') a.RuleSql != '' and a.RuleSql is not null and b.Enable = 1  
2020-06-17 12:32:47.027 [DEBUG] c.b.r.m.e.mapper.RuleEngineMapper.getAllRules      - [debug:159] ==> Parameters:  
2020-06-17 12:32:47.108 [DEBUG] c.b.r.m.e.mapper.RuleEngineMapper.getAllRules      - [debug:159] <==      Total: 310 
2020-06-17 12:32:47.150 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 12:32:47.151 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 12:32:47.158 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 12:32:47.163 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 12:32:47.163 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 12:32:47.175 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 12:32:47.180 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 12:32:47.180 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 12:32:47.186 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-17 12:32:47.190 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 12:32:47.190 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:32:47.195 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 12:32:47.200 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 12:32:47.200 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:32:47.206 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 12:32:47.210 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 12:32:47.210 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 12:32:47.210 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 12:32:47.211 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:32:47.217 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 12:32:47.222 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 12:32:47.222 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:32:47.226 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 12:32:47.231 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 12:32:47.231 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:32:47.235 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 12:32:47.240 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 12:32:47.240 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:32:47.255 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 12:32:47.259 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 12:32:47.260 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 12:32:47.260 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 12:32:47.261 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:32:47.272 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 12:32:47.277 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 12:32:47.277 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:32:47.283 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 12:32:47.291 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 12:32:47.292 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:32:47.306 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 12:32:47.316 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 12:32:47.316 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:32:47.327 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 12:32:47.342 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:与三级医院住院就诊记录表姓名不一致同时满足以下条件： 1、封面《姓名》不为空值 2、三级医院住院就诊记录表《患者姓名》不为空 3、封面《姓名》与住院就诊记录表中《患者姓名》不相等 
2020-06-17 12:32:47.342 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:与三级医院门诊就诊记录表姓名不一致同时满足以下条件： 1、封面《姓名》不为空值 2、三级医院门诊就诊记录表《患者姓名》不为空 3、封面《姓名》与门诊就诊记录表中《患者姓名》不相等 
2020-06-17 12:32:47.343 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:血型与RH血型逻辑不符同时满足以下条件： 1、个人基本信息表《血型》填写为“不详” 2、个人基本信息表《RH血型》填写为“阴性”或“阳性” 
2020-06-17 12:32:47.344 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:姓名长度异常长度>50字符 
2020-06-17 12:32:47.346 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-17 12:32:47.346 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 814b3d0aca3642af82ef320f98d4dfba(String), 2020-06-17 12:32:47.345(Timestamp), 31011310200312009116(String), 847bc4b46918417dab4aa917af3355c3(String), 2020-06-17 12:32:47.345(Timestamp), 31011310200312009116(String), a58b2894635045b18a63c250d46ce8a8(String), 2020-06-17 12:32:47.345(Timestamp), 31011310200312009116(String), b8eeb38e528544b28133b9ee94c5fbc4(String), 2020-06-17 12:32:47.345(Timestamp) 
2020-06-17 12:32:47.391 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 4 
2020-06-17 12:32:47.399 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [init:68] 加载规则：310 条 
2020-06-17 12:32:47.419 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.getAllCode    - [debug:159] ==>  Preparing: SELECT codeSysType AS type, code AS code, [value] AS value FROM tb_code_value WHERE code != '' AND [value] != ''  
2020-06-17 12:32:47.420 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.getAllCode    - [debug:159] ==> Parameters:  
2020-06-17 12:32:47.792 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.getAllCode    - [debug:159] <==      Total: 44881 
2020-06-17 12:32:47.820 [INFO ] c.b.r.m.m.service.impl.EhrModelBuildServiceImpl    - [init:96] 初始化字典类型: 467 种 
2020-06-17 12:32:47.820 [INFO ] c.b.r.m.m.service.impl.EhrModelBuildServiceImpl    - [init:97] 初始化字典: 44881 条 
2020-06-17 12:32:47.821 [ERROR] c.b.r.m.process.service.impl.QcProcessServiceImpl  - [init:44] 初始化线程池 
2020-06-17 12:32:47.974 [INFO ] o.s.scheduling.concurrent.ThreadPoolTaskExecutor   - [initialize:171] Initializing ExecutorService 'applicationTaskExecutor' 
2020-06-17 12:32:48.219 [INFO ] org.apache.coyote.http11.Http11NioProtocol         - [log:173] Starting ProtocolHandler ["http-nio-8838"] 
2020-06-17 12:32:48.233 [INFO ] org.apache.coyote.http11.Http11NioProtocol         - [log:173] Pausing ProtocolHandler ["http-nio-8838"] 
2020-06-17 12:32:48.234 [INFO ] org.apache.catalina.core.StandardService           - [log:173] Stopping service [Tomcat] 
2020-06-17 12:32:48.238 [INFO ] org.apache.coyote.http11.Http11NioProtocol         - [log:173] Stopping ProtocolHandler ["http-nio-8838"] 
2020-06-17 12:32:48.238 [INFO ] org.apache.coyote.http11.Http11NioProtocol         - [log:173] Destroying ProtocolHandler ["http-nio-8838"] 
2020-06-17 12:32:48.240 [INFO ] o.s.b.a.l.ConditionEvaluationReportLoggingListener - [logMessage:136]     Error starting ApplicationContext. To display the conditions report re-run your application with 'debug' enabled. 
2020-06-17 12:32:48.242 [ERROR] o.s.b.diagnostics.LoggingFailureAnalysisReporter   - [report:40]     ***************************  APPLICATION FAILED TO START  ***************************    Description:    Web server failed to start. Port 8838 was already in use.    Action:    Identify and stop the process that's listening on port 8838 or configure this application to listen on another port.   
2020-06-17 12:32:48.245 [INFO ] o.s.scheduling.concurrent.ThreadPoolTaskExecutor   - [shutdown:208] Shutting down ExecutorService 'applicationTaskExecutor' 
2020-06-17 12:32:48.255 [INFO ] com.alibaba.druid.pool.DruidDataSource             - [close:1825] {dataSource-1} closed 
2020-06-17 12:35:15.164 [INFO ] com.benetech.rules.RulesApplication                - [logStarting:55] Starting RulesApplication v1.0-SNAPSHOT on DESKTOP-EOCO1V0 with PID 5312 (D:\51\python\project\instance\zyjk\EHR\controlRuleNew\config\healthRecordRules.jar started by ZY in D:\51\python\project\instance\zyjk\EHR\controlRuleNew) 
2020-06-17 12:35:15.167 [DEBUG] com.benetech.rules.RulesApplication                - [logStarting:56] Running with Spring Boot v2.2.1.RELEASE, Spring v5.2.1.RELEASE 
2020-06-17 12:35:15.167 [INFO ] com.benetech.rules.RulesApplication                - [logStartupProfileInfo:655] The following profiles are active: test 
2020-06-17 12:35:17.108 [INFO ] o.s.boot.web.embedded.tomcat.TomcatWebServer       - [initialize:92] Tomcat initialized with port(s): 8838 (http) 
2020-06-17 12:35:17.118 [INFO ] org.apache.coyote.http11.Http11NioProtocol         - [log:173] Initializing ProtocolHandler ["http-nio-8838"] 
2020-06-17 12:35:17.119 [INFO ] org.apache.catalina.core.StandardService           - [log:173] Starting service [Tomcat] 
2020-06-17 12:35:17.119 [INFO ] org.apache.catalina.core.StandardEngine            - [log:173] Starting Servlet engine: [Apache Tomcat/9.0.27] 
2020-06-17 12:35:17.194 [INFO ] o.a.c.c.C.[.[localhost].[/healthRecordRules]       - [log:173] Initializing Spring embedded WebApplicationContext 
2020-06-17 12:35:17.194 [INFO ] org.springframework.web.context.ContextLoader      - [prepareWebApplicationContext:284] Root WebApplicationContext: initialization completed in 1938 ms 
2020-06-17 12:35:17.272 [DEBUG] org.apache.ibatis.logging.LogFactory               - [setImplementation:135] Logging initialized using 'class org.apache.ibatis.logging.slf4j.Slf4jImpl' adapter. 
2020-06-17 12:35:17.533 [WARN ] org.mybatis.spring.SqlSessionFactoryBean           - [buildSqlSessionFactory:467] Can't find class in '[com.benetech.rules.*.entity]' package. Please check your configuration. 
2020-06-17 12:35:18.291 [INFO ] com.alibaba.druid.pool.DruidDataSource             - [init:930] {dataSource-1} inited 
2020-06-17 12:35:18.511 [DEBUG] c.b.r.m.e.mapper.RuleEngineMapper.getAllRules      - [debug:159] ==>  Preparing: select a.RuleId as ruleId, a.RuleSql as clazz from HrRule a join HrRuleProps b on a.RuleId = b.RuleId where -- RuleId in ('34278f71cf1d42c88158aaf637fa5203', '8d30baa03bfc4233a8f115c57a0ebf08', '63eb82a44bf64c96a0b9023fa2a3c9d9') a.RuleSql != '' and a.RuleSql is not null and b.Enable = 1  
2020-06-17 12:35:18.532 [DEBUG] c.b.r.m.e.mapper.RuleEngineMapper.getAllRules      - [debug:159] ==> Parameters:  
2020-06-17 12:35:18.612 [DEBUG] c.b.r.m.e.mapper.RuleEngineMapper.getAllRules      - [debug:159] <==      Total: 310 
2020-06-17 12:35:18.830 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [init:68] 加载规则：310 条 
2020-06-17 12:35:18.846 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.getAllCode    - [debug:159] ==>  Preparing: SELECT codeSysType AS type, code AS code, [value] AS value FROM tb_code_value WHERE code != '' AND [value] != ''  
2020-06-17 12:35:18.847 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.getAllCode    - [debug:159] ==> Parameters:  
2020-06-17 12:35:19.408 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.getAllCode    - [debug:159] <==      Total: 44881 
2020-06-17 12:35:19.433 [INFO ] c.b.r.m.m.service.impl.EhrModelBuildServiceImpl    - [init:96] 初始化字典类型: 467 种 
2020-06-17 12:35:19.433 [INFO ] c.b.r.m.m.service.impl.EhrModelBuildServiceImpl    - [init:97] 初始化字典: 44881 条 
2020-06-17 12:35:19.434 [ERROR] c.b.r.m.process.service.impl.QcProcessServiceImpl  - [init:44] 初始化线程池 
2020-06-17 12:35:19.545 [INFO ] o.s.scheduling.concurrent.ThreadPoolTaskExecutor   - [initialize:171] Initializing ExecutorService 'applicationTaskExecutor' 
2020-06-17 12:35:19.740 [INFO ] org.apache.coyote.http11.Http11NioProtocol         - [log:173] Starting ProtocolHandler ["http-nio-8838"] 
2020-06-17 12:35:19.751 [INFO ] org.apache.coyote.http11.Http11NioProtocol         - [log:173] Pausing ProtocolHandler ["http-nio-8838"] 
2020-06-17 12:35:19.752 [INFO ] org.apache.catalina.core.StandardService           - [log:173] Stopping service [Tomcat] 
2020-06-17 12:35:19.756 [INFO ] org.apache.coyote.http11.Http11NioProtocol         - [log:173] Stopping ProtocolHandler ["http-nio-8838"] 
2020-06-17 12:35:19.757 [INFO ] org.apache.coyote.http11.Http11NioProtocol         - [log:173] Destroying ProtocolHandler ["http-nio-8838"] 
2020-06-17 12:35:19.760 [INFO ] o.s.b.a.l.ConditionEvaluationReportLoggingListener - [logMessage:136]     Error starting ApplicationContext. To display the conditions report re-run your application with 'debug' enabled. 
2020-06-17 12:35:19.761 [ERROR] o.s.b.diagnostics.LoggingFailureAnalysisReporter   - [report:40]     ***************************  APPLICATION FAILED TO START  ***************************    Description:    Web server failed to start. Port 8838 was already in use.    Action:    Identify and stop the process that's listening on port 8838 or configure this application to listen on another port.   
2020-06-17 12:35:19.763 [INFO ] o.s.scheduling.concurrent.ThreadPoolTaskExecutor   - [shutdown:208] Shutting down ExecutorService 'applicationTaskExecutor' 
2020-06-17 12:35:19.767 [INFO ] com.alibaba.druid.pool.DruidDataSource             - [close:1825] {dataSource-1} closed 
2020-06-17 12:35:59.682 [INFO ] com.benetech.rules.RulesApplication                - [logStarting:55] Starting RulesApplication v1.0-SNAPSHOT on DESKTOP-EOCO1V0 with PID 10268 (D:\51\python\project\instance\zyjk\EHR\controlRuleNew\config\healthRecordRules.jar started by ZY in D:\51\python\project\instance\zyjk\EHR\controlRuleNew) 
2020-06-17 12:35:59.685 [DEBUG] com.benetech.rules.RulesApplication                - [logStarting:56] Running with Spring Boot v2.2.1.RELEASE, Spring v5.2.1.RELEASE 
2020-06-17 12:35:59.685 [INFO ] com.benetech.rules.RulesApplication                - [logStartupProfileInfo:655] The following profiles are active: test 
2020-06-17 12:36:01.393 [INFO ] o.s.boot.web.embedded.tomcat.TomcatWebServer       - [initialize:92] Tomcat initialized with port(s): 8838 (http) 
2020-06-17 12:36:01.404 [INFO ] org.apache.coyote.http11.Http11NioProtocol         - [log:173] Initializing ProtocolHandler ["http-nio-8838"] 
2020-06-17 12:36:01.405 [INFO ] org.apache.catalina.core.StandardService           - [log:173] Starting service [Tomcat] 
2020-06-17 12:36:01.405 [INFO ] org.apache.catalina.core.StandardEngine            - [log:173] Starting Servlet engine: [Apache Tomcat/9.0.27] 
2020-06-17 12:36:01.475 [INFO ] o.a.c.c.C.[.[localhost].[/healthRecordRules]       - [log:173] Initializing Spring embedded WebApplicationContext 
2020-06-17 12:36:01.475 [INFO ] org.springframework.web.context.ContextLoader      - [prepareWebApplicationContext:284] Root WebApplicationContext: initialization completed in 1686 ms 
2020-06-17 12:36:01.556 [DEBUG] org.apache.ibatis.logging.LogFactory               - [setImplementation:135] Logging initialized using 'class org.apache.ibatis.logging.slf4j.Slf4jImpl' adapter. 
2020-06-17 12:36:01.812 [WARN ] org.mybatis.spring.SqlSessionFactoryBean           - [buildSqlSessionFactory:467] Can't find class in '[com.benetech.rules.*.entity]' package. Please check your configuration. 
2020-06-17 12:36:02.450 [INFO ] com.alibaba.druid.pool.DruidDataSource             - [init:930] {dataSource-1} inited 
2020-06-17 12:36:02.670 [DEBUG] c.b.r.m.e.mapper.RuleEngineMapper.getAllRules      - [debug:159] ==>  Preparing: select a.RuleId as ruleId, a.RuleSql as clazz from HrRule a join HrRuleProps b on a.RuleId = b.RuleId where -- RuleId in ('34278f71cf1d42c88158aaf637fa5203', '8d30baa03bfc4233a8f115c57a0ebf08', '63eb82a44bf64c96a0b9023fa2a3c9d9') a.RuleSql != '' and a.RuleSql is not null and b.Enable = 1  
2020-06-17 12:36:02.686 [DEBUG] c.b.r.m.e.mapper.RuleEngineMapper.getAllRules      - [debug:159] ==> Parameters:  
2020-06-17 12:36:02.762 [DEBUG] c.b.r.m.e.mapper.RuleEngineMapper.getAllRules      - [debug:159] <==      Total: 310 
2020-06-17 12:36:02.930 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 12:36:02.931 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 12:36:02.936 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 12:36:02.940 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 12:36:02.940 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 12:36:02.945 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 12:36:02.949 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 12:36:02.949 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 12:36:02.954 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-17 12:36:02.959 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 12:36:02.959 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:36:02.964 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 12:36:02.970 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 12:36:02.970 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:36:02.977 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 12:36:02.981 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 12:36:02.981 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 12:36:02.982 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 12:36:02.982 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:36:02.987 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 12:36:02.990 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 12:36:02.990 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:36:02.994 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 12:36:02.999 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 12:36:02.999 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:36:03.004 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 12:36:03.008 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 12:36:03.008 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:36:03.023 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 12:36:03.028 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 12:36:03.028 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 12:36:03.028 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 12:36:03.029 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:36:03.034 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 12:36:03.038 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 12:36:03.038 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:36:03.043 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 12:36:03.047 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 12:36:03.047 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:36:03.049 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [init:68] 加载规则：310 条 
2020-06-17 12:36:03.051 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 12:36:03.055 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 12:36:03.056 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:36:03.061 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 12:36:03.074 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:与三级医院住院就诊记录表姓名不一致同时满足以下条件： 1、封面《姓名》不为空值 2、三级医院住院就诊记录表《患者姓名》不为空 3、封面《姓名》与住院就诊记录表中《患者姓名》不相等 
2020-06-17 12:36:03.075 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:与三级医院门诊就诊记录表姓名不一致同时满足以下条件： 1、封面《姓名》不为空值 2、三级医院门诊就诊记录表《患者姓名》不为空 3、封面《姓名》与门诊就诊记录表中《患者姓名》不相等 
2020-06-17 12:36:03.068 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.getAllCode    - [debug:159] ==>  Preparing: SELECT codeSysType AS type, code AS code, [value] AS value FROM tb_code_value WHERE code != '' AND [value] != ''  
2020-06-17 12:36:03.076 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:血型与RH血型逻辑不符同时满足以下条件： 1、个人基本信息表《血型》填写为“不详” 2、个人基本信息表《RH血型》填写为“阴性”或“阳性” 
2020-06-17 12:36:03.076 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:姓名长度异常长度>50字符 
2020-06-17 12:36:03.075 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.getAllCode    - [debug:159] ==> Parameters:  
2020-06-17 12:36:03.078 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-17 12:36:03.079 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 814b3d0aca3642af82ef320f98d4dfba(String), 2020-06-17 12:36:03.078(Timestamp), 31011310200312009116(String), 847bc4b46918417dab4aa917af3355c3(String), 2020-06-17 12:36:03.078(Timestamp), 31011310200312009116(String), a58b2894635045b18a63c250d46ce8a8(String), 2020-06-17 12:36:03.078(Timestamp), 31011310200312009116(String), b8eeb38e528544b28133b9ee94c5fbc4(String), 2020-06-17 12:36:03.078(Timestamp) 
2020-06-17 12:36:03.106 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 4 
2020-06-17 12:36:03.620 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.getAllCode    - [debug:159] <==      Total: 44881 
2020-06-17 12:36:03.647 [INFO ] c.b.r.m.m.service.impl.EhrModelBuildServiceImpl    - [init:96] 初始化字典类型: 467 种 
2020-06-17 12:36:03.648 [INFO ] c.b.r.m.m.service.impl.EhrModelBuildServiceImpl    - [init:97] 初始化字典: 44881 条 
2020-06-17 12:36:03.648 [ERROR] c.b.r.m.process.service.impl.QcProcessServiceImpl  - [init:44] 初始化线程池 
2020-06-17 12:36:03.783 [INFO ] o.s.scheduling.concurrent.ThreadPoolTaskExecutor   - [initialize:171] Initializing ExecutorService 'applicationTaskExecutor' 
2020-06-17 12:36:04.043 [INFO ] org.apache.coyote.http11.Http11NioProtocol         - [log:173] Starting ProtocolHandler ["http-nio-8838"] 
2020-06-17 12:36:04.059 [INFO ] org.apache.coyote.http11.Http11NioProtocol         - [log:173] Pausing ProtocolHandler ["http-nio-8838"] 
2020-06-17 12:36:04.059 [INFO ] org.apache.catalina.core.StandardService           - [log:173] Stopping service [Tomcat] 
2020-06-17 12:36:04.065 [INFO ] org.apache.coyote.http11.Http11NioProtocol         - [log:173] Stopping ProtocolHandler ["http-nio-8838"] 
2020-06-17 12:36:04.066 [INFO ] org.apache.coyote.http11.Http11NioProtocol         - [log:173] Destroying ProtocolHandler ["http-nio-8838"] 
2020-06-17 12:36:04.071 [INFO ] o.s.b.a.l.ConditionEvaluationReportLoggingListener - [logMessage:136]     Error starting ApplicationContext. To display the conditions report re-run your application with 'debug' enabled. 
2020-06-17 12:36:04.073 [ERROR] o.s.b.diagnostics.LoggingFailureAnalysisReporter   - [report:40]     ***************************  APPLICATION FAILED TO START  ***************************    Description:    Web server failed to start. Port 8838 was already in use.    Action:    Identify and stop the process that's listening on port 8838 or configure this application to listen on another port.   
2020-06-17 12:36:04.076 [INFO ] o.s.scheduling.concurrent.ThreadPoolTaskExecutor   - [shutdown:208] Shutting down ExecutorService 'applicationTaskExecutor' 
2020-06-17 12:36:04.081 [INFO ] com.alibaba.druid.pool.DruidDataSource             - [close:1825] {dataSource-1} closed 
2020-06-17 12:36:59.990 [INFO ] com.benetech.rules.RulesApplication                - [logStarting:55] Starting RulesApplication v1.0-SNAPSHOT on DESKTOP-EOCO1V0 with PID 9656 (D:\51\python\project\instance\zyjk\EHR\controlRuleNew\config\healthRecordRules.jar started by ZY in D:\51\python\project\instance\zyjk\EHR\controlRuleNew) 
2020-06-17 12:36:59.993 [DEBUG] com.benetech.rules.RulesApplication                - [logStarting:56] Running with Spring Boot v2.2.1.RELEASE, Spring v5.2.1.RELEASE 
2020-06-17 12:36:59.995 [INFO ] com.benetech.rules.RulesApplication                - [logStartupProfileInfo:655] The following profiles are active: test 
2020-06-17 12:37:01.647 [INFO ] o.s.boot.web.embedded.tomcat.TomcatWebServer       - [initialize:92] Tomcat initialized with port(s): 8838 (http) 
2020-06-17 12:37:01.665 [INFO ] org.apache.coyote.http11.Http11NioProtocol         - [log:173] Initializing ProtocolHandler ["http-nio-8838"] 
2020-06-17 12:37:01.666 [INFO ] org.apache.catalina.core.StandardService           - [log:173] Starting service [Tomcat] 
2020-06-17 12:37:01.667 [INFO ] org.apache.catalina.core.StandardEngine            - [log:173] Starting Servlet engine: [Apache Tomcat/9.0.27] 
2020-06-17 12:37:01.745 [INFO ] o.a.c.c.C.[.[localhost].[/healthRecordRules]       - [log:173] Initializing Spring embedded WebApplicationContext 
2020-06-17 12:37:01.745 [INFO ] org.springframework.web.context.ContextLoader      - [prepareWebApplicationContext:284] Root WebApplicationContext: initialization completed in 1672 ms 
2020-06-17 12:37:01.829 [DEBUG] org.apache.ibatis.logging.LogFactory               - [setImplementation:135] Logging initialized using 'class org.apache.ibatis.logging.slf4j.Slf4jImpl' adapter. 
2020-06-17 12:37:02.105 [WARN ] org.mybatis.spring.SqlSessionFactoryBean           - [buildSqlSessionFactory:467] Can't find class in '[com.benetech.rules.*.entity]' package. Please check your configuration. 
2020-06-17 12:37:02.812 [INFO ] com.alibaba.druid.pool.DruidDataSource             - [init:930] {dataSource-1} inited 
2020-06-17 12:37:03.039 [DEBUG] c.b.r.m.e.mapper.RuleEngineMapper.getAllRules      - [debug:159] ==>  Preparing: select a.RuleId as ruleId, a.RuleSql as clazz from HrRule a join HrRuleProps b on a.RuleId = b.RuleId where -- RuleId in ('34278f71cf1d42c88158aaf637fa5203', '8d30baa03bfc4233a8f115c57a0ebf08', '63eb82a44bf64c96a0b9023fa2a3c9d9') a.RuleSql != '' and a.RuleSql is not null and b.Enable = 1  
2020-06-17 12:37:03.048 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 12:37:03.048 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 12:37:03.053 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 12:37:03.056 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 12:37:03.057 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 12:37:03.058 [DEBUG] c.b.r.m.e.mapper.RuleEngineMapper.getAllRules      - [debug:159] ==> Parameters:  
2020-06-17 12:37:03.062 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 12:37:03.065 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 12:37:03.065 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 12:37:03.069 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-17 12:37:03.075 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 12:37:03.075 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:37:03.081 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 12:37:03.085 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 12:37:03.085 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:37:03.090 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 12:37:03.100 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 12:37:03.100 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 12:37:03.100 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 12:37:03.101 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:37:03.107 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 12:37:03.112 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 12:37:03.112 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:37:03.117 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 12:37:03.123 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 12:37:03.124 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:37:03.128 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 12:37:03.132 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 12:37:03.132 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:37:03.141 [DEBUG] c.b.r.m.e.mapper.RuleEngineMapper.getAllRules      - [debug:159] <==      Total: 310 
2020-06-17 12:37:03.147 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 12:37:03.151 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 12:37:03.151 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 12:37:03.151 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 12:37:03.152 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:37:03.155 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 12:37:03.161 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 12:37:03.161 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:37:03.166 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 12:37:03.170 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 12:37:03.170 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:37:03.175 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 12:37:03.179 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 12:37:03.179 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:37:03.186 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 12:37:03.201 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:现住址长度异常长度>100字符（包含省市区、乡镇街道名称（如有）、村居委会名称（如有）、详细地址） 
2020-06-17 12:37:03.201 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:血型与RH血型逻辑不符同时满足以下条件： 1、个人基本信息表《血型》填写为“不详” 2、个人基本信息表《RH血型》填写为“阴性”或“阳性” 
2020-06-17 12:37:03.206 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-17 12:37:03.206 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 91665e0b2efa4f86aea807ec9f4883c3(String), 2020-06-17 12:37:03.205(Timestamp), 31011310200312009116(String), a58b2894635045b18a63c250d46ce8a8(String), 2020-06-17 12:37:03.205(Timestamp) 
2020-06-17 12:37:03.224 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 2 
2020-06-17 12:37:03.460 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [init:68] 加载规则：310 条 
2020-06-17 12:37:03.479 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.getAllCode    - [debug:159] ==>  Preparing: SELECT codeSysType AS type, code AS code, [value] AS value FROM tb_code_value WHERE code != '' AND [value] != ''  
2020-06-17 12:37:03.480 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.getAllCode    - [debug:159] ==> Parameters:  
2020-06-17 12:37:04.096 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.getAllCode    - [debug:159] <==      Total: 44881 
2020-06-17 12:37:04.128 [INFO ] c.b.r.m.m.service.impl.EhrModelBuildServiceImpl    - [init:96] 初始化字典类型: 467 种 
2020-06-17 12:37:04.128 [INFO ] c.b.r.m.m.service.impl.EhrModelBuildServiceImpl    - [init:97] 初始化字典: 44881 条 
2020-06-17 12:37:04.129 [ERROR] c.b.r.m.process.service.impl.QcProcessServiceImpl  - [init:44] 初始化线程池 
2020-06-17 12:37:04.276 [INFO ] o.s.scheduling.concurrent.ThreadPoolTaskExecutor   - [initialize:171] Initializing ExecutorService 'applicationTaskExecutor' 
2020-06-17 12:37:04.577 [INFO ] org.apache.coyote.http11.Http11NioProtocol         - [log:173] Starting ProtocolHandler ["http-nio-8838"] 
2020-06-17 12:37:04.588 [INFO ] org.apache.coyote.http11.Http11NioProtocol         - [log:173] Pausing ProtocolHandler ["http-nio-8838"] 
2020-06-17 12:37:04.589 [INFO ] org.apache.catalina.core.StandardService           - [log:173] Stopping service [Tomcat] 
2020-06-17 12:37:04.599 [INFO ] org.apache.coyote.http11.Http11NioProtocol         - [log:173] Stopping ProtocolHandler ["http-nio-8838"] 
2020-06-17 12:37:04.599 [INFO ] org.apache.coyote.http11.Http11NioProtocol         - [log:173] Destroying ProtocolHandler ["http-nio-8838"] 
2020-06-17 12:37:04.601 [INFO ] o.s.b.a.l.ConditionEvaluationReportLoggingListener - [logMessage:136]     Error starting ApplicationContext. To display the conditions report re-run your application with 'debug' enabled. 
2020-06-17 12:37:04.603 [ERROR] o.s.b.diagnostics.LoggingFailureAnalysisReporter   - [report:40]     ***************************  APPLICATION FAILED TO START  ***************************    Description:    Web server failed to start. Port 8838 was already in use.    Action:    Identify and stop the process that's listening on port 8838 or configure this application to listen on another port.   
2020-06-17 12:37:04.605 [INFO ] o.s.scheduling.concurrent.ThreadPoolTaskExecutor   - [shutdown:208] Shutting down ExecutorService 'applicationTaskExecutor' 
2020-06-17 12:37:04.610 [INFO ] com.alibaba.druid.pool.DruidDataSource             - [close:1825] {dataSource-1} closed 
2020-06-17 12:37:07.253 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 12:37:07.253 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 12:37:07.258 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 12:37:07.263 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 12:37:07.263 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 12:37:07.269 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 12:37:07.273 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 12:37:07.273 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 12:37:07.278 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-17 12:37:07.282 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 12:37:07.283 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:37:07.289 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 12:37:07.294 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 12:37:07.295 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:37:07.303 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 12:37:07.308 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 12:37:07.309 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 12:37:07.310 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 12:37:07.311 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:37:07.316 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 12:37:07.321 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 12:37:07.322 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:37:07.326 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 12:37:07.330 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 12:37:07.331 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:37:07.336 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 12:37:07.341 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 12:37:07.341 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:37:07.355 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 12:37:07.359 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 12:37:07.359 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 12:37:07.360 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 12:37:07.360 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:37:07.365 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 12:37:07.369 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 12:37:07.369 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:37:07.373 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 12:37:07.378 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 12:37:07.378 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:37:07.384 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 12:37:07.388 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 12:37:07.389 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:37:07.393 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 12:37:07.410 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:户籍地址长度异常长度>100字符（包含省市区、乡镇街道名称（如有）、村居委会名称（如有）、详细地址） 
2020-06-17 12:37:07.414 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:血型与RH血型逻辑不符同时满足以下条件： 1、个人基本信息表《血型》填写为“不详” 2、个人基本信息表《RH血型》填写为“阴性”或“阳性” 
2020-06-17 12:37:07.417 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-17 12:37:07.418 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 329b69c7855544e986fc0073b77fe9be(String), 2020-06-17 12:37:07.417(Timestamp), 31011310200312009116(String), a58b2894635045b18a63c250d46ce8a8(String), 2020-06-17 12:37:07.417(Timestamp) 
2020-06-17 12:37:07.454 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 2 
2020-06-17 12:37:10.677 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 12:37:10.678 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 12:37:10.683 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 12:37:10.687 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 12:37:10.687 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 12:37:10.691 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 12:37:10.695 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 12:37:10.696 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 12:37:10.700 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-17 12:37:10.704 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 12:37:10.705 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:37:10.709 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 12:37:10.713 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 12:37:10.713 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:37:10.719 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 12:37:10.723 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 12:37:10.723 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 12:37:10.723 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 12:37:10.723 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:37:10.728 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 12:37:10.732 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 12:37:10.732 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:37:10.737 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 12:37:10.741 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 12:37:10.741 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:37:10.746 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 12:37:10.750 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 12:37:10.750 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:37:10.765 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 12:37:10.769 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 12:37:10.769 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 12:37:10.769 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 12:37:10.770 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:37:10.775 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 12:37:10.780 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 12:37:10.781 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:37:10.785 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 12:37:10.790 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 12:37:10.790 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:37:10.795 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 12:37:10.799 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 12:37:10.799 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:37:10.805 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 12:37:10.818 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:现住址乡镇（街道）名称长度异常长度>100字符 
2020-06-17 12:37:10.820 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:现住址长度异常长度>100字符（包含省市区、乡镇街道名称（如有）、村居委会名称（如有）、详细地址） 
2020-06-17 12:37:10.821 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:血型与RH血型逻辑不符同时满足以下条件： 1、个人基本信息表《血型》填写为“不详” 2、个人基本信息表《RH血型》填写为“阴性”或“阳性” 
2020-06-17 12:37:10.823 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-17 12:37:10.824 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 40c92f3721704bb7a6eb42a8ca1976b6(String), 2020-06-17 12:37:10.823(Timestamp), 31011310200312009116(String), 91665e0b2efa4f86aea807ec9f4883c3(String), 2020-06-17 12:37:10.823(Timestamp), 31011310200312009116(String), a58b2894635045b18a63c250d46ce8a8(String), 2020-06-17 12:37:10.823(Timestamp) 
2020-06-17 12:37:10.844 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 3 
2020-06-17 12:37:13.990 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 12:37:13.990 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 12:37:13.995 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 12:37:13.999 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 12:37:14.000 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 12:37:14.005 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 12:37:14.011 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 12:37:14.011 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 12:37:14.017 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-17 12:37:14.021 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 12:37:14.022 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:37:14.027 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 12:37:14.032 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 12:37:14.033 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:37:14.039 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 12:37:14.044 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 12:37:14.045 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 12:37:14.046 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 12:37:14.047 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:37:14.052 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 12:37:14.058 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 12:37:14.059 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:37:14.066 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 12:37:14.074 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 12:37:14.075 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:37:14.082 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 12:37:14.088 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 12:37:14.089 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:37:14.106 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 12:37:14.115 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 12:37:14.116 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 12:37:14.117 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 12:37:14.118 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:37:14.123 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 12:37:14.128 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 12:37:14.130 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:37:14.134 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 12:37:14.140 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 12:37:14.141 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:37:14.147 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 12:37:14.153 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 12:37:14.154 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:37:14.159 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 12:37:14.195 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:现住址长度异常长度>100字符（包含省市区、乡镇街道名称（如有）、村居委会名称（如有）、详细地址） 
2020-06-17 12:37:14.196 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:现住址村（居）委会名称长度异常长度>100字符 
2020-06-17 12:37:14.196 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:血型与RH血型逻辑不符同时满足以下条件： 1、个人基本信息表《血型》填写为“不详” 2、个人基本信息表《RH血型》填写为“阴性”或“阳性” 
2020-06-17 12:37:14.201 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-17 12:37:14.202 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 91665e0b2efa4f86aea807ec9f4883c3(String), 2020-06-17 12:37:14.2(Timestamp), 31011310200312009116(String), 9df07515be3d4c2887e947c6ce5adace(String), 2020-06-17 12:37:14.2(Timestamp), 31011310200312009116(String), a58b2894635045b18a63c250d46ce8a8(String), 2020-06-17 12:37:14.2(Timestamp) 
2020-06-17 12:37:14.218 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 3 
2020-06-17 12:37:17.536 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 12:37:17.537 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 12:37:17.543 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 12:37:17.549 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 12:37:17.549 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 12:37:17.557 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 12:37:17.561 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 12:37:17.562 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 12:37:17.567 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-17 12:37:17.573 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 12:37:17.574 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:37:17.580 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 12:37:17.586 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 12:37:17.587 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:37:17.593 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 12:37:17.598 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 12:37:17.599 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 12:37:17.600 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 12:37:17.600 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:37:17.605 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 12:37:17.610 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 12:37:17.611 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:37:17.616 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 12:37:17.622 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 12:37:17.623 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:37:17.628 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 12:37:17.633 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 12:37:17.635 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:37:17.650 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 12:37:17.655 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 12:37:17.656 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 12:37:17.656 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 12:37:17.657 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:37:17.662 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 12:37:17.667 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 12:37:17.668 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:37:17.673 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 12:37:17.679 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 12:37:17.680 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:37:17.685 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 12:37:17.690 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 12:37:17.691 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:37:17.696 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 12:37:17.726 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:建档单位长度异常长度>100字符 
2020-06-17 12:37:17.730 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:血型与RH血型逻辑不符同时满足以下条件： 1、个人基本信息表《血型》填写为“不详” 2、个人基本信息表《RH血型》填写为“阴性”或“阳性” 
2020-06-17 12:37:17.734 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-17 12:37:17.734 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 403a97f9ec40406b9723b3c6845a6cee(String), 2020-06-17 12:37:17.733(Timestamp), 31011310200312009116(String), a58b2894635045b18a63c250d46ce8a8(String), 2020-06-17 12:37:17.733(Timestamp) 
2020-06-17 12:37:17.760 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 2 
2020-06-17 12:37:21.004 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 12:37:21.005 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 12:37:21.010 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 12:37:21.017 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 12:37:21.017 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 12:37:21.023 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 12:37:21.027 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 12:37:21.028 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 12:37:21.033 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-17 12:37:21.038 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 12:37:21.038 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:37:21.042 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 12:37:21.047 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 12:37:21.047 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:37:21.053 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 12:37:21.058 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 12:37:21.058 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 12:37:21.058 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 12:37:21.058 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:37:21.063 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 12:37:21.068 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 12:37:21.068 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:37:21.073 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 12:37:21.077 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 12:37:21.077 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:37:21.083 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 12:37:21.086 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 12:37:21.086 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:37:21.101 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 12:37:21.106 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 12:37:21.106 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 12:37:21.106 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 12:37:21.107 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:37:21.115 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 12:37:21.120 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 12:37:21.121 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:37:21.125 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 12:37:21.129 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 12:37:21.130 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:37:21.134 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 12:37:21.138 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 12:37:21.138 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:37:21.142 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 12:37:21.163 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:血型与RH血型逻辑不符同时满足以下条件： 1、个人基本信息表《血型》填写为“不详” 2、个人基本信息表《RH血型》填写为“阴性”或“阳性” 
2020-06-17 12:37:21.166 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1)  
2020-06-17 12:37:21.166 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), a58b2894635045b18a63c250d46ce8a8(String), 2020-06-17 12:37:21.166(Timestamp) 
2020-06-17 12:37:21.184 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 1 
2020-06-17 12:37:24.579 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 12:37:24.580 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 12:37:24.585 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 12:37:24.590 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 12:37:24.590 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 12:37:24.598 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 12:37:24.602 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 12:37:24.603 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 12:37:24.611 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-17 12:37:24.616 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 12:37:24.616 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:37:24.623 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 12:37:24.628 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 12:37:24.628 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:37:24.634 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 12:37:24.637 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 12:37:24.637 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 12:37:24.638 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 12:37:24.638 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:37:24.642 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 12:37:24.646 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 12:37:24.647 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:37:24.651 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 12:37:24.656 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 12:37:24.656 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:37:24.661 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 12:37:24.666 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 12:37:24.667 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:37:24.687 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 12:37:24.692 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 12:37:24.692 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 12:37:24.693 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 12:37:24.693 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:37:24.697 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 12:37:24.701 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 12:37:24.703 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:37:24.707 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 12:37:24.711 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 12:37:24.712 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:37:24.716 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 12:37:24.721 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 12:37:24.722 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:37:24.727 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 12:37:24.746 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:责任医生长度异常长度>50字符 
2020-06-17 12:37:24.747 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:血型与RH血型逻辑不符同时满足以下条件： 1、个人基本信息表《血型》填写为“不详” 2、个人基本信息表《RH血型》填写为“阴性”或“阳性” 
2020-06-17 12:37:24.750 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-17 12:37:24.751 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 9042bba97fb74b558de96e35ab2ffdc2(String), 2020-06-17 12:37:24.75(Timestamp), 31011310200312009116(String), a58b2894635045b18a63c250d46ce8a8(String), 2020-06-17 12:37:24.75(Timestamp) 
2020-06-17 12:37:24.767 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 2 
2020-06-17 12:37:28.017 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 12:37:28.018 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 12:37:28.023 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 12:37:28.028 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 12:37:28.029 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 12:37:28.033 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 12:37:28.038 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 12:37:28.038 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 12:37:28.043 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-17 12:37:28.048 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 12:37:28.049 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:37:28.054 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 12:37:28.060 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 12:37:28.060 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:37:28.066 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 12:37:28.071 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 12:37:28.071 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 12:37:28.072 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 12:37:28.072 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:37:28.077 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 12:37:28.082 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 12:37:28.083 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:37:28.087 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 12:37:28.092 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 12:37:28.093 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:37:28.097 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 12:37:28.102 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 12:37:28.103 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:37:28.118 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 12:37:28.123 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 12:37:28.124 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 12:37:28.124 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 12:37:28.125 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:37:28.130 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 12:37:28.135 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 12:37:28.136 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:37:28.142 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 12:37:28.146 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 12:37:28.147 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:37:28.151 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 12:37:28.156 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 12:37:28.157 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:37:28.164 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 12:37:28.183 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:个人基本信息表工作单位工作单位不为汉字 
2020-06-17 12:37:28.188 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:血型与RH血型逻辑不符同时满足以下条件： 1、个人基本信息表《血型》填写为“不详” 2、个人基本信息表《RH血型》填写为“阴性”或“阳性” 
2020-06-17 12:37:28.193 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-17 12:37:28.194 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 4ad5f41e777d499894964fe735a4ed46(String), 2020-06-17 12:37:28.192(Timestamp), 31011310200312009116(String), a58b2894635045b18a63c250d46ce8a8(String), 2020-06-17 12:37:28.192(Timestamp) 
2020-06-17 12:37:28.217 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 2 
2020-06-17 12:37:31.492 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 12:37:31.492 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 12:37:31.498 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 12:37:31.503 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 12:37:31.503 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 12:37:31.508 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 12:37:31.512 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 12:37:31.513 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 12:37:31.518 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-17 12:37:31.522 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 12:37:31.522 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:37:31.528 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 12:37:31.534 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 12:37:31.535 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:37:31.541 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 12:37:31.547 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 12:37:31.548 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 12:37:31.549 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 12:37:31.549 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:37:31.554 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 12:37:31.560 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 12:37:31.561 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:37:31.566 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 12:37:31.571 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 12:37:31.573 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:37:31.578 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 12:37:31.584 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 12:37:31.585 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:37:31.599 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 12:37:31.604 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 12:37:31.604 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 12:37:31.605 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 12:37:31.606 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:37:31.611 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 12:37:31.617 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 12:37:31.618 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:37:31.624 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 12:37:31.629 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 12:37:31.630 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:37:31.636 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 12:37:31.642 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 12:37:31.643 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:37:31.649 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 12:37:31.676 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:联系人姓名填写为数字同时满足以下条件： 1、联系人姓名不为空值 2、联系人姓名为纯数字 
2020-06-17 12:37:31.682 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:血型与RH血型逻辑不符同时满足以下条件： 1、个人基本信息表《血型》填写为“不详” 2、个人基本信息表《RH血型》填写为“阴性”或“阳性” 
2020-06-17 12:37:31.687 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-17 12:37:31.687 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 1a7e1f2e0bce421585a1fad889411dd4(String), 2020-06-17 12:37:31.686(Timestamp), 31011310200312009116(String), a58b2894635045b18a63c250d46ce8a8(String), 2020-06-17 12:37:31.686(Timestamp) 
2020-06-17 12:37:31.707 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 2 
2020-06-17 12:37:34.860 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 12:37:34.860 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 12:37:34.865 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 12:37:34.869 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 12:37:34.870 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 12:37:34.874 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 12:37:34.878 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 12:37:34.878 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 12:37:34.883 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-17 12:37:34.887 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 12:37:34.887 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:37:34.891 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 12:37:34.896 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 12:37:34.896 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:37:34.900 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 12:37:34.905 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 12:37:34.905 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 12:37:34.905 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 12:37:34.905 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:37:34.910 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 12:37:34.914 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 12:37:34.914 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:37:34.919 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 12:37:34.923 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 12:37:34.923 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:37:34.928 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 12:37:34.933 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 12:37:34.933 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:37:34.947 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 12:37:34.952 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 12:37:34.952 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 12:37:34.953 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 12:37:34.953 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:37:34.958 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 12:37:34.962 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 12:37:34.963 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:37:34.967 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 12:37:34.972 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 12:37:34.972 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:37:34.977 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 12:37:34.982 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 12:37:34.983 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:37:34.988 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 12:37:35.008 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:血型与RH血型逻辑不符同时满足以下条件： 1、个人基本信息表《血型》填写为“不详” 2、个人基本信息表《RH血型》填写为“阴性”或“阳性” 
2020-06-17 12:37:35.012 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1)  
2020-06-17 12:37:35.012 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), a58b2894635045b18a63c250d46ce8a8(String), 2020-06-17 12:37:35.012(Timestamp) 
2020-06-17 12:37:35.031 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 1 
2020-06-17 12:37:38.258 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 12:37:38.259 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 12:37:38.264 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 12:37:38.269 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 12:37:38.270 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 12:37:38.275 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 12:37:38.280 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 12:37:38.281 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 12:37:38.288 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-17 12:37:38.293 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 12:37:38.294 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:37:38.300 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 12:37:38.306 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 12:37:38.307 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:37:38.313 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 12:37:38.318 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 12:37:38.319 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 12:37:38.320 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 12:37:38.321 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:37:38.326 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 12:37:38.332 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 12:37:38.334 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:37:38.339 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 12:37:38.344 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 12:37:38.345 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:37:38.351 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 12:37:38.356 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 12:37:38.358 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:37:38.374 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 12:37:38.382 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 12:37:38.383 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 12:37:38.383 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 12:37:38.384 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:37:38.391 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 12:37:38.397 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 12:37:38.398 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:37:38.403 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 12:37:38.409 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 12:37:38.410 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:37:38.419 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 12:37:38.427 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 12:37:38.427 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:37:38.435 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 12:37:38.458 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:血型与RH血型逻辑不符同时满足以下条件： 1、个人基本信息表《血型》填写为“不详” 2、个人基本信息表《RH血型》填写为“阴性”或“阳性” 
2020-06-17 12:37:38.461 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1)  
2020-06-17 12:37:38.462 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), a58b2894635045b18a63c250d46ce8a8(String), 2020-06-17 12:37:38.461(Timestamp) 
2020-06-17 12:37:38.473 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 1 
2020-06-17 12:37:41.679 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 12:37:41.679 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 12:37:41.685 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 12:37:41.691 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 12:37:41.691 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 12:37:41.698 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 12:37:41.703 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 12:37:41.703 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 12:37:41.711 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-17 12:37:41.717 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 12:37:41.717 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:37:41.723 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 12:37:41.728 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 12:37:41.729 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:37:41.735 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 12:37:41.741 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 12:37:41.741 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 12:37:41.742 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 12:37:41.742 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:37:41.748 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 12:37:41.755 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 12:37:41.756 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:37:41.764 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 12:37:41.769 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 12:37:41.769 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:37:41.774 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 12:37:41.779 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 12:37:41.779 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:37:41.794 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 12:37:41.799 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 12:37:41.799 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 12:37:41.799 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 12:37:41.800 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:37:41.808 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 12:37:41.814 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 12:37:41.815 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:37:41.819 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 12:37:41.824 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 12:37:41.826 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:37:41.830 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 12:37:41.834 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 12:37:41.835 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:37:41.840 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 12:37:41.863 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:血型与RH血型逻辑不符同时满足以下条件： 1、个人基本信息表《血型》填写为“不详” 2、个人基本信息表《RH血型》填写为“阴性”或“阳性” 
2020-06-17 12:37:41.867 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1)  
2020-06-17 12:37:41.868 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), a58b2894635045b18a63c250d46ce8a8(String), 2020-06-17 12:37:41.867(Timestamp) 
2020-06-17 12:37:41.881 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 1 
2020-06-17 12:37:45.052 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 12:37:45.052 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 12:37:45.068 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 12:37:45.073 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 12:37:45.073 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 12:37:45.080 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 12:37:45.088 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 12:37:45.088 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 12:37:45.095 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-17 12:37:45.102 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 12:37:45.102 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:37:45.109 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 12:37:45.113 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 12:37:45.113 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:37:45.119 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 12:37:45.125 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 12:37:45.125 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 12:37:45.127 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 12:37:45.128 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:37:45.134 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 12:37:45.139 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 12:37:45.140 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:37:45.146 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 12:37:45.152 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 12:37:45.153 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:37:45.158 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 12:37:45.164 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 12:37:45.165 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:37:45.179 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 12:37:45.186 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 12:37:45.187 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 12:37:45.188 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 12:37:45.189 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:37:45.195 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 12:37:45.200 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 12:37:45.201 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:37:45.208 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 12:37:45.213 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 12:37:45.215 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:37:45.221 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 12:37:45.226 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 12:37:45.227 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:37:45.234 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 12:37:45.273 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:血型与RH血型逻辑不符同时满足以下条件： 1、个人基本信息表《血型》填写为“不详” 2、个人基本信息表《RH血型》填写为“阴性”或“阳性” 
2020-06-17 12:37:45.276 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1)  
2020-06-17 12:37:45.277 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), a58b2894635045b18a63c250d46ce8a8(String), 2020-06-17 12:37:45.276(Timestamp) 
2020-06-17 12:37:45.288 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 1 
2020-06-17 12:37:48.622 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 12:37:48.622 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 12:37:48.635 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 12:37:48.639 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 12:37:48.640 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 12:37:48.644 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 12:37:48.648 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 12:37:48.648 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 12:37:48.653 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-17 12:37:48.657 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 12:37:48.658 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:37:48.663 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 12:37:48.667 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 12:37:48.668 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:37:48.674 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 12:37:48.678 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 12:37:48.679 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 12:37:48.679 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 12:37:48.680 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:37:48.684 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 12:37:48.688 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 12:37:48.689 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:37:48.693 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 12:37:48.698 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 12:37:48.698 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:37:48.704 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 12:37:48.709 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 12:37:48.710 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:37:48.724 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 12:37:48.728 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 12:37:48.729 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 12:37:48.729 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 12:37:48.730 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:37:48.734 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 12:37:48.739 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 12:37:48.740 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:37:48.745 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 12:37:48.751 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 12:37:48.751 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:37:48.764 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 12:37:48.773 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 12:37:48.774 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:37:48.779 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 12:37:48.793 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:血型与RH血型逻辑不符同时满足以下条件： 1、个人基本信息表《血型》填写为“不详” 2、个人基本信息表《RH血型》填写为“阴性”或“阳性” 
2020-06-17 12:37:48.795 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1)  
2020-06-17 12:37:48.796 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), a58b2894635045b18a63c250d46ce8a8(String), 2020-06-17 12:37:48.795(Timestamp) 
2020-06-17 12:37:48.822 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 1 
2020-06-17 12:37:52.439 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 12:37:52.439 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 12:37:52.444 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 12:37:52.449 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 12:37:52.449 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 12:37:52.454 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 12:37:52.459 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 12:37:52.459 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 12:37:52.464 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-17 12:37:52.468 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 12:37:52.469 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:37:52.473 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 12:37:52.478 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 12:37:52.478 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:37:52.484 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 12:37:52.488 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 12:37:52.488 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 12:37:52.489 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 12:37:52.489 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:37:52.495 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 12:37:52.499 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 12:37:52.500 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:37:52.505 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 12:37:52.509 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 12:37:52.510 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:37:52.515 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 12:37:52.520 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 12:37:52.521 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:37:52.535 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 12:37:52.539 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 12:37:52.540 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 12:37:52.540 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 12:37:52.541 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:37:52.546 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 12:37:52.550 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 12:37:52.551 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:37:52.556 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 12:37:52.560 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 12:37:52.561 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:37:52.566 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 12:37:52.571 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 12:37:52.572 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:37:52.577 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 12:37:52.597 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:个人基本信息表既往史既往史疾病确诊时间未填写 
2020-06-17 12:37:52.600 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:个人基本信息表既往史既往史疾病确诊时间填写不规范 
2020-06-17 12:37:52.601 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:血型与RH血型逻辑不符同时满足以下条件： 1、个人基本信息表《血型》填写为“不详” 2、个人基本信息表《RH血型》填写为“阴性”或“阳性” 
2020-06-17 12:37:52.605 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-17 12:37:52.606 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 6302b0fcdcd7482099581602a1fec501(String), 2020-06-17 12:37:52.605(Timestamp), 31011310200312009116(String), 923bfb7880204efa8f26fd200d1bd17e(String), 2020-06-17 12:37:52.605(Timestamp), 31011310200312009116(String), a58b2894635045b18a63c250d46ce8a8(String), 2020-06-17 12:37:52.605(Timestamp) 
2020-06-17 12:37:52.663 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 3 
2020-06-17 12:41:29.685 [INFO ] com.benetech.rules.RulesApplication                - [logStarting:55] Starting RulesApplication v1.0-SNAPSHOT on DESKTOP-EOCO1V0 with PID 7868 (D:\51\python\project\instance\zyjk\EHR\controlRuleNew\config\healthRecordRules.jar started by ZY in D:\51\python\project\instance\zyjk\EHR\controlRuleNew) 
2020-06-17 12:41:29.688 [DEBUG] com.benetech.rules.RulesApplication                - [logStarting:56] Running with Spring Boot v2.2.1.RELEASE, Spring v5.2.1.RELEASE 
2020-06-17 12:41:29.688 [INFO ] com.benetech.rules.RulesApplication                - [logStartupProfileInfo:655] The following profiles are active: test 
2020-06-17 12:41:31.248 [INFO ] o.s.boot.web.embedded.tomcat.TomcatWebServer       - [initialize:92] Tomcat initialized with port(s): 8838 (http) 
2020-06-17 12:41:31.260 [INFO ] org.apache.coyote.http11.Http11NioProtocol         - [log:173] Initializing ProtocolHandler ["http-nio-8838"] 
2020-06-17 12:41:31.261 [INFO ] org.apache.catalina.core.StandardService           - [log:173] Starting service [Tomcat] 
2020-06-17 12:41:31.261 [INFO ] org.apache.catalina.core.StandardEngine            - [log:173] Starting Servlet engine: [Apache Tomcat/9.0.27] 
2020-06-17 12:41:31.333 [INFO ] o.a.c.c.C.[.[localhost].[/healthRecordRules]       - [log:173] Initializing Spring embedded WebApplicationContext 
2020-06-17 12:41:31.333 [INFO ] org.springframework.web.context.ContextLoader      - [prepareWebApplicationContext:284] Root WebApplicationContext: initialization completed in 1561 ms 
2020-06-17 12:41:31.416 [DEBUG] org.apache.ibatis.logging.LogFactory               - [setImplementation:135] Logging initialized using 'class org.apache.ibatis.logging.slf4j.Slf4jImpl' adapter. 
2020-06-17 12:41:31.672 [WARN ] org.mybatis.spring.SqlSessionFactoryBean           - [buildSqlSessionFactory:467] Can't find class in '[com.benetech.rules.*.entity]' package. Please check your configuration. 
2020-06-17 12:41:32.353 [INFO ] com.alibaba.druid.pool.DruidDataSource             - [init:930] {dataSource-1} inited 
2020-06-17 12:41:32.572 [DEBUG] c.b.r.m.e.mapper.RuleEngineMapper.getAllRules      - [debug:159] ==>  Preparing: select a.RuleId as ruleId, a.RuleSql as clazz from HrRule a join HrRuleProps b on a.RuleId = b.RuleId where -- RuleId in ('34278f71cf1d42c88158aaf637fa5203', '8d30baa03bfc4233a8f115c57a0ebf08', '63eb82a44bf64c96a0b9023fa2a3c9d9') a.RuleSql != '' and a.RuleSql is not null and b.Enable = 1  
2020-06-17 12:41:32.594 [DEBUG] c.b.r.m.e.mapper.RuleEngineMapper.getAllRules      - [debug:159] ==> Parameters:  
2020-06-17 12:41:32.671 [DEBUG] c.b.r.m.e.mapper.RuleEngineMapper.getAllRules      - [debug:159] <==      Total: 310 
2020-06-17 12:41:32.807 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 12:41:32.807 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 12:41:32.812 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 12:41:32.815 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 12:41:32.816 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 12:41:32.822 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 12:41:32.826 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 12:41:32.826 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 12:41:32.831 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-17 12:41:32.836 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 12:41:32.836 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:41:32.841 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 12:41:32.845 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 12:41:32.845 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:41:32.852 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 12:41:32.856 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 12:41:32.856 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 12:41:32.856 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 12:41:32.857 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:41:32.861 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 12:41:32.865 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 12:41:32.865 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:41:32.870 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 12:41:32.874 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 12:41:32.874 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:41:32.879 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 12:41:32.883 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 12:41:32.883 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:41:32.898 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 12:41:32.903 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 12:41:32.903 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 12:41:32.903 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 12:41:32.904 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:41:32.908 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 12:41:32.908 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [init:68] 加载规则：310 条 
2020-06-17 12:41:32.912 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 12:41:32.912 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:41:32.916 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 12:41:32.921 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 12:41:32.921 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:41:32.925 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.getAllCode    - [debug:159] ==>  Preparing: SELECT codeSysType AS type, code AS code, [value] AS value FROM tb_code_value WHERE code != '' AND [value] != ''  
2020-06-17 12:41:32.925 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.getAllCode    - [debug:159] ==> Parameters:  
2020-06-17 12:41:32.927 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 12:41:32.935 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 12:41:32.935 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:41:32.942 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 12:41:32.968 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:现住址长度异常长度>100字符（包含省市区、乡镇街道名称（如有）、村居委会名称（如有）、详细地址） 
2020-06-17 12:41:32.969 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:血型与RH血型逻辑不符同时满足以下条件： 1、个人基本信息表《血型》填写为“不详” 2、个人基本信息表《RH血型》填写为“阴性”或“阳性” 
2020-06-17 12:41:32.973 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-17 12:41:32.973 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 91665e0b2efa4f86aea807ec9f4883c3(String), 2020-06-17 12:41:32.972(Timestamp), 31011310200312009116(String), a58b2894635045b18a63c250d46ce8a8(String), 2020-06-17 12:41:32.972(Timestamp) 
2020-06-17 12:41:32.983 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 2 
2020-06-17 12:41:33.371 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.getAllCode    - [debug:159] <==      Total: 44881 
2020-06-17 12:41:33.408 [INFO ] c.b.r.m.m.service.impl.EhrModelBuildServiceImpl    - [init:96] 初始化字典类型: 467 种 
2020-06-17 12:41:33.408 [INFO ] c.b.r.m.m.service.impl.EhrModelBuildServiceImpl    - [init:97] 初始化字典: 44881 条 
2020-06-17 12:41:33.409 [ERROR] c.b.r.m.process.service.impl.QcProcessServiceImpl  - [init:44] 初始化线程池 
2020-06-17 12:41:33.543 [INFO ] o.s.scheduling.concurrent.ThreadPoolTaskExecutor   - [initialize:171] Initializing ExecutorService 'applicationTaskExecutor' 
2020-06-17 12:41:33.785 [INFO ] org.apache.coyote.http11.Http11NioProtocol         - [log:173] Starting ProtocolHandler ["http-nio-8838"] 
2020-06-17 12:41:33.801 [INFO ] org.apache.coyote.http11.Http11NioProtocol         - [log:173] Pausing ProtocolHandler ["http-nio-8838"] 
2020-06-17 12:41:33.801 [INFO ] org.apache.catalina.core.StandardService           - [log:173] Stopping service [Tomcat] 
2020-06-17 12:41:33.805 [INFO ] org.apache.coyote.http11.Http11NioProtocol         - [log:173] Stopping ProtocolHandler ["http-nio-8838"] 
2020-06-17 12:41:33.806 [INFO ] org.apache.coyote.http11.Http11NioProtocol         - [log:173] Destroying ProtocolHandler ["http-nio-8838"] 
2020-06-17 12:41:33.807 [INFO ] o.s.b.a.l.ConditionEvaluationReportLoggingListener - [logMessage:136]     Error starting ApplicationContext. To display the conditions report re-run your application with 'debug' enabled. 
2020-06-17 12:41:33.809 [ERROR] o.s.b.diagnostics.LoggingFailureAnalysisReporter   - [report:40]     ***************************  APPLICATION FAILED TO START  ***************************    Description:    Web server failed to start. Port 8838 was already in use.    Action:    Identify and stop the process that's listening on port 8838 or configure this application to listen on another port.   
2020-06-17 12:41:33.814 [INFO ] o.s.scheduling.concurrent.ThreadPoolTaskExecutor   - [shutdown:208] Shutting down ExecutorService 'applicationTaskExecutor' 
2020-06-17 12:41:33.820 [INFO ] com.alibaba.druid.pool.DruidDataSource             - [close:1825] {dataSource-1} closed 
2020-06-17 12:41:36.389 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 12:41:36.390 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 12:41:36.395 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 12:41:36.400 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 12:41:36.401 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 12:41:36.406 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 12:41:36.411 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 12:41:36.411 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 12:41:36.416 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-17 12:41:36.420 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 12:41:36.420 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:41:36.425 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 12:41:36.429 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 12:41:36.429 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:41:36.434 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 12:41:36.438 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 12:41:36.439 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 12:41:36.439 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 12:41:36.439 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:41:36.444 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 12:41:36.448 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 12:41:36.448 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:41:36.452 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 12:41:36.457 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 12:41:36.458 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:41:36.467 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 12:41:36.471 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 12:41:36.471 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:41:36.487 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 12:41:36.497 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 12:41:36.498 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 12:41:36.498 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 12:41:36.499 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:41:36.504 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 12:41:36.509 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 12:41:36.510 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:41:36.516 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 12:41:36.520 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 12:41:36.521 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:41:36.527 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 12:41:36.531 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 12:41:36.532 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:41:36.537 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 12:41:36.557 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:户籍地址长度异常长度>100字符（包含省市区、乡镇街道名称（如有）、村居委会名称（如有）、详细地址） 
2020-06-17 12:41:36.562 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:血型与RH血型逻辑不符同时满足以下条件： 1、个人基本信息表《血型》填写为“不详” 2、个人基本信息表《RH血型》填写为“阴性”或“阳性” 
2020-06-17 12:41:36.566 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-17 12:41:36.566 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 329b69c7855544e986fc0073b77fe9be(String), 2020-06-17 12:41:36.565(Timestamp), 31011310200312009116(String), a58b2894635045b18a63c250d46ce8a8(String), 2020-06-17 12:41:36.565(Timestamp) 
2020-06-17 12:41:36.606 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 2 
2020-06-17 12:41:39.879 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 12:41:39.880 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 12:41:39.886 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 12:41:39.891 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 12:41:39.892 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 12:41:39.897 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 12:41:39.901 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 12:41:39.901 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 12:41:39.906 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-17 12:41:39.910 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 12:41:39.910 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:41:39.915 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 12:41:39.919 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 12:41:39.919 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:41:39.924 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 12:41:39.929 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 12:41:39.929 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 12:41:39.930 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 12:41:39.930 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:41:39.935 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 12:41:39.939 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 12:41:39.940 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:41:39.946 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 12:41:39.951 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 12:41:39.952 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:41:39.955 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 12:41:39.961 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 12:41:39.961 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:41:39.975 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 12:41:39.980 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 12:41:39.980 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 12:41:39.980 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 12:41:39.981 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:41:39.985 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 12:41:39.991 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 12:41:39.991 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:41:39.996 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 12:41:40.001 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 12:41:40.002 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:41:40.006 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 12:41:40.011 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 12:41:40.011 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:41:40.016 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 12:41:40.030 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:现住址乡镇（街道）名称长度异常长度>100字符 
2020-06-17 12:41:40.033 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:现住址长度异常长度>100字符（包含省市区、乡镇街道名称（如有）、村居委会名称（如有）、详细地址） 
2020-06-17 12:41:40.034 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:血型与RH血型逻辑不符同时满足以下条件： 1、个人基本信息表《血型》填写为“不详” 2、个人基本信息表《RH血型》填写为“阴性”或“阳性” 
2020-06-17 12:41:40.037 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-17 12:41:40.037 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 40c92f3721704bb7a6eb42a8ca1976b6(String), 2020-06-17 12:41:40.036(Timestamp), 31011310200312009116(String), 91665e0b2efa4f86aea807ec9f4883c3(String), 2020-06-17 12:41:40.036(Timestamp), 31011310200312009116(String), a58b2894635045b18a63c250d46ce8a8(String), 2020-06-17 12:41:40.036(Timestamp) 
2020-06-17 12:41:40.063 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 3 
2020-06-17 12:41:43.277 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 12:41:43.277 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 12:41:43.282 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 12:41:43.286 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 12:41:43.286 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 12:41:43.291 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 12:41:43.296 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 12:41:43.296 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 12:41:43.301 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-17 12:41:43.306 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 12:41:43.306 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:41:43.311 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 12:41:43.315 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 12:41:43.316 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:41:43.326 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 12:41:43.332 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 12:41:43.332 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 12:41:43.333 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 12:41:43.334 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:41:43.339 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 12:41:43.345 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 12:41:43.346 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:41:43.357 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 12:41:43.373 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 12:41:43.375 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:41:43.381 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 12:41:43.386 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 12:41:43.386 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:41:43.400 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 12:41:43.405 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 12:41:43.405 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 12:41:43.405 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 12:41:43.406 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:41:43.410 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 12:41:43.415 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 12:41:43.415 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:41:43.420 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 12:41:43.425 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 12:41:43.425 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:41:43.430 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 12:41:43.435 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 12:41:43.435 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:41:43.439 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 12:41:43.468 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:现住址长度异常长度>100字符（包含省市区、乡镇街道名称（如有）、村居委会名称（如有）、详细地址） 
2020-06-17 12:41:43.470 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:现住址村（居）委会名称长度异常长度>100字符 
2020-06-17 12:41:43.471 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:血型与RH血型逻辑不符同时满足以下条件： 1、个人基本信息表《血型》填写为“不详” 2、个人基本信息表《RH血型》填写为“阴性”或“阳性” 
2020-06-17 12:41:43.477 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-17 12:41:43.478 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 91665e0b2efa4f86aea807ec9f4883c3(String), 2020-06-17 12:41:43.477(Timestamp), 31011310200312009116(String), 9df07515be3d4c2887e947c6ce5adace(String), 2020-06-17 12:41:43.477(Timestamp), 31011310200312009116(String), a58b2894635045b18a63c250d46ce8a8(String), 2020-06-17 12:41:43.477(Timestamp) 
2020-06-17 12:41:43.506 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 3 
2020-06-17 12:41:46.736 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 12:41:46.736 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 12:41:46.741 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 12:41:46.745 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 12:41:46.745 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 12:41:46.749 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 12:41:46.753 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 12:41:46.754 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 12:41:46.760 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-17 12:41:46.764 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 12:41:46.765 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:41:46.768 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 12:41:46.773 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 12:41:46.773 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:41:46.779 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 12:41:46.783 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 12:41:46.783 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 12:41:46.783 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 12:41:46.784 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:41:46.788 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 12:41:46.793 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 12:41:46.793 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:41:46.797 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 12:41:46.801 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 12:41:46.802 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:41:46.806 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 12:41:46.810 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 12:41:46.811 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:41:46.828 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 12:41:46.832 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 12:41:46.832 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 12:41:46.832 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 12:41:46.832 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:41:46.837 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 12:41:46.841 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 12:41:46.841 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:41:46.846 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 12:41:46.850 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 12:41:46.850 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:41:46.856 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 12:41:46.860 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 12:41:46.860 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:41:46.865 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 12:41:46.887 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:建档单位长度异常长度>100字符 
2020-06-17 12:41:46.890 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:血型与RH血型逻辑不符同时满足以下条件： 1、个人基本信息表《血型》填写为“不详” 2、个人基本信息表《RH血型》填写为“阴性”或“阳性” 
2020-06-17 12:41:46.892 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-17 12:41:46.893 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 403a97f9ec40406b9723b3c6845a6cee(String), 2020-06-17 12:41:46.892(Timestamp), 31011310200312009116(String), a58b2894635045b18a63c250d46ce8a8(String), 2020-06-17 12:41:46.892(Timestamp) 
2020-06-17 12:41:46.907 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 2 
2020-06-17 12:41:50.220 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 12:41:50.221 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 12:41:50.225 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 12:41:50.230 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 12:41:50.231 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 12:41:50.243 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 12:41:50.248 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 12:41:50.249 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 12:41:50.253 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-17 12:41:50.258 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 12:41:50.258 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:41:50.262 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 12:41:50.267 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 12:41:50.267 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:41:50.273 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 12:41:50.277 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 12:41:50.277 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 12:41:50.278 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 12:41:50.278 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:41:50.283 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 12:41:50.291 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 12:41:50.292 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:41:50.297 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 12:41:50.301 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 12:41:50.301 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:41:50.306 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 12:41:50.310 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 12:41:50.311 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:41:50.325 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 12:41:50.330 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 12:41:50.330 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 12:41:50.331 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 12:41:50.331 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:41:50.335 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 12:41:50.341 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 12:41:50.341 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:41:50.347 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 12:41:50.352 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 12:41:50.353 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:41:50.358 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 12:41:50.362 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 12:41:50.362 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:41:50.367 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 12:41:50.386 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:血型与RH血型逻辑不符同时满足以下条件： 1、个人基本信息表《血型》填写为“不详” 2、个人基本信息表《RH血型》填写为“阴性”或“阳性” 
2020-06-17 12:41:50.389 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1)  
2020-06-17 12:41:50.390 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), a58b2894635045b18a63c250d46ce8a8(String), 2020-06-17 12:41:50.389(Timestamp) 
2020-06-17 12:41:50.411 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 1 
2020-06-17 12:41:53.673 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 12:41:53.674 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 12:41:53.681 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 12:41:53.684 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 12:41:53.685 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 12:41:53.690 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 12:41:53.695 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 12:41:53.695 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 12:41:53.700 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-17 12:41:53.706 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 12:41:53.707 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:41:53.712 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 12:41:53.716 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 12:41:53.717 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:41:53.723 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 12:41:53.727 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 12:41:53.729 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 12:41:53.729 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 12:41:53.730 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:41:53.734 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 12:41:53.738 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 12:41:53.739 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:41:53.745 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 12:41:53.749 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 12:41:53.750 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:41:53.755 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 12:41:53.759 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 12:41:53.760 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:41:53.775 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 12:41:53.780 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 12:41:53.780 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 12:41:53.781 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 12:41:53.781 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:41:53.786 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 12:41:53.791 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 12:41:53.792 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:41:53.796 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 12:41:53.801 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 12:41:53.802 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:41:53.807 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 12:41:53.811 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 12:41:53.812 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:41:53.817 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 12:41:53.838 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:责任医生长度异常长度>50字符 
2020-06-17 12:41:53.839 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:血型与RH血型逻辑不符同时满足以下条件： 1、个人基本信息表《血型》填写为“不详” 2、个人基本信息表《RH血型》填写为“阴性”或“阳性” 
2020-06-17 12:41:53.844 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-17 12:41:53.844 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 9042bba97fb74b558de96e35ab2ffdc2(String), 2020-06-17 12:41:53.843(Timestamp), 31011310200312009116(String), a58b2894635045b18a63c250d46ce8a8(String), 2020-06-17 12:41:53.843(Timestamp) 
2020-06-17 12:41:53.872 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 2 
2020-06-17 12:41:57.158 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 12:41:57.158 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 12:41:57.164 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 12:41:57.172 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 12:41:57.172 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 12:41:57.177 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 12:41:57.181 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 12:41:57.182 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 12:41:57.186 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-17 12:41:57.191 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 12:41:57.191 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:41:57.195 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 12:41:57.200 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 12:41:57.201 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:41:57.206 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 12:41:57.210 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 12:41:57.210 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 12:41:57.210 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 12:41:57.211 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:41:57.216 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 12:41:57.221 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 12:41:57.221 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:41:57.225 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 12:41:57.230 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 12:41:57.230 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:41:57.235 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 12:41:57.241 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 12:41:57.241 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:41:57.256 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 12:41:57.261 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 12:41:57.261 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 12:41:57.261 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 12:41:57.262 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:41:57.266 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 12:41:57.271 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 12:41:57.271 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:41:57.277 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 12:41:57.288 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 12:41:57.288 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:41:57.293 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 12:41:57.297 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 12:41:57.297 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:41:57.302 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 12:41:57.314 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:个人基本信息表工作单位工作单位不为汉字 
2020-06-17 12:41:57.316 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:血型与RH血型逻辑不符同时满足以下条件： 1、个人基本信息表《血型》填写为“不详” 2、个人基本信息表《RH血型》填写为“阴性”或“阳性” 
2020-06-17 12:41:57.318 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-17 12:41:57.319 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 4ad5f41e777d499894964fe735a4ed46(String), 2020-06-17 12:41:57.318(Timestamp), 31011310200312009116(String), a58b2894635045b18a63c250d46ce8a8(String), 2020-06-17 12:41:57.318(Timestamp) 
2020-06-17 12:41:57.329 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 2 
2020-06-17 12:42:00.577 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 12:42:00.577 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 12:42:00.582 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 12:42:00.587 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 12:42:00.587 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 12:42:00.592 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 12:42:00.596 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 12:42:00.597 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 12:42:00.601 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-17 12:42:00.605 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 12:42:00.605 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:42:00.610 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 12:42:00.614 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 12:42:00.614 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:42:00.620 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 12:42:00.625 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 12:42:00.625 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 12:42:00.626 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 12:42:00.626 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:42:00.631 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 12:42:00.636 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 12:42:00.636 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:42:00.640 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 12:42:00.645 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 12:42:00.645 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:42:00.650 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 12:42:00.655 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 12:42:00.655 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:42:00.670 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 12:42:00.675 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 12:42:00.675 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 12:42:00.676 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 12:42:00.676 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:42:00.681 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 12:42:00.685 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 12:42:00.685 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:42:00.691 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 12:42:00.694 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 12:42:00.695 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:42:00.703 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 12:42:00.707 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 12:42:00.708 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:42:00.712 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 12:42:00.727 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:联系人姓名填写为数字同时满足以下条件： 1、联系人姓名不为空值 2、联系人姓名为纯数字 
2020-06-17 12:42:00.730 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:血型与RH血型逻辑不符同时满足以下条件： 1、个人基本信息表《血型》填写为“不详” 2、个人基本信息表《RH血型》填写为“阴性”或“阳性” 
2020-06-17 12:42:00.733 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-17 12:42:00.733 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 1a7e1f2e0bce421585a1fad889411dd4(String), 2020-06-17 12:42:00.732(Timestamp), 31011310200312009116(String), a58b2894635045b18a63c250d46ce8a8(String), 2020-06-17 12:42:00.732(Timestamp) 
2020-06-17 12:42:00.752 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 2 
2020-06-17 12:42:04.063 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 12:42:04.063 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 12:42:04.075 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 12:42:04.079 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 12:42:04.079 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 12:42:04.084 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 12:42:04.088 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 12:42:04.089 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 12:42:04.094 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-17 12:42:04.098 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 12:42:04.098 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:42:04.103 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 12:42:04.107 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 12:42:04.107 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:42:04.113 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 12:42:04.118 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 12:42:04.118 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 12:42:04.119 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 12:42:04.119 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:42:04.123 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 12:42:04.127 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 12:42:04.127 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:42:04.132 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 12:42:04.136 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 12:42:04.137 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:42:04.144 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 12:42:04.149 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 12:42:04.149 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:42:04.164 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 12:42:04.167 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 12:42:04.168 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 12:42:04.168 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 12:42:04.169 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:42:04.174 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 12:42:04.178 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 12:42:04.178 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:42:04.183 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 12:42:04.187 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 12:42:04.187 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:42:04.192 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 12:42:04.196 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 12:42:04.197 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:42:04.201 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 12:42:04.214 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:血型与RH血型逻辑不符同时满足以下条件： 1、个人基本信息表《血型》填写为“不详” 2、个人基本信息表《RH血型》填写为“阴性”或“阳性” 
2020-06-17 12:42:04.216 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1)  
2020-06-17 12:42:04.216 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), a58b2894635045b18a63c250d46ce8a8(String), 2020-06-17 12:42:04.216(Timestamp) 
2020-06-17 12:42:04.258 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 1 
2020-06-17 12:42:07.560 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 12:42:07.561 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 12:42:07.566 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 12:42:07.571 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 12:42:07.572 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 12:42:07.577 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 12:42:07.581 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 12:42:07.581 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 12:42:07.586 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-17 12:42:07.592 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 12:42:07.593 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:42:07.598 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 12:42:07.603 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 12:42:07.604 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:42:07.610 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 12:42:07.615 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 12:42:07.615 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 12:42:07.616 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 12:42:07.616 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:42:07.622 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 12:42:07.626 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 12:42:07.626 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:42:07.631 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 12:42:07.635 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 12:42:07.635 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:42:07.639 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 12:42:07.644 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 12:42:07.644 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:42:07.658 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 12:42:07.662 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 12:42:07.662 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 12:42:07.663 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 12:42:07.663 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:42:07.668 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 12:42:07.672 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 12:42:07.673 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:42:07.677 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 12:42:07.681 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 12:42:07.681 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:42:07.685 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 12:42:07.690 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 12:42:07.691 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:42:07.696 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 12:42:07.710 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:血型与RH血型逻辑不符同时满足以下条件： 1、个人基本信息表《血型》填写为“不详” 2、个人基本信息表《RH血型》填写为“阴性”或“阳性” 
2020-06-17 12:42:07.712 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1)  
2020-06-17 12:42:07.712 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), a58b2894635045b18a63c250d46ce8a8(String), 2020-06-17 12:42:07.712(Timestamp) 
2020-06-17 12:42:07.743 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 1 
2020-06-17 12:42:10.954 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 12:42:10.955 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 12:42:10.961 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 12:42:10.968 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 12:42:10.968 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 12:42:10.973 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 12:42:10.978 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 12:42:10.979 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 12:42:10.983 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-17 12:42:10.988 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 12:42:10.989 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:42:10.994 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 12:42:10.999 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 12:42:10.999 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:42:11.006 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 12:42:11.010 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 12:42:11.011 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 12:42:11.012 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 12:42:11.013 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:42:11.019 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 12:42:11.025 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 12:42:11.026 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:42:11.031 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 12:42:11.036 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 12:42:11.037 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:42:11.043 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 12:42:11.048 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 12:42:11.049 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:42:11.064 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 12:42:11.070 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 12:42:11.070 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 12:42:11.071 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 12:42:11.072 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:42:11.078 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 12:42:11.084 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 12:42:11.085 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:42:11.090 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 12:42:11.095 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 12:42:11.097 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:42:11.102 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 12:42:11.108 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 12:42:11.109 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:42:11.114 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 12:42:11.158 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:血型与RH血型逻辑不符同时满足以下条件： 1、个人基本信息表《血型》填写为“不详” 2、个人基本信息表《RH血型》填写为“阴性”或“阳性” 
2020-06-17 12:42:11.161 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1)  
2020-06-17 12:42:11.161 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), a58b2894635045b18a63c250d46ce8a8(String), 2020-06-17 12:42:11.16(Timestamp) 
2020-06-17 12:42:11.192 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 1 
2020-06-17 12:42:14.477 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 12:42:14.477 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 12:42:14.482 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 12:42:14.486 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 12:42:14.487 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 12:42:14.491 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 12:42:14.495 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 12:42:14.496 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 12:42:14.501 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-17 12:42:14.505 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 12:42:14.505 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:42:14.510 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 12:42:14.514 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 12:42:14.515 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:42:14.522 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 12:42:14.527 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 12:42:14.527 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 12:42:14.528 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 12:42:14.528 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:42:14.533 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 12:42:14.537 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 12:42:14.538 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:42:14.542 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 12:42:14.546 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 12:42:14.546 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:42:14.551 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 12:42:14.556 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 12:42:14.556 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:42:14.570 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 12:42:14.574 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 12:42:14.574 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 12:42:14.574 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 12:42:14.575 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:42:14.579 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 12:42:14.584 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 12:42:14.584 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:42:14.589 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 12:42:14.594 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 12:42:14.594 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:42:14.599 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 12:42:14.603 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 12:42:14.603 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:42:14.607 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 12:42:14.625 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:血型与RH血型逻辑不符同时满足以下条件： 1、个人基本信息表《血型》填写为“不详” 2、个人基本信息表《RH血型》填写为“阴性”或“阳性” 
2020-06-17 12:42:14.627 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1)  
2020-06-17 12:42:14.628 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), a58b2894635045b18a63c250d46ce8a8(String), 2020-06-17 12:42:14.627(Timestamp) 
2020-06-17 12:42:14.644 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 1 
2020-06-17 12:42:18.092 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 12:42:18.092 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 12:42:18.098 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 12:42:18.102 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 12:42:18.103 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 12:42:18.108 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 12:42:18.116 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 12:42:18.116 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 12:42:18.128 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-17 12:42:18.135 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 12:42:18.136 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:42:18.140 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 12:42:18.149 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 12:42:18.149 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:42:18.163 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 12:42:18.171 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 12:42:18.171 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 12:42:18.172 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 12:42:18.172 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:42:18.180 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 12:42:18.185 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 12:42:18.186 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:42:18.192 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 12:42:18.196 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 12:42:18.197 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:42:18.206 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 12:42:18.221 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 12:42:18.222 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:42:18.239 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 12:42:18.244 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 12:42:18.245 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 12:42:18.245 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 12:42:18.246 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:42:18.250 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 12:42:18.257 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 12:42:18.257 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:42:18.262 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 12:42:18.269 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 12:42:18.270 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:42:18.278 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 12:42:18.285 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 12:42:18.285 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:42:18.293 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 12:42:18.317 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:血型与RH血型逻辑不符同时满足以下条件： 1、个人基本信息表《血型》填写为“不详” 2、个人基本信息表《RH血型》填写为“阴性”或“阳性” 
2020-06-17 12:42:18.321 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1)  
2020-06-17 12:42:18.322 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), a58b2894635045b18a63c250d46ce8a8(String), 2020-06-17 12:42:18.321(Timestamp) 
2020-06-17 12:42:18.350 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 1 
2020-06-17 12:42:21.937 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 12:42:21.938 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 12:42:21.943 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 12:42:21.947 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 12:42:21.948 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 12:42:21.953 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 12:42:21.958 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 12:42:21.958 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 12:42:21.970 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-17 12:42:21.975 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 12:42:21.976 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:42:21.981 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 12:42:21.985 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 12:42:21.986 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:42:21.992 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 12:42:21.997 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 12:42:21.997 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 12:42:21.998 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 12:42:21.998 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:42:22.002 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 12:42:22.007 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 12:42:22.007 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:42:22.012 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 12:42:22.017 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 12:42:22.018 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:42:22.023 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 12:42:22.027 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 12:42:22.028 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:42:22.043 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 12:42:22.047 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 12:42:22.047 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 12:42:22.048 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 12:42:22.048 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:42:22.053 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 12:42:22.058 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 12:42:22.058 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:42:22.063 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 12:42:22.067 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 12:42:22.068 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:42:22.074 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 12:42:22.078 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 12:42:22.079 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:42:22.086 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 12:42:22.103 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:个人基本信息表既往史既往史疾病确诊时间未填写 
2020-06-17 12:42:22.106 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:个人基本信息表既往史既往史疾病确诊时间填写不规范 
2020-06-17 12:42:22.106 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:血型与RH血型逻辑不符同时满足以下条件： 1、个人基本信息表《血型》填写为“不详” 2、个人基本信息表《RH血型》填写为“阴性”或“阳性” 
2020-06-17 12:42:22.108 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-17 12:42:22.108 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 6302b0fcdcd7482099581602a1fec501(String), 2020-06-17 12:42:22.108(Timestamp), 31011310200312009116(String), 923bfb7880204efa8f26fd200d1bd17e(String), 2020-06-17 12:42:22.108(Timestamp), 31011310200312009116(String), a58b2894635045b18a63c250d46ce8a8(String), 2020-06-17 12:42:22.108(Timestamp) 
2020-06-17 12:42:22.141 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 3 
2020-06-17 12:45:51.779 [INFO ] com.benetech.rules.RulesApplication                - [logStarting:55] Starting RulesApplication v1.0-SNAPSHOT on DESKTOP-EOCO1V0 with PID 2856 (D:\51\python\project\instance\zyjk\EHR\controlRuleNew\config\healthRecordRules.jar started by ZY in D:\51\python\project\instance\zyjk\EHR\controlRuleNew) 
2020-06-17 12:45:51.783 [DEBUG] com.benetech.rules.RulesApplication                - [logStarting:56] Running with Spring Boot v2.2.1.RELEASE, Spring v5.2.1.RELEASE 
2020-06-17 12:45:51.783 [INFO ] com.benetech.rules.RulesApplication                - [logStartupProfileInfo:655] The following profiles are active: test 
2020-06-17 12:45:53.327 [INFO ] o.s.boot.web.embedded.tomcat.TomcatWebServer       - [initialize:92] Tomcat initialized with port(s): 8838 (http) 
2020-06-17 12:45:53.340 [INFO ] org.apache.coyote.http11.Http11NioProtocol         - [log:173] Initializing ProtocolHandler ["http-nio-8838"] 
2020-06-17 12:45:53.341 [INFO ] org.apache.catalina.core.StandardService           - [log:173] Starting service [Tomcat] 
2020-06-17 12:45:53.341 [INFO ] org.apache.catalina.core.StandardEngine            - [log:173] Starting Servlet engine: [Apache Tomcat/9.0.27] 
2020-06-17 12:45:53.413 [INFO ] o.a.c.c.C.[.[localhost].[/healthRecordRules]       - [log:173] Initializing Spring embedded WebApplicationContext 
2020-06-17 12:45:53.413 [INFO ] org.springframework.web.context.ContextLoader      - [prepareWebApplicationContext:284] Root WebApplicationContext: initialization completed in 1537 ms 
2020-06-17 12:45:53.493 [DEBUG] org.apache.ibatis.logging.LogFactory               - [setImplementation:135] Logging initialized using 'class org.apache.ibatis.logging.slf4j.Slf4jImpl' adapter. 
2020-06-17 12:45:53.746 [WARN ] org.mybatis.spring.SqlSessionFactoryBean           - [buildSqlSessionFactory:467] Can't find class in '[com.benetech.rules.*.entity]' package. Please check your configuration. 
2020-06-17 12:45:54.381 [INFO ] com.alibaba.druid.pool.DruidDataSource             - [init:930] {dataSource-1} inited 
2020-06-17 12:45:54.599 [DEBUG] c.b.r.m.e.mapper.RuleEngineMapper.getAllRules      - [debug:159] ==>  Preparing: select a.RuleId as ruleId, a.RuleSql as clazz from HrRule a join HrRuleProps b on a.RuleId = b.RuleId where -- RuleId in ('34278f71cf1d42c88158aaf637fa5203', '8d30baa03bfc4233a8f115c57a0ebf08', '63eb82a44bf64c96a0b9023fa2a3c9d9') a.RuleSql != '' and a.RuleSql is not null and b.Enable = 1  
2020-06-17 12:45:54.619 [DEBUG] c.b.r.m.e.mapper.RuleEngineMapper.getAllRules      - [debug:159] ==> Parameters:  
2020-06-17 12:45:54.700 [DEBUG] c.b.r.m.e.mapper.RuleEngineMapper.getAllRules      - [debug:159] <==      Total: 310 
2020-06-17 12:45:54.927 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [init:68] 加载规则：310 条 
2020-06-17 12:45:54.944 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.getAllCode    - [debug:159] ==>  Preparing: SELECT codeSysType AS type, code AS code, [value] AS value FROM tb_code_value WHERE code != '' AND [value] != ''  
2020-06-17 12:45:54.944 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.getAllCode    - [debug:159] ==> Parameters:  
2020-06-17 12:45:55.077 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 12:45:55.077 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 12:45:55.081 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 12:45:55.085 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 12:45:55.085 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 12:45:55.092 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 12:45:55.096 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 12:45:55.096 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 12:45:55.100 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-17 12:45:55.105 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 12:45:55.105 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:45:55.112 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 12:45:55.116 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 12:45:55.116 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:45:55.121 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 12:45:55.131 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 12:45:55.131 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 12:45:55.131 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 12:45:55.131 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:45:55.136 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 12:45:55.140 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 12:45:55.140 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:45:55.145 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 12:45:55.148 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 12:45:55.148 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:45:55.152 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 12:45:55.157 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 12:45:55.157 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:45:55.171 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 12:45:55.176 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 12:45:55.176 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 12:45:55.176 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 12:45:55.177 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:45:55.181 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 12:45:55.185 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 12:45:55.185 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:45:55.194 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 12:45:55.198 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 12:45:55.198 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:45:55.204 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 12:45:55.209 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 12:45:55.209 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:45:55.214 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 12:45:55.229 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:血型与RH血型逻辑不符同时满足以下条件： 1、个人基本信息表《血型》填写为“不详” 2、个人基本信息表《RH血型》填写为“阴性”或“阳性” 
2020-06-17 12:45:55.231 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1)  
2020-06-17 12:45:55.232 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), a58b2894635045b18a63c250d46ce8a8(String), 2020-06-17 12:45:55.231(Timestamp) 
2020-06-17 12:45:55.265 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 1 
2020-06-17 12:45:55.514 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.getAllCode    - [debug:159] <==      Total: 44881 
2020-06-17 12:45:55.541 [INFO ] c.b.r.m.m.service.impl.EhrModelBuildServiceImpl    - [init:96] 初始化字典类型: 467 种 
2020-06-17 12:45:55.542 [INFO ] c.b.r.m.m.service.impl.EhrModelBuildServiceImpl    - [init:97] 初始化字典: 44881 条 
2020-06-17 12:45:55.542 [ERROR] c.b.r.m.process.service.impl.QcProcessServiceImpl  - [init:44] 初始化线程池 
2020-06-17 12:45:55.684 [INFO ] o.s.scheduling.concurrent.ThreadPoolTaskExecutor   - [initialize:171] Initializing ExecutorService 'applicationTaskExecutor' 
2020-06-17 12:45:55.910 [INFO ] org.apache.coyote.http11.Http11NioProtocol         - [log:173] Starting ProtocolHandler ["http-nio-8838"] 
2020-06-17 12:45:55.926 [INFO ] org.apache.coyote.http11.Http11NioProtocol         - [log:173] Pausing ProtocolHandler ["http-nio-8838"] 
2020-06-17 12:45:55.926 [INFO ] org.apache.catalina.core.StandardService           - [log:173] Stopping service [Tomcat] 
2020-06-17 12:45:55.931 [INFO ] org.apache.coyote.http11.Http11NioProtocol         - [log:173] Stopping ProtocolHandler ["http-nio-8838"] 
2020-06-17 12:45:55.932 [INFO ] org.apache.coyote.http11.Http11NioProtocol         - [log:173] Destroying ProtocolHandler ["http-nio-8838"] 
2020-06-17 12:45:55.934 [INFO ] o.s.b.a.l.ConditionEvaluationReportLoggingListener - [logMessage:136]     Error starting ApplicationContext. To display the conditions report re-run your application with 'debug' enabled. 
2020-06-17 12:45:55.936 [ERROR] o.s.b.diagnostics.LoggingFailureAnalysisReporter   - [report:40]     ***************************  APPLICATION FAILED TO START  ***************************    Description:    Web server failed to start. Port 8838 was already in use.    Action:    Identify and stop the process that's listening on port 8838 or configure this application to listen on another port.   
2020-06-17 12:45:55.938 [INFO ] o.s.scheduling.concurrent.ThreadPoolTaskExecutor   - [shutdown:208] Shutting down ExecutorService 'applicationTaskExecutor' 
2020-06-17 12:45:55.942 [INFO ] com.alibaba.druid.pool.DruidDataSource             - [close:1825] {dataSource-1} closed 
2020-06-17 12:45:58.597 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 12:45:58.597 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 12:45:58.603 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 12:45:58.608 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 12:45:58.608 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 12:45:58.613 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 12:45:58.617 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 12:45:58.618 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 12:45:58.623 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-17 12:45:58.631 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 12:45:58.632 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:45:58.642 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 12:45:58.647 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 12:45:58.647 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:45:58.654 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 12:45:58.660 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 12:45:58.660 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 12:45:58.661 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 12:45:58.661 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:45:58.667 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 12:45:58.672 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 12:45:58.673 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:45:58.678 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 12:45:58.683 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 12:45:58.684 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:45:58.689 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 12:45:58.694 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 12:45:58.695 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:45:58.711 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 12:45:58.717 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 12:45:58.717 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 12:45:58.718 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 12:45:58.718 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:45:58.728 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 12:45:58.739 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 12:45:58.740 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:45:58.746 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 12:45:58.756 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 12:45:58.756 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:45:58.768 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 12:45:58.783 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 12:45:58.783 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:45:58.801 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 12:45:58.828 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:联系人姓名填写为数字同时满足以下条件： 1、联系人姓名不为空值 2、联系人姓名为纯数字 
2020-06-17 12:45:58.835 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:血型与RH血型逻辑不符同时满足以下条件： 1、个人基本信息表《血型》填写为“不详” 2、个人基本信息表《RH血型》填写为“阴性”或“阳性” 
2020-06-17 12:45:58.841 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-17 12:45:58.842 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 1a7e1f2e0bce421585a1fad889411dd4(String), 2020-06-17 12:45:58.84(Timestamp), 31011310200312009116(String), a58b2894635045b18a63c250d46ce8a8(String), 2020-06-17 12:45:58.84(Timestamp) 
2020-06-17 12:45:58.866 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 2 
2020-06-17 12:46:02.239 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 12:46:02.239 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 12:46:02.246 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 12:46:02.252 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 12:46:02.253 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 12:46:02.259 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 12:46:02.265 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 12:46:02.266 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 12:46:02.272 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-17 12:46:02.277 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 12:46:02.277 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:46:02.283 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 12:46:02.287 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 12:46:02.288 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:46:02.293 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 12:46:02.298 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 12:46:02.298 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 12:46:02.299 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 12:46:02.299 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:46:02.304 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 12:46:02.308 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 12:46:02.309 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:46:02.313 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 12:46:02.317 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 12:46:02.317 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:46:02.322 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 12:46:02.326 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 12:46:02.326 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:46:02.339 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 12:46:02.344 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 12:46:02.344 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 12:46:02.344 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 12:46:02.345 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:46:02.350 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 12:46:02.354 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 12:46:02.354 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:46:02.358 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 12:46:02.362 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 12:46:02.362 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:46:02.367 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 12:46:02.371 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 12:46:02.372 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:46:02.376 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 12:46:02.391 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:血型与RH血型逻辑不符同时满足以下条件： 1、个人基本信息表《血型》填写为“不详” 2、个人基本信息表《RH血型》填写为“阴性”或“阳性” 
2020-06-17 12:46:02.393 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1)  
2020-06-17 12:46:02.394 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), a58b2894635045b18a63c250d46ce8a8(String), 2020-06-17 12:46:02.393(Timestamp) 
2020-06-17 12:46:02.409 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 1 
2020-06-17 12:46:05.682 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 12:46:05.682 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 12:46:05.688 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 12:46:05.693 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 12:46:05.694 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 12:46:05.698 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 12:46:05.702 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 12:46:05.703 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 12:46:05.709 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-17 12:46:05.714 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 12:46:05.714 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:46:05.718 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 12:46:05.722 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 12:46:05.722 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:46:05.727 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 12:46:05.731 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 12:46:05.732 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 12:46:05.732 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 12:46:05.732 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:46:05.736 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 12:46:05.741 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 12:46:05.742 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:46:05.746 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 12:46:05.750 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 12:46:05.751 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:46:05.756 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 12:46:05.760 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 12:46:05.761 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:46:05.775 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 12:46:05.779 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 12:46:05.779 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 12:46:05.779 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 12:46:05.780 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:46:05.784 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 12:46:05.789 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 12:46:05.789 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:46:05.793 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 12:46:05.797 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 12:46:05.797 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:46:05.802 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 12:46:05.807 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 12:46:05.807 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:46:05.811 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 12:46:05.828 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:血型与RH血型逻辑不符同时满足以下条件： 1、个人基本信息表《血型》填写为“不详” 2、个人基本信息表《RH血型》填写为“阴性”或“阳性” 
2020-06-17 12:46:05.830 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1)  
2020-06-17 12:46:05.830 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), a58b2894635045b18a63c250d46ce8a8(String), 2020-06-17 12:46:05.829(Timestamp) 
2020-06-17 12:46:05.842 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 1 
2020-06-17 12:46:09.233 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 12:46:09.233 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 12:46:09.238 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 12:46:09.243 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 12:46:09.243 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 12:46:09.249 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 12:46:09.254 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 12:46:09.255 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 12:46:09.259 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-17 12:46:09.264 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 12:46:09.264 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:46:09.268 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 12:46:09.273 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 12:46:09.274 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:46:09.279 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 12:46:09.284 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 12:46:09.285 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 12:46:09.286 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 12:46:09.286 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:46:09.291 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 12:46:09.296 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 12:46:09.297 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:46:09.302 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 12:46:09.307 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 12:46:09.308 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:46:09.313 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 12:46:09.319 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 12:46:09.319 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:46:09.334 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 12:46:09.340 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 12:46:09.340 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 12:46:09.341 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 12:46:09.342 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:46:09.347 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 12:46:09.352 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 12:46:09.353 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:46:09.358 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 12:46:09.363 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 12:46:09.364 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:46:09.369 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 12:46:09.374 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 12:46:09.375 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:46:09.380 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 12:46:09.410 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:血型与RH血型逻辑不符同时满足以下条件： 1、个人基本信息表《血型》填写为“不详” 2、个人基本信息表《RH血型》填写为“阴性”或“阳性” 
2020-06-17 12:46:09.416 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1)  
2020-06-17 12:46:09.416 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), a58b2894635045b18a63c250d46ce8a8(String), 2020-06-17 12:46:09.415(Timestamp) 
2020-06-17 12:46:09.450 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 1 
2020-06-17 12:46:12.674 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 12:46:12.674 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 12:46:12.683 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 12:46:12.703 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 12:46:12.703 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 12:46:12.716 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 12:46:12.721 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 12:46:12.721 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 12:46:12.725 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-17 12:46:12.730 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 12:46:12.730 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:46:12.734 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 12:46:12.737 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 12:46:12.737 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:46:12.743 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 12:46:12.747 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 12:46:12.748 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 12:46:12.749 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 12:46:12.749 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:46:12.754 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 12:46:12.764 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 12:46:12.765 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:46:12.769 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 12:46:12.774 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 12:46:12.775 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:46:12.780 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 12:46:12.785 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 12:46:12.785 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:46:12.800 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 12:46:12.804 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 12:46:12.804 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 12:46:12.805 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 12:46:12.805 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:46:12.810 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 12:46:12.814 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 12:46:12.815 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:46:12.820 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 12:46:12.824 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 12:46:12.824 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:46:12.830 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 12:46:12.834 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 12:46:12.834 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:46:12.838 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 12:46:12.857 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:血型与RH血型逻辑不符同时满足以下条件： 1、个人基本信息表《血型》填写为“不详” 2、个人基本信息表《RH血型》填写为“阴性”或“阳性” 
2020-06-17 12:46:12.861 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1)  
2020-06-17 12:46:12.861 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), a58b2894635045b18a63c250d46ce8a8(String), 2020-06-17 12:46:12.86(Timestamp) 
2020-06-17 12:46:12.899 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 1 
2020-06-17 12:46:16.258 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 12:46:16.258 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 12:46:16.263 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 12:46:16.267 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 12:46:16.267 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 12:46:16.273 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 12:46:16.277 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 12:46:16.278 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 12:46:16.284 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-17 12:46:16.290 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 12:46:16.291 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:46:16.295 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 12:46:16.313 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 12:46:16.314 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:46:16.322 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 12:46:16.327 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 12:46:16.327 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 12:46:16.327 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 12:46:16.328 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:46:16.333 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 12:46:16.337 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 12:46:16.337 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:46:16.341 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 12:46:16.346 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 12:46:16.346 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:46:16.351 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 12:46:16.355 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 12:46:16.356 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:46:16.369 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 12:46:16.373 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 12:46:16.373 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 12:46:16.374 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 12:46:16.374 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:46:16.378 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 12:46:16.383 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 12:46:16.384 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:46:16.392 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 12:46:16.397 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 12:46:16.398 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:46:16.404 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 12:46:16.409 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 12:46:16.410 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:46:16.415 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 12:46:16.447 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:血型与RH血型逻辑不符同时满足以下条件： 1、个人基本信息表《血型》填写为“不详” 2、个人基本信息表《RH血型》填写为“阴性”或“阳性” 
2020-06-17 12:46:16.453 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1)  
2020-06-17 12:46:16.454 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), a58b2894635045b18a63c250d46ce8a8(String), 2020-06-17 12:46:16.452(Timestamp) 
2020-06-17 12:46:16.481 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 1 
2020-06-17 12:48:21.168 [INFO ] com.benetech.rules.RulesApplication                - [logStarting:55] Starting RulesApplication v1.0-SNAPSHOT on DESKTOP-EOCO1V0 with PID 4764 (D:\51\python\project\instance\zyjk\EHR\controlRuleNew\config\healthRecordRules.jar started by ZY in D:\51\python\project\instance\zyjk\EHR\controlRuleNew) 
2020-06-17 12:48:21.171 [DEBUG] com.benetech.rules.RulesApplication                - [logStarting:56] Running with Spring Boot v2.2.1.RELEASE, Spring v5.2.1.RELEASE 
2020-06-17 12:48:21.172 [INFO ] com.benetech.rules.RulesApplication                - [logStartupProfileInfo:655] The following profiles are active: test 
2020-06-17 12:48:22.695 [INFO ] o.s.boot.web.embedded.tomcat.TomcatWebServer       - [initialize:92] Tomcat initialized with port(s): 8838 (http) 
2020-06-17 12:48:22.709 [INFO ] org.apache.coyote.http11.Http11NioProtocol         - [log:173] Initializing ProtocolHandler ["http-nio-8838"] 
2020-06-17 12:48:22.709 [INFO ] org.apache.catalina.core.StandardService           - [log:173] Starting service [Tomcat] 
2020-06-17 12:48:22.710 [INFO ] org.apache.catalina.core.StandardEngine            - [log:173] Starting Servlet engine: [Apache Tomcat/9.0.27] 
2020-06-17 12:48:22.777 [INFO ] o.a.c.c.C.[.[localhost].[/healthRecordRules]       - [log:173] Initializing Spring embedded WebApplicationContext 
2020-06-17 12:48:22.777 [INFO ] org.springframework.web.context.ContextLoader      - [prepareWebApplicationContext:284] Root WebApplicationContext: initialization completed in 1524 ms 
2020-06-17 12:48:22.858 [DEBUG] org.apache.ibatis.logging.LogFactory               - [setImplementation:135] Logging initialized using 'class org.apache.ibatis.logging.slf4j.Slf4jImpl' adapter. 
2020-06-17 12:48:23.111 [WARN ] org.mybatis.spring.SqlSessionFactoryBean           - [buildSqlSessionFactory:467] Can't find class in '[com.benetech.rules.*.entity]' package. Please check your configuration. 
2020-06-17 12:48:23.777 [INFO ] com.alibaba.druid.pool.DruidDataSource             - [init:930] {dataSource-1} inited 
2020-06-17 12:48:24.047 [DEBUG] c.b.r.m.e.mapper.RuleEngineMapper.getAllRules      - [debug:159] ==>  Preparing: select a.RuleId as ruleId, a.RuleSql as clazz from HrRule a join HrRuleProps b on a.RuleId = b.RuleId where -- RuleId in ('34278f71cf1d42c88158aaf637fa5203', '8d30baa03bfc4233a8f115c57a0ebf08', '63eb82a44bf64c96a0b9023fa2a3c9d9') a.RuleSql != '' and a.RuleSql is not null and b.Enable = 1  
2020-06-17 12:48:24.067 [DEBUG] c.b.r.m.e.mapper.RuleEngineMapper.getAllRules      - [debug:159] ==> Parameters:  
2020-06-17 12:48:24.158 [DEBUG] c.b.r.m.e.mapper.RuleEngineMapper.getAllRules      - [debug:159] <==      Total: 310 
2020-06-17 12:48:24.396 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [init:68] 加载规则：310 条 
2020-06-17 12:48:24.414 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.getAllCode    - [debug:159] ==>  Preparing: SELECT codeSysType AS type, code AS code, [value] AS value FROM tb_code_value WHERE code != '' AND [value] != ''  
2020-06-17 12:48:24.415 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.getAllCode    - [debug:159] ==> Parameters:  
2020-06-17 12:48:24.486 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 12:48:24.486 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 12:48:24.498 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 12:48:24.504 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 12:48:24.504 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 12:48:24.518 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 12:48:24.522 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 12:48:24.522 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 12:48:24.527 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-17 12:48:24.531 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 12:48:24.531 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:48:24.545 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 12:48:24.551 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 12:48:24.551 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:48:24.557 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 12:48:24.562 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 12:48:24.562 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 12:48:24.562 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 12:48:24.562 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:48:24.567 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 12:48:24.588 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 12:48:24.588 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:48:24.593 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 12:48:24.596 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 12:48:24.596 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:48:24.602 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 12:48:24.607 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 12:48:24.607 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:48:24.621 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 12:48:24.625 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 12:48:24.625 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 12:48:24.625 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 12:48:24.625 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:48:24.630 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 12:48:24.634 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 12:48:24.634 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:48:24.640 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 12:48:24.644 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 12:48:24.644 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:48:24.662 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 12:48:24.666 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 12:48:24.666 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:48:24.671 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 12:48:24.686 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:血型与RH血型逻辑不符同时满足以下条件： 1、个人基本信息表《血型》填写为“不详” 2、个人基本信息表《RH血型》填写为“阴性”或“阳性” 
2020-06-17 12:48:24.688 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1)  
2020-06-17 12:48:24.689 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), a58b2894635045b18a63c250d46ce8a8(String), 2020-06-17 12:48:24.688(Timestamp) 
2020-06-17 12:48:24.728 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 1 
2020-06-17 12:48:24.935 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.getAllCode    - [debug:159] <==      Total: 44881 
2020-06-17 12:48:24.961 [INFO ] c.b.r.m.m.service.impl.EhrModelBuildServiceImpl    - [init:96] 初始化字典类型: 467 种 
2020-06-17 12:48:24.961 [INFO ] c.b.r.m.m.service.impl.EhrModelBuildServiceImpl    - [init:97] 初始化字典: 44881 条 
2020-06-17 12:48:24.962 [ERROR] c.b.r.m.process.service.impl.QcProcessServiceImpl  - [init:44] 初始化线程池 
2020-06-17 12:48:25.117 [INFO ] o.s.scheduling.concurrent.ThreadPoolTaskExecutor   - [initialize:171] Initializing ExecutorService 'applicationTaskExecutor' 
2020-06-17 12:48:25.391 [INFO ] org.apache.coyote.http11.Http11NioProtocol         - [log:173] Starting ProtocolHandler ["http-nio-8838"] 
2020-06-17 12:48:25.404 [INFO ] org.apache.coyote.http11.Http11NioProtocol         - [log:173] Pausing ProtocolHandler ["http-nio-8838"] 
2020-06-17 12:48:25.405 [INFO ] org.apache.catalina.core.StandardService           - [log:173] Stopping service [Tomcat] 
2020-06-17 12:48:25.409 [INFO ] org.apache.coyote.http11.Http11NioProtocol         - [log:173] Stopping ProtocolHandler ["http-nio-8838"] 
2020-06-17 12:48:25.409 [INFO ] org.apache.coyote.http11.Http11NioProtocol         - [log:173] Destroying ProtocolHandler ["http-nio-8838"] 
2020-06-17 12:48:25.411 [INFO ] o.s.b.a.l.ConditionEvaluationReportLoggingListener - [logMessage:136]     Error starting ApplicationContext. To display the conditions report re-run your application with 'debug' enabled. 
2020-06-17 12:48:25.413 [ERROR] o.s.b.diagnostics.LoggingFailureAnalysisReporter   - [report:40]     ***************************  APPLICATION FAILED TO START  ***************************    Description:    Web server failed to start. Port 8838 was already in use.    Action:    Identify and stop the process that's listening on port 8838 or configure this application to listen on another port.   
2020-06-17 12:48:25.416 [INFO ] o.s.scheduling.concurrent.ThreadPoolTaskExecutor   - [shutdown:208] Shutting down ExecutorService 'applicationTaskExecutor' 
2020-06-17 12:48:25.428 [INFO ] com.alibaba.druid.pool.DruidDataSource             - [close:1825] {dataSource-1} closed 
2020-06-17 12:48:28.290 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 12:48:28.290 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 12:48:28.295 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 12:48:28.300 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 12:48:28.300 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 12:48:28.312 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 12:48:28.316 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 12:48:28.316 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 12:48:28.320 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-17 12:48:28.325 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 12:48:28.325 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:48:28.329 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 12:48:28.334 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 12:48:28.335 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:48:28.340 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 12:48:28.345 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 12:48:28.345 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 12:48:28.345 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 12:48:28.345 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:48:28.350 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 12:48:28.354 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 12:48:28.354 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:48:28.359 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 12:48:28.363 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 12:48:28.363 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:48:28.367 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 12:48:28.371 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 12:48:28.372 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:48:28.385 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 12:48:28.389 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 12:48:28.390 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 12:48:28.390 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 12:48:28.390 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:48:28.394 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 12:48:28.399 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 12:48:28.399 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:48:28.403 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 12:48:28.408 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 12:48:28.408 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:48:28.414 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 12:48:28.418 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 12:48:28.419 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:48:28.423 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 12:48:28.434 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:联系人姓名填写为数字同时满足以下条件： 1、联系人姓名不为空值 2、联系人姓名为纯数字 
2020-06-17 12:48:28.439 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:血型与RH血型逻辑不符同时满足以下条件： 1、个人基本信息表《血型》填写为“不详” 2、个人基本信息表《RH血型》填写为“阴性”或“阳性” 
2020-06-17 12:48:28.441 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-17 12:48:28.441 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 1a7e1f2e0bce421585a1fad889411dd4(String), 2020-06-17 12:48:28.44(Timestamp), 31011310200312009116(String), a58b2894635045b18a63c250d46ce8a8(String), 2020-06-17 12:48:28.44(Timestamp) 
2020-06-17 12:48:28.463 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 2 
2020-06-17 12:48:31.716 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 12:48:31.716 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 12:48:31.721 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 12:48:31.725 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 12:48:31.725 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 12:48:31.730 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 12:48:31.734 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 12:48:31.735 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 12:48:31.740 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-17 12:48:31.744 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 12:48:31.744 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:48:31.749 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 12:48:31.753 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 12:48:31.753 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:48:31.759 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 12:48:31.763 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 12:48:31.763 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 12:48:31.764 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 12:48:31.764 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:48:31.769 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 12:48:31.773 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 12:48:31.773 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:48:31.778 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 12:48:31.782 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 12:48:31.782 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:48:31.787 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 12:48:31.791 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 12:48:31.792 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:48:31.805 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 12:48:31.810 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 12:48:31.810 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 12:48:31.810 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 12:48:31.811 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:48:31.816 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 12:48:31.821 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 12:48:31.821 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:48:31.825 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 12:48:31.830 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 12:48:31.831 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:48:31.835 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 12:48:31.838 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 12:48:31.840 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:48:31.843 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 12:48:31.858 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:血型与RH血型逻辑不符同时满足以下条件： 1、个人基本信息表《血型》填写为“不详” 2、个人基本信息表《RH血型》填写为“阴性”或“阳性” 
2020-06-17 12:48:31.861 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1)  
2020-06-17 12:48:31.861 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), a58b2894635045b18a63c250d46ce8a8(String), 2020-06-17 12:48:31.861(Timestamp) 
2020-06-17 12:48:31.889 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 1 
2020-06-17 12:48:35.171 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 12:48:35.171 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 12:48:35.176 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 12:48:35.180 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 12:48:35.181 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 12:48:35.186 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 12:48:35.190 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 12:48:35.191 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 12:48:35.195 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-17 12:48:35.199 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 12:48:35.200 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:48:35.205 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 12:48:35.209 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 12:48:35.209 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:48:35.214 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 12:48:35.218 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 12:48:35.219 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 12:48:35.220 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 12:48:35.221 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:48:35.227 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 12:48:35.232 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 12:48:35.233 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:48:35.239 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 12:48:35.244 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 12:48:35.245 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:48:35.250 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 12:48:35.254 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 12:48:35.255 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:48:35.269 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 12:48:35.274 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 12:48:35.274 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 12:48:35.274 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 12:48:35.275 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:48:35.280 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 12:48:35.285 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 12:48:35.285 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:48:35.290 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 12:48:35.293 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 12:48:35.295 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:48:35.299 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 12:48:35.303 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 12:48:35.304 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:48:35.309 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 12:48:35.354 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:血型与RH血型逻辑不符同时满足以下条件： 1、个人基本信息表《血型》填写为“不详” 2、个人基本信息表《RH血型》填写为“阴性”或“阳性” 
2020-06-17 12:48:35.362 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1)  
2020-06-17 12:48:35.363 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), a58b2894635045b18a63c250d46ce8a8(String), 2020-06-17 12:48:35.361(Timestamp) 
2020-06-17 12:48:35.395 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 1 
2020-06-17 12:48:38.691 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 12:48:38.692 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 12:48:38.697 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 12:48:38.702 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 12:48:38.702 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 12:48:38.713 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 12:48:38.718 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 12:48:38.718 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 12:48:38.723 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-17 12:48:38.727 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 12:48:38.728 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:48:38.731 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 12:48:38.735 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 12:48:38.736 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:48:38.741 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 12:48:38.745 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 12:48:38.745 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 12:48:38.745 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 12:48:38.746 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:48:38.750 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 12:48:38.754 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 12:48:38.755 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:48:38.760 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 12:48:38.763 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 12:48:38.763 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:48:38.768 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 12:48:38.773 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 12:48:38.773 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:48:38.787 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 12:48:38.791 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 12:48:38.791 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 12:48:38.791 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 12:48:38.792 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:48:38.796 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 12:48:38.800 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 12:48:38.801 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:48:38.805 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 12:48:38.810 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 12:48:38.810 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:48:38.815 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 12:48:38.819 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 12:48:38.819 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:48:38.824 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 12:48:38.839 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:血型与RH血型逻辑不符同时满足以下条件： 1、个人基本信息表《血型》填写为“不详” 2、个人基本信息表《RH血型》填写为“阴性”或“阳性” 
2020-06-17 12:48:38.841 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1)  
2020-06-17 12:48:38.841 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), a58b2894635045b18a63c250d46ce8a8(String), 2020-06-17 12:48:38.841(Timestamp) 
2020-06-17 12:48:38.870 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 1 
2020-06-17 12:48:42.147 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 12:48:42.147 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 12:48:42.152 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 12:48:42.156 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 12:48:42.157 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 12:48:42.169 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 12:48:42.174 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 12:48:42.174 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 12:48:42.179 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-17 12:48:42.183 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 12:48:42.183 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:48:42.188 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 12:48:42.192 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 12:48:42.192 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:48:42.197 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 12:48:42.201 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 12:48:42.201 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 12:48:42.201 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 12:48:42.202 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:48:42.207 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 12:48:42.211 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 12:48:42.211 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:48:42.216 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 12:48:42.220 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 12:48:42.221 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:48:42.225 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 12:48:42.230 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 12:48:42.230 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:48:42.244 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 12:48:42.249 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 12:48:42.249 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 12:48:42.249 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 12:48:42.249 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:48:42.255 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 12:48:42.259 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 12:48:42.259 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:48:42.264 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 12:48:42.268 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 12:48:42.268 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:48:42.274 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 12:48:42.278 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 12:48:42.278 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:48:42.282 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 12:48:42.297 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:血型与RH血型逻辑不符同时满足以下条件： 1、个人基本信息表《血型》填写为“不详” 2、个人基本信息表《RH血型》填写为“阴性”或“阳性” 
2020-06-17 12:48:42.299 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1)  
2020-06-17 12:48:42.299 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), a58b2894635045b18a63c250d46ce8a8(String), 2020-06-17 12:48:42.299(Timestamp) 
2020-06-17 12:48:42.328 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 1 
2020-06-17 12:48:45.743 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 12:48:45.743 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 12:48:45.750 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 12:48:45.755 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 12:48:45.755 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 12:48:45.760 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 12:48:45.763 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 12:48:45.763 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 12:48:45.768 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-17 12:48:45.773 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 12:48:45.773 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:48:45.777 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 12:48:45.781 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 12:48:45.782 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:48:45.787 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 12:48:45.793 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 12:48:45.793 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 12:48:45.793 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 12:48:45.793 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:48:45.798 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 12:48:45.803 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 12:48:45.804 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:48:45.809 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 12:48:45.813 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 12:48:45.813 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:48:45.817 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 12:48:45.822 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 12:48:45.823 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:48:45.837 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 12:48:45.841 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 12:48:45.841 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 12:48:45.842 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 12:48:45.842 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:48:45.847 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 12:48:45.852 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 12:48:45.852 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:48:45.858 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 12:48:45.862 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 12:48:45.863 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:48:45.869 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 12:48:45.873 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 12:48:45.874 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:48:45.879 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 12:48:45.909 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:血型与RH血型逻辑不符同时满足以下条件： 1、个人基本信息表《血型》填写为“不详” 2、个人基本信息表《RH血型》填写为“阴性”或“阳性” 
2020-06-17 12:48:45.914 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1)  
2020-06-17 12:48:45.915 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), a58b2894635045b18a63c250d46ce8a8(String), 2020-06-17 12:48:45.914(Timestamp) 
2020-06-17 12:48:45.961 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 1 
2020-06-17 12:51:26.295 [INFO ] com.benetech.rules.RulesApplication                - [logStarting:55] Starting RulesApplication v1.0-SNAPSHOT on DESKTOP-EOCO1V0 with PID 5188 (D:\51\python\project\instance\zyjk\EHR\controlRuleNew\config\healthRecordRules.jar started by ZY in D:\51\python\project\instance\zyjk\EHR\controlRuleNew) 
2020-06-17 12:51:26.330 [DEBUG] com.benetech.rules.RulesApplication                - [logStarting:56] Running with Spring Boot v2.2.1.RELEASE, Spring v5.2.1.RELEASE 
2020-06-17 12:51:26.331 [INFO ] com.benetech.rules.RulesApplication                - [logStartupProfileInfo:655] The following profiles are active: test 
2020-06-17 12:51:28.528 [INFO ] o.s.boot.web.embedded.tomcat.TomcatWebServer       - [initialize:92] Tomcat initialized with port(s): 8838 (http) 
2020-06-17 12:51:28.539 [INFO ] org.apache.coyote.http11.Http11NioProtocol         - [log:173] Initializing ProtocolHandler ["http-nio-8838"] 
2020-06-17 12:51:28.539 [INFO ] org.apache.catalina.core.StandardService           - [log:173] Starting service [Tomcat] 
2020-06-17 12:51:28.540 [INFO ] org.apache.catalina.core.StandardEngine            - [log:173] Starting Servlet engine: [Apache Tomcat/9.0.27] 
2020-06-17 12:51:28.622 [INFO ] o.a.c.c.C.[.[localhost].[/healthRecordRules]       - [log:173] Initializing Spring embedded WebApplicationContext 
2020-06-17 12:51:28.623 [INFO ] org.springframework.web.context.ContextLoader      - [prepareWebApplicationContext:284] Root WebApplicationContext: initialization completed in 2137 ms 
2020-06-17 12:51:28.758 [DEBUG] org.apache.ibatis.logging.LogFactory               - [setImplementation:135] Logging initialized using 'class org.apache.ibatis.logging.slf4j.Slf4jImpl' adapter. 
2020-06-17 12:51:29.131 [WARN ] org.mybatis.spring.SqlSessionFactoryBean           - [buildSqlSessionFactory:467] Can't find class in '[com.benetech.rules.*.entity]' package. Please check your configuration. 
2020-06-17 12:51:29.503 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 12:51:29.503 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 12:51:29.508 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 12:51:29.512 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 12:51:29.513 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 12:51:29.518 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 12:51:29.522 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 12:51:29.522 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 12:51:29.527 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-17 12:51:29.533 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 12:51:29.533 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:51:29.538 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 12:51:29.543 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 12:51:29.543 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:51:29.550 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 12:51:29.554 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 12:51:29.554 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 12:51:29.554 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 12:51:29.555 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:51:29.558 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 12:51:29.562 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 12:51:29.563 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:51:29.569 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 12:51:29.573 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 12:51:29.573 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:51:29.578 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 12:51:29.583 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 12:51:29.583 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:51:29.598 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 12:51:29.603 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 12:51:29.603 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 12:51:29.603 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 12:51:29.604 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:51:29.609 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 12:51:29.614 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 12:51:29.614 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:51:29.619 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 12:51:29.623 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 12:51:29.623 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:51:29.628 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 12:51:29.633 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 12:51:29.633 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:51:29.637 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 12:51:29.667 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:血型与RH血型逻辑不符同时满足以下条件： 1、个人基本信息表《血型》填写为“不详” 2、个人基本信息表《RH血型》填写为“阴性”或“阳性” 
2020-06-17 12:51:29.671 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1)  
2020-06-17 12:51:29.671 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), a58b2894635045b18a63c250d46ce8a8(String), 2020-06-17 12:51:29.67(Timestamp) 
2020-06-17 12:51:29.704 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 1 
2020-06-17 12:51:29.952 [INFO ] com.alibaba.druid.pool.DruidDataSource             - [init:930] {dataSource-1} inited 
2020-06-17 12:51:30.201 [DEBUG] c.b.r.m.e.mapper.RuleEngineMapper.getAllRules      - [debug:159] ==>  Preparing: select a.RuleId as ruleId, a.RuleSql as clazz from HrRule a join HrRuleProps b on a.RuleId = b.RuleId where -- RuleId in ('34278f71cf1d42c88158aaf637fa5203', '8d30baa03bfc4233a8f115c57a0ebf08', '63eb82a44bf64c96a0b9023fa2a3c9d9') a.RuleSql != '' and a.RuleSql is not null and b.Enable = 1  
2020-06-17 12:51:30.221 [DEBUG] c.b.r.m.e.mapper.RuleEngineMapper.getAllRules      - [debug:159] ==> Parameters:  
2020-06-17 12:51:30.329 [DEBUG] c.b.r.m.e.mapper.RuleEngineMapper.getAllRules      - [debug:159] <==      Total: 310 
2020-06-17 12:51:30.687 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [init:68] 加载规则：310 条 
2020-06-17 12:51:30.711 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.getAllCode    - [debug:159] ==>  Preparing: SELECT codeSysType AS type, code AS code, [value] AS value FROM tb_code_value WHERE code != '' AND [value] != ''  
2020-06-17 12:51:30.712 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.getAllCode    - [debug:159] ==> Parameters:  
2020-06-17 12:51:31.878 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.getAllCode    - [debug:159] <==      Total: 44881 
2020-06-17 12:51:31.910 [INFO ] c.b.r.m.m.service.impl.EhrModelBuildServiceImpl    - [init:96] 初始化字典类型: 467 种 
2020-06-17 12:51:31.911 [INFO ] c.b.r.m.m.service.impl.EhrModelBuildServiceImpl    - [init:97] 初始化字典: 44881 条 
2020-06-17 12:51:31.912 [ERROR] c.b.r.m.process.service.impl.QcProcessServiceImpl  - [init:44] 初始化线程池 
2020-06-17 12:51:32.050 [INFO ] o.s.scheduling.concurrent.ThreadPoolTaskExecutor   - [initialize:171] Initializing ExecutorService 'applicationTaskExecutor' 
2020-06-17 12:51:32.256 [INFO ] org.apache.coyote.http11.Http11NioProtocol         - [log:173] Starting ProtocolHandler ["http-nio-8838"] 
2020-06-17 12:51:32.268 [INFO ] org.apache.coyote.http11.Http11NioProtocol         - [log:173] Pausing ProtocolHandler ["http-nio-8838"] 
2020-06-17 12:51:32.268 [INFO ] org.apache.catalina.core.StandardService           - [log:173] Stopping service [Tomcat] 
2020-06-17 12:51:32.272 [INFO ] org.apache.coyote.http11.Http11NioProtocol         - [log:173] Stopping ProtocolHandler ["http-nio-8838"] 
2020-06-17 12:51:32.272 [INFO ] org.apache.coyote.http11.Http11NioProtocol         - [log:173] Destroying ProtocolHandler ["http-nio-8838"] 
2020-06-17 12:51:32.274 [INFO ] o.s.b.a.l.ConditionEvaluationReportLoggingListener - [logMessage:136]     Error starting ApplicationContext. To display the conditions report re-run your application with 'debug' enabled. 
2020-06-17 12:51:32.275 [ERROR] o.s.b.diagnostics.LoggingFailureAnalysisReporter   - [report:40]     ***************************  APPLICATION FAILED TO START  ***************************    Description:    Web server failed to start. Port 8838 was already in use.    Action:    Identify and stop the process that's listening on port 8838 or configure this application to listen on another port.   
2020-06-17 12:51:32.277 [INFO ] o.s.scheduling.concurrent.ThreadPoolTaskExecutor   - [shutdown:208] Shutting down ExecutorService 'applicationTaskExecutor' 
2020-06-17 12:51:32.281 [INFO ] com.alibaba.druid.pool.DruidDataSource             - [close:1825] {dataSource-1} closed 
2020-06-17 12:52:07.594 [INFO ] com.benetech.rules.RulesApplication                - [logStarting:55] Starting RulesApplication v1.0-SNAPSHOT on DESKTOP-EOCO1V0 with PID 1764 (D:\51\python\project\instance\zyjk\EHR\controlRuleNew\config\healthRecordRules.jar started by ZY in D:\51\python\project\instance\zyjk\EHR\controlRuleNew) 
2020-06-17 12:52:07.598 [DEBUG] com.benetech.rules.RulesApplication                - [logStarting:56] Running with Spring Boot v2.2.1.RELEASE, Spring v5.2.1.RELEASE 
2020-06-17 12:52:07.598 [INFO ] com.benetech.rules.RulesApplication                - [logStartupProfileInfo:655] The following profiles are active: test 
2020-06-17 12:52:09.185 [INFO ] o.s.boot.web.embedded.tomcat.TomcatWebServer       - [initialize:92] Tomcat initialized with port(s): 8838 (http) 
2020-06-17 12:52:09.197 [INFO ] org.apache.coyote.http11.Http11NioProtocol         - [log:173] Initializing ProtocolHandler ["http-nio-8838"] 
2020-06-17 12:52:09.197 [INFO ] org.apache.catalina.core.StandardService           - [log:173] Starting service [Tomcat] 
2020-06-17 12:52:09.198 [INFO ] org.apache.catalina.core.StandardEngine            - [log:173] Starting Servlet engine: [Apache Tomcat/9.0.27] 
2020-06-17 12:52:09.272 [INFO ] o.a.c.c.C.[.[localhost].[/healthRecordRules]       - [log:173] Initializing Spring embedded WebApplicationContext 
2020-06-17 12:52:09.272 [INFO ] org.springframework.web.context.ContextLoader      - [prepareWebApplicationContext:284] Root WebApplicationContext: initialization completed in 1583 ms 
2020-06-17 12:52:09.364 [DEBUG] org.apache.ibatis.logging.LogFactory               - [setImplementation:135] Logging initialized using 'class org.apache.ibatis.logging.slf4j.Slf4jImpl' adapter. 
2020-06-17 12:52:09.537 [WARN ] org.mybatis.spring.SqlSessionFactoryBean           - [buildSqlSessionFactory:467] Can't find class in '[com.benetech.rules.*.entity]' package. Please check your configuration. 
2020-06-17 12:52:10.282 [INFO ] com.alibaba.druid.pool.DruidDataSource             - [init:930] {dataSource-1} inited 
2020-06-17 12:52:10.500 [DEBUG] c.b.r.m.e.mapper.RuleEngineMapper.getAllRules      - [debug:159] ==>  Preparing: select a.RuleId as ruleId, a.RuleSql as clazz from HrRule a join HrRuleProps b on a.RuleId = b.RuleId where -- RuleId in ('34278f71cf1d42c88158aaf637fa5203', '8d30baa03bfc4233a8f115c57a0ebf08', '63eb82a44bf64c96a0b9023fa2a3c9d9') a.RuleSql != '' and a.RuleSql is not null and b.Enable = 1  
2020-06-17 12:52:10.535 [DEBUG] c.b.r.m.e.mapper.RuleEngineMapper.getAllRules      - [debug:159] ==> Parameters:  
2020-06-17 12:52:10.618 [DEBUG] c.b.r.m.e.mapper.RuleEngineMapper.getAllRules      - [debug:159] <==      Total: 310 
2020-06-17 12:52:10.808 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 12:52:10.808 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 12:52:10.813 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 12:52:10.817 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 12:52:10.817 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 12:52:10.822 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 12:52:10.827 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 12:52:10.827 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 12:52:10.832 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-17 12:52:10.836 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 12:52:10.836 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:52:10.841 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 12:52:10.845 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 12:52:10.845 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:52:10.851 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 12:52:10.855 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 12:52:10.855 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 12:52:10.855 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 12:52:10.855 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:52:10.860 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 12:52:10.864 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 12:52:10.864 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:52:10.866 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [init:68] 加载规则：310 条 
2020-06-17 12:52:10.869 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 12:52:10.873 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 12:52:10.873 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:52:10.878 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 12:52:10.882 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 12:52:10.882 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:52:10.895 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 12:52:10.901 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 12:52:10.902 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 12:52:10.902 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 12:52:10.902 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:52:10.894 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.getAllCode    - [debug:159] ==>  Preparing: SELECT codeSysType AS type, code AS code, [value] AS value FROM tb_code_value WHERE code != '' AND [value] != ''  
2020-06-17 12:52:10.904 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.getAllCode    - [debug:159] ==> Parameters:  
2020-06-17 12:52:10.907 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 12:52:10.918 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 12:52:10.918 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:52:10.930 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 12:52:10.946 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 12:52:10.947 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:52:10.952 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 12:52:10.957 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 12:52:10.957 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:52:10.961 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 12:52:11.006 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:血型与RH血型逻辑不符同时满足以下条件： 1、个人基本信息表《血型》填写为“不详” 2、个人基本信息表《RH血型》填写为“阴性”或“阳性” 
2020-06-17 12:52:11.009 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1)  
2020-06-17 12:52:11.010 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), a58b2894635045b18a63c250d46ce8a8(String), 2020-06-17 12:52:11.009(Timestamp) 
2020-06-17 12:52:11.035 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 1 
2020-06-17 12:52:11.443 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.getAllCode    - [debug:159] <==      Total: 44881 
2020-06-17 12:52:11.470 [INFO ] c.b.r.m.m.service.impl.EhrModelBuildServiceImpl    - [init:96] 初始化字典类型: 467 种 
2020-06-17 12:52:11.471 [INFO ] c.b.r.m.m.service.impl.EhrModelBuildServiceImpl    - [init:97] 初始化字典: 44881 条 
2020-06-17 12:52:11.471 [ERROR] c.b.r.m.process.service.impl.QcProcessServiceImpl  - [init:44] 初始化线程池 
2020-06-17 12:52:11.692 [INFO ] o.s.scheduling.concurrent.ThreadPoolTaskExecutor   - [initialize:171] Initializing ExecutorService 'applicationTaskExecutor' 
2020-06-17 12:52:11.952 [INFO ] org.apache.coyote.http11.Http11NioProtocol         - [log:173] Starting ProtocolHandler ["http-nio-8838"] 
2020-06-17 12:52:11.966 [INFO ] org.apache.coyote.http11.Http11NioProtocol         - [log:173] Pausing ProtocolHandler ["http-nio-8838"] 
2020-06-17 12:52:11.966 [INFO ] org.apache.catalina.core.StandardService           - [log:173] Stopping service [Tomcat] 
2020-06-17 12:52:11.970 [INFO ] org.apache.coyote.http11.Http11NioProtocol         - [log:173] Stopping ProtocolHandler ["http-nio-8838"] 
2020-06-17 12:52:11.970 [INFO ] org.apache.coyote.http11.Http11NioProtocol         - [log:173] Destroying ProtocolHandler ["http-nio-8838"] 
2020-06-17 12:52:11.972 [INFO ] o.s.b.a.l.ConditionEvaluationReportLoggingListener - [logMessage:136]     Error starting ApplicationContext. To display the conditions report re-run your application with 'debug' enabled. 
2020-06-17 12:52:11.974 [ERROR] o.s.b.diagnostics.LoggingFailureAnalysisReporter   - [report:40]     ***************************  APPLICATION FAILED TO START  ***************************    Description:    Web server failed to start. Port 8838 was already in use.    Action:    Identify and stop the process that's listening on port 8838 or configure this application to listen on another port.   
2020-06-17 12:52:11.976 [INFO ] o.s.scheduling.concurrent.ThreadPoolTaskExecutor   - [shutdown:208] Shutting down ExecutorService 'applicationTaskExecutor' 
2020-06-17 12:52:11.981 [INFO ] com.alibaba.druid.pool.DruidDataSource             - [close:1825] {dataSource-1} closed 
2020-06-17 12:52:14.711 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 12:52:14.711 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 12:52:14.717 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 12:52:14.721 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 12:52:14.721 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 12:52:14.726 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 12:52:14.731 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 12:52:14.732 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 12:52:14.738 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-17 12:52:14.744 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 12:52:14.745 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:52:14.750 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 12:52:14.755 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 12:52:14.756 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:52:14.763 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 12:52:14.767 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 12:52:14.767 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 12:52:14.769 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 12:52:14.770 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:52:14.775 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 12:52:14.779 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 12:52:14.780 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:52:14.786 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 12:52:14.791 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 12:52:14.792 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:52:14.797 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 12:52:14.802 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 12:52:14.803 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:52:14.817 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 12:52:14.822 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 12:52:14.823 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 12:52:14.824 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 12:52:14.825 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:52:14.833 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 12:52:14.838 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 12:52:14.839 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:52:14.846 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 12:52:14.852 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 12:52:14.853 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:52:14.858 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 12:52:14.863 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 12:52:14.864 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:52:14.869 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 12:52:14.892 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:联系人姓名填写为数字同时满足以下条件： 1、联系人姓名不为空值 2、联系人姓名为纯数字 
2020-06-17 12:52:14.898 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:血型与RH血型逻辑不符同时满足以下条件： 1、个人基本信息表《血型》填写为“不详” 2、个人基本信息表《RH血型》填写为“阴性”或“阳性” 
2020-06-17 12:52:14.902 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-17 12:52:14.903 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 1a7e1f2e0bce421585a1fad889411dd4(String), 2020-06-17 12:52:14.902(Timestamp), 31011310200312009116(String), a58b2894635045b18a63c250d46ce8a8(String), 2020-06-17 12:52:14.902(Timestamp) 
2020-06-17 12:52:14.917 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 2 
2020-06-17 12:52:36.070 [INFO ] com.benetech.rules.RulesApplication                - [logStarting:55] Starting RulesApplication v1.0-SNAPSHOT on DESKTOP-EOCO1V0 with PID 12104 (D:\51\python\project\instance\zyjk\EHR\controlRuleNew\config\healthRecordRules.jar started by ZY in D:\51\python\project\instance\zyjk\EHR\controlRuleNew) 
2020-06-17 12:52:36.074 [DEBUG] com.benetech.rules.RulesApplication                - [logStarting:56] Running with Spring Boot v2.2.1.RELEASE, Spring v5.2.1.RELEASE 
2020-06-17 12:52:36.075 [INFO ] com.benetech.rules.RulesApplication                - [logStartupProfileInfo:655] The following profiles are active: test 
2020-06-17 12:52:37.567 [INFO ] o.s.boot.web.embedded.tomcat.TomcatWebServer       - [initialize:92] Tomcat initialized with port(s): 8838 (http) 
2020-06-17 12:52:37.578 [INFO ] org.apache.coyote.http11.Http11NioProtocol         - [log:173] Initializing ProtocolHandler ["http-nio-8838"] 
2020-06-17 12:52:37.579 [INFO ] org.apache.catalina.core.StandardService           - [log:173] Starting service [Tomcat] 
2020-06-17 12:52:37.579 [INFO ] org.apache.catalina.core.StandardEngine            - [log:173] Starting Servlet engine: [Apache Tomcat/9.0.27] 
2020-06-17 12:52:37.646 [INFO ] o.a.c.c.C.[.[localhost].[/healthRecordRules]       - [log:173] Initializing Spring embedded WebApplicationContext 
2020-06-17 12:52:37.647 [INFO ] org.springframework.web.context.ContextLoader      - [prepareWebApplicationContext:284] Root WebApplicationContext: initialization completed in 1514 ms 
2020-06-17 12:52:37.731 [DEBUG] org.apache.ibatis.logging.LogFactory               - [setImplementation:135] Logging initialized using 'class org.apache.ibatis.logging.slf4j.Slf4jImpl' adapter. 
2020-06-17 12:52:37.990 [WARN ] org.mybatis.spring.SqlSessionFactoryBean           - [buildSqlSessionFactory:467] Can't find class in '[com.benetech.rules.*.entity]' package. Please check your configuration. 
2020-06-17 12:52:38.669 [INFO ] com.alibaba.druid.pool.DruidDataSource             - [init:930] {dataSource-1} inited 
2020-06-17 12:52:38.862 [DEBUG] c.b.r.m.e.mapper.RuleEngineMapper.getAllRules      - [debug:159] ==>  Preparing: select a.RuleId as ruleId, a.RuleSql as clazz from HrRule a join HrRuleProps b on a.RuleId = b.RuleId where -- RuleId in ('34278f71cf1d42c88158aaf637fa5203', '8d30baa03bfc4233a8f115c57a0ebf08', '63eb82a44bf64c96a0b9023fa2a3c9d9') a.RuleSql != '' and a.RuleSql is not null and b.Enable = 1  
2020-06-17 12:52:38.884 [DEBUG] c.b.r.m.e.mapper.RuleEngineMapper.getAllRules      - [debug:159] ==> Parameters:  
2020-06-17 12:52:38.964 [DEBUG] c.b.r.m.e.mapper.RuleEngineMapper.getAllRules      - [debug:159] <==      Total: 310 
2020-06-17 12:52:39.187 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [init:68] 加载规则：310 条 
2020-06-17 12:52:39.204 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.getAllCode    - [debug:159] ==>  Preparing: SELECT codeSysType AS type, code AS code, [value] AS value FROM tb_code_value WHERE code != '' AND [value] != ''  
2020-06-17 12:52:39.205 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.getAllCode    - [debug:159] ==> Parameters:  
2020-06-17 12:52:39.554 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.getAllCode    - [debug:159] <==      Total: 44881 
2020-06-17 12:52:39.582 [INFO ] c.b.r.m.m.service.impl.EhrModelBuildServiceImpl    - [init:96] 初始化字典类型: 467 种 
2020-06-17 12:52:39.582 [INFO ] c.b.r.m.m.service.impl.EhrModelBuildServiceImpl    - [init:97] 初始化字典: 44881 条 
2020-06-17 12:52:39.583 [ERROR] c.b.r.m.process.service.impl.QcProcessServiceImpl  - [init:44] 初始化线程池 
2020-06-17 12:52:39.709 [INFO ] o.s.scheduling.concurrent.ThreadPoolTaskExecutor   - [initialize:171] Initializing ExecutorService 'applicationTaskExecutor' 
2020-06-17 12:52:39.956 [INFO ] org.apache.coyote.http11.Http11NioProtocol         - [log:173] Starting ProtocolHandler ["http-nio-8838"] 
2020-06-17 12:52:39.968 [INFO ] org.apache.coyote.http11.Http11NioProtocol         - [log:173] Pausing ProtocolHandler ["http-nio-8838"] 
2020-06-17 12:52:39.968 [INFO ] org.apache.catalina.core.StandardService           - [log:173] Stopping service [Tomcat] 
2020-06-17 12:52:39.972 [INFO ] org.apache.coyote.http11.Http11NioProtocol         - [log:173] Stopping ProtocolHandler ["http-nio-8838"] 
2020-06-17 12:52:39.972 [INFO ] org.apache.coyote.http11.Http11NioProtocol         - [log:173] Destroying ProtocolHandler ["http-nio-8838"] 
2020-06-17 12:52:39.975 [INFO ] o.s.b.a.l.ConditionEvaluationReportLoggingListener - [logMessage:136]     Error starting ApplicationContext. To display the conditions report re-run your application with 'debug' enabled. 
2020-06-17 12:52:39.976 [ERROR] o.s.b.diagnostics.LoggingFailureAnalysisReporter   - [report:40]     ***************************  APPLICATION FAILED TO START  ***************************    Description:    Web server failed to start. Port 8838 was already in use.    Action:    Identify and stop the process that's listening on port 8838 or configure this application to listen on another port.   
2020-06-17 12:52:39.981 [INFO ] o.s.scheduling.concurrent.ThreadPoolTaskExecutor   - [shutdown:208] Shutting down ExecutorService 'applicationTaskExecutor' 
2020-06-17 12:52:39.986 [INFO ] com.alibaba.druid.pool.DruidDataSource             - [close:1825] {dataSource-1} closed 
2020-06-17 12:53:03.659 [INFO ] com.benetech.rules.RulesApplication                - [logStarting:55] Starting RulesApplication v1.0-SNAPSHOT on DESKTOP-EOCO1V0 with PID 4644 (D:\51\python\project\instance\zyjk\EHR\controlRuleNew\config\healthRecordRules.jar started by ZY in D:\51\python\project\instance\zyjk\EHR\controlRuleNew) 
2020-06-17 12:53:03.662 [DEBUG] com.benetech.rules.RulesApplication                - [logStarting:56] Running with Spring Boot v2.2.1.RELEASE, Spring v5.2.1.RELEASE 
2020-06-17 12:53:03.662 [INFO ] com.benetech.rules.RulesApplication                - [logStartupProfileInfo:655] The following profiles are active: test 
2020-06-17 12:53:05.242 [INFO ] o.s.boot.web.embedded.tomcat.TomcatWebServer       - [initialize:92] Tomcat initialized with port(s): 8838 (http) 
2020-06-17 12:53:05.254 [INFO ] org.apache.coyote.http11.Http11NioProtocol         - [log:173] Initializing ProtocolHandler ["http-nio-8838"] 
2020-06-17 12:53:05.255 [INFO ] org.apache.catalina.core.StandardService           - [log:173] Starting service [Tomcat] 
2020-06-17 12:53:05.255 [INFO ] org.apache.catalina.core.StandardEngine            - [log:173] Starting Servlet engine: [Apache Tomcat/9.0.27] 
2020-06-17 12:53:05.331 [INFO ] o.a.c.c.C.[.[localhost].[/healthRecordRules]       - [log:173] Initializing Spring embedded WebApplicationContext 
2020-06-17 12:53:05.332 [INFO ] org.springframework.web.context.ContextLoader      - [prepareWebApplicationContext:284] Root WebApplicationContext: initialization completed in 1568 ms 
2020-06-17 12:53:05.418 [DEBUG] org.apache.ibatis.logging.LogFactory               - [setImplementation:135] Logging initialized using 'class org.apache.ibatis.logging.slf4j.Slf4jImpl' adapter. 
2020-06-17 12:53:05.595 [WARN ] org.mybatis.spring.SqlSessionFactoryBean           - [buildSqlSessionFactory:467] Can't find class in '[com.benetech.rules.*.entity]' package. Please check your configuration. 
2020-06-17 12:53:06.352 [INFO ] com.alibaba.druid.pool.DruidDataSource             - [init:930] {dataSource-1} inited 
2020-06-17 12:53:06.564 [DEBUG] c.b.r.m.e.mapper.RuleEngineMapper.getAllRules      - [debug:159] ==>  Preparing: select a.RuleId as ruleId, a.RuleSql as clazz from HrRule a join HrRuleProps b on a.RuleId = b.RuleId where -- RuleId in ('34278f71cf1d42c88158aaf637fa5203', '8d30baa03bfc4233a8f115c57a0ebf08', '63eb82a44bf64c96a0b9023fa2a3c9d9') a.RuleSql != '' and a.RuleSql is not null and b.Enable = 1  
2020-06-17 12:53:06.583 [DEBUG] c.b.r.m.e.mapper.RuleEngineMapper.getAllRules      - [debug:159] ==> Parameters:  
2020-06-17 12:53:06.659 [DEBUG] c.b.r.m.e.mapper.RuleEngineMapper.getAllRules      - [debug:159] <==      Total: 310 
2020-06-17 12:53:06.875 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [init:68] 加载规则：310 条 
2020-06-17 12:53:06.890 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.getAllCode    - [debug:159] ==>  Preparing: SELECT codeSysType AS type, code AS code, [value] AS value FROM tb_code_value WHERE code != '' AND [value] != ''  
2020-06-17 12:53:06.891 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.getAllCode    - [debug:159] ==> Parameters:  
2020-06-17 12:53:07.391 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.getAllCode    - [debug:159] <==      Total: 44881 
2020-06-17 12:53:07.419 [INFO ] c.b.r.m.m.service.impl.EhrModelBuildServiceImpl    - [init:96] 初始化字典类型: 467 种 
2020-06-17 12:53:07.419 [INFO ] c.b.r.m.m.service.impl.EhrModelBuildServiceImpl    - [init:97] 初始化字典: 44881 条 
2020-06-17 12:53:07.420 [ERROR] c.b.r.m.process.service.impl.QcProcessServiceImpl  - [init:44] 初始化线程池 
2020-06-17 12:53:07.547 [INFO ] o.s.scheduling.concurrent.ThreadPoolTaskExecutor   - [initialize:171] Initializing ExecutorService 'applicationTaskExecutor' 
2020-06-17 12:53:07.762 [INFO ] org.apache.coyote.http11.Http11NioProtocol         - [log:173] Starting ProtocolHandler ["http-nio-8838"] 
2020-06-17 12:53:07.774 [INFO ] org.apache.coyote.http11.Http11NioProtocol         - [log:173] Pausing ProtocolHandler ["http-nio-8838"] 
2020-06-17 12:53:07.774 [INFO ] org.apache.catalina.core.StandardService           - [log:173] Stopping service [Tomcat] 
2020-06-17 12:53:07.777 [INFO ] org.apache.coyote.http11.Http11NioProtocol         - [log:173] Stopping ProtocolHandler ["http-nio-8838"] 
2020-06-17 12:53:07.778 [INFO ] org.apache.coyote.http11.Http11NioProtocol         - [log:173] Destroying ProtocolHandler ["http-nio-8838"] 
2020-06-17 12:53:07.780 [INFO ] o.s.b.a.l.ConditionEvaluationReportLoggingListener - [logMessage:136]     Error starting ApplicationContext. To display the conditions report re-run your application with 'debug' enabled. 
2020-06-17 12:53:07.782 [ERROR] o.s.b.diagnostics.LoggingFailureAnalysisReporter   - [report:40]     ***************************  APPLICATION FAILED TO START  ***************************    Description:    Web server failed to start. Port 8838 was already in use.    Action:    Identify and stop the process that's listening on port 8838 or configure this application to listen on another port.   
2020-06-17 12:53:07.784 [INFO ] o.s.scheduling.concurrent.ThreadPoolTaskExecutor   - [shutdown:208] Shutting down ExecutorService 'applicationTaskExecutor' 
2020-06-17 12:53:07.788 [INFO ] com.alibaba.druid.pool.DruidDataSource             - [close:1825] {dataSource-1} closed 
2020-06-17 12:53:49.124 [INFO ] com.benetech.rules.RulesApplication                - [logStarting:55] Starting RulesApplication v1.0-SNAPSHOT on DESKTOP-EOCO1V0 with PID 2356 (D:\51\python\project\instance\zyjk\EHR\controlRuleNew\config\healthRecordRules.jar started by ZY in D:\51\python\project\instance\zyjk\EHR\controlRuleNew) 
2020-06-17 12:53:49.127 [DEBUG] com.benetech.rules.RulesApplication                - [logStarting:56] Running with Spring Boot v2.2.1.RELEASE, Spring v5.2.1.RELEASE 
2020-06-17 12:53:49.128 [INFO ] com.benetech.rules.RulesApplication                - [logStartupProfileInfo:655] The following profiles are active: test 
2020-06-17 12:53:50.690 [INFO ] o.s.boot.web.embedded.tomcat.TomcatWebServer       - [initialize:92] Tomcat initialized with port(s): 8838 (http) 
2020-06-17 12:53:50.702 [INFO ] org.apache.coyote.http11.Http11NioProtocol         - [log:173] Initializing ProtocolHandler ["http-nio-8838"] 
2020-06-17 12:53:50.702 [INFO ] org.apache.catalina.core.StandardService           - [log:173] Starting service [Tomcat] 
2020-06-17 12:53:50.703 [INFO ] org.apache.catalina.core.StandardEngine            - [log:173] Starting Servlet engine: [Apache Tomcat/9.0.27] 
2020-06-17 12:53:50.768 [INFO ] o.a.c.c.C.[.[localhost].[/healthRecordRules]       - [log:173] Initializing Spring embedded WebApplicationContext 
2020-06-17 12:53:50.769 [INFO ] org.springframework.web.context.ContextLoader      - [prepareWebApplicationContext:284] Root WebApplicationContext: initialization completed in 1553 ms 
2020-06-17 12:53:50.851 [DEBUG] org.apache.ibatis.logging.LogFactory               - [setImplementation:135] Logging initialized using 'class org.apache.ibatis.logging.slf4j.Slf4jImpl' adapter. 
2020-06-17 12:53:51.097 [WARN ] org.mybatis.spring.SqlSessionFactoryBean           - [buildSqlSessionFactory:467] Can't find class in '[com.benetech.rules.*.entity]' package. Please check your configuration. 
2020-06-17 12:53:51.814 [INFO ] com.alibaba.druid.pool.DruidDataSource             - [init:930] {dataSource-1} inited 
2020-06-17 12:53:52.053 [DEBUG] c.b.r.m.e.mapper.RuleEngineMapper.getAllRules      - [debug:159] ==>  Preparing: select a.RuleId as ruleId, a.RuleSql as clazz from HrRule a join HrRuleProps b on a.RuleId = b.RuleId where -- RuleId in ('34278f71cf1d42c88158aaf637fa5203', '8d30baa03bfc4233a8f115c57a0ebf08', '63eb82a44bf64c96a0b9023fa2a3c9d9') a.RuleSql != '' and a.RuleSql is not null and b.Enable = 1  
2020-06-17 12:53:52.072 [DEBUG] c.b.r.m.e.mapper.RuleEngineMapper.getAllRules      - [debug:159] ==> Parameters:  
2020-06-17 12:53:52.149 [DEBUG] c.b.r.m.e.mapper.RuleEngineMapper.getAllRules      - [debug:159] <==      Total: 310 
2020-06-17 12:53:52.380 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 12:53:52.380 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 12:53:52.386 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 12:53:52.389 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [init:68] 加载规则：310 条 
2020-06-17 12:53:52.391 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 12:53:52.391 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 12:53:52.397 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 12:53:52.403 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 12:53:52.403 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 12:53:52.406 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.getAllCode    - [debug:159] ==>  Preparing: SELECT codeSysType AS type, code AS code, [value] AS value FROM tb_code_value WHERE code != '' AND [value] != ''  
2020-06-17 12:53:52.407 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.getAllCode    - [debug:159] ==> Parameters:  
2020-06-17 12:53:52.408 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-17 12:53:52.416 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 12:53:52.416 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:53:52.422 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 12:53:52.427 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 12:53:52.427 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:53:52.433 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 12:53:52.449 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 12:53:52.449 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 12:53:52.450 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 12:53:52.450 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:53:52.456 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 12:53:52.462 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 12:53:52.462 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:53:52.471 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 12:53:52.476 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 12:53:52.477 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:53:52.482 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 12:53:52.487 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 12:53:52.487 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:53:52.501 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 12:53:52.505 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 12:53:52.505 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 12:53:52.505 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 12:53:52.505 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:53:52.510 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 12:53:52.514 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 12:53:52.514 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:53:52.520 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 12:53:52.524 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 12:53:52.524 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:53:52.529 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 12:53:52.533 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 12:53:52.533 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:53:52.538 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 12:53:52.551 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:联系人姓名填写为数字同时满足以下条件： 1、联系人姓名不为空值 2、联系人姓名为纯数字 
2020-06-17 12:53:52.554 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:与三级医院住院就诊记录表姓名不一致同时满足以下条件： 1、封面《姓名》不为空值 2、三级医院住院就诊记录表《患者姓名》不为空 3、封面《姓名》与住院就诊记录表中《患者姓名》不相等 
2020-06-17 12:53:52.555 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:与三级医院门诊就诊记录表姓名不一致同时满足以下条件： 1、封面《姓名》不为空值 2、三级医院门诊就诊记录表《患者姓名》不为空 3、封面《姓名》与门诊就诊记录表中《患者姓名》不相等 
2020-06-17 12:53:52.556 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:血型与RH血型逻辑不符同时满足以下条件： 1、个人基本信息表《血型》填写为“不详” 2、个人基本信息表《RH血型》填写为“阴性”或“阳性” 
2020-06-17 12:53:52.556 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:姓名长度异常长度>50字符 
2020-06-17 12:53:52.559 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-17 12:53:52.559 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 1a7e1f2e0bce421585a1fad889411dd4(String), 2020-06-17 12:53:52.558(Timestamp), 31011310200312009116(String), 814b3d0aca3642af82ef320f98d4dfba(String), 2020-06-17 12:53:52.558(Timestamp), 31011310200312009116(String), 847bc4b46918417dab4aa917af3355c3(String), 2020-06-17 12:53:52.558(Timestamp), 31011310200312009116(String), a58b2894635045b18a63c250d46ce8a8(String), 2020-06-17 12:53:52.558(Timestamp), 31011310200312009116(String), b8eeb38e528544b28133b9ee94c5fbc4(String), 2020-06-17 12:53:52.558(Timestamp) 
2020-06-17 12:53:52.590 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 5 
2020-06-17 12:53:52.903 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.getAllCode    - [debug:159] <==      Total: 44881 
2020-06-17 12:53:52.930 [INFO ] c.b.r.m.m.service.impl.EhrModelBuildServiceImpl    - [init:96] 初始化字典类型: 467 种 
2020-06-17 12:53:52.931 [INFO ] c.b.r.m.m.service.impl.EhrModelBuildServiceImpl    - [init:97] 初始化字典: 44881 条 
2020-06-17 12:53:52.931 [ERROR] c.b.r.m.process.service.impl.QcProcessServiceImpl  - [init:44] 初始化线程池 
2020-06-17 12:53:53.072 [INFO ] o.s.scheduling.concurrent.ThreadPoolTaskExecutor   - [initialize:171] Initializing ExecutorService 'applicationTaskExecutor' 
2020-06-17 12:53:53.367 [INFO ] org.apache.coyote.http11.Http11NioProtocol         - [log:173] Starting ProtocolHandler ["http-nio-8838"] 
2020-06-17 12:53:53.379 [INFO ] org.apache.coyote.http11.Http11NioProtocol         - [log:173] Pausing ProtocolHandler ["http-nio-8838"] 
2020-06-17 12:53:53.379 [INFO ] org.apache.catalina.core.StandardService           - [log:173] Stopping service [Tomcat] 
2020-06-17 12:53:53.383 [INFO ] org.apache.coyote.http11.Http11NioProtocol         - [log:173] Stopping ProtocolHandler ["http-nio-8838"] 
2020-06-17 12:53:53.384 [INFO ] org.apache.coyote.http11.Http11NioProtocol         - [log:173] Destroying ProtocolHandler ["http-nio-8838"] 
2020-06-17 12:53:53.386 [INFO ] o.s.b.a.l.ConditionEvaluationReportLoggingListener - [logMessage:136]     Error starting ApplicationContext. To display the conditions report re-run your application with 'debug' enabled. 
2020-06-17 12:53:53.387 [ERROR] o.s.b.diagnostics.LoggingFailureAnalysisReporter   - [report:40]     ***************************  APPLICATION FAILED TO START  ***************************    Description:    Web server failed to start. Port 8838 was already in use.    Action:    Identify and stop the process that's listening on port 8838 or configure this application to listen on another port.   
2020-06-17 12:53:53.390 [INFO ] o.s.scheduling.concurrent.ThreadPoolTaskExecutor   - [shutdown:208] Shutting down ExecutorService 'applicationTaskExecutor' 
2020-06-17 12:53:53.394 [INFO ] com.alibaba.druid.pool.DruidDataSource             - [close:1825] {dataSource-1} closed 
2020-06-17 12:53:55.976 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 12:53:55.977 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 12:53:55.985 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 12:53:56.009 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 12:53:56.009 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 12:53:56.018 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 12:53:56.025 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 12:53:56.026 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 12:53:56.030 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-17 12:53:56.034 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 12:53:56.035 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:53:56.039 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 12:53:56.043 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 12:53:56.044 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:53:56.049 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 12:53:56.053 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 12:53:56.053 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 12:53:56.054 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 12:53:56.054 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:53:56.058 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 12:53:56.063 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 12:53:56.064 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:53:56.080 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 12:53:56.094 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 12:53:56.094 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:53:56.101 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 12:53:56.106 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 12:53:56.106 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:53:56.120 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 12:53:56.125 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 12:53:56.125 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 12:53:56.125 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 12:53:56.125 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:53:56.130 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 12:53:56.137 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 12:53:56.137 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:53:56.146 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 12:53:56.151 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 12:53:56.151 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:53:56.155 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 12:53:56.160 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 12:53:56.160 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:53:56.165 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 12:53:56.177 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:联系人姓名填写为数字同时满足以下条件： 1、联系人姓名不为空值 2、联系人姓名为纯数字 
2020-06-17 12:53:56.180 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:现住址长度异常长度>100字符（包含省市区、乡镇街道名称（如有）、村居委会名称（如有）、详细地址） 
2020-06-17 12:53:56.181 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:血型与RH血型逻辑不符同时满足以下条件： 1、个人基本信息表《血型》填写为“不详” 2、个人基本信息表《RH血型》填写为“阴性”或“阳性” 
2020-06-17 12:53:56.183 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-17 12:53:56.183 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 1a7e1f2e0bce421585a1fad889411dd4(String), 2020-06-17 12:53:56.183(Timestamp), 31011310200312009116(String), 91665e0b2efa4f86aea807ec9f4883c3(String), 2020-06-17 12:53:56.183(Timestamp), 31011310200312009116(String), a58b2894635045b18a63c250d46ce8a8(String), 2020-06-17 12:53:56.183(Timestamp) 
2020-06-17 12:53:56.202 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 3 
2020-06-17 12:53:59.590 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 12:53:59.591 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 12:53:59.596 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 12:53:59.601 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 12:53:59.601 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 12:53:59.610 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 12:53:59.614 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 12:53:59.615 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 12:53:59.619 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-17 12:53:59.623 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 12:53:59.624 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:53:59.627 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 12:53:59.631 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 12:53:59.632 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:53:59.642 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 12:53:59.646 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 12:53:59.647 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 12:53:59.647 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 12:53:59.647 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:53:59.651 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 12:53:59.655 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 12:53:59.655 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:53:59.659 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 12:53:59.663 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 12:53:59.663 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:53:59.668 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 12:53:59.672 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 12:53:59.672 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:53:59.685 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 12:53:59.689 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 12:53:59.689 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 12:53:59.689 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 12:53:59.689 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:53:59.693 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 12:53:59.698 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 12:53:59.699 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:53:59.704 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 12:53:59.709 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 12:53:59.710 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:53:59.715 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 12:53:59.720 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 12:53:59.722 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:53:59.727 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 12:53:59.753 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:联系人姓名填写为数字同时满足以下条件： 1、联系人姓名不为空值 2、联系人姓名为纯数字 
2020-06-17 12:53:59.756 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:户籍地址长度异常长度>100字符（包含省市区、乡镇街道名称（如有）、村居委会名称（如有）、详细地址） 
2020-06-17 12:53:59.761 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:血型与RH血型逻辑不符同时满足以下条件： 1、个人基本信息表《血型》填写为“不详” 2、个人基本信息表《RH血型》填写为“阴性”或“阳性” 
2020-06-17 12:53:59.765 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-17 12:53:59.766 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 1a7e1f2e0bce421585a1fad889411dd4(String), 2020-06-17 12:53:59.764(Timestamp), 31011310200312009116(String), 329b69c7855544e986fc0073b77fe9be(String), 2020-06-17 12:53:59.764(Timestamp), 31011310200312009116(String), a58b2894635045b18a63c250d46ce8a8(String), 2020-06-17 12:53:59.764(Timestamp) 
2020-06-17 12:53:59.789 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 3 
2020-06-17 12:54:03.140 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 12:54:03.140 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 12:54:03.146 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 12:54:03.150 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 12:54:03.150 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 12:54:03.155 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 12:54:03.158 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 12:54:03.159 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 12:54:03.163 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-17 12:54:03.167 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 12:54:03.167 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:54:03.172 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 12:54:03.183 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 12:54:03.183 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:54:03.189 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 12:54:03.199 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 12:54:03.199 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 12:54:03.199 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 12:54:03.199 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:54:03.204 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 12:54:03.207 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 12:54:03.207 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:54:03.217 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 12:54:03.221 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 12:54:03.222 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:54:03.226 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 12:54:03.230 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 12:54:03.231 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:54:03.245 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 12:54:03.249 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 12:54:03.249 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 12:54:03.249 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 12:54:03.250 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:54:03.254 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 12:54:03.258 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 12:54:03.258 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:54:03.262 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 12:54:03.266 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 12:54:03.267 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:54:03.271 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 12:54:03.277 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 12:54:03.278 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:54:03.282 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 12:54:03.295 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:联系人姓名填写为数字同时满足以下条件： 1、联系人姓名不为空值 2、联系人姓名为纯数字 
2020-06-17 12:54:03.296 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:现住址乡镇（街道）名称长度异常长度>100字符 
2020-06-17 12:54:03.298 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:现住址长度异常长度>100字符（包含省市区、乡镇街道名称（如有）、村居委会名称（如有）、详细地址） 
2020-06-17 12:54:03.299 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:血型与RH血型逻辑不符同时满足以下条件： 1、个人基本信息表《血型》填写为“不详” 2、个人基本信息表《RH血型》填写为“阴性”或“阳性” 
2020-06-17 12:54:03.302 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-17 12:54:03.302 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 1a7e1f2e0bce421585a1fad889411dd4(String), 2020-06-17 12:54:03.301(Timestamp), 31011310200312009116(String), 40c92f3721704bb7a6eb42a8ca1976b6(String), 2020-06-17 12:54:03.301(Timestamp), 31011310200312009116(String), 91665e0b2efa4f86aea807ec9f4883c3(String), 2020-06-17 12:54:03.301(Timestamp), 31011310200312009116(String), a58b2894635045b18a63c250d46ce8a8(String), 2020-06-17 12:54:03.301(Timestamp) 
2020-06-17 12:54:03.338 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 4 
2020-06-17 12:54:06.594 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 12:54:06.595 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 12:54:06.599 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 12:54:06.604 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 12:54:06.604 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 12:54:06.608 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 12:54:06.613 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 12:54:06.613 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 12:54:06.618 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-17 12:54:06.622 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 12:54:06.622 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:54:06.627 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 12:54:06.632 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 12:54:06.632 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:54:06.637 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 12:54:06.641 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 12:54:06.641 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 12:54:06.641 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 12:54:06.642 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:54:06.647 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 12:54:06.651 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 12:54:06.651 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:54:06.656 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 12:54:06.659 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 12:54:06.659 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:54:06.665 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 12:54:06.669 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 12:54:06.670 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:54:06.684 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 12:54:06.688 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 12:54:06.689 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 12:54:06.689 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 12:54:06.689 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:54:06.693 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 12:54:06.697 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 12:54:06.698 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:54:06.709 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 12:54:06.714 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 12:54:06.714 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:54:06.719 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 12:54:06.723 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 12:54:06.723 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:54:06.727 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 12:54:06.739 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:联系人姓名填写为数字同时满足以下条件： 1、联系人姓名不为空值 2、联系人姓名为纯数字 
2020-06-17 12:54:06.742 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:现住址长度异常长度>100字符（包含省市区、乡镇街道名称（如有）、村居委会名称（如有）、详细地址） 
2020-06-17 12:54:06.743 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:现住址村（居）委会名称长度异常长度>100字符 
2020-06-17 12:54:06.743 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:血型与RH血型逻辑不符同时满足以下条件： 1、个人基本信息表《血型》填写为“不详” 2、个人基本信息表《RH血型》填写为“阴性”或“阳性” 
2020-06-17 12:54:06.745 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-17 12:54:06.746 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 1a7e1f2e0bce421585a1fad889411dd4(String), 2020-06-17 12:54:06.745(Timestamp), 31011310200312009116(String), 91665e0b2efa4f86aea807ec9f4883c3(String), 2020-06-17 12:54:06.745(Timestamp), 31011310200312009116(String), 9df07515be3d4c2887e947c6ce5adace(String), 2020-06-17 12:54:06.745(Timestamp), 31011310200312009116(String), a58b2894635045b18a63c250d46ce8a8(String), 2020-06-17 12:54:06.745(Timestamp) 
2020-06-17 12:54:06.780 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 4 
2020-06-17 12:54:10.099 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 12:54:10.099 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 12:54:10.104 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 12:54:10.107 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 12:54:10.108 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 12:54:10.112 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 12:54:10.117 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 12:54:10.117 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 12:54:10.121 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-17 12:54:10.125 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 12:54:10.126 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:54:10.130 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 12:54:10.134 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 12:54:10.134 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:54:10.139 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 12:54:10.143 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 12:54:10.144 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 12:54:10.144 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 12:54:10.144 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:54:10.149 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 12:54:10.153 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 12:54:10.153 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:54:10.157 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 12:54:10.161 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 12:54:10.161 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:54:10.165 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 12:54:10.170 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 12:54:10.170 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:54:10.195 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 12:54:10.199 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 12:54:10.199 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 12:54:10.199 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 12:54:10.199 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:54:10.203 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 12:54:10.208 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 12:54:10.209 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:54:10.214 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 12:54:10.218 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 12:54:10.219 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:54:10.223 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 12:54:10.226 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 12:54:10.228 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:54:10.232 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 12:54:10.243 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:联系人姓名填写为数字同时满足以下条件： 1、联系人姓名不为空值 2、联系人姓名为纯数字 
2020-06-17 12:54:10.245 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:建档单位长度异常长度>100字符 
2020-06-17 12:54:10.250 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:血型与RH血型逻辑不符同时满足以下条件： 1、个人基本信息表《血型》填写为“不详” 2、个人基本信息表《RH血型》填写为“阴性”或“阳性” 
2020-06-17 12:54:10.253 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-17 12:54:10.253 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 1a7e1f2e0bce421585a1fad889411dd4(String), 2020-06-17 12:54:10.252(Timestamp), 31011310200312009116(String), 403a97f9ec40406b9723b3c6845a6cee(String), 2020-06-17 12:54:10.252(Timestamp), 31011310200312009116(String), a58b2894635045b18a63c250d46ce8a8(String), 2020-06-17 12:54:10.252(Timestamp) 
2020-06-17 12:54:10.279 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 3 
2020-06-17 12:54:13.509 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 12:54:13.510 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 12:54:13.515 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 12:54:13.519 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 12:54:13.519 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 12:54:13.524 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 12:54:13.528 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 12:54:13.528 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 12:54:13.532 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-17 12:54:13.537 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 12:54:13.537 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:54:13.541 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 12:54:13.545 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 12:54:13.545 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:54:13.550 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 12:54:13.554 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 12:54:13.554 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 12:54:13.554 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 12:54:13.554 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:54:13.559 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 12:54:13.563 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 12:54:13.564 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:54:13.568 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 12:54:13.572 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 12:54:13.572 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:54:13.579 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 12:54:13.583 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 12:54:13.583 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:54:13.596 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 12:54:13.600 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 12:54:13.601 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 12:54:13.601 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 12:54:13.602 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:54:13.607 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 12:54:13.611 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 12:54:13.612 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:54:13.616 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 12:54:13.621 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 12:54:13.621 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:54:13.628 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 12:54:13.633 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 12:54:13.633 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:54:13.638 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 12:54:13.650 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:联系人姓名填写为数字同时满足以下条件： 1、联系人姓名不为空值 2、联系人姓名为纯数字 
2020-06-17 12:54:13.653 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:血型与RH血型逻辑不符同时满足以下条件： 1、个人基本信息表《血型》填写为“不详” 2、个人基本信息表《RH血型》填写为“阴性”或“阳性” 
2020-06-17 12:54:13.655 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-17 12:54:13.655 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 1a7e1f2e0bce421585a1fad889411dd4(String), 2020-06-17 12:54:13.655(Timestamp), 31011310200312009116(String), a58b2894635045b18a63c250d46ce8a8(String), 2020-06-17 12:54:13.655(Timestamp) 
2020-06-17 12:54:13.686 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 2 
2020-06-17 12:54:16.958 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 12:54:16.959 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 12:54:16.964 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 12:54:16.968 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 12:54:16.969 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 12:54:16.974 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 12:54:16.978 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 12:54:16.979 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 12:54:16.984 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-17 12:54:16.989 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 12:54:16.990 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:54:16.994 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 12:54:16.999 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 12:54:16.999 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:54:17.006 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 12:54:17.010 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 12:54:17.010 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 12:54:17.011 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 12:54:17.011 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:54:17.016 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 12:54:17.020 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 12:54:17.021 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:54:17.024 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 12:54:17.028 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 12:54:17.028 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:54:17.032 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 12:54:17.036 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 12:54:17.036 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:54:17.049 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 12:54:17.053 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 12:54:17.053 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 12:54:17.054 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 12:54:17.054 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:54:17.058 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 12:54:17.062 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 12:54:17.063 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:54:17.067 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 12:54:17.072 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 12:54:17.072 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:54:17.078 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 12:54:17.081 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 12:54:17.082 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:54:17.086 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 12:54:17.100 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:联系人姓名填写为数字同时满足以下条件： 1、联系人姓名不为空值 2、联系人姓名为纯数字 
2020-06-17 12:54:17.103 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:责任医生长度异常长度>50字符 
2020-06-17 12:54:17.103 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:血型与RH血型逻辑不符同时满足以下条件： 1、个人基本信息表《血型》填写为“不详” 2、个人基本信息表《RH血型》填写为“阴性”或“阳性” 
2020-06-17 12:54:17.105 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-17 12:54:17.106 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 1a7e1f2e0bce421585a1fad889411dd4(String), 2020-06-17 12:54:17.105(Timestamp), 31011310200312009116(String), 9042bba97fb74b558de96e35ab2ffdc2(String), 2020-06-17 12:54:17.105(Timestamp), 31011310200312009116(String), a58b2894635045b18a63c250d46ce8a8(String), 2020-06-17 12:54:17.105(Timestamp) 
2020-06-17 12:54:17.127 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 3 
2020-06-17 12:54:20.371 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 12:54:20.372 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 12:54:20.377 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 12:54:20.381 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 12:54:20.382 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 12:54:20.395 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 12:54:20.400 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 12:54:20.400 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 12:54:20.404 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-17 12:54:20.409 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 12:54:20.409 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:54:20.413 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 12:54:20.418 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 12:54:20.418 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:54:20.423 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 12:54:20.428 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 12:54:20.428 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 12:54:20.428 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 12:54:20.428 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:54:20.433 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 12:54:20.437 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 12:54:20.438 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:54:20.442 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 12:54:20.446 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 12:54:20.446 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:54:20.451 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 12:54:20.455 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 12:54:20.456 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:54:20.469 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 12:54:20.474 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 12:54:20.474 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 12:54:20.475 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 12:54:20.475 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:54:20.480 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 12:54:20.484 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 12:54:20.484 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:54:20.488 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 12:54:20.493 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 12:54:20.493 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:54:20.497 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 12:54:20.501 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 12:54:20.502 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:54:20.506 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 12:54:20.518 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:联系人姓名填写为数字同时满足以下条件： 1、联系人姓名不为空值 2、联系人姓名为纯数字 
2020-06-17 12:54:20.520 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:个人基本信息表工作单位工作单位不为汉字 
2020-06-17 12:54:20.525 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:血型与RH血型逻辑不符同时满足以下条件： 1、个人基本信息表《血型》填写为“不详” 2、个人基本信息表《RH血型》填写为“阴性”或“阳性” 
2020-06-17 12:54:20.528 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-17 12:54:20.529 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 1a7e1f2e0bce421585a1fad889411dd4(String), 2020-06-17 12:54:20.528(Timestamp), 31011310200312009116(String), 4ad5f41e777d499894964fe735a4ed46(String), 2020-06-17 12:54:20.528(Timestamp), 31011310200312009116(String), a58b2894635045b18a63c250d46ce8a8(String), 2020-06-17 12:54:20.528(Timestamp) 
2020-06-17 12:54:20.549 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 3 
2020-06-17 12:54:23.748 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 12:54:23.748 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 12:54:23.754 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 12:54:23.759 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 12:54:23.759 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 12:54:23.764 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 12:54:23.768 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 12:54:23.768 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 12:54:23.773 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-17 12:54:23.777 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 12:54:23.778 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:54:23.781 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 12:54:23.786 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 12:54:23.786 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:54:23.791 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 12:54:23.795 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 12:54:23.795 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 12:54:23.796 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 12:54:23.796 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:54:23.800 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 12:54:23.804 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 12:54:23.804 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:54:23.810 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 12:54:23.815 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 12:54:23.816 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:54:23.820 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 12:54:23.824 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 12:54:23.825 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:54:23.838 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 12:54:23.843 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 12:54:23.843 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 12:54:23.843 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 12:54:23.843 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:54:23.847 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 12:54:23.852 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 12:54:23.852 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:54:23.858 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 12:54:23.862 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 12:54:23.862 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:54:23.868 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 12:54:23.872 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 12:54:23.872 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:54:23.877 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 12:54:23.888 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:联系人姓名填写为数字同时满足以下条件： 1、联系人姓名不为空值 2、联系人姓名为纯数字 
2020-06-17 12:54:23.891 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:血型与RH血型逻辑不符同时满足以下条件： 1、个人基本信息表《血型》填写为“不详” 2、个人基本信息表《RH血型》填写为“阴性”或“阳性” 
2020-06-17 12:54:23.894 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-17 12:54:23.894 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 1a7e1f2e0bce421585a1fad889411dd4(String), 2020-06-17 12:54:23.894(Timestamp), 31011310200312009116(String), a58b2894635045b18a63c250d46ce8a8(String), 2020-06-17 12:54:23.894(Timestamp) 
2020-06-17 12:54:23.927 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 2 
2020-06-17 12:54:27.150 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 12:54:27.151 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 12:54:27.161 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 12:54:27.166 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 12:54:27.166 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 12:54:27.172 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 12:54:27.176 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 12:54:27.176 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 12:54:27.184 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-17 12:54:27.188 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 12:54:27.189 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:54:27.195 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 12:54:27.199 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 12:54:27.199 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:54:27.205 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 12:54:27.209 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 12:54:27.210 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 12:54:27.211 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 12:54:27.211 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:54:27.215 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 12:54:27.220 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 12:54:27.220 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:54:27.225 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 12:54:27.230 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 12:54:27.230 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:54:27.235 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 12:54:27.239 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 12:54:27.239 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:54:27.254 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 12:54:27.258 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 12:54:27.258 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 12:54:27.259 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 12:54:27.259 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:54:27.263 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 12:54:27.267 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 12:54:27.268 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:54:27.274 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 12:54:27.280 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 12:54:27.281 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:54:27.286 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 12:54:27.292 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 12:54:27.293 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:54:27.298 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 12:54:27.331 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:血型与RH血型逻辑不符同时满足以下条件： 1、个人基本信息表《血型》填写为“不详” 2、个人基本信息表《RH血型》填写为“阴性”或“阳性” 
2020-06-17 12:54:27.335 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1)  
2020-06-17 12:54:27.336 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), a58b2894635045b18a63c250d46ce8a8(String), 2020-06-17 12:54:27.335(Timestamp) 
2020-06-17 12:54:27.351 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 1 
2020-06-17 12:54:30.729 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 12:54:30.729 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 12:54:30.737 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 12:54:30.743 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 12:54:30.743 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 12:54:30.748 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 12:54:30.753 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 12:54:30.753 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 12:54:30.758 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-17 12:54:30.761 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 12:54:30.762 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:54:30.766 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 12:54:30.775 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 12:54:30.776 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:54:30.782 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 12:54:30.786 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 12:54:30.786 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 12:54:30.786 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 12:54:30.787 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:54:30.793 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 12:54:30.798 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 12:54:30.799 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:54:30.813 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 12:54:30.819 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 12:54:30.820 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:54:30.825 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 12:54:30.830 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 12:54:30.830 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:54:30.847 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 12:54:30.853 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 12:54:30.853 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 12:54:30.854 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 12:54:30.854 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:54:30.859 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 12:54:30.864 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 12:54:30.864 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:54:30.869 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 12:54:30.873 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 12:54:30.874 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:54:30.879 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 12:54:30.890 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 12:54:30.891 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:54:30.896 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 12:54:30.918 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:血型与RH血型逻辑不符同时满足以下条件： 1、个人基本信息表《血型》填写为“不详” 2、个人基本信息表《RH血型》填写为“阴性”或“阳性” 
2020-06-17 12:54:30.922 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1)  
2020-06-17 12:54:30.923 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), a58b2894635045b18a63c250d46ce8a8(String), 2020-06-17 12:54:30.922(Timestamp) 
2020-06-17 12:54:30.955 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 1 
2020-06-17 12:54:34.134 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 12:54:34.134 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 12:54:34.140 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 12:54:34.144 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 12:54:34.144 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 12:54:34.149 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 12:54:34.152 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 12:54:34.153 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 12:54:34.157 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-17 12:54:34.161 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 12:54:34.162 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:54:34.166 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 12:54:34.171 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 12:54:34.171 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:54:34.177 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 12:54:34.180 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 12:54:34.180 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 12:54:34.180 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 12:54:34.180 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:54:34.186 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 12:54:34.189 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 12:54:34.189 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:54:34.194 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 12:54:34.198 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 12:54:34.198 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:54:34.203 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 12:54:34.206 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 12:54:34.207 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:54:34.222 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 12:54:34.226 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 12:54:34.227 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 12:54:34.227 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 12:54:34.227 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:54:34.232 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 12:54:34.236 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 12:54:34.237 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:54:34.241 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 12:54:34.245 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 12:54:34.246 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:54:34.250 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 12:54:34.254 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 12:54:34.254 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:54:34.259 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 12:54:34.275 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:血型与RH血型逻辑不符同时满足以下条件： 1、个人基本信息表《血型》填写为“不详” 2、个人基本信息表《RH血型》填写为“阴性”或“阳性” 
2020-06-17 12:54:34.277 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1)  
2020-06-17 12:54:34.277 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), a58b2894635045b18a63c250d46ce8a8(String), 2020-06-17 12:54:34.277(Timestamp) 
2020-06-17 12:54:34.297 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 1 
2020-06-17 12:54:37.619 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 12:54:37.619 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 12:54:37.626 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 12:54:37.630 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 12:54:37.630 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 12:54:37.635 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 12:54:37.639 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 12:54:37.639 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 12:54:37.644 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-17 12:54:37.649 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 12:54:37.649 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:54:37.654 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 12:54:37.658 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 12:54:37.658 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:54:37.664 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 12:54:37.668 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 12:54:37.668 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 12:54:37.668 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 12:54:37.669 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:54:37.673 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 12:54:37.678 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 12:54:37.678 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:54:37.682 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 12:54:37.688 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 12:54:37.689 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:54:37.693 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 12:54:37.698 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 12:54:37.698 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:54:37.712 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 12:54:37.716 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 12:54:37.716 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 12:54:37.717 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 12:54:37.717 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:54:37.721 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 12:54:37.725 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 12:54:37.726 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:54:37.731 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 12:54:37.736 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 12:54:37.737 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:54:37.743 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 12:54:37.747 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 12:54:37.748 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:54:37.752 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 12:54:37.772 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:血型与RH血型逻辑不符同时满足以下条件： 1、个人基本信息表《血型》填写为“不详” 2、个人基本信息表《RH血型》填写为“阴性”或“阳性” 
2020-06-17 12:54:37.774 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1)  
2020-06-17 12:54:37.774 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), a58b2894635045b18a63c250d46ce8a8(String), 2020-06-17 12:54:37.774(Timestamp) 
2020-06-17 12:54:37.799 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 1 
2020-06-17 12:54:41.219 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 12:54:41.220 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 12:54:41.224 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 12:54:41.232 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 12:54:41.233 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 12:54:41.242 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 12:54:41.246 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 12:54:41.246 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 12:54:41.251 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-17 12:54:41.255 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 12:54:41.255 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:54:41.259 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 12:54:41.264 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 12:54:41.264 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:54:41.269 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 12:54:41.273 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 12:54:41.273 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 12:54:41.273 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 12:54:41.273 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:54:41.278 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 12:54:41.282 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 12:54:41.282 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:54:41.289 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 12:54:41.294 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 12:54:41.294 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:54:41.299 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 12:54:41.303 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 12:54:41.303 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:54:41.316 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 12:54:41.321 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 12:54:41.321 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 12:54:41.321 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 12:54:41.322 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:54:41.327 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 12:54:41.331 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 12:54:41.331 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:54:41.335 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 12:54:41.340 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 12:54:41.340 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:54:41.345 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 12:54:41.352 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 12:54:41.352 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:54:41.362 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 12:54:41.378 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:血型与RH血型逻辑不符同时满足以下条件： 1、个人基本信息表《血型》填写为“不详” 2、个人基本信息表《RH血型》填写为“阴性”或“阳性” 
2020-06-17 12:54:41.380 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1)  
2020-06-17 12:54:41.381 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), a58b2894635045b18a63c250d46ce8a8(String), 2020-06-17 12:54:41.38(Timestamp) 
2020-06-17 12:54:41.398 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 1 
2020-06-17 12:54:45.043 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 12:54:45.044 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 12:54:45.050 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 12:54:45.054 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 12:54:45.055 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 12:54:45.059 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 12:54:45.063 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 12:54:45.064 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 12:54:45.068 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-17 12:54:45.072 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 12:54:45.072 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:54:45.076 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 12:54:45.080 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 12:54:45.080 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:54:45.086 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 12:54:45.092 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 12:54:45.092 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 12:54:45.093 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 12:54:45.093 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:54:45.097 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 12:54:45.101 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 12:54:45.102 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:54:45.106 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 12:54:45.110 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 12:54:45.110 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:54:45.115 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 12:54:45.119 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 12:54:45.119 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:54:45.133 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 12:54:45.137 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 12:54:45.137 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 12:54:45.137 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 12:54:45.137 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:54:45.141 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 12:54:45.146 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 12:54:45.146 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:54:45.151 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 12:54:45.155 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 12:54:45.155 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:54:45.161 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 12:54:45.168 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 12:54:45.168 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:54:45.173 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 12:54:45.185 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:个人基本信息表既往史既往史疾病确诊时间未填写 
2020-06-17 12:54:45.187 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:个人基本信息表既往史既往史疾病确诊时间填写不规范 
2020-06-17 12:54:45.187 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:血型与RH血型逻辑不符同时满足以下条件： 1、个人基本信息表《血型》填写为“不详” 2、个人基本信息表《RH血型》填写为“阴性”或“阳性” 
2020-06-17 12:54:45.189 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-17 12:54:45.190 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 6302b0fcdcd7482099581602a1fec501(String), 2020-06-17 12:54:45.189(Timestamp), 31011310200312009116(String), 923bfb7880204efa8f26fd200d1bd17e(String), 2020-06-17 12:54:45.189(Timestamp), 31011310200312009116(String), a58b2894635045b18a63c250d46ce8a8(String), 2020-06-17 12:54:45.189(Timestamp) 
2020-06-17 12:54:45.215 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 3 
2020-06-17 12:57:11.130 [INFO ] com.benetech.rules.RulesApplication                - [logStarting:55] Starting RulesApplication v1.0-SNAPSHOT on DESKTOP-EOCO1V0 with PID 12192 (D:\51\python\project\instance\zyjk\EHR\controlRuleNew\config\healthRecordRules.jar started by ZY in D:\51\python\project\instance\zyjk\EHR\controlRuleNew) 
2020-06-17 12:57:11.134 [DEBUG] com.benetech.rules.RulesApplication                - [logStarting:56] Running with Spring Boot v2.2.1.RELEASE, Spring v5.2.1.RELEASE 
2020-06-17 12:57:11.134 [INFO ] com.benetech.rules.RulesApplication                - [logStartupProfileInfo:655] The following profiles are active: test 
2020-06-17 12:57:12.689 [INFO ] o.s.boot.web.embedded.tomcat.TomcatWebServer       - [initialize:92] Tomcat initialized with port(s): 8838 (http) 
2020-06-17 12:57:12.699 [INFO ] org.apache.coyote.http11.Http11NioProtocol         - [log:173] Initializing ProtocolHandler ["http-nio-8838"] 
2020-06-17 12:57:12.700 [INFO ] org.apache.catalina.core.StandardService           - [log:173] Starting service [Tomcat] 
2020-06-17 12:57:12.700 [INFO ] org.apache.catalina.core.StandardEngine            - [log:173] Starting Servlet engine: [Apache Tomcat/9.0.27] 
2020-06-17 12:57:12.765 [INFO ] o.a.c.c.C.[.[localhost].[/healthRecordRules]       - [log:173] Initializing Spring embedded WebApplicationContext 
2020-06-17 12:57:12.766 [INFO ] org.springframework.web.context.ContextLoader      - [prepareWebApplicationContext:284] Root WebApplicationContext: initialization completed in 1530 ms 
2020-06-17 12:57:12.853 [DEBUG] org.apache.ibatis.logging.LogFactory               - [setImplementation:135] Logging initialized using 'class org.apache.ibatis.logging.slf4j.Slf4jImpl' adapter. 
2020-06-17 12:57:13.109 [WARN ] org.mybatis.spring.SqlSessionFactoryBean           - [buildSqlSessionFactory:467] Can't find class in '[com.benetech.rules.*.entity]' package. Please check your configuration. 
2020-06-17 12:57:13.777 [INFO ] com.alibaba.druid.pool.DruidDataSource             - [init:930] {dataSource-1} inited 
2020-06-17 12:57:13.989 [DEBUG] c.b.r.m.e.mapper.RuleEngineMapper.getAllRules      - [debug:159] ==>  Preparing: select a.RuleId as ruleId, a.RuleSql as clazz from HrRule a join HrRuleProps b on a.RuleId = b.RuleId where -- RuleId in ('34278f71cf1d42c88158aaf637fa5203', '8d30baa03bfc4233a8f115c57a0ebf08', '63eb82a44bf64c96a0b9023fa2a3c9d9') a.RuleSql != '' and a.RuleSql is not null and b.Enable = 1  
2020-06-17 12:57:14.010 [DEBUG] c.b.r.m.e.mapper.RuleEngineMapper.getAllRules      - [debug:159] ==> Parameters:  
2020-06-17 12:57:14.086 [DEBUG] c.b.r.m.e.mapper.RuleEngineMapper.getAllRules      - [debug:159] <==      Total: 310 
2020-06-17 12:57:14.145 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 12:57:14.145 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 12:57:14.151 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 12:57:14.156 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 12:57:14.156 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 12:57:14.162 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 12:57:14.169 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 12:57:14.169 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 12:57:14.174 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-17 12:57:14.184 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 12:57:14.185 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:57:14.189 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 12:57:14.193 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 12:57:14.193 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:57:14.200 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 12:57:14.205 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 12:57:14.205 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 12:57:14.205 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 12:57:14.206 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:57:14.211 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 12:57:14.215 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 12:57:14.216 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:57:14.221 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 12:57:14.226 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 12:57:14.226 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:57:14.231 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 12:57:14.237 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 12:57:14.237 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:57:14.251 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 12:57:14.257 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 12:57:14.257 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 12:57:14.257 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 12:57:14.258 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:57:14.262 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 12:57:14.268 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 12:57:14.268 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:57:14.274 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 12:57:14.279 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 12:57:14.279 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:57:14.284 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 12:57:14.289 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 12:57:14.289 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:57:14.296 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 12:57:14.310 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:与三级医院住院就诊记录表姓名不一致同时满足以下条件： 1、封面《姓名》不为空值 2、三级医院住院就诊记录表《患者姓名》不为空 3、封面《姓名》与住院就诊记录表中《患者姓名》不相等 
2020-06-17 12:57:14.311 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:与三级医院门诊就诊记录表姓名不一致同时满足以下条件： 1、封面《姓名》不为空值 2、三级医院门诊就诊记录表《患者姓名》不为空 3、封面《姓名》与门诊就诊记录表中《患者姓名》不相等 
2020-06-17 12:57:14.312 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:血型与RH血型逻辑不符同时满足以下条件： 1、个人基本信息表《血型》填写为“不详” 2、个人基本信息表《RH血型》填写为“阴性”或“阳性” 
2020-06-17 12:57:14.313 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:姓名长度异常长度>50字符 
2020-06-17 12:57:14.315 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-17 12:57:14.315 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 814b3d0aca3642af82ef320f98d4dfba(String), 2020-06-17 12:57:14.314(Timestamp), 31011310200312009116(String), 847bc4b46918417dab4aa917af3355c3(String), 2020-06-17 12:57:14.314(Timestamp), 31011310200312009116(String), a58b2894635045b18a63c250d46ce8a8(String), 2020-06-17 12:57:14.314(Timestamp), 31011310200312009116(String), b8eeb38e528544b28133b9ee94c5fbc4(String), 2020-06-17 12:57:14.314(Timestamp) 
2020-06-17 12:57:14.335 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [init:68] 加载规则：310 条 
2020-06-17 12:57:14.343 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 4 
2020-06-17 12:57:14.355 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.getAllCode    - [debug:159] ==>  Preparing: SELECT codeSysType AS type, code AS code, [value] AS value FROM tb_code_value WHERE code != '' AND [value] != ''  
2020-06-17 12:57:14.356 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.getAllCode    - [debug:159] ==> Parameters:  
2020-06-17 12:57:14.772 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.getAllCode    - [debug:159] <==      Total: 44881 
2020-06-17 12:57:14.800 [INFO ] c.b.r.m.m.service.impl.EhrModelBuildServiceImpl    - [init:96] 初始化字典类型: 467 种 
2020-06-17 12:57:14.800 [INFO ] c.b.r.m.m.service.impl.EhrModelBuildServiceImpl    - [init:97] 初始化字典: 44881 条 
2020-06-17 12:57:14.801 [ERROR] c.b.r.m.process.service.impl.QcProcessServiceImpl  - [init:44] 初始化线程池 
2020-06-17 12:57:14.939 [INFO ] o.s.scheduling.concurrent.ThreadPoolTaskExecutor   - [initialize:171] Initializing ExecutorService 'applicationTaskExecutor' 
2020-06-17 12:57:15.208 [INFO ] org.apache.coyote.http11.Http11NioProtocol         - [log:173] Starting ProtocolHandler ["http-nio-8838"] 
2020-06-17 12:57:15.221 [INFO ] org.apache.coyote.http11.Http11NioProtocol         - [log:173] Pausing ProtocolHandler ["http-nio-8838"] 
2020-06-17 12:57:15.222 [INFO ] org.apache.catalina.core.StandardService           - [log:173] Stopping service [Tomcat] 
2020-06-17 12:57:15.226 [INFO ] org.apache.coyote.http11.Http11NioProtocol         - [log:173] Stopping ProtocolHandler ["http-nio-8838"] 
2020-06-17 12:57:15.226 [INFO ] org.apache.coyote.http11.Http11NioProtocol         - [log:173] Destroying ProtocolHandler ["http-nio-8838"] 
2020-06-17 12:57:15.228 [INFO ] o.s.b.a.l.ConditionEvaluationReportLoggingListener - [logMessage:136]     Error starting ApplicationContext. To display the conditions report re-run your application with 'debug' enabled. 
2020-06-17 12:57:15.229 [ERROR] o.s.b.diagnostics.LoggingFailureAnalysisReporter   - [report:40]     ***************************  APPLICATION FAILED TO START  ***************************    Description:    Web server failed to start. Port 8838 was already in use.    Action:    Identify and stop the process that's listening on port 8838 or configure this application to listen on another port.   
2020-06-17 12:57:15.232 [INFO ] o.s.scheduling.concurrent.ThreadPoolTaskExecutor   - [shutdown:208] Shutting down ExecutorService 'applicationTaskExecutor' 
2020-06-17 12:57:15.240 [INFO ] com.alibaba.druid.pool.DruidDataSource             - [close:1825] {dataSource-1} closed 
2020-06-17 12:57:17.894 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 12:57:17.895 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 12:57:17.899 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 12:57:17.903 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 12:57:17.904 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 12:57:17.908 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 12:57:17.912 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 12:57:17.912 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 12:57:17.917 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-17 12:57:17.921 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 12:57:17.921 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:57:17.926 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 12:57:17.930 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 12:57:17.930 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:57:17.945 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 12:57:17.981 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 12:57:17.982 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 12:57:17.982 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 12:57:17.983 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:57:17.997 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 12:57:18.003 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 12:57:18.003 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:57:18.007 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 12:57:18.011 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 12:57:18.011 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:57:18.015 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 12:57:18.022 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 12:57:18.022 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:57:18.035 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 12:57:18.039 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 12:57:18.040 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 12:57:18.040 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 12:57:18.040 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:57:18.044 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 12:57:18.048 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 12:57:18.048 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:57:18.052 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 12:57:18.058 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 12:57:18.058 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:57:18.063 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 12:57:18.066 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 12:57:18.066 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:57:18.071 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 12:57:18.085 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:现住址长度异常长度>100字符（包含省市区、乡镇街道名称（如有）、村居委会名称（如有）、详细地址） 
2020-06-17 12:57:18.086 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:血型与RH血型逻辑不符同时满足以下条件： 1、个人基本信息表《血型》填写为“不详” 2、个人基本信息表《RH血型》填写为“阴性”或“阳性” 
2020-06-17 12:57:18.088 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-17 12:57:18.088 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 91665e0b2efa4f86aea807ec9f4883c3(String), 2020-06-17 12:57:18.088(Timestamp), 31011310200312009116(String), a58b2894635045b18a63c250d46ce8a8(String), 2020-06-17 12:57:18.088(Timestamp) 
2020-06-17 12:57:18.113 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 2 
2020-06-17 12:57:21.458 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 12:57:21.459 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 12:57:21.467 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 12:57:21.470 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 12:57:21.470 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 12:57:21.477 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 12:57:21.482 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 12:57:21.483 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 12:57:21.489 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-17 12:57:21.493 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 12:57:21.494 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:57:21.497 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 12:57:21.502 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 12:57:21.502 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:57:21.507 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 12:57:21.512 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 12:57:21.513 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 12:57:21.513 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 12:57:21.514 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:57:21.518 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 12:57:21.522 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 12:57:21.523 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:57:21.528 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 12:57:21.532 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 12:57:21.533 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:57:21.537 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 12:57:21.541 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 12:57:21.541 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:57:21.554 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 12:57:21.558 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 12:57:21.558 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 12:57:21.559 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 12:57:21.559 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:57:21.563 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 12:57:21.566 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 12:57:21.567 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:57:21.571 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 12:57:21.574 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 12:57:21.575 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:57:21.581 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 12:57:21.586 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 12:57:21.586 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:57:21.599 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 12:57:21.614 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:户籍地址长度异常长度>100字符（包含省市区、乡镇街道名称（如有）、村居委会名称（如有）、详细地址） 
2020-06-17 12:57:21.617 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:血型与RH血型逻辑不符同时满足以下条件： 1、个人基本信息表《血型》填写为“不详” 2、个人基本信息表《RH血型》填写为“阴性”或“阳性” 
2020-06-17 12:57:21.619 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-17 12:57:21.620 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 329b69c7855544e986fc0073b77fe9be(String), 2020-06-17 12:57:21.619(Timestamp), 31011310200312009116(String), a58b2894635045b18a63c250d46ce8a8(String), 2020-06-17 12:57:21.619(Timestamp) 
2020-06-17 12:57:21.643 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 2 
2020-06-17 12:57:24.908 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 12:57:24.908 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 12:57:24.914 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 12:57:24.919 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 12:57:24.919 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 12:57:24.924 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 12:57:24.928 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 12:57:24.929 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 12:57:24.934 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-17 12:57:24.939 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 12:57:24.939 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:57:24.944 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 12:57:24.950 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 12:57:24.951 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:57:24.960 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 12:57:24.967 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 12:57:24.968 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 12:57:24.969 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 12:57:24.969 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:57:24.976 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 12:57:24.983 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 12:57:24.983 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:57:24.990 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 12:57:24.997 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 12:57:24.998 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:57:25.004 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 12:57:25.009 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 12:57:25.009 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:57:25.032 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 12:57:25.037 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 12:57:25.037 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 12:57:25.038 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 12:57:25.038 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:57:25.044 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 12:57:25.049 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 12:57:25.050 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:57:25.054 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 12:57:25.059 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 12:57:25.059 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:57:25.066 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 12:57:25.072 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 12:57:25.073 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:57:25.077 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 12:57:25.096 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:现住址乡镇（街道）名称长度异常长度>100字符 
2020-06-17 12:57:25.100 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:现住址长度异常长度>100字符（包含省市区、乡镇街道名称（如有）、村居委会名称（如有）、详细地址） 
2020-06-17 12:57:25.102 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:血型与RH血型逻辑不符同时满足以下条件： 1、个人基本信息表《血型》填写为“不详” 2、个人基本信息表《RH血型》填写为“阴性”或“阳性” 
2020-06-17 12:57:25.106 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-17 12:57:25.106 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 40c92f3721704bb7a6eb42a8ca1976b6(String), 2020-06-17 12:57:25.105(Timestamp), 31011310200312009116(String), 91665e0b2efa4f86aea807ec9f4883c3(String), 2020-06-17 12:57:25.105(Timestamp), 31011310200312009116(String), a58b2894635045b18a63c250d46ce8a8(String), 2020-06-17 12:57:25.105(Timestamp) 
2020-06-17 12:57:25.129 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 3 
2020-06-17 12:57:28.365 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 12:57:28.366 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 12:57:28.374 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 12:57:28.378 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 12:57:28.378 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 12:57:28.383 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 12:57:28.388 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 12:57:28.388 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 12:57:28.391 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-17 12:57:28.396 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 12:57:28.397 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:57:28.401 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 12:57:28.406 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 12:57:28.406 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:57:28.425 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 12:57:28.432 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 12:57:28.432 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 12:57:28.433 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 12:57:28.433 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:57:28.437 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 12:57:28.442 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 12:57:28.442 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:57:28.446 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 12:57:28.450 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 12:57:28.451 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:57:28.456 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 12:57:28.460 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 12:57:28.460 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:57:28.473 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 12:57:28.478 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 12:57:28.478 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 12:57:28.479 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 12:57:28.479 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:57:28.484 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 12:57:28.488 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 12:57:28.489 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:57:28.494 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 12:57:28.498 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 12:57:28.499 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:57:28.503 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 12:57:28.507 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 12:57:28.508 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:57:28.512 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 12:57:28.532 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:现住址长度异常长度>100字符（包含省市区、乡镇街道名称（如有）、村居委会名称（如有）、详细地址） 
2020-06-17 12:57:28.533 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:现住址村（居）委会名称长度异常长度>100字符 
2020-06-17 12:57:28.533 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:血型与RH血型逻辑不符同时满足以下条件： 1、个人基本信息表《血型》填写为“不详” 2、个人基本信息表《RH血型》填写为“阴性”或“阳性” 
2020-06-17 12:57:28.536 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-17 12:57:28.537 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 91665e0b2efa4f86aea807ec9f4883c3(String), 2020-06-17 12:57:28.536(Timestamp), 31011310200312009116(String), 9df07515be3d4c2887e947c6ce5adace(String), 2020-06-17 12:57:28.536(Timestamp), 31011310200312009116(String), a58b2894635045b18a63c250d46ce8a8(String), 2020-06-17 12:57:28.536(Timestamp) 
2020-06-17 12:57:28.565 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 3 
2020-06-17 12:57:31.814 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 12:57:31.814 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 12:57:31.820 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 12:57:31.824 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 12:57:31.824 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 12:57:31.829 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 12:57:31.833 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 12:57:31.834 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 12:57:31.838 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-17 12:57:31.842 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 12:57:31.842 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:57:31.847 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 12:57:31.852 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 12:57:31.853 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:57:31.859 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 12:57:31.861 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 12:57:31.861 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 12:57:31.862 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 12:57:31.862 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:57:31.867 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 12:57:31.871 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 12:57:31.871 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:57:31.876 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 12:57:31.881 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 12:57:31.881 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:57:31.886 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 12:57:31.889 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 12:57:31.890 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:57:31.904 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 12:57:31.908 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 12:57:31.908 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 12:57:31.908 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 12:57:31.909 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:57:31.913 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 12:57:31.917 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 12:57:31.918 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:57:31.931 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 12:57:31.936 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 12:57:31.937 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:57:31.942 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 12:57:31.948 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 12:57:31.949 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:57:31.954 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 12:57:31.981 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:建档单位长度异常长度>100字符 
2020-06-17 12:57:31.986 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:血型与RH血型逻辑不符同时满足以下条件： 1、个人基本信息表《血型》填写为“不详” 2、个人基本信息表《RH血型》填写为“阴性”或“阳性” 
2020-06-17 12:57:31.991 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-17 12:57:31.992 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 403a97f9ec40406b9723b3c6845a6cee(String), 2020-06-17 12:57:31.99(Timestamp), 31011310200312009116(String), a58b2894635045b18a63c250d46ce8a8(String), 2020-06-17 12:57:31.99(Timestamp) 
2020-06-17 12:57:32.011 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 2 
2020-06-17 12:57:35.314 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 12:57:35.315 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 12:57:35.320 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 12:57:35.329 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 12:57:35.330 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 12:57:35.336 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 12:57:35.340 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 12:57:35.342 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 12:57:35.345 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-17 12:57:35.350 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 12:57:35.350 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:57:35.356 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 12:57:35.360 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 12:57:35.361 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:57:35.365 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 12:57:35.371 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 12:57:35.371 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 12:57:35.372 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 12:57:35.372 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:57:35.376 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 12:57:35.380 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 12:57:35.381 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:57:35.385 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 12:57:35.390 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 12:57:35.391 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:57:35.395 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 12:57:35.400 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 12:57:35.400 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:57:35.414 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 12:57:35.418 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 12:57:35.418 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 12:57:35.419 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 12:57:35.419 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:57:35.424 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 12:57:35.428 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 12:57:35.429 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:57:35.433 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 12:57:35.437 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 12:57:35.438 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:57:35.442 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 12:57:35.447 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 12:57:35.448 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:57:35.453 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 12:57:35.472 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:血型与RH血型逻辑不符同时满足以下条件： 1、个人基本信息表《血型》填写为“不详” 2、个人基本信息表《RH血型》填写为“阴性”或“阳性” 
2020-06-17 12:57:35.475 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1)  
2020-06-17 12:57:35.476 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), a58b2894635045b18a63c250d46ce8a8(String), 2020-06-17 12:57:35.475(Timestamp) 
2020-06-17 12:57:35.502 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 1 
2020-06-17 12:57:38.698 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 12:57:38.698 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 12:57:38.703 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 12:57:38.707 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 12:57:38.707 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 12:57:38.711 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 12:57:38.717 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 12:57:38.717 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 12:57:38.722 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-17 12:57:38.727 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 12:57:38.727 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:57:38.732 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 12:57:38.736 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 12:57:38.736 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:57:38.741 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 12:57:38.745 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 12:57:38.745 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 12:57:38.746 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 12:57:38.746 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:57:38.750 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 12:57:38.755 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 12:57:38.755 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:57:38.759 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 12:57:38.763 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 12:57:38.763 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:57:38.767 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 12:57:38.772 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 12:57:38.772 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:57:38.786 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 12:57:38.790 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 12:57:38.790 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 12:57:38.791 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 12:57:38.791 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:57:38.796 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 12:57:38.801 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 12:57:38.801 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:57:38.806 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 12:57:38.810 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 12:57:38.810 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:57:38.814 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 12:57:38.819 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 12:57:38.819 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:57:38.823 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 12:57:38.837 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:责任医生长度异常长度>50字符 
2020-06-17 12:57:38.838 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:血型与RH血型逻辑不符同时满足以下条件： 1、个人基本信息表《血型》填写为“不详” 2、个人基本信息表《RH血型》填写为“阴性”或“阳性” 
2020-06-17 12:57:38.840 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-17 12:57:38.840 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 9042bba97fb74b558de96e35ab2ffdc2(String), 2020-06-17 12:57:38.84(Timestamp), 31011310200312009116(String), a58b2894635045b18a63c250d46ce8a8(String), 2020-06-17 12:57:38.84(Timestamp) 
2020-06-17 12:57:38.872 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 2 
2020-06-17 12:57:42.070 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 12:57:42.070 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 12:57:42.075 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 12:57:42.079 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 12:57:42.079 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 12:57:42.084 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 12:57:42.088 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 12:57:42.088 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 12:57:42.093 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-17 12:57:42.097 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 12:57:42.097 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:57:42.103 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 12:57:42.108 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 12:57:42.108 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:57:42.114 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 12:57:42.120 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 12:57:42.120 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 12:57:42.121 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 12:57:42.122 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:57:42.127 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 12:57:42.131 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 12:57:42.132 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:57:42.137 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 12:57:42.141 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 12:57:42.142 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:57:42.147 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 12:57:42.151 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 12:57:42.152 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:57:42.166 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 12:57:42.171 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 12:57:42.171 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 12:57:42.172 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 12:57:42.173 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:57:42.178 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 12:57:42.183 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 12:57:42.183 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:57:42.188 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 12:57:42.194 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 12:57:42.194 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:57:42.199 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 12:57:42.204 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 12:57:42.205 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:57:42.210 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 12:57:42.229 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:个人基本信息表工作单位工作单位不为汉字 
2020-06-17 12:57:42.234 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:血型与RH血型逻辑不符同时满足以下条件： 1、个人基本信息表《血型》填写为“不详” 2、个人基本信息表《RH血型》填写为“阴性”或“阳性” 
2020-06-17 12:57:42.237 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-17 12:57:42.237 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 4ad5f41e777d499894964fe735a4ed46(String), 2020-06-17 12:57:42.236(Timestamp), 31011310200312009116(String), a58b2894635045b18a63c250d46ce8a8(String), 2020-06-17 12:57:42.236(Timestamp) 
2020-06-17 12:57:42.256 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 2 
2020-06-17 12:57:45.543 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 12:57:45.543 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 12:57:45.548 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 12:57:45.553 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 12:57:45.554 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 12:57:45.558 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 12:57:45.562 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 12:57:45.562 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 12:57:45.567 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-17 12:57:45.571 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 12:57:45.571 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:57:45.578 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 12:57:45.582 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 12:57:45.582 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:57:45.591 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 12:57:45.596 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 12:57:45.596 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 12:57:45.596 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 12:57:45.597 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:57:45.619 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 12:57:45.623 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 12:57:45.623 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:57:45.629 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 12:57:45.635 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 12:57:45.635 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:57:45.640 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 12:57:45.643 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 12:57:45.644 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:57:45.658 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 12:57:45.662 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 12:57:45.662 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 12:57:45.663 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 12:57:45.663 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:57:45.667 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 12:57:45.672 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 12:57:45.672 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:57:45.677 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 12:57:45.680 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 12:57:45.680 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:57:45.685 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 12:57:45.699 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 12:57:45.699 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:57:45.704 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 12:57:45.715 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:联系人姓名填写为数字同时满足以下条件： 1、联系人姓名不为空值 2、联系人姓名为纯数字 
2020-06-17 12:57:45.718 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:血型与RH血型逻辑不符同时满足以下条件： 1、个人基本信息表《血型》填写为“不详” 2、个人基本信息表《RH血型》填写为“阴性”或“阳性” 
2020-06-17 12:57:45.720 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-17 12:57:45.721 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 1a7e1f2e0bce421585a1fad889411dd4(String), 2020-06-17 12:57:45.72(Timestamp), 31011310200312009116(String), a58b2894635045b18a63c250d46ce8a8(String), 2020-06-17 12:57:45.72(Timestamp) 
2020-06-17 12:57:45.746 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 2 
2020-06-17 12:57:49.079 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 12:57:49.079 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 12:57:49.086 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 12:57:49.091 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 12:57:49.092 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 12:57:49.097 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 12:57:49.100 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 12:57:49.101 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 12:57:49.105 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-17 12:57:49.109 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 12:57:49.109 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:57:49.117 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 12:57:49.122 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 12:57:49.122 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:57:49.136 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 12:57:49.140 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 12:57:49.140 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 12:57:49.140 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 12:57:49.141 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:57:49.145 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 12:57:49.150 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 12:57:49.150 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:57:49.155 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 12:57:49.160 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 12:57:49.160 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:57:49.165 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 12:57:49.169 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 12:57:49.169 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:57:49.183 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 12:57:49.188 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 12:57:49.189 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 12:57:49.189 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 12:57:49.189 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:57:49.194 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 12:57:49.198 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 12:57:49.198 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:57:49.205 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 12:57:49.209 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 12:57:49.209 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:57:49.214 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 12:57:49.218 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 12:57:49.218 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:57:49.222 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 12:57:49.237 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:血型与RH血型逻辑不符同时满足以下条件： 1、个人基本信息表《血型》填写为“不详” 2、个人基本信息表《RH血型》填写为“阴性”或“阳性” 
2020-06-17 12:57:49.241 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1)  
2020-06-17 12:57:49.241 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), a58b2894635045b18a63c250d46ce8a8(String), 2020-06-17 12:57:49.24(Timestamp) 
2020-06-17 12:57:49.266 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 1 
2020-06-17 12:57:52.478 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 12:57:52.478 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 12:57:52.483 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 12:57:52.488 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 12:57:52.489 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 12:57:52.493 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 12:57:52.497 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 12:57:52.498 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 12:57:52.502 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-17 12:57:52.506 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 12:57:52.506 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:57:52.510 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 12:57:52.514 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 12:57:52.514 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:57:52.520 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 12:57:52.524 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 12:57:52.525 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 12:57:52.525 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 12:57:52.525 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:57:52.529 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 12:57:52.533 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 12:57:52.534 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:57:52.537 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 12:57:52.541 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 12:57:52.542 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:57:52.546 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 12:57:52.550 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 12:57:52.551 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:57:52.564 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 12:57:52.567 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 12:57:52.567 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 12:57:52.568 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 12:57:52.568 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:57:52.572 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 12:57:52.576 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 12:57:52.576 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:57:52.580 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 12:57:52.585 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 12:57:52.585 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:57:52.590 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 12:57:52.594 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 12:57:52.595 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:57:52.599 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 12:57:52.613 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:血型与RH血型逻辑不符同时满足以下条件： 1、个人基本信息表《血型》填写为“不详” 2、个人基本信息表《RH血型》填写为“阴性”或“阳性” 
2020-06-17 12:57:52.616 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1)  
2020-06-17 12:57:52.616 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), a58b2894635045b18a63c250d46ce8a8(String), 2020-06-17 12:57:52.615(Timestamp) 
2020-06-17 12:57:52.646 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 1 
2020-06-17 12:57:55.987 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 12:57:55.988 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 12:57:55.995 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 12:57:55.999 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 12:57:56.000 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 12:57:56.004 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 12:57:56.008 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 12:57:56.008 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 12:57:56.013 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-17 12:57:56.017 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 12:57:56.017 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:57:56.022 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 12:57:56.034 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 12:57:56.034 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:57:56.039 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 12:57:56.044 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 12:57:56.044 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 12:57:56.044 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 12:57:56.045 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:57:56.049 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 12:57:56.055 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 12:57:56.056 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:57:56.060 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 12:57:56.067 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 12:57:56.067 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:57:56.074 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 12:57:56.077 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 12:57:56.078 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:57:56.097 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 12:57:56.101 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 12:57:56.101 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 12:57:56.101 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 12:57:56.102 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:57:56.113 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 12:57:56.117 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 12:57:56.117 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:57:56.123 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 12:57:56.127 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 12:57:56.127 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:57:56.132 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 12:57:56.136 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 12:57:56.137 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:57:56.151 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 12:57:56.166 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:血型与RH血型逻辑不符同时满足以下条件： 1、个人基本信息表《血型》填写为“不详” 2、个人基本信息表《RH血型》填写为“阴性”或“阳性” 
2020-06-17 12:57:56.168 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1)  
2020-06-17 12:57:56.168 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), a58b2894635045b18a63c250d46ce8a8(String), 2020-06-17 12:57:56.168(Timestamp) 
2020-06-17 12:57:56.199 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 1 
2020-06-17 12:57:59.563 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 12:57:59.564 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 12:57:59.569 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 12:57:59.573 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 12:57:59.574 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 12:57:59.578 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 12:57:59.582 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 12:57:59.582 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 12:57:59.586 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-17 12:57:59.590 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 12:57:59.591 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:57:59.595 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 12:57:59.599 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 12:57:59.599 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:57:59.604 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 12:57:59.609 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 12:57:59.609 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 12:57:59.609 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 12:57:59.609 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:57:59.618 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 12:57:59.622 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 12:57:59.622 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:57:59.627 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 12:57:59.632 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 12:57:59.633 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:57:59.637 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 12:57:59.641 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 12:57:59.642 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:57:59.655 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 12:57:59.660 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 12:57:59.660 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 12:57:59.661 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 12:57:59.661 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:57:59.665 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 12:57:59.669 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 12:57:59.670 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:57:59.674 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 12:57:59.678 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 12:57:59.678 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:57:59.682 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 12:57:59.686 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 12:57:59.687 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:57:59.693 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 12:57:59.712 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:血型与RH血型逻辑不符同时满足以下条件： 1、个人基本信息表《血型》填写为“不详” 2、个人基本信息表《RH血型》填写为“阴性”或“阳性” 
2020-06-17 12:57:59.715 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1)  
2020-06-17 12:57:59.715 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), a58b2894635045b18a63c250d46ce8a8(String), 2020-06-17 12:57:59.715(Timestamp) 
2020-06-17 12:57:59.758 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 1 
2020-06-17 12:58:03.416 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 12:58:03.416 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 12:58:03.422 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 12:58:03.426 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 12:58:03.427 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 12:58:03.431 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 12:58:03.436 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 12:58:03.437 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 12:58:03.443 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-17 12:58:03.447 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 12:58:03.448 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:58:03.453 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 12:58:03.458 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 12:58:03.458 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:58:03.464 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 12:58:03.470 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 12:58:03.470 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 12:58:03.471 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 12:58:03.472 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:58:03.477 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 12:58:03.482 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 12:58:03.482 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:58:03.487 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 12:58:03.494 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 12:58:03.494 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:58:03.500 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 12:58:03.506 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 12:58:03.506 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:58:03.520 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 12:58:03.525 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 12:58:03.525 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 12:58:03.525 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 12:58:03.526 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:58:03.529 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 12:58:03.534 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 12:58:03.534 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 12:58:03.538 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 12:58:03.543 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 12:58:03.543 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:58:03.548 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 12:58:03.552 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 12:58:03.552 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 12:58:03.557 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 12:58:03.571 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:个人基本信息表既往史既往史疾病确诊时间未填写 
2020-06-17 12:58:03.572 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:个人基本信息表既往史既往史疾病确诊时间填写不规范 
2020-06-17 12:58:03.573 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:血型与RH血型逻辑不符同时满足以下条件： 1、个人基本信息表《血型》填写为“不详” 2、个人基本信息表《RH血型》填写为“阴性”或“阳性” 
2020-06-17 12:58:03.575 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-17 12:58:03.575 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 6302b0fcdcd7482099581602a1fec501(String), 2020-06-17 12:58:03.575(Timestamp), 31011310200312009116(String), 923bfb7880204efa8f26fd200d1bd17e(String), 2020-06-17 12:58:03.575(Timestamp), 31011310200312009116(String), a58b2894635045b18a63c250d46ce8a8(String), 2020-06-17 12:58:03.575(Timestamp) 
2020-06-17 12:58:03.594 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 3 
2020-06-17 13:18:57.308 [INFO ] com.benetech.rules.RulesApplication                - [logStarting:55] Starting RulesApplication v1.0-SNAPSHOT on DESKTOP-EOCO1V0 with PID 9520 (D:\51\python\project\instance\zyjk\EHR\controlRuleNew\config\healthRecordRules.jar started by ZY in D:\51\python\project\instance\zyjk\EHR\controlRuleNew) 
2020-06-17 13:18:57.311 [DEBUG] com.benetech.rules.RulesApplication                - [logStarting:56] Running with Spring Boot v2.2.1.RELEASE, Spring v5.2.1.RELEASE 
2020-06-17 13:18:57.312 [INFO ] com.benetech.rules.RulesApplication                - [logStartupProfileInfo:655] The following profiles are active: test 
2020-06-17 13:18:58.854 [INFO ] o.s.boot.web.embedded.tomcat.TomcatWebServer       - [initialize:92] Tomcat initialized with port(s): 8838 (http) 
2020-06-17 13:18:58.865 [INFO ] org.apache.coyote.http11.Http11NioProtocol         - [log:173] Initializing ProtocolHandler ["http-nio-8838"] 
2020-06-17 13:18:58.866 [INFO ] org.apache.catalina.core.StandardService           - [log:173] Starting service [Tomcat] 
2020-06-17 13:18:58.866 [INFO ] org.apache.catalina.core.StandardEngine            - [log:173] Starting Servlet engine: [Apache Tomcat/9.0.27] 
2020-06-17 13:18:58.936 [INFO ] o.a.c.c.C.[.[localhost].[/healthRecordRules]       - [log:173] Initializing Spring embedded WebApplicationContext 
2020-06-17 13:18:58.937 [INFO ] org.springframework.web.context.ContextLoader      - [prepareWebApplicationContext:284] Root WebApplicationContext: initialization completed in 1537 ms 
2020-06-17 13:18:59.023 [DEBUG] org.apache.ibatis.logging.LogFactory               - [setImplementation:135] Logging initialized using 'class org.apache.ibatis.logging.slf4j.Slf4jImpl' adapter. 
2020-06-17 13:18:59.276 [WARN ] org.mybatis.spring.SqlSessionFactoryBean           - [buildSqlSessionFactory:467] Can't find class in '[com.benetech.rules.*.entity]' package. Please check your configuration. 
2020-06-17 13:18:59.933 [INFO ] com.alibaba.druid.pool.DruidDataSource             - [init:930] {dataSource-1} inited 
2020-06-17 13:19:00.216 [DEBUG] c.b.r.m.e.mapper.RuleEngineMapper.getAllRules      - [debug:159] ==>  Preparing: select a.RuleId as ruleId, a.RuleSql as clazz from HrRule a join HrRuleProps b on a.RuleId = b.RuleId where -- RuleId in ('34278f71cf1d42c88158aaf637fa5203', '8d30baa03bfc4233a8f115c57a0ebf08', '63eb82a44bf64c96a0b9023fa2a3c9d9') a.RuleSql != '' and a.RuleSql is not null and b.Enable = 1  
2020-06-17 13:19:00.239 [DEBUG] c.b.r.m.e.mapper.RuleEngineMapper.getAllRules      - [debug:159] ==> Parameters:  
2020-06-17 13:19:00.322 [DEBUG] c.b.r.m.e.mapper.RuleEngineMapper.getAllRules      - [debug:159] <==      Total: 310 
2020-06-17 13:19:00.534 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 13:19:00.534 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 13:19:00.540 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 13:19:00.544 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 13:19:00.544 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 13:19:00.550 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 13:19:00.554 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 13:19:00.554 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 13:19:00.559 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-17 13:19:00.564 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 13:19:00.564 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 13:19:00.569 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 13:19:00.574 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 13:19:00.574 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 13:19:00.580 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 13:19:00.584 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 13:19:00.584 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 13:19:00.584 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 13:19:00.585 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 13:19:00.593 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 13:19:00.599 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 13:19:00.599 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 13:19:00.603 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 13:19:00.604 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [init:68] 加载规则：310 条 
2020-06-17 13:19:00.608 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 13:19:00.608 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 13:19:00.614 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 13:19:00.619 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 13:19:00.619 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 13:19:00.623 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.getAllCode    - [debug:159] ==>  Preparing: SELECT codeSysType AS type, code AS code, [value] AS value FROM tb_code_value WHERE code != '' AND [value] != ''  
2020-06-17 13:19:00.624 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.getAllCode    - [debug:159] ==> Parameters:  
2020-06-17 13:19:00.647 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 13:19:00.657 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 13:19:00.657 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 13:19:00.657 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 13:19:00.658 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 13:19:00.665 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 13:19:00.672 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 13:19:00.672 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 13:19:00.682 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 13:19:00.686 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 13:19:00.686 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 13:19:00.693 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 13:19:00.702 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 13:19:00.702 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 13:19:00.708 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 13:19:00.725 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:血型与RH血型逻辑不符同时满足以下条件： 1、个人基本信息表《血型》填写为“不详” 2、个人基本信息表《RH血型》填写为“阴性”或“阳性” 
2020-06-17 13:19:00.727 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1)  
2020-06-17 13:19:00.728 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), a58b2894635045b18a63c250d46ce8a8(String), 2020-06-17 13:19:00.727(Timestamp) 
2020-06-17 13:19:00.749 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 1 
2020-06-17 13:19:01.105 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.getAllCode    - [debug:159] <==      Total: 44881 
2020-06-17 13:19:01.131 [INFO ] c.b.r.m.m.service.impl.EhrModelBuildServiceImpl    - [init:96] 初始化字典类型: 467 种 
2020-06-17 13:19:01.131 [INFO ] c.b.r.m.m.service.impl.EhrModelBuildServiceImpl    - [init:97] 初始化字典: 44881 条 
2020-06-17 13:19:01.132 [ERROR] c.b.r.m.process.service.impl.QcProcessServiceImpl  - [init:44] 初始化线程池 
2020-06-17 13:19:01.258 [INFO ] o.s.scheduling.concurrent.ThreadPoolTaskExecutor   - [initialize:171] Initializing ExecutorService 'applicationTaskExecutor' 
2020-06-17 13:19:01.500 [INFO ] org.apache.coyote.http11.Http11NioProtocol         - [log:173] Starting ProtocolHandler ["http-nio-8838"] 
2020-06-17 13:19:01.513 [INFO ] org.apache.coyote.http11.Http11NioProtocol         - [log:173] Pausing ProtocolHandler ["http-nio-8838"] 
2020-06-17 13:19:01.514 [INFO ] org.apache.catalina.core.StandardService           - [log:173] Stopping service [Tomcat] 
2020-06-17 13:19:01.523 [INFO ] org.apache.coyote.http11.Http11NioProtocol         - [log:173] Stopping ProtocolHandler ["http-nio-8838"] 
2020-06-17 13:19:01.523 [INFO ] org.apache.coyote.http11.Http11NioProtocol         - [log:173] Destroying ProtocolHandler ["http-nio-8838"] 
2020-06-17 13:19:01.524 [INFO ] o.s.b.a.l.ConditionEvaluationReportLoggingListener - [logMessage:136]     Error starting ApplicationContext. To display the conditions report re-run your application with 'debug' enabled. 
2020-06-17 13:19:01.526 [ERROR] o.s.b.diagnostics.LoggingFailureAnalysisReporter   - [report:40]     ***************************  APPLICATION FAILED TO START  ***************************    Description:    Web server failed to start. Port 8838 was already in use.    Action:    Identify and stop the process that's listening on port 8838 or configure this application to listen on another port.   
2020-06-17 13:19:01.528 [INFO ] o.s.scheduling.concurrent.ThreadPoolTaskExecutor   - [shutdown:208] Shutting down ExecutorService 'applicationTaskExecutor' 
2020-06-17 13:19:01.531 [INFO ] com.alibaba.druid.pool.DruidDataSource             - [close:1825] {dataSource-1} closed 
2020-06-17 13:19:04.113 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 13:19:04.113 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 13:19:04.119 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 13:19:04.123 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 13:19:04.123 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 13:19:04.127 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 13:19:04.131 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 13:19:04.131 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 13:19:04.135 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-17 13:19:04.139 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 13:19:04.139 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 13:19:04.142 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 13:19:04.147 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 13:19:04.147 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 13:19:04.153 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 13:19:04.157 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 13:19:04.157 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 13:19:04.157 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 13:19:04.157 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 13:19:04.162 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 13:19:04.167 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 13:19:04.167 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 13:19:04.173 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 13:19:04.179 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 13:19:04.179 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 13:19:04.184 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 13:19:04.189 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 13:19:04.189 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 13:19:04.216 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 13:19:04.220 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 13:19:04.221 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 13:19:04.221 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 13:19:04.221 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 13:19:04.228 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 13:19:04.234 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 13:19:04.234 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 13:19:04.240 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 13:19:04.246 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 13:19:04.246 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 13:19:04.251 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 13:19:04.255 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 13:19:04.255 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 13:19:04.262 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 13:19:04.273 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:联系人姓名填写为数字同时满足以下条件： 1、联系人姓名不为空值 2、联系人姓名为纯数字 
2020-06-17 13:19:04.275 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:血型与RH血型逻辑不符同时满足以下条件： 1、个人基本信息表《血型》填写为“不详” 2、个人基本信息表《RH血型》填写为“阴性”或“阳性” 
2020-06-17 13:19:04.277 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-17 13:19:04.278 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 1a7e1f2e0bce421585a1fad889411dd4(String), 2020-06-17 13:19:04.277(Timestamp), 31011310200312009116(String), a58b2894635045b18a63c250d46ce8a8(String), 2020-06-17 13:19:04.277(Timestamp) 
2020-06-17 13:19:04.293 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 2 
2020-06-17 13:19:07.560 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 13:19:07.560 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 13:19:07.566 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 13:19:07.570 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 13:19:07.571 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 13:19:07.575 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 13:19:07.579 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 13:19:07.579 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 13:19:07.584 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-17 13:19:07.588 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 13:19:07.588 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 13:19:07.592 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 13:19:07.596 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 13:19:07.596 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 13:19:07.601 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 13:19:07.605 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 13:19:07.605 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 13:19:07.606 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 13:19:07.606 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 13:19:07.610 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 13:19:07.614 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 13:19:07.614 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 13:19:07.618 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 13:19:07.621 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 13:19:07.621 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 13:19:07.626 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 13:19:07.630 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 13:19:07.631 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 13:19:07.645 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 13:19:07.649 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 13:19:07.649 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 13:19:07.649 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 13:19:07.649 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 13:19:07.654 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 13:19:07.659 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 13:19:07.660 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 13:19:07.665 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 13:19:07.670 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 13:19:07.671 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 13:19:07.676 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 13:19:07.681 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 13:19:07.682 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 13:19:07.687 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 13:19:07.703 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:血型与RH血型逻辑不符同时满足以下条件： 1、个人基本信息表《血型》填写为“不详” 2、个人基本信息表《RH血型》填写为“阴性”或“阳性” 
2020-06-17 13:19:07.705 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1)  
2020-06-17 13:19:07.706 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), a58b2894635045b18a63c250d46ce8a8(String), 2020-06-17 13:19:07.705(Timestamp) 
2020-06-17 13:19:07.726 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 1 
2020-06-17 13:19:10.964 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 13:19:10.964 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 13:19:10.970 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 13:19:10.974 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 13:19:10.974 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 13:19:10.979 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 13:19:10.983 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 13:19:10.983 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 13:19:10.987 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-17 13:19:10.992 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 13:19:10.992 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 13:19:10.996 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 13:19:11.000 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 13:19:11.000 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 13:19:11.006 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 13:19:11.010 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 13:19:11.010 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 13:19:11.010 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 13:19:11.011 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 13:19:11.014 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 13:19:11.017 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 13:19:11.018 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 13:19:11.021 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 13:19:11.025 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 13:19:11.026 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 13:19:11.030 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 13:19:11.034 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 13:19:11.034 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 13:19:11.048 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 13:19:11.052 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 13:19:11.052 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 13:19:11.052 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 13:19:11.052 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 13:19:11.058 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 13:19:11.061 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 13:19:11.061 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 13:19:11.066 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 13:19:11.070 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 13:19:11.071 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 13:19:11.075 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 13:19:11.080 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 13:19:11.080 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 13:19:11.086 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 13:19:11.100 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:血型与RH血型逻辑不符同时满足以下条件： 1、个人基本信息表《血型》填写为“不详” 2、个人基本信息表《RH血型》填写为“阴性”或“阳性” 
2020-06-17 13:19:11.102 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1)  
2020-06-17 13:19:11.102 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), a58b2894635045b18a63c250d46ce8a8(String), 2020-06-17 13:19:11.102(Timestamp) 
2020-06-17 13:19:11.117 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 1 
2020-06-17 13:19:14.292 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 13:19:14.292 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 13:19:14.298 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 13:19:14.302 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 13:19:14.303 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 13:19:14.308 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 13:19:14.313 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 13:19:14.314 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 13:19:14.322 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-17 13:19:14.327 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 13:19:14.328 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 13:19:14.333 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 13:19:14.338 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 13:19:14.339 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 13:19:14.346 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 13:19:14.350 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 13:19:14.351 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 13:19:14.352 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 13:19:14.352 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 13:19:14.360 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 13:19:14.365 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 13:19:14.366 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 13:19:14.370 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 13:19:14.375 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 13:19:14.376 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 13:19:14.380 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 13:19:14.385 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 13:19:14.385 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 13:19:14.401 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 13:19:14.406 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 13:19:14.406 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 13:19:14.407 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 13:19:14.407 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 13:19:14.413 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 13:19:14.417 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 13:19:14.418 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 13:19:14.422 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 13:19:14.427 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 13:19:14.428 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 13:19:14.433 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 13:19:14.437 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 13:19:14.437 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 13:19:14.443 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 13:19:14.465 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:血型与RH血型逻辑不符同时满足以下条件： 1、个人基本信息表《血型》填写为“不详” 2、个人基本信息表《RH血型》填写为“阴性”或“阳性” 
2020-06-17 13:19:14.468 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1)  
2020-06-17 13:19:14.468 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), a58b2894635045b18a63c250d46ce8a8(String), 2020-06-17 13:19:14.467(Timestamp) 
2020-06-17 13:19:14.483 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 1 
2020-06-17 13:19:17.842 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 13:19:17.843 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 13:19:17.848 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 13:19:17.852 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 13:19:17.853 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 13:19:17.858 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 13:19:17.862 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 13:19:17.863 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 13:19:17.867 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-17 13:19:17.872 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 13:19:17.872 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 13:19:17.877 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 13:19:17.882 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 13:19:17.883 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 13:19:17.888 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 13:19:17.893 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 13:19:17.893 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 13:19:17.894 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 13:19:17.894 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 13:19:17.899 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 13:19:17.903 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 13:19:17.904 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 13:19:17.909 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 13:19:17.913 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 13:19:17.914 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 13:19:17.918 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 13:19:17.923 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 13:19:17.924 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 13:19:17.939 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 13:19:17.943 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 13:19:17.943 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 13:19:17.944 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 13:19:17.944 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 13:19:17.949 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 13:19:17.953 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 13:19:17.954 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 13:19:17.959 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 13:19:17.964 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 13:19:17.965 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 13:19:17.969 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 13:19:17.974 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 13:19:17.975 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 13:19:17.986 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 13:19:18.007 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:血型与RH血型逻辑不符同时满足以下条件： 1、个人基本信息表《血型》填写为“不详” 2、个人基本信息表《RH血型》填写为“阴性”或“阳性” 
2020-06-17 13:19:18.011 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1)  
2020-06-17 13:19:18.012 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), a58b2894635045b18a63c250d46ce8a8(String), 2020-06-17 13:19:18.011(Timestamp) 
2020-06-17 13:19:18.023 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 1 
2020-06-17 13:19:21.523 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 13:19:21.523 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 13:19:21.528 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 13:19:21.532 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 13:19:21.532 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 13:19:21.536 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 13:19:21.540 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 13:19:21.540 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 13:19:21.545 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-17 13:19:21.549 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 13:19:21.549 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 13:19:21.553 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 13:19:21.557 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 13:19:21.558 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 13:19:21.562 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 13:19:21.566 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 13:19:21.566 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 13:19:21.567 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 13:19:21.567 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 13:19:21.571 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 13:19:21.576 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 13:19:21.576 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 13:19:21.580 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 13:19:21.585 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 13:19:21.585 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 13:19:21.590 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 13:19:21.595 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 13:19:21.596 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 13:19:21.611 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 13:19:21.616 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 13:19:21.616 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 13:19:21.616 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 13:19:21.616 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 13:19:21.621 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 13:19:21.625 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 13:19:21.625 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 13:19:21.630 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 13:19:21.635 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 13:19:21.635 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 13:19:21.639 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 13:19:21.644 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 13:19:21.644 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 13:19:21.649 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 13:19:21.667 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:个人基本信息表既往史既往史疾病确诊时间未填写 
2020-06-17 13:19:21.670 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:个人基本信息表既往史既往史疾病确诊时间填写不规范 
2020-06-17 13:19:21.672 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:血型与RH血型逻辑不符同时满足以下条件： 1、个人基本信息表《血型》填写为“不详” 2、个人基本信息表《RH血型》填写为“阴性”或“阳性” 
2020-06-17 13:19:21.677 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-17 13:19:21.677 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 6302b0fcdcd7482099581602a1fec501(String), 2020-06-17 13:19:21.676(Timestamp), 31011310200312009116(String), 923bfb7880204efa8f26fd200d1bd17e(String), 2020-06-17 13:19:21.676(Timestamp), 31011310200312009116(String), a58b2894635045b18a63c250d46ce8a8(String), 2020-06-17 13:19:21.676(Timestamp) 
2020-06-17 13:19:21.706 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 3 
2020-06-17 15:23:35.659 [INFO ] com.benetech.rules.RulesApplication                - [logStarting:55] Starting RulesApplication v1.0-SNAPSHOT on DESKTOP-EOCO1V0 with PID 10148 (D:\51\python\project\instance\zyjk\EHR\controlRuleNew\config\healthRecordRules.jar started by ZY in D:\51\python\project\instance\zyjk\EHR\controlRuleNew) 
2020-06-17 15:23:35.662 [DEBUG] com.benetech.rules.RulesApplication                - [logStarting:56] Running with Spring Boot v2.2.1.RELEASE, Spring v5.2.1.RELEASE 
2020-06-17 15:23:35.663 [INFO ] com.benetech.rules.RulesApplication                - [logStartupProfileInfo:655] The following profiles are active: test 
2020-06-17 15:23:37.261 [INFO ] o.s.boot.web.embedded.tomcat.TomcatWebServer       - [initialize:92] Tomcat initialized with port(s): 8838 (http) 
2020-06-17 15:23:37.272 [INFO ] org.apache.coyote.http11.Http11NioProtocol         - [log:173] Initializing ProtocolHandler ["http-nio-8838"] 
2020-06-17 15:23:37.273 [INFO ] org.apache.catalina.core.StandardService           - [log:173] Starting service [Tomcat] 
2020-06-17 15:23:37.273 [INFO ] org.apache.catalina.core.StandardEngine            - [log:173] Starting Servlet engine: [Apache Tomcat/9.0.27] 
2020-06-17 15:23:37.345 [INFO ] o.a.c.c.C.[.[localhost].[/healthRecordRules]       - [log:173] Initializing Spring embedded WebApplicationContext 
2020-06-17 15:23:37.345 [INFO ] org.springframework.web.context.ContextLoader      - [prepareWebApplicationContext:284] Root WebApplicationContext: initialization completed in 1591 ms 
2020-06-17 15:23:37.428 [DEBUG] org.apache.ibatis.logging.LogFactory               - [setImplementation:135] Logging initialized using 'class org.apache.ibatis.logging.slf4j.Slf4jImpl' adapter. 
2020-06-17 15:23:37.677 [WARN ] org.mybatis.spring.SqlSessionFactoryBean           - [buildSqlSessionFactory:467] Can't find class in '[com.benetech.rules.*.entity]' package. Please check your configuration. 
2020-06-17 15:23:38.309 [INFO ] com.alibaba.druid.pool.DruidDataSource             - [init:930] {dataSource-1} inited 
2020-06-17 15:23:38.514 [DEBUG] c.b.r.m.e.mapper.RuleEngineMapper.getAllRules      - [debug:159] ==>  Preparing: select a.RuleId as ruleId, a.RuleSql as clazz from HrRule a join HrRuleProps b on a.RuleId = b.RuleId where -- RuleId in ('34278f71cf1d42c88158aaf637fa5203', '8d30baa03bfc4233a8f115c57a0ebf08', '63eb82a44bf64c96a0b9023fa2a3c9d9') a.RuleSql != '' and a.RuleSql is not null and b.Enable = 1  
2020-06-17 15:23:38.537 [DEBUG] c.b.r.m.e.mapper.RuleEngineMapper.getAllRules      - [debug:159] ==> Parameters:  
2020-06-17 15:23:38.615 [DEBUG] c.b.r.m.e.mapper.RuleEngineMapper.getAllRules      - [debug:159] <==      Total: 310 
2020-06-17 15:23:38.863 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [init:68] 加载规则：310 条 
2020-06-17 15:23:38.879 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 15:23:38.879 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 15:23:38.883 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.getAllCode    - [debug:159] ==>  Preparing: SELECT codeSysType AS type, code AS code, [value] AS value FROM tb_code_value WHERE code != '' AND [value] != ''  
2020-06-17 15:23:38.883 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.getAllCode    - [debug:159] ==> Parameters:  
2020-06-17 15:23:38.885 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 15:23:38.895 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 15:23:38.895 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 15:23:38.907 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 15:23:38.917 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 15:23:38.917 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 15:23:38.922 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-17 15:23:38.926 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 15:23:38.926 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:23:38.932 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 15:23:38.936 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 15:23:38.936 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:23:38.943 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 15:23:38.947 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 15:23:38.947 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 15:23:38.947 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 15:23:38.947 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:23:38.954 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 15:23:38.958 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 15:23:38.958 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:23:38.966 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 15:23:38.976 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 15:23:38.976 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:23:38.998 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 15:23:39.020 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 15:23:39.020 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:23:39.054 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 15:23:39.058 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 15:23:39.058 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 15:23:39.058 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 15:23:39.058 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:23:39.063 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 15:23:39.070 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 15:23:39.070 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:23:39.075 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 15:23:39.116 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 15:23:39.117 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:23:39.122 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 15:23:39.126 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 15:23:39.126 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:23:39.131 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 15:23:39.145 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:血型与RH血型逻辑不符同时满足以下条件： 1、个人基本信息表《血型》填写为“不详” 2、个人基本信息表《RH血型》填写为“阴性”或“阳性” 
2020-06-17 15:23:39.147 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1)  
2020-06-17 15:23:39.147 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), a58b2894635045b18a63c250d46ce8a8(String), 2020-06-17 15:23:39.147(Timestamp) 
2020-06-17 15:23:39.167 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 1 
2020-06-17 15:23:39.496 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.getAllCode    - [debug:159] <==      Total: 44881 
2020-06-17 15:23:39.521 [INFO ] c.b.r.m.m.service.impl.EhrModelBuildServiceImpl    - [init:96] 初始化字典类型: 467 种 
2020-06-17 15:23:39.521 [INFO ] c.b.r.m.m.service.impl.EhrModelBuildServiceImpl    - [init:97] 初始化字典: 44881 条 
2020-06-17 15:23:39.521 [ERROR] c.b.r.m.process.service.impl.QcProcessServiceImpl  - [init:44] 初始化线程池 
2020-06-17 15:23:39.662 [INFO ] o.s.scheduling.concurrent.ThreadPoolTaskExecutor   - [initialize:171] Initializing ExecutorService 'applicationTaskExecutor' 
2020-06-17 15:23:39.932 [INFO ] org.apache.coyote.http11.Http11NioProtocol         - [log:173] Starting ProtocolHandler ["http-nio-8838"] 
2020-06-17 15:23:39.944 [INFO ] org.apache.coyote.http11.Http11NioProtocol         - [log:173] Pausing ProtocolHandler ["http-nio-8838"] 
2020-06-17 15:23:39.944 [INFO ] org.apache.catalina.core.StandardService           - [log:173] Stopping service [Tomcat] 
2020-06-17 15:23:39.949 [INFO ] org.apache.coyote.http11.Http11NioProtocol         - [log:173] Stopping ProtocolHandler ["http-nio-8838"] 
2020-06-17 15:23:39.949 [INFO ] org.apache.coyote.http11.Http11NioProtocol         - [log:173] Destroying ProtocolHandler ["http-nio-8838"] 
2020-06-17 15:23:39.951 [INFO ] o.s.b.a.l.ConditionEvaluationReportLoggingListener - [logMessage:136]     Error starting ApplicationContext. To display the conditions report re-run your application with 'debug' enabled. 
2020-06-17 15:23:39.953 [ERROR] o.s.b.diagnostics.LoggingFailureAnalysisReporter   - [report:40]     ***************************  APPLICATION FAILED TO START  ***************************    Description:    Web server failed to start. Port 8838 was already in use.    Action:    Identify and stop the process that's listening on port 8838 or configure this application to listen on another port.   
2020-06-17 15:23:39.955 [INFO ] o.s.scheduling.concurrent.ThreadPoolTaskExecutor   - [shutdown:208] Shutting down ExecutorService 'applicationTaskExecutor' 
2020-06-17 15:23:39.960 [INFO ] com.alibaba.druid.pool.DruidDataSource             - [close:1825] {dataSource-1} closed 
2020-06-17 15:23:42.613 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 15:23:42.613 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 15:23:42.618 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 15:23:42.622 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 15:23:42.623 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 15:23:42.627 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 15:23:42.632 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 15:23:42.632 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 15:23:42.637 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-17 15:23:42.642 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 15:23:42.642 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:23:42.646 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 15:23:42.651 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 15:23:42.651 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:23:42.657 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 15:23:42.661 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 15:23:42.662 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 15:23:42.662 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 15:23:42.663 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:23:42.668 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 15:23:42.672 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 15:23:42.673 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:23:42.678 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 15:23:42.683 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 15:23:42.684 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:23:42.689 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 15:23:42.694 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 15:23:42.694 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:23:42.709 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 15:23:42.714 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 15:23:42.714 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 15:23:42.715 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 15:23:42.715 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:23:42.720 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 15:23:42.725 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 15:23:42.726 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:23:42.732 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 15:23:42.736 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 15:23:42.737 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:23:42.742 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 15:23:42.748 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 15:23:42.748 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:23:42.753 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 15:23:42.769 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:联系人姓名填写为数字同时满足以下条件： 1、联系人姓名不为空值 2、联系人姓名为纯数字 
2020-06-17 15:23:42.774 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:血型与RH血型逻辑不符同时满足以下条件： 1、个人基本信息表《血型》填写为“不详” 2、个人基本信息表《RH血型》填写为“阴性”或“阳性” 
2020-06-17 15:23:42.776 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-17 15:23:42.777 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 1a7e1f2e0bce421585a1fad889411dd4(String), 2020-06-17 15:23:42.776(Timestamp), 31011310200312009116(String), a58b2894635045b18a63c250d46ce8a8(String), 2020-06-17 15:23:42.776(Timestamp) 
2020-06-17 15:23:42.801 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 2 
2020-06-17 15:23:45.995 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 15:23:45.995 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 15:23:46.000 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 15:23:46.005 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 15:23:46.005 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 15:23:46.010 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 15:23:46.014 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 15:23:46.014 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 15:23:46.019 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-17 15:23:46.024 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 15:23:46.024 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:23:46.028 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 15:23:46.033 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 15:23:46.033 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:23:46.038 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 15:23:46.042 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 15:23:46.043 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 15:23:46.043 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 15:23:46.043 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:23:46.048 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 15:23:46.052 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 15:23:46.053 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:23:46.057 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 15:23:46.061 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 15:23:46.062 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:23:46.066 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 15:23:46.070 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 15:23:46.071 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:23:46.084 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 15:23:46.089 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 15:23:46.089 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 15:23:46.089 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 15:23:46.089 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:23:46.094 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 15:23:46.098 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 15:23:46.098 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:23:46.103 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 15:23:46.107 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 15:23:46.107 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:23:46.112 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 15:23:46.116 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 15:23:46.116 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:23:46.120 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 15:23:46.138 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:血型与RH血型逻辑不符同时满足以下条件： 1、个人基本信息表《血型》填写为“不详” 2、个人基本信息表《RH血型》填写为“阴性”或“阳性” 
2020-06-17 15:23:46.140 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1)  
2020-06-17 15:23:46.140 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), a58b2894635045b18a63c250d46ce8a8(String), 2020-06-17 15:23:46.14(Timestamp) 
2020-06-17 15:23:46.159 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 1 
2020-06-17 15:23:49.764 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 15:23:49.764 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 15:23:49.769 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 15:23:49.778 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 15:23:49.778 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 15:23:49.783 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 15:23:49.788 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 15:23:49.788 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 15:23:49.792 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-17 15:23:49.796 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 15:23:49.797 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:23:49.801 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 15:23:49.805 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 15:23:49.805 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:23:49.811 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 15:23:49.815 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 15:23:49.815 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 15:23:49.815 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 15:23:49.816 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:23:49.820 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 15:23:49.824 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 15:23:49.824 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:23:49.829 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 15:23:49.833 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 15:23:49.833 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:23:49.839 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 15:23:49.843 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 15:23:49.843 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:23:49.856 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 15:23:49.860 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 15:23:49.861 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 15:23:49.861 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 15:23:49.861 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:23:49.866 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 15:23:49.871 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 15:23:49.871 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:23:49.876 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 15:23:49.880 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 15:23:49.881 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:23:49.885 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 15:23:49.889 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 15:23:49.889 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:23:49.894 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 15:23:49.910 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:血型与RH血型逻辑不符同时满足以下条件： 1、个人基本信息表《血型》填写为“不详” 2、个人基本信息表《RH血型》填写为“阴性”或“阳性” 
2020-06-17 15:23:49.912 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1)  
2020-06-17 15:23:49.913 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), a58b2894635045b18a63c250d46ce8a8(String), 2020-06-17 15:23:49.912(Timestamp) 
2020-06-17 15:23:49.933 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 1 
2020-06-17 15:24:04.137 [INFO ] com.benetech.rules.RulesApplication                - [logStarting:55] Starting RulesApplication v1.0-SNAPSHOT on DESKTOP-EOCO1V0 with PID 8388 (D:\51\python\project\instance\zyjk\EHR\controlRuleNew\config\healthRecordRules.jar started by ZY in D:\51\python\project\instance\zyjk\EHR\controlRuleNew) 
2020-06-17 15:24:04.141 [DEBUG] com.benetech.rules.RulesApplication                - [logStarting:56] Running with Spring Boot v2.2.1.RELEASE, Spring v5.2.1.RELEASE 
2020-06-17 15:24:04.141 [INFO ] com.benetech.rules.RulesApplication                - [logStartupProfileInfo:655] The following profiles are active: test 
2020-06-17 15:24:05.803 [INFO ] o.s.boot.web.embedded.tomcat.TomcatWebServer       - [initialize:92] Tomcat initialized with port(s): 8838 (http) 
2020-06-17 15:24:05.814 [INFO ] org.apache.coyote.http11.Http11NioProtocol         - [log:173] Initializing ProtocolHandler ["http-nio-8838"] 
2020-06-17 15:24:05.815 [INFO ] org.apache.catalina.core.StandardService           - [log:173] Starting service [Tomcat] 
2020-06-17 15:24:05.815 [INFO ] org.apache.catalina.core.StandardEngine            - [log:173] Starting Servlet engine: [Apache Tomcat/9.0.27] 
2020-06-17 15:24:05.885 [INFO ] o.a.c.c.C.[.[localhost].[/healthRecordRules]       - [log:173] Initializing Spring embedded WebApplicationContext 
2020-06-17 15:24:05.885 [INFO ] org.springframework.web.context.ContextLoader      - [prepareWebApplicationContext:284] Root WebApplicationContext: initialization completed in 1688 ms 
2020-06-17 15:24:05.973 [DEBUG] org.apache.ibatis.logging.LogFactory               - [setImplementation:135] Logging initialized using 'class org.apache.ibatis.logging.slf4j.Slf4jImpl' adapter. 
2020-06-17 15:24:06.283 [WARN ] org.mybatis.spring.SqlSessionFactoryBean           - [buildSqlSessionFactory:467] Can't find class in '[com.benetech.rules.*.entity]' package. Please check your configuration. 
2020-06-17 15:24:07.092 [INFO ] com.alibaba.druid.pool.DruidDataSource             - [init:930] {dataSource-1} inited 
2020-06-17 15:24:07.201 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 15:24:07.202 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 15:24:07.207 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 15:24:07.211 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 15:24:07.211 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 15:24:07.216 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 15:24:07.221 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 15:24:07.221 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 15:24:07.226 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-17 15:24:07.230 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 15:24:07.230 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:24:07.235 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 15:24:07.239 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 15:24:07.239 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:24:07.245 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 15:24:07.249 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 15:24:07.249 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 15:24:07.249 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 15:24:07.250 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:24:07.254 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 15:24:07.258 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 15:24:07.258 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:24:07.263 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 15:24:07.267 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 15:24:07.267 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:24:07.272 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 15:24:07.277 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 15:24:07.277 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:24:07.292 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 15:24:07.299 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 15:24:07.299 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 15:24:07.299 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 15:24:07.300 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:24:07.306 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 15:24:07.311 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 15:24:07.312 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:24:07.317 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 15:24:07.322 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 15:24:07.322 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:24:07.327 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 15:24:07.331 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 15:24:07.331 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:24:07.336 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 15:24:07.352 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:血型与RH血型逻辑不符同时满足以下条件： 1、个人基本信息表《血型》填写为“不详” 2、个人基本信息表《RH血型》填写为“阴性”或“阳性” 
2020-06-17 15:24:07.366 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1)  
2020-06-17 15:24:07.366 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), a58b2894635045b18a63c250d46ce8a8(String), 2020-06-17 15:24:07.365(Timestamp) 
2020-06-17 15:24:07.370 [DEBUG] c.b.r.m.e.mapper.RuleEngineMapper.getAllRules      - [debug:159] ==>  Preparing: select a.RuleId as ruleId, a.RuleSql as clazz from HrRule a join HrRuleProps b on a.RuleId = b.RuleId where -- RuleId in ('34278f71cf1d42c88158aaf637fa5203', '8d30baa03bfc4233a8f115c57a0ebf08', '63eb82a44bf64c96a0b9023fa2a3c9d9') a.RuleSql != '' and a.RuleSql is not null and b.Enable = 1  
2020-06-17 15:24:07.389 [DEBUG] c.b.r.m.e.mapper.RuleEngineMapper.getAllRules      - [debug:159] ==> Parameters:  
2020-06-17 15:24:07.399 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 1 
2020-06-17 15:24:07.484 [DEBUG] c.b.r.m.e.mapper.RuleEngineMapper.getAllRules      - [debug:159] <==      Total: 310 
2020-06-17 15:24:07.872 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [init:68] 加载规则：310 条 
2020-06-17 15:24:07.903 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.getAllCode    - [debug:159] ==>  Preparing: SELECT codeSysType AS type, code AS code, [value] AS value FROM tb_code_value WHERE code != '' AND [value] != ''  
2020-06-17 15:24:07.903 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.getAllCode    - [debug:159] ==> Parameters:  
2020-06-17 15:24:08.551 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.getAllCode    - [debug:159] <==      Total: 44881 
2020-06-17 15:24:08.577 [INFO ] c.b.r.m.m.service.impl.EhrModelBuildServiceImpl    - [init:96] 初始化字典类型: 467 种 
2020-06-17 15:24:08.577 [INFO ] c.b.r.m.m.service.impl.EhrModelBuildServiceImpl    - [init:97] 初始化字典: 44881 条 
2020-06-17 15:24:08.577 [ERROR] c.b.r.m.process.service.impl.QcProcessServiceImpl  - [init:44] 初始化线程池 
2020-06-17 15:24:08.936 [INFO ] o.s.scheduling.concurrent.ThreadPoolTaskExecutor   - [initialize:171] Initializing ExecutorService 'applicationTaskExecutor' 
2020-06-17 15:24:09.253 [INFO ] org.apache.coyote.http11.Http11NioProtocol         - [log:173] Starting ProtocolHandler ["http-nio-8838"] 
2020-06-17 15:24:09.269 [INFO ] org.apache.coyote.http11.Http11NioProtocol         - [log:173] Pausing ProtocolHandler ["http-nio-8838"] 
2020-06-17 15:24:09.269 [INFO ] org.apache.catalina.core.StandardService           - [log:173] Stopping service [Tomcat] 
2020-06-17 15:24:09.273 [INFO ] org.apache.coyote.http11.Http11NioProtocol         - [log:173] Stopping ProtocolHandler ["http-nio-8838"] 
2020-06-17 15:24:09.273 [INFO ] org.apache.coyote.http11.Http11NioProtocol         - [log:173] Destroying ProtocolHandler ["http-nio-8838"] 
2020-06-17 15:24:09.275 [INFO ] o.s.b.a.l.ConditionEvaluationReportLoggingListener - [logMessage:136]     Error starting ApplicationContext. To display the conditions report re-run your application with 'debug' enabled. 
2020-06-17 15:24:09.277 [ERROR] o.s.b.diagnostics.LoggingFailureAnalysisReporter   - [report:40]     ***************************  APPLICATION FAILED TO START  ***************************    Description:    Web server failed to start. Port 8838 was already in use.    Action:    Identify and stop the process that's listening on port 8838 or configure this application to listen on another port.   
2020-06-17 15:24:09.279 [INFO ] o.s.scheduling.concurrent.ThreadPoolTaskExecutor   - [shutdown:208] Shutting down ExecutorService 'applicationTaskExecutor' 
2020-06-17 15:24:09.282 [INFO ] com.alibaba.druid.pool.DruidDataSource             - [close:1825] {dataSource-1} closed 
2020-06-17 15:24:11.707 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 15:24:11.707 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 15:24:11.713 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 15:24:11.717 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 15:24:11.718 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 15:24:11.723 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 15:24:11.727 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 15:24:11.728 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 15:24:11.733 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-17 15:24:11.737 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 15:24:11.738 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:24:11.742 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 15:24:11.747 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 15:24:11.747 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:24:11.752 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 15:24:11.757 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 15:24:11.757 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 15:24:11.758 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 15:24:11.758 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:24:11.763 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 15:24:11.767 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 15:24:11.768 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:24:11.772 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 15:24:11.777 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 15:24:11.777 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:24:11.783 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 15:24:11.788 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 15:24:11.788 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:24:11.802 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 15:24:11.806 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 15:24:11.806 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 15:24:11.807 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 15:24:11.807 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:24:11.811 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 15:24:11.816 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 15:24:11.816 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:24:11.821 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 15:24:11.826 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 15:24:11.826 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:24:11.831 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 15:24:11.835 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 15:24:11.835 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:24:11.840 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 15:24:11.858 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:联系人姓名填写为数字同时满足以下条件： 1、联系人姓名不为空值 2、联系人姓名为纯数字 
2020-06-17 15:24:11.862 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:血型与RH血型逻辑不符同时满足以下条件： 1、个人基本信息表《血型》填写为“不详” 2、个人基本信息表《RH血型》填写为“阴性”或“阳性” 
2020-06-17 15:24:11.866 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-17 15:24:11.867 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 1a7e1f2e0bce421585a1fad889411dd4(String), 2020-06-17 15:24:11.866(Timestamp), 31011310200312009116(String), a58b2894635045b18a63c250d46ce8a8(String), 2020-06-17 15:24:11.866(Timestamp) 
2020-06-17 15:24:11.905 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 2 
2020-06-17 15:24:15.201 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 15:24:15.201 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 15:24:15.206 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 15:24:15.210 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 15:24:15.211 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 15:24:15.215 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 15:24:15.219 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 15:24:15.219 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 15:24:15.224 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-17 15:24:15.228 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 15:24:15.229 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:24:15.234 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 15:24:15.239 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 15:24:15.240 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:24:15.245 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 15:24:15.249 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 15:24:15.250 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 15:24:15.250 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 15:24:15.250 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:24:15.255 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 15:24:15.259 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 15:24:15.260 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:24:15.266 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 15:24:15.271 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 15:24:15.271 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:24:15.275 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 15:24:15.280 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 15:24:15.280 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:24:15.294 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 15:24:15.298 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 15:24:15.298 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 15:24:15.299 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 15:24:15.299 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:24:15.303 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 15:24:15.308 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 15:24:15.308 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:24:15.311 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 15:24:15.315 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 15:24:15.316 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:24:15.322 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 15:24:15.328 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 15:24:15.329 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:24:15.334 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 15:24:15.349 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:血型与RH血型逻辑不符同时满足以下条件： 1、个人基本信息表《血型》填写为“不详” 2、个人基本信息表《RH血型》填写为“阴性”或“阳性” 
2020-06-17 15:24:15.351 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1)  
2020-06-17 15:24:15.352 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), a58b2894635045b18a63c250d46ce8a8(String), 2020-06-17 15:24:15.351(Timestamp) 
2020-06-17 15:24:15.380 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 1 
2020-06-17 15:24:18.691 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 15:24:18.691 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 15:24:18.698 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 15:24:18.703 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 15:24:18.703 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 15:24:18.708 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 15:24:18.712 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 15:24:18.713 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 15:24:18.717 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-17 15:24:18.722 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 15:24:18.722 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:24:18.726 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 15:24:18.730 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 15:24:18.730 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:24:18.736 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 15:24:18.739 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 15:24:18.740 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 15:24:18.740 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 15:24:18.740 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:24:18.744 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 15:24:18.749 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 15:24:18.749 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:24:18.754 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 15:24:18.758 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 15:24:18.758 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:24:18.763 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 15:24:18.767 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 15:24:18.768 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:24:18.780 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 15:24:18.784 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 15:24:18.785 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 15:24:18.785 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 15:24:18.785 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:24:18.789 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 15:24:18.794 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 15:24:18.795 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:24:18.797 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 15:24:18.802 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 15:24:18.803 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:24:18.807 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 15:24:18.811 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 15:24:18.811 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:24:18.816 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 15:24:18.829 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:血型与RH血型逻辑不符同时满足以下条件： 1、个人基本信息表《血型》填写为“不详” 2、个人基本信息表《RH血型》填写为“阴性”或“阳性” 
2020-06-17 15:24:18.831 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1)  
2020-06-17 15:24:18.832 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), a58b2894635045b18a63c250d46ce8a8(String), 2020-06-17 15:24:18.831(Timestamp) 
2020-06-17 15:24:18.855 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 1 
2020-06-17 15:24:22.161 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 15:24:22.161 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 15:24:22.166 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 15:24:22.170 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 15:24:22.170 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 15:24:22.175 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 15:24:22.180 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 15:24:22.180 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 15:24:22.185 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-17 15:24:22.188 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 15:24:22.189 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:24:22.195 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 15:24:22.199 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 15:24:22.199 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:24:22.204 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 15:24:22.209 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 15:24:22.209 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 15:24:22.209 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 15:24:22.209 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:24:22.213 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 15:24:22.217 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 15:24:22.218 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:24:22.222 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 15:24:22.227 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 15:24:22.227 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:24:22.236 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 15:24:22.245 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 15:24:22.245 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:24:22.259 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 15:24:22.264 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 15:24:22.264 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 15:24:22.264 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 15:24:22.265 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:24:22.269 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 15:24:22.274 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 15:24:22.274 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:24:22.282 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 15:24:22.286 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 15:24:22.287 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:24:22.292 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 15:24:22.299 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 15:24:22.300 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:24:22.305 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 15:24:22.330 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:血型与RH血型逻辑不符同时满足以下条件： 1、个人基本信息表《血型》填写为“不详” 2、个人基本信息表《RH血型》填写为“阴性”或“阳性” 
2020-06-17 15:24:22.335 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1)  
2020-06-17 15:24:22.336 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), a58b2894635045b18a63c250d46ce8a8(String), 2020-06-17 15:24:22.335(Timestamp) 
2020-06-17 15:24:22.363 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 1 
2020-06-17 15:24:25.903 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 15:24:25.903 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 15:24:25.908 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 15:24:25.912 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 15:24:25.912 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 15:24:25.918 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 15:24:25.923 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 15:24:25.923 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 15:24:25.927 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-17 15:24:25.932 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 15:24:25.932 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:24:25.937 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 15:24:25.940 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 15:24:25.941 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:24:25.946 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 15:24:25.950 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 15:24:25.950 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 15:24:25.951 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 15:24:25.951 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:24:25.955 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 15:24:25.959 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 15:24:25.960 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:24:25.963 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 15:24:25.968 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 15:24:25.968 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:24:25.973 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 15:24:25.978 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 15:24:25.978 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:24:25.992 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 15:24:25.996 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 15:24:25.996 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 15:24:25.996 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 15:24:25.996 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:24:26.001 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 15:24:26.005 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 15:24:26.006 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:24:26.010 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 15:24:26.015 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 15:24:26.015 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:24:26.021 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 15:24:26.025 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 15:24:26.026 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:24:26.032 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 15:24:26.054 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:血型与RH血型逻辑不符同时满足以下条件： 1、个人基本信息表《血型》填写为“不详” 2、个人基本信息表《RH血型》填写为“阴性”或“阳性” 
2020-06-17 15:24:26.058 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1)  
2020-06-17 15:24:26.058 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), a58b2894635045b18a63c250d46ce8a8(String), 2020-06-17 15:24:26.057(Timestamp) 
2020-06-17 15:24:26.079 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 1 
2020-06-17 15:24:29.650 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 15:24:29.650 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 15:24:29.655 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 15:24:29.659 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 15:24:29.660 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 15:24:29.665 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 15:24:29.669 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 15:24:29.670 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 15:24:29.674 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-17 15:24:29.678 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 15:24:29.678 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:24:29.683 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 15:24:29.688 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 15:24:29.688 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:24:29.693 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 15:24:29.697 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 15:24:29.698 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 15:24:29.698 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 15:24:29.698 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:24:29.703 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 15:24:29.707 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 15:24:29.707 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:24:29.711 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 15:24:29.716 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 15:24:29.716 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:24:29.721 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 15:24:29.725 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 15:24:29.725 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:24:29.739 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 15:24:29.742 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 15:24:29.743 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 15:24:29.743 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 15:24:29.744 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:24:29.749 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 15:24:29.754 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 15:24:29.755 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:24:29.759 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 15:24:29.763 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 15:24:29.764 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:24:29.768 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 15:24:29.772 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 15:24:29.772 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:24:29.779 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 15:24:29.791 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:个人基本信息表既往史既往史疾病确诊时间未填写 
2020-06-17 15:24:29.792 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:个人基本信息表既往史既往史疾病确诊时间填写不规范 
2020-06-17 15:24:29.792 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:血型与RH血型逻辑不符同时满足以下条件： 1、个人基本信息表《血型》填写为“不详” 2、个人基本信息表《RH血型》填写为“阴性”或“阳性” 
2020-06-17 15:24:29.795 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-17 15:24:29.795 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 6302b0fcdcd7482099581602a1fec501(String), 2020-06-17 15:24:29.794(Timestamp), 31011310200312009116(String), 923bfb7880204efa8f26fd200d1bd17e(String), 2020-06-17 15:24:29.794(Timestamp), 31011310200312009116(String), a58b2894635045b18a63c250d46ce8a8(String), 2020-06-17 15:24:29.794(Timestamp) 
2020-06-17 15:24:29.810 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 3 
2020-06-17 15:28:46.686 [INFO ] com.benetech.rules.RulesApplication                - [logStarting:55] Starting RulesApplication v1.0-SNAPSHOT on DESKTOP-EOCO1V0 with PID 8644 (D:\51\python\project\instance\zyjk\EHR\controlRuleNew\config\healthRecordRules.jar started by ZY in D:\51\python\project\instance\zyjk\EHR\controlRuleNew) 
2020-06-17 15:28:46.689 [DEBUG] com.benetech.rules.RulesApplication                - [logStarting:56] Running with Spring Boot v2.2.1.RELEASE, Spring v5.2.1.RELEASE 
2020-06-17 15:28:46.690 [INFO ] com.benetech.rules.RulesApplication                - [logStartupProfileInfo:655] The following profiles are active: test 
2020-06-17 15:28:48.279 [INFO ] o.s.boot.web.embedded.tomcat.TomcatWebServer       - [initialize:92] Tomcat initialized with port(s): 8838 (http) 
2020-06-17 15:28:48.291 [INFO ] org.apache.coyote.http11.Http11NioProtocol         - [log:173] Initializing ProtocolHandler ["http-nio-8838"] 
2020-06-17 15:28:48.291 [INFO ] org.apache.catalina.core.StandardService           - [log:173] Starting service [Tomcat] 
2020-06-17 15:28:48.291 [INFO ] org.apache.catalina.core.StandardEngine            - [log:173] Starting Servlet engine: [Apache Tomcat/9.0.27] 
2020-06-17 15:28:48.372 [INFO ] o.a.c.c.C.[.[localhost].[/healthRecordRules]       - [log:173] Initializing Spring embedded WebApplicationContext 
2020-06-17 15:28:48.372 [INFO ] org.springframework.web.context.ContextLoader      - [prepareWebApplicationContext:284] Root WebApplicationContext: initialization completed in 1588 ms 
2020-06-17 15:28:48.461 [DEBUG] org.apache.ibatis.logging.LogFactory               - [setImplementation:135] Logging initialized using 'class org.apache.ibatis.logging.slf4j.Slf4jImpl' adapter. 
2020-06-17 15:28:48.730 [WARN ] org.mybatis.spring.SqlSessionFactoryBean           - [buildSqlSessionFactory:467] Can't find class in '[com.benetech.rules.*.entity]' package. Please check your configuration. 
2020-06-17 15:28:49.410 [INFO ] com.alibaba.druid.pool.DruidDataSource             - [init:930] {dataSource-1} inited 
2020-06-17 15:28:49.666 [DEBUG] c.b.r.m.e.mapper.RuleEngineMapper.getAllRules      - [debug:159] ==>  Preparing: select a.RuleId as ruleId, a.RuleSql as clazz from HrRule a join HrRuleProps b on a.RuleId = b.RuleId where -- RuleId in ('34278f71cf1d42c88158aaf637fa5203', '8d30baa03bfc4233a8f115c57a0ebf08', '63eb82a44bf64c96a0b9023fa2a3c9d9') a.RuleSql != '' and a.RuleSql is not null and b.Enable = 1  
2020-06-17 15:28:49.697 [DEBUG] c.b.r.m.e.mapper.RuleEngineMapper.getAllRules      - [debug:159] ==> Parameters:  
2020-06-17 15:28:49.775 [DEBUG] c.b.r.m.e.mapper.RuleEngineMapper.getAllRules      - [debug:159] <==      Total: 310 
2020-06-17 15:28:49.983 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 15:28:49.983 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 15:28:49.989 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 15:28:49.994 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 15:28:49.994 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 15:28:49.999 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 15:28:50.004 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 15:28:50.004 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 15:28:50.012 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-17 15:28:50.017 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 15:28:50.017 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:28:50.019 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [init:68] 加载规则：310 条 
2020-06-17 15:28:50.024 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 15:28:50.029 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 15:28:50.029 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:28:50.036 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.getAllCode    - [debug:159] ==>  Preparing: SELECT codeSysType AS type, code AS code, [value] AS value FROM tb_code_value WHERE code != '' AND [value] != ''  
2020-06-17 15:28:50.038 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.getAllCode    - [debug:159] ==> Parameters:  
2020-06-17 15:28:50.041 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 15:28:50.054 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 15:28:50.054 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 15:28:50.054 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 15:28:50.054 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:28:50.076 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 15:28:50.083 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 15:28:50.083 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:28:50.095 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 15:28:50.100 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 15:28:50.100 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:28:50.109 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 15:28:50.125 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 15:28:50.125 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:28:50.140 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 15:28:50.145 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 15:28:50.145 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 15:28:50.145 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 15:28:50.146 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:28:50.150 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 15:28:50.154 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 15:28:50.155 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:28:50.159 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 15:28:50.164 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 15:28:50.164 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:28:50.170 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 15:28:50.175 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 15:28:50.175 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:28:50.182 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 15:28:50.198 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:血型与RH血型逻辑不符同时满足以下条件： 1、个人基本信息表《血型》填写为“不详” 2、个人基本信息表《RH血型》填写为“阴性”或“阳性” 
2020-06-17 15:28:50.202 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1)  
2020-06-17 15:28:50.203 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), a58b2894635045b18a63c250d46ce8a8(String), 2020-06-17 15:28:50.201(Timestamp) 
2020-06-17 15:28:50.228 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 1 
2020-06-17 15:28:50.473 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.getAllCode    - [debug:159] <==      Total: 44881 
2020-06-17 15:28:50.501 [INFO ] c.b.r.m.m.service.impl.EhrModelBuildServiceImpl    - [init:96] 初始化字典类型: 467 种 
2020-06-17 15:28:50.502 [INFO ] c.b.r.m.m.service.impl.EhrModelBuildServiceImpl    - [init:97] 初始化字典: 44881 条 
2020-06-17 15:28:50.502 [ERROR] c.b.r.m.process.service.impl.QcProcessServiceImpl  - [init:44] 初始化线程池 
2020-06-17 15:28:50.659 [INFO ] o.s.scheduling.concurrent.ThreadPoolTaskExecutor   - [initialize:171] Initializing ExecutorService 'applicationTaskExecutor' 
2020-06-17 15:28:50.930 [INFO ] org.apache.coyote.http11.Http11NioProtocol         - [log:173] Starting ProtocolHandler ["http-nio-8838"] 
2020-06-17 15:28:50.945 [INFO ] org.apache.coyote.http11.Http11NioProtocol         - [log:173] Pausing ProtocolHandler ["http-nio-8838"] 
2020-06-17 15:28:50.945 [INFO ] org.apache.catalina.core.StandardService           - [log:173] Stopping service [Tomcat] 
2020-06-17 15:28:50.949 [INFO ] org.apache.coyote.http11.Http11NioProtocol         - [log:173] Stopping ProtocolHandler ["http-nio-8838"] 
2020-06-17 15:28:50.949 [INFO ] org.apache.coyote.http11.Http11NioProtocol         - [log:173] Destroying ProtocolHandler ["http-nio-8838"] 
2020-06-17 15:28:50.951 [INFO ] o.s.b.a.l.ConditionEvaluationReportLoggingListener - [logMessage:136]     Error starting ApplicationContext. To display the conditions report re-run your application with 'debug' enabled. 
2020-06-17 15:28:50.953 [ERROR] o.s.b.diagnostics.LoggingFailureAnalysisReporter   - [report:40]     ***************************  APPLICATION FAILED TO START  ***************************    Description:    Web server failed to start. Port 8838 was already in use.    Action:    Identify and stop the process that's listening on port 8838 or configure this application to listen on another port.   
2020-06-17 15:28:50.956 [INFO ] o.s.scheduling.concurrent.ThreadPoolTaskExecutor   - [shutdown:208] Shutting down ExecutorService 'applicationTaskExecutor' 
2020-06-17 15:28:50.959 [INFO ] com.alibaba.druid.pool.DruidDataSource             - [close:1825] {dataSource-1} closed 
2020-06-17 15:28:53.757 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 15:28:53.757 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 15:28:53.763 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 15:28:53.768 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 15:28:53.768 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 15:28:53.773 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 15:28:53.777 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 15:28:53.778 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 15:28:53.782 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-17 15:28:53.787 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 15:28:53.788 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:28:53.792 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 15:28:53.797 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 15:28:53.798 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:28:53.803 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 15:28:53.808 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 15:28:53.809 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 15:28:53.809 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 15:28:53.810 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:28:53.815 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 15:28:53.822 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 15:28:53.823 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:28:53.829 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 15:28:53.835 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 15:28:53.835 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:28:53.840 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 15:28:53.845 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 15:28:53.846 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:28:53.860 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 15:28:53.865 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 15:28:53.866 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 15:28:53.866 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 15:28:53.867 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:28:53.871 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 15:28:53.876 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 15:28:53.877 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:28:53.884 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 15:28:53.890 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 15:28:53.891 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:28:53.896 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 15:28:53.901 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 15:28:53.902 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:28:53.906 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 15:28:53.926 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:联系人姓名填写为数字同时满足以下条件： 1、联系人姓名不为空值 2、联系人姓名为纯数字 
2020-06-17 15:28:53.932 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:血型与RH血型逻辑不符同时满足以下条件： 1、个人基本信息表《血型》填写为“不详” 2、个人基本信息表《RH血型》填写为“阴性”或“阳性” 
2020-06-17 15:28:53.935 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-17 15:28:53.936 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 1a7e1f2e0bce421585a1fad889411dd4(String), 2020-06-17 15:28:53.935(Timestamp), 31011310200312009116(String), a58b2894635045b18a63c250d46ce8a8(String), 2020-06-17 15:28:53.935(Timestamp) 
2020-06-17 15:28:53.952 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 2 
2020-06-17 15:28:57.170 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 15:28:57.170 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 15:28:57.175 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 15:28:57.179 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 15:28:57.180 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 15:28:57.184 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 15:28:57.189 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 15:28:57.189 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 15:28:57.194 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-17 15:28:57.198 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 15:28:57.198 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:28:57.202 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 15:28:57.207 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 15:28:57.207 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:28:57.213 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 15:28:57.217 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 15:28:57.217 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 15:28:57.217 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 15:28:57.218 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:28:57.222 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 15:28:57.226 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 15:28:57.226 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:28:57.230 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 15:28:57.234 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 15:28:57.234 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:28:57.239 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 15:28:57.243 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 15:28:57.243 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:28:57.258 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 15:28:57.262 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 15:28:57.263 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 15:28:57.263 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 15:28:57.263 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:28:57.267 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 15:28:57.272 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 15:28:57.272 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:28:57.276 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 15:28:57.281 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 15:28:57.281 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:28:57.286 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 15:28:57.290 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 15:28:57.291 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:28:57.295 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 15:28:57.312 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:血型与RH血型逻辑不符同时满足以下条件： 1、个人基本信息表《血型》填写为“不详” 2、个人基本信息表《RH血型》填写为“阴性”或“阳性” 
2020-06-17 15:28:57.314 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1)  
2020-06-17 15:28:57.315 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), a58b2894635045b18a63c250d46ce8a8(String), 2020-06-17 15:28:57.314(Timestamp) 
2020-06-17 15:28:57.334 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 1 
2020-06-17 15:29:00.550 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 15:29:00.551 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 15:29:00.556 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 15:29:00.559 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 15:29:00.560 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 15:29:00.564 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 15:29:00.568 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 15:29:00.568 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 15:29:00.573 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-17 15:29:00.577 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 15:29:00.578 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:29:00.581 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 15:29:00.586 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 15:29:00.586 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:29:00.592 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 15:29:00.596 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 15:29:00.596 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 15:29:00.596 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 15:29:00.596 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:29:00.600 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 15:29:00.605 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 15:29:00.605 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:29:00.614 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 15:29:00.619 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 15:29:00.619 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:29:00.623 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 15:29:00.628 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 15:29:00.628 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:29:00.642 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 15:29:00.647 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 15:29:00.647 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 15:29:00.647 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 15:29:00.648 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:29:00.652 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 15:29:00.658 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 15:29:00.658 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:29:00.663 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 15:29:00.667 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 15:29:00.667 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:29:00.673 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 15:29:00.678 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 15:29:00.678 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:29:00.684 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 15:29:00.697 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:血型与RH血型逻辑不符同时满足以下条件： 1、个人基本信息表《血型》填写为“不详” 2、个人基本信息表《RH血型》填写为“阴性”或“阳性” 
2020-06-17 15:29:00.699 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1)  
2020-06-17 15:29:00.700 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), a58b2894635045b18a63c250d46ce8a8(String), 2020-06-17 15:29:00.699(Timestamp) 
2020-06-17 15:29:00.725 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 1 
2020-06-17 15:29:03.992 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 15:29:03.992 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 15:29:03.997 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 15:29:04.001 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 15:29:04.001 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 15:29:04.005 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 15:29:04.009 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 15:29:04.009 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 15:29:04.014 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-17 15:29:04.019 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 15:29:04.019 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:29:04.023 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 15:29:04.028 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 15:29:04.028 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:29:04.033 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 15:29:04.037 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 15:29:04.037 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 15:29:04.038 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 15:29:04.038 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:29:04.042 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 15:29:04.046 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 15:29:04.047 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:29:04.051 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 15:29:04.055 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 15:29:04.055 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:29:04.060 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 15:29:04.063 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 15:29:04.064 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:29:04.078 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 15:29:04.082 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 15:29:04.082 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 15:29:04.083 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 15:29:04.083 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:29:04.087 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 15:29:04.091 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 15:29:04.092 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:29:04.096 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 15:29:04.100 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 15:29:04.100 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:29:04.105 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 15:29:04.119 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 15:29:04.119 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:29:04.124 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 15:29:04.139 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:血型与RH血型逻辑不符同时满足以下条件： 1、个人基本信息表《血型》填写为“不详” 2、个人基本信息表《RH血型》填写为“阴性”或“阳性” 
2020-06-17 15:29:04.141 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1)  
2020-06-17 15:29:04.142 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), a58b2894635045b18a63c250d46ce8a8(String), 2020-06-17 15:29:04.141(Timestamp) 
2020-06-17 15:29:04.181 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 1 
2020-06-17 15:29:07.567 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 15:29:07.568 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 15:29:07.573 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 15:29:07.577 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 15:29:07.578 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 15:29:07.582 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 15:29:07.587 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 15:29:07.587 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 15:29:07.592 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-17 15:29:07.596 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 15:29:07.596 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:29:07.600 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 15:29:07.604 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 15:29:07.605 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:29:07.610 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 15:29:07.614 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 15:29:07.614 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 15:29:07.615 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 15:29:07.615 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:29:07.619 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 15:29:07.624 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 15:29:07.626 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:29:07.630 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 15:29:07.635 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 15:29:07.635 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:29:07.641 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 15:29:07.645 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 15:29:07.646 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:29:07.661 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 15:29:07.665 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 15:29:07.665 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 15:29:07.666 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 15:29:07.666 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:29:07.672 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 15:29:07.677 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 15:29:07.678 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:29:07.682 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 15:29:07.688 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 15:29:07.688 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:29:07.694 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 15:29:07.699 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 15:29:07.699 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:29:07.705 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 15:29:07.730 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:血型与RH血型逻辑不符同时满足以下条件： 1、个人基本信息表《血型》填写为“不详” 2、个人基本信息表《RH血型》填写为“阴性”或“阳性” 
2020-06-17 15:29:07.734 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1)  
2020-06-17 15:29:07.735 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), a58b2894635045b18a63c250d46ce8a8(String), 2020-06-17 15:29:07.734(Timestamp) 
2020-06-17 15:29:07.761 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 1 
2020-06-17 15:29:11.312 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 15:29:11.312 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 15:29:11.318 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 15:29:11.323 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 15:29:11.323 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 15:29:11.328 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 15:29:11.333 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 15:29:11.334 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 15:29:11.338 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-17 15:29:11.343 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 15:29:11.343 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:29:11.347 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 15:29:11.352 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 15:29:11.352 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:29:11.357 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 15:29:11.361 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 15:29:11.362 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 15:29:11.362 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 15:29:11.362 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:29:11.366 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 15:29:11.371 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 15:29:11.371 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:29:11.375 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 15:29:11.379 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 15:29:11.379 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:29:11.383 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 15:29:11.389 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 15:29:11.389 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:29:11.403 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 15:29:11.407 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 15:29:11.407 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 15:29:11.408 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 15:29:11.408 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:29:11.412 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 15:29:11.416 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 15:29:11.416 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:29:11.420 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 15:29:11.424 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 15:29:11.424 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:29:11.428 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 15:29:11.433 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 15:29:11.434 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:29:11.438 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 15:29:11.455 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:个人基本信息表既往史既往史疾病确诊时间未填写 
2020-06-17 15:29:11.457 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:个人基本信息表既往史既往史疾病确诊时间填写不规范 
2020-06-17 15:29:11.457 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:血型与RH血型逻辑不符同时满足以下条件： 1、个人基本信息表《血型》填写为“不详” 2、个人基本信息表《RH血型》填写为“阴性”或“阳性” 
2020-06-17 15:29:11.460 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-17 15:29:11.460 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 6302b0fcdcd7482099581602a1fec501(String), 2020-06-17 15:29:11.46(Timestamp), 31011310200312009116(String), 923bfb7880204efa8f26fd200d1bd17e(String), 2020-06-17 15:29:11.46(Timestamp), 31011310200312009116(String), a58b2894635045b18a63c250d46ce8a8(String), 2020-06-17 15:29:11.46(Timestamp) 
2020-06-17 15:29:11.478 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 3 
2020-06-17 15:31:13.036 [INFO ] com.benetech.rules.RulesApplication                - [logStarting:55] Starting RulesApplication v1.0-SNAPSHOT on DESKTOP-EOCO1V0 with PID 13816 (D:\51\python\project\instance\zyjk\EHR\controlRuleNew\config\healthRecordRules.jar started by ZY in D:\51\python\project\instance\zyjk\EHR\controlRuleNew) 
2020-06-17 15:31:13.039 [DEBUG] com.benetech.rules.RulesApplication                - [logStarting:56] Running with Spring Boot v2.2.1.RELEASE, Spring v5.2.1.RELEASE 
2020-06-17 15:31:13.040 [INFO ] com.benetech.rules.RulesApplication                - [logStartupProfileInfo:655] The following profiles are active: test 
2020-06-17 15:31:14.632 [INFO ] o.s.boot.web.embedded.tomcat.TomcatWebServer       - [initialize:92] Tomcat initialized with port(s): 8838 (http) 
2020-06-17 15:31:14.644 [INFO ] org.apache.coyote.http11.Http11NioProtocol         - [log:173] Initializing ProtocolHandler ["http-nio-8838"] 
2020-06-17 15:31:14.644 [INFO ] org.apache.catalina.core.StandardService           - [log:173] Starting service [Tomcat] 
2020-06-17 15:31:14.649 [INFO ] org.apache.catalina.core.StandardEngine            - [log:173] Starting Servlet engine: [Apache Tomcat/9.0.27] 
2020-06-17 15:31:14.715 [INFO ] o.a.c.c.C.[.[localhost].[/healthRecordRules]       - [log:173] Initializing Spring embedded WebApplicationContext 
2020-06-17 15:31:14.715 [INFO ] org.springframework.web.context.ContextLoader      - [prepareWebApplicationContext:284] Root WebApplicationContext: initialization completed in 1593 ms 
2020-06-17 15:31:14.808 [DEBUG] org.apache.ibatis.logging.LogFactory               - [setImplementation:135] Logging initialized using 'class org.apache.ibatis.logging.slf4j.Slf4jImpl' adapter. 
2020-06-17 15:31:15.069 [WARN ] org.mybatis.spring.SqlSessionFactoryBean           - [buildSqlSessionFactory:467] Can't find class in '[com.benetech.rules.*.entity]' package. Please check your configuration. 
2020-06-17 15:31:15.754 [INFO ] com.alibaba.druid.pool.DruidDataSource             - [init:930] {dataSource-1} inited 
2020-06-17 15:31:16.025 [DEBUG] c.b.r.m.e.mapper.RuleEngineMapper.getAllRules      - [debug:159] ==>  Preparing: select a.RuleId as ruleId, a.RuleSql as clazz from HrRule a join HrRuleProps b on a.RuleId = b.RuleId where -- RuleId in ('34278f71cf1d42c88158aaf637fa5203', '8d30baa03bfc4233a8f115c57a0ebf08', '63eb82a44bf64c96a0b9023fa2a3c9d9') a.RuleSql != '' and a.RuleSql is not null and b.Enable = 1  
2020-06-17 15:31:16.044 [DEBUG] c.b.r.m.e.mapper.RuleEngineMapper.getAllRules      - [debug:159] ==> Parameters:  
2020-06-17 15:31:16.138 [DEBUG] c.b.r.m.e.mapper.RuleEngineMapper.getAllRules      - [debug:159] <==      Total: 310 
2020-06-17 15:31:16.210 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 15:31:16.210 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 15:31:16.216 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 15:31:16.221 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 15:31:16.221 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 15:31:16.227 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 15:31:16.231 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 15:31:16.231 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 15:31:16.236 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-17 15:31:16.239 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 15:31:16.240 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:31:16.244 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 15:31:16.248 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 15:31:16.248 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:31:16.254 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 15:31:16.258 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 15:31:16.258 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 15:31:16.258 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 15:31:16.259 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:31:16.263 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 15:31:16.267 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 15:31:16.267 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:31:16.272 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 15:31:16.276 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 15:31:16.276 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:31:16.281 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 15:31:16.286 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 15:31:16.286 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:31:16.304 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 15:31:16.311 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 15:31:16.311 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 15:31:16.311 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 15:31:16.312 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:31:16.317 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 15:31:16.321 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 15:31:16.321 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:31:16.326 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 15:31:16.330 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 15:31:16.330 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:31:16.335 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 15:31:16.339 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 15:31:16.339 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:31:16.344 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 15:31:16.364 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:姓名未填写姓名为空值 
2020-06-17 15:31:16.371 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:血型与RH血型逻辑不符同时满足以下条件： 1、个人基本信息表《血型》填写为“不详” 2、个人基本信息表《RH血型》填写为“阴性”或“阳性” 
2020-06-17 15:31:16.374 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-17 15:31:16.374 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 63eb82a44bf64c96a0b9023fa2a3c9d9(String), 2020-06-17 15:31:16.373(Timestamp), 31011310200312009116(String), a58b2894635045b18a63c250d46ce8a8(String), 2020-06-17 15:31:16.373(Timestamp) 
2020-06-17 15:31:16.392 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 2 
2020-06-17 15:31:16.401 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [init:68] 加载规则：310 条 
2020-06-17 15:31:16.420 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.getAllCode    - [debug:159] ==>  Preparing: SELECT codeSysType AS type, code AS code, [value] AS value FROM tb_code_value WHERE code != '' AND [value] != ''  
2020-06-17 15:31:16.420 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.getAllCode    - [debug:159] ==> Parameters:  
2020-06-17 15:31:16.834 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.getAllCode    - [debug:159] <==      Total: 44881 
2020-06-17 15:31:16.859 [INFO ] c.b.r.m.m.service.impl.EhrModelBuildServiceImpl    - [init:96] 初始化字典类型: 467 种 
2020-06-17 15:31:16.859 [INFO ] c.b.r.m.m.service.impl.EhrModelBuildServiceImpl    - [init:97] 初始化字典: 44881 条 
2020-06-17 15:31:16.860 [ERROR] c.b.r.m.process.service.impl.QcProcessServiceImpl  - [init:44] 初始化线程池 
2020-06-17 15:31:17.006 [INFO ] o.s.scheduling.concurrent.ThreadPoolTaskExecutor   - [initialize:171] Initializing ExecutorService 'applicationTaskExecutor' 
2020-06-17 15:31:17.274 [INFO ] org.apache.coyote.http11.Http11NioProtocol         - [log:173] Starting ProtocolHandler ["http-nio-8838"] 
2020-06-17 15:31:17.287 [INFO ] org.apache.coyote.http11.Http11NioProtocol         - [log:173] Pausing ProtocolHandler ["http-nio-8838"] 
2020-06-17 15:31:17.287 [INFO ] org.apache.catalina.core.StandardService           - [log:173] Stopping service [Tomcat] 
2020-06-17 15:31:17.292 [INFO ] org.apache.coyote.http11.Http11NioProtocol         - [log:173] Stopping ProtocolHandler ["http-nio-8838"] 
2020-06-17 15:31:17.293 [INFO ] org.apache.coyote.http11.Http11NioProtocol         - [log:173] Destroying ProtocolHandler ["http-nio-8838"] 
2020-06-17 15:31:17.295 [INFO ] o.s.b.a.l.ConditionEvaluationReportLoggingListener - [logMessage:136]     Error starting ApplicationContext. To display the conditions report re-run your application with 'debug' enabled. 
2020-06-17 15:31:17.297 [ERROR] o.s.b.diagnostics.LoggingFailureAnalysisReporter   - [report:40]     ***************************  APPLICATION FAILED TO START  ***************************    Description:    Web server failed to start. Port 8838 was already in use.    Action:    Identify and stop the process that's listening on port 8838 or configure this application to listen on another port.   
2020-06-17 15:31:17.300 [INFO ] o.s.scheduling.concurrent.ThreadPoolTaskExecutor   - [shutdown:208] Shutting down ExecutorService 'applicationTaskExecutor' 
2020-06-17 15:31:17.304 [INFO ] com.alibaba.druid.pool.DruidDataSource             - [close:1825] {dataSource-1} closed 
2020-06-17 15:31:20.027 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 15:31:20.027 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 15:31:20.032 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 15:31:20.037 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 15:31:20.037 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 15:31:20.043 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 15:31:20.047 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 15:31:20.048 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 15:31:20.051 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-17 15:31:20.056 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 15:31:20.056 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:31:20.060 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 15:31:20.065 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 15:31:20.065 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:31:20.070 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 15:31:20.074 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 15:31:20.074 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 15:31:20.074 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 15:31:20.075 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:31:20.081 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 15:31:20.086 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 15:31:20.086 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:31:20.090 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 15:31:20.094 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 15:31:20.095 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:31:20.100 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 15:31:20.104 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 15:31:20.105 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:31:20.118 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 15:31:20.122 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 15:31:20.122 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 15:31:20.122 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 15:31:20.124 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:31:20.127 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 15:31:20.132 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 15:31:20.132 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:31:20.137 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 15:31:20.142 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 15:31:20.142 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:31:20.145 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 15:31:20.149 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 15:31:20.150 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:31:20.154 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 15:31:20.167 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:姓名填写不规范同时满足以下条件： 1、联系人姓名不为空值 2、联系人姓名为纯数字 
2020-06-17 15:31:20.169 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:与三级医院住院就诊记录表姓名不一致同时满足以下条件： 1、封面《姓名》不为空值 2、三级医院住院就诊记录表《患者姓名》不为空 3、封面《姓名》与住院就诊记录表中《患者姓名》不相等 
2020-06-17 15:31:20.170 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:与三级医院门诊就诊记录表姓名不一致同时满足以下条件： 1、封面《姓名》不为空值 2、三级医院门诊就诊记录表《患者姓名》不为空 3、封面《姓名》与门诊就诊记录表中《患者姓名》不相等 
2020-06-17 15:31:20.171 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:血型与RH血型逻辑不符同时满足以下条件： 1、个人基本信息表《血型》填写为“不详” 2、个人基本信息表《RH血型》填写为“阴性”或“阳性” 
2020-06-17 15:31:20.173 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-17 15:31:20.173 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 61ed70b670f2460a94ebc183f6b86f5d(String), 2020-06-17 15:31:20.173(Timestamp), 31011310200312009116(String), 814b3d0aca3642af82ef320f98d4dfba(String), 2020-06-17 15:31:20.173(Timestamp), 31011310200312009116(String), 847bc4b46918417dab4aa917af3355c3(String), 2020-06-17 15:31:20.173(Timestamp), 31011310200312009116(String), a58b2894635045b18a63c250d46ce8a8(String), 2020-06-17 15:31:20.173(Timestamp) 
2020-06-17 15:31:20.203 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 4 
2020-06-17 15:31:23.502 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 15:31:23.502 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 15:31:23.506 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 15:31:23.510 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 15:31:23.511 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 15:31:23.515 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 15:31:23.520 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 15:31:23.520 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 15:31:23.524 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-17 15:31:23.528 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 15:31:23.528 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:31:23.532 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 15:31:23.536 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 15:31:23.536 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:31:23.545 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 15:31:23.549 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 15:31:23.549 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 15:31:23.550 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 15:31:23.550 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:31:23.554 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 15:31:23.558 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 15:31:23.559 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:31:23.563 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 15:31:23.566 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 15:31:23.567 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:31:23.571 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 15:31:23.576 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 15:31:23.577 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:31:23.591 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 15:31:23.595 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 15:31:23.595 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 15:31:23.595 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 15:31:23.596 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:31:23.601 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 15:31:23.605 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 15:31:23.606 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:31:23.610 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 15:31:23.615 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 15:31:23.615 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:31:23.620 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 15:31:23.624 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 15:31:23.624 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:31:23.629 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 15:31:23.643 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:与三级医院住院就诊记录表姓名不一致同时满足以下条件： 1、封面《姓名》不为空值 2、三级医院住院就诊记录表《患者姓名》不为空 3、封面《姓名》与住院就诊记录表中《患者姓名》不相等 
2020-06-17 15:31:23.644 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:与三级医院门诊就诊记录表姓名不一致同时满足以下条件： 1、封面《姓名》不为空值 2、三级医院门诊就诊记录表《患者姓名》不为空 3、封面《姓名》与门诊就诊记录表中《患者姓名》不相等 
2020-06-17 15:31:23.645 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:血型与RH血型逻辑不符同时满足以下条件： 1、个人基本信息表《血型》填写为“不详” 2、个人基本信息表《RH血型》填写为“阴性”或“阳性” 
2020-06-17 15:31:23.646 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:姓名长度异常长度>50字符 
2020-06-17 15:31:23.648 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-17 15:31:23.649 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 814b3d0aca3642af82ef320f98d4dfba(String), 2020-06-17 15:31:23.648(Timestamp), 31011310200312009116(String), 847bc4b46918417dab4aa917af3355c3(String), 2020-06-17 15:31:23.648(Timestamp), 31011310200312009116(String), a58b2894635045b18a63c250d46ce8a8(String), 2020-06-17 15:31:23.648(Timestamp), 31011310200312009116(String), b8eeb38e528544b28133b9ee94c5fbc4(String), 2020-06-17 15:31:23.648(Timestamp) 
2020-06-17 15:31:23.666 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 4 
2020-06-17 15:31:26.955 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 15:31:26.955 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 15:31:26.961 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 15:31:26.966 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 15:31:26.966 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 15:31:26.971 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 15:31:26.975 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 15:31:26.976 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 15:31:26.982 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-17 15:31:26.986 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 15:31:26.986 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:31:26.991 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 15:31:26.996 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 15:31:26.997 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:31:27.003 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 15:31:27.009 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 15:31:27.009 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 15:31:27.010 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 15:31:27.010 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:31:27.015 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 15:31:27.023 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 15:31:27.023 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:31:27.028 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 15:31:27.033 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 15:31:27.034 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:31:27.040 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 15:31:27.047 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 15:31:27.048 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:31:27.062 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 15:31:27.076 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 15:31:27.077 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 15:31:27.078 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 15:31:27.078 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:31:27.086 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 15:31:27.095 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 15:31:27.096 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:31:27.101 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 15:31:27.106 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 15:31:27.107 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:31:27.122 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 15:31:27.127 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 15:31:27.128 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:31:27.135 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 15:31:27.164 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:血型与RH血型逻辑不符同时满足以下条件： 1、个人基本信息表《血型》填写为“不详” 2、个人基本信息表《RH血型》填写为“阴性”或“阳性” 
2020-06-17 15:31:27.166 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:现住址未填写同时满足以下条件： 1、现住址中的省、市、区都为空值 2、现住址中的详细地址为空值 
2020-06-17 15:31:27.170 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-17 15:31:27.171 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), a58b2894635045b18a63c250d46ce8a8(String), 2020-06-17 15:31:27.17(Timestamp), 31011310200312009116(String), b3bb8566dc154106b6a400f40a0fe914(String), 2020-06-17 15:31:27.17(Timestamp) 
2020-06-17 15:31:27.190 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 2 
2020-06-17 15:31:30.422 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 15:31:30.423 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 15:31:30.435 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 15:31:30.441 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 15:31:30.441 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 15:31:30.446 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 15:31:30.450 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 15:31:30.450 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 15:31:30.455 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-17 15:31:30.461 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 15:31:30.461 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:31:30.466 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 15:31:30.470 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 15:31:30.470 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:31:30.476 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 15:31:30.480 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 15:31:30.480 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 15:31:30.481 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 15:31:30.481 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:31:30.485 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 15:31:30.489 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 15:31:30.489 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:31:30.493 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 15:31:30.498 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 15:31:30.498 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:31:30.503 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 15:31:30.507 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 15:31:30.507 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:31:30.521 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 15:31:30.526 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 15:31:30.526 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 15:31:30.526 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 15:31:30.527 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:31:30.531 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 15:31:30.536 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 15:31:30.536 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:31:30.540 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 15:31:30.546 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 15:31:30.547 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:31:30.551 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 15:31:30.555 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 15:31:30.556 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:31:30.560 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 15:31:30.573 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:现住址长度异常长度>100字符（包含省市区、乡镇街道名称（如有）、村居委会名称（如有）、详细地址） 
2020-06-17 15:31:30.574 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:血型与RH血型逻辑不符同时满足以下条件： 1、个人基本信息表《血型》填写为“不详” 2、个人基本信息表《RH血型》填写为“阴性”或“阳性” 
2020-06-17 15:31:30.576 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-17 15:31:30.577 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 91665e0b2efa4f86aea807ec9f4883c3(String), 2020-06-17 15:31:30.576(Timestamp), 31011310200312009116(String), a58b2894635045b18a63c250d46ce8a8(String), 2020-06-17 15:31:30.576(Timestamp) 
2020-06-17 15:31:30.603 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 2 
2020-06-17 15:31:33.855 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 15:31:33.855 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 15:31:33.860 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 15:31:33.865 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 15:31:33.865 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 15:31:33.869 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 15:31:33.873 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 15:31:33.874 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 15:31:33.878 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-17 15:31:33.883 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 15:31:33.883 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:31:33.887 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 15:31:33.892 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 15:31:33.893 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:31:33.899 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 15:31:33.903 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 15:31:33.903 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 15:31:33.904 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 15:31:33.904 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:31:33.909 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 15:31:33.913 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 15:31:33.914 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:31:33.918 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 15:31:33.923 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 15:31:33.923 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:31:33.928 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 15:31:33.932 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 15:31:33.932 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:31:33.946 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 15:31:33.951 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 15:31:33.951 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 15:31:33.951 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 15:31:33.952 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:31:33.958 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 15:31:33.962 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 15:31:33.963 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:31:33.967 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 15:31:33.971 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 15:31:33.972 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:31:33.976 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 15:31:33.980 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 15:31:33.981 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:31:33.985 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 15:31:34.000 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:户籍地址未填写同时满足以下条件： 1、户籍地址中的省、市、区都为空值 2、户籍地址中的详细地址为空值 
2020-06-17 15:31:34.002 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:血型与RH血型逻辑不符同时满足以下条件： 1、个人基本信息表《血型》填写为“不详” 2、个人基本信息表《RH血型》填写为“阴性”或“阳性” 
2020-06-17 15:31:34.004 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-17 15:31:34.005 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 297847a88755417b8f62ce2d680ffb75(String), 2020-06-17 15:31:34.004(Timestamp), 31011310200312009116(String), a58b2894635045b18a63c250d46ce8a8(String), 2020-06-17 15:31:34.004(Timestamp) 
2020-06-17 15:31:34.020 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 2 
2020-06-17 15:31:37.172 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 15:31:37.172 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 15:31:37.177 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 15:31:37.181 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 15:31:37.181 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 15:31:37.186 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 15:31:37.190 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 15:31:37.191 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 15:31:37.195 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-17 15:31:37.199 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 15:31:37.200 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:31:37.204 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 15:31:37.211 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 15:31:37.211 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:31:37.217 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 15:31:37.221 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 15:31:37.222 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 15:31:37.222 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 15:31:37.222 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:31:37.226 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 15:31:37.231 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 15:31:37.231 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:31:37.235 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 15:31:37.240 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 15:31:37.240 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:31:37.244 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 15:31:37.249 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 15:31:37.249 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:31:37.263 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 15:31:37.268 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 15:31:37.269 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 15:31:37.270 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 15:31:37.270 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:31:37.275 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 15:31:37.281 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 15:31:37.282 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:31:37.286 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 15:31:37.291 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 15:31:37.292 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:31:37.297 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 15:31:37.302 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 15:31:37.302 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:31:37.307 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 15:31:37.325 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:户籍地址长度异常长度>100字符（包含省市区、乡镇街道名称（如有）、村居委会名称（如有）、详细地址） 
2020-06-17 15:31:37.329 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:血型与RH血型逻辑不符同时满足以下条件： 1、个人基本信息表《血型》填写为“不详” 2、个人基本信息表《RH血型》填写为“阴性”或“阳性” 
2020-06-17 15:31:37.332 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-17 15:31:37.332 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 329b69c7855544e986fc0073b77fe9be(String), 2020-06-17 15:31:37.332(Timestamp), 31011310200312009116(String), a58b2894635045b18a63c250d46ce8a8(String), 2020-06-17 15:31:37.332(Timestamp) 
2020-06-17 15:31:37.347 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 2 
2020-06-17 15:31:40.537 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 15:31:40.537 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 15:31:40.544 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 15:31:40.548 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 15:31:40.549 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 15:31:40.554 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 15:31:40.558 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 15:31:40.559 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 15:31:40.563 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-17 15:31:40.568 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 15:31:40.568 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:31:40.572 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 15:31:40.576 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 15:31:40.577 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:31:40.583 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 15:31:40.586 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 15:31:40.586 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 15:31:40.586 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 15:31:40.587 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:31:40.592 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 15:31:40.597 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 15:31:40.597 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:31:40.601 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 15:31:40.606 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 15:31:40.606 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:31:40.610 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 15:31:40.615 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 15:31:40.615 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:31:40.629 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 15:31:40.633 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 15:31:40.633 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 15:31:40.633 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 15:31:40.634 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:31:40.638 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 15:31:40.643 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 15:31:40.643 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:31:40.647 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 15:31:40.652 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 15:31:40.652 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:31:40.657 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 15:31:40.661 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 15:31:40.662 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:31:40.666 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 15:31:40.680 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:联系电话未填写联系电话为空值 
2020-06-17 15:31:40.680 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:血型与RH血型逻辑不符同时满足以下条件： 1、个人基本信息表《血型》填写为“不详” 2、个人基本信息表《RH血型》填写为“阴性”或“阳性” 
2020-06-17 15:31:40.689 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-17 15:31:40.689 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 8c22db3c92bb445b9712ca61107e8312(String), 2020-06-17 15:31:40.689(Timestamp), 31011310200312009116(String), a58b2894635045b18a63c250d46ce8a8(String), 2020-06-17 15:31:40.689(Timestamp) 
2020-06-17 15:31:40.709 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 2 
2020-06-17 15:31:43.980 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 15:31:43.981 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 15:31:43.986 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 15:31:43.990 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 15:31:43.991 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 15:31:43.996 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 15:31:44.000 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 15:31:44.001 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 15:31:44.006 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-17 15:31:44.010 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 15:31:44.011 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:31:44.015 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 15:31:44.020 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 15:31:44.020 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:31:44.025 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 15:31:44.030 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 15:31:44.030 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 15:31:44.031 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 15:31:44.031 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:31:44.036 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 15:31:44.040 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 15:31:44.041 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:31:44.045 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 15:31:44.049 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 15:31:44.050 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:31:44.056 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 15:31:44.060 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 15:31:44.061 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:31:44.078 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 15:31:44.082 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 15:31:44.082 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 15:31:44.083 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 15:31:44.083 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:31:44.088 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 15:31:44.092 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 15:31:44.093 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:31:44.097 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 15:31:44.101 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 15:31:44.101 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:31:44.107 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 15:31:44.112 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 15:31:44.113 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:31:44.118 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 15:31:44.137 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:血型与RH血型逻辑不符同时满足以下条件： 1、个人基本信息表《血型》填写为“不详” 2、个人基本信息表《RH血型》填写为“阴性”或“阳性” 
2020-06-17 15:31:44.139 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:联系电话手机号码长度异常同时满足以下条件： 1、联系电话不为空值 2、联系电话为手机号码（是1开头判断为手机号） 3、号码长度小于11位或大于11位 
2020-06-17 15:31:44.142 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-17 15:31:44.142 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), a58b2894635045b18a63c250d46ce8a8(String), 2020-06-17 15:31:44.141(Timestamp), 31011310200312009116(String), d07ab42169144816afe341ba43d0b68c(String), 2020-06-17 15:31:44.141(Timestamp) 
2020-06-17 15:31:44.163 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 2 
2020-06-17 15:31:47.426 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 15:31:47.426 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 15:31:47.431 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 15:31:47.435 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 15:31:47.436 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 15:31:47.441 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 15:31:47.446 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 15:31:47.446 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 15:31:47.452 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-17 15:31:47.456 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 15:31:47.457 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:31:47.462 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 15:31:47.467 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 15:31:47.467 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:31:47.473 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 15:31:47.478 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 15:31:47.478 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 15:31:47.479 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 15:31:47.479 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:31:47.484 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 15:31:47.489 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 15:31:47.489 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:31:47.493 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 15:31:47.499 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 15:31:47.499 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:31:47.504 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 15:31:47.510 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 15:31:47.511 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:31:47.525 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 15:31:47.531 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 15:31:47.531 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 15:31:47.532 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 15:31:47.532 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:31:47.536 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 15:31:47.540 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 15:31:47.540 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:31:47.544 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 15:31:47.548 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 15:31:47.549 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:31:47.554 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 15:31:47.558 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 15:31:47.559 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:31:47.563 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 15:31:47.575 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:手机号码校验失败同时满足以下条件： 1、联系电话不为空值 2、联系电话为手机号码（是1开头判断为手机号） 3、号码长度为11位，但是不存在这个号段（进行号段校验） 
2020-06-17 15:31:47.578 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:血型与RH血型逻辑不符同时满足以下条件： 1、个人基本信息表《血型》填写为“不详” 2、个人基本信息表《RH血型》填写为“阴性”或“阳性” 
2020-06-17 15:31:47.580 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-17 15:31:47.580 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 18c8a8a81e25426f8a7958b46716c295(String), 2020-06-17 15:31:47.58(Timestamp), 31011310200312009116(String), a58b2894635045b18a63c250d46ce8a8(String), 2020-06-17 15:31:47.58(Timestamp) 
2020-06-17 15:31:47.599 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 2 
2020-06-17 15:31:50.887 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 15:31:50.888 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 15:31:50.893 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 15:31:50.897 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 15:31:50.898 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 15:31:50.902 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 15:31:50.906 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 15:31:50.907 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 15:31:50.912 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-17 15:31:50.916 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 15:31:50.917 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:31:50.925 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 15:31:50.929 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 15:31:50.930 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:31:50.935 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 15:31:50.940 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 15:31:50.940 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 15:31:50.941 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 15:31:50.941 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:31:50.946 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 15:31:50.950 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 15:31:50.951 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:31:50.956 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 15:31:50.959 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 15:31:50.960 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:31:50.965 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 15:31:50.969 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 15:31:50.970 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:31:50.984 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 15:31:50.988 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 15:31:50.989 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 15:31:50.989 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 15:31:50.990 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:31:50.994 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 15:31:50.999 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 15:31:50.999 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:31:51.003 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 15:31:51.008 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 15:31:51.008 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:31:51.013 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 15:31:51.017 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 15:31:51.018 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:31:51.023 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 15:31:51.042 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:固定电话长度异常（含区号）同时满足以下条件： 1、联系电话不为空值 2、联系电话为固定电话（是0开头判断为固定电话） 3、号码长度小于11位或大于12位 
2020-06-17 15:31:51.045 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:血型与RH血型逻辑不符同时满足以下条件： 1、个人基本信息表《血型》填写为“不详” 2、个人基本信息表《RH血型》填写为“阴性”或“阳性” 
2020-06-17 15:31:51.048 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-17 15:31:51.049 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 605d17cf2e38410da56726f765f8c34c(String), 2020-06-17 15:31:51.048(Timestamp), 31011310200312009116(String), a58b2894635045b18a63c250d46ce8a8(String), 2020-06-17 15:31:51.048(Timestamp) 
2020-06-17 15:31:51.078 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 2 
2020-06-17 15:31:54.332 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 15:31:54.333 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 15:31:54.338 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 15:31:54.343 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 15:31:54.344 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 15:31:54.348 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 15:31:54.353 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 15:31:54.354 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 15:31:54.360 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-17 15:31:54.364 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 15:31:54.364 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:31:54.373 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 15:31:54.378 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 15:31:54.378 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:31:54.385 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 15:31:54.392 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 15:31:54.393 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 15:31:54.393 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 15:31:54.394 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:31:54.399 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 15:31:54.409 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 15:31:54.409 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:31:54.414 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 15:31:54.419 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 15:31:54.420 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:31:54.425 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 15:31:54.430 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 15:31:54.430 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:31:54.446 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 15:31:54.452 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 15:31:54.452 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 15:31:54.454 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 15:31:54.454 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:31:54.460 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 15:31:54.466 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 15:31:54.467 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:31:54.474 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 15:31:54.479 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 15:31:54.480 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:31:54.486 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 15:31:54.492 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 15:31:54.492 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:31:54.497 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 15:31:54.524 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:血型与RH血型逻辑不符同时满足以下条件： 1、个人基本信息表《血型》填写为“不详” 2、个人基本信息表《RH血型》填写为“阴性”或“阳性” 
2020-06-17 15:31:54.525 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:固定电话长度异常（不含区号）同时满足以下条件： 1、联系电话不为空值 2、联系电话为固定电话（不是1和0开头判断为固定电话） 3、号码长度小于7位或大于8位 
2020-06-17 15:31:54.530 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-17 15:31:54.531 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), a58b2894635045b18a63c250d46ce8a8(String), 2020-06-17 15:31:54.529(Timestamp), 31011310200312009116(String), b0d2d6a11e4b476b813f99750cb00786(String), 2020-06-17 15:31:54.529(Timestamp) 
2020-06-17 15:31:54.549 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 2 
2020-06-17 15:31:57.854 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 15:31:57.854 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 15:31:57.859 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 15:31:57.864 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 15:31:57.864 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 15:31:57.870 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 15:31:57.874 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 15:31:57.874 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 15:31:57.879 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-17 15:31:57.885 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 15:31:57.885 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:31:57.889 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 15:31:57.894 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 15:31:57.894 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:31:57.899 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 15:31:57.904 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 15:31:57.904 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 15:31:57.905 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 15:31:57.905 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:31:57.909 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 15:31:57.913 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 15:31:57.913 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:31:57.916 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 15:31:57.921 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 15:31:57.921 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:31:57.928 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 15:31:57.933 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 15:31:57.933 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:31:57.948 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 15:31:57.952 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 15:31:57.952 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 15:31:57.952 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 15:31:57.953 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:31:57.956 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 15:31:57.961 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 15:31:57.962 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:31:57.966 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 15:31:57.971 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 15:31:57.971 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:31:57.976 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 15:31:57.980 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 15:31:57.980 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:31:57.986 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 15:31:58.004 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:血型与RH血型逻辑不符同时满足以下条件： 1、个人基本信息表《血型》填写为“不详” 2、个人基本信息表《RH血型》填写为“阴性”或“阳性” 
2020-06-17 15:31:58.005 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:联系电话不为纯数字同时满足以下条件： 1、联系电话不为空值 2、联系电话不是纯数字 
2020-06-17 15:31:58.007 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-17 15:31:58.008 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), a58b2894635045b18a63c250d46ce8a8(String), 2020-06-17 15:31:58.007(Timestamp), 31011310200312009116(String), db6607db218b4182924b980ecb900b19(String), 2020-06-17 15:31:58.007(Timestamp) 
2020-06-17 15:31:58.039 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 2 
2020-06-17 15:32:01.247 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 15:32:01.247 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 15:32:01.252 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 15:32:01.256 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 15:32:01.257 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 15:32:01.262 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 15:32:01.266 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 15:32:01.267 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 15:32:01.271 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-17 15:32:01.275 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 15:32:01.276 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:32:01.280 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 15:32:01.285 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 15:32:01.285 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:32:01.290 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 15:32:01.296 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 15:32:01.297 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 15:32:01.297 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 15:32:01.298 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:32:01.304 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 15:32:01.309 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 15:32:01.310 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:32:01.315 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 15:32:01.320 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 15:32:01.321 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:32:01.327 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 15:32:01.333 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 15:32:01.334 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:32:01.348 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 15:32:01.354 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 15:32:01.354 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 15:32:01.355 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 15:32:01.356 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:32:01.361 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 15:32:01.366 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 15:32:01.367 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:32:01.373 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 15:32:01.379 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 15:32:01.379 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:32:01.385 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 15:32:01.389 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 15:32:01.390 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:32:01.396 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 15:32:01.420 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:联系电话不为纯数字同时满足以下条件： 1、联系电话不为空值 2、联系电话数字只包含一个数字，如99999999 
2020-06-17 15:32:01.427 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:血型与RH血型逻辑不符同时满足以下条件： 1、个人基本信息表《血型》填写为“不详” 2、个人基本信息表《RH血型》填写为“阴性”或“阳性” 
2020-06-17 15:32:01.428 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:固定电话长度异常（不含区号）同时满足以下条件： 1、联系电话不为空值 2、联系电话为固定电话（不是1和0开头判断为固定电话） 3、号码长度小于7位或大于8位 
2020-06-17 15:32:01.433 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-17 15:32:01.434 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 2be6482767e14818889eee74b5263746(String), 2020-06-17 15:32:01.432(Timestamp), 31011310200312009116(String), a58b2894635045b18a63c250d46ce8a8(String), 2020-06-17 15:32:01.432(Timestamp), 31011310200312009116(String), b0d2d6a11e4b476b813f99750cb00786(String), 2020-06-17 15:32:01.432(Timestamp) 
2020-06-17 15:32:01.456 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 3 
2020-06-17 15:32:04.689 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 15:32:04.690 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 15:32:04.698 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 15:32:04.706 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 15:32:04.707 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 15:32:04.711 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 15:32:04.719 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 15:32:04.719 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 15:32:04.724 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-17 15:32:04.729 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 15:32:04.730 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:32:04.733 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 15:32:04.740 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 15:32:04.741 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:32:04.747 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 15:32:04.753 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 15:32:04.754 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 15:32:04.754 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 15:32:04.755 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:32:04.761 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 15:32:04.766 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 15:32:04.767 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:32:04.773 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 15:32:04.779 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 15:32:04.780 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:32:04.787 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 15:32:04.795 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 15:32:04.796 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:32:04.813 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 15:32:04.817 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 15:32:04.818 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 15:32:04.819 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 15:32:04.819 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:32:04.824 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 15:32:04.828 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 15:32:04.829 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:32:04.834 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 15:32:04.839 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 15:32:04.840 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:32:04.845 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 15:32:04.850 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 15:32:04.851 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:32:04.856 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 15:32:04.876 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:现住址市乡镇（街道）名称未填写乡镇（街道）名称为空值 
2020-06-17 15:32:04.880 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:血型与RH血型逻辑不符同时满足以下条件： 1、个人基本信息表《血型》填写为“不详” 2、个人基本信息表《RH血型》填写为“阴性”或“阳性” 
2020-06-17 15:32:04.884 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-17 15:32:04.884 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 5989fb6d82aa4e618e2e5cdc2c36e01f(String), 2020-06-17 15:32:04.883(Timestamp), 31011310200312009116(String), a58b2894635045b18a63c250d46ce8a8(String), 2020-06-17 15:32:04.883(Timestamp) 
2020-06-17 15:32:04.909 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 2 
2020-06-17 15:32:08.128 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 15:32:08.128 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 15:32:08.135 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 15:32:08.140 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 15:32:08.140 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 15:32:08.150 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 15:32:08.157 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 15:32:08.158 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 15:32:08.163 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-17 15:32:08.170 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 15:32:08.170 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:32:08.175 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 15:32:08.179 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 15:32:08.180 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:32:08.184 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 15:32:08.188 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 15:32:08.189 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 15:32:08.189 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 15:32:08.190 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:32:08.197 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 15:32:08.202 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 15:32:08.203 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:32:08.207 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 15:32:08.212 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 15:32:08.213 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:32:08.218 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 15:32:08.226 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 15:32:08.227 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:32:08.240 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 15:32:08.245 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 15:32:08.245 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 15:32:08.246 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 15:32:08.246 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:32:08.252 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 15:32:08.259 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 15:32:08.260 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:32:08.265 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 15:32:08.270 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 15:32:08.271 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:32:08.277 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 15:32:08.282 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 15:32:08.282 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:32:08.287 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 15:32:08.303 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:现住址乡镇（街道）名称不为汉字乡镇（街道）名称不为汉字 
2020-06-17 15:32:08.307 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:血型与RH血型逻辑不符同时满足以下条件： 1、个人基本信息表《血型》填写为“不详” 2、个人基本信息表《RH血型》填写为“阴性”或“阳性” 
2020-06-17 15:32:08.309 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-17 15:32:08.310 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 2519a198f15a41ea970cf518d3c4bd89(String), 2020-06-17 15:32:08.309(Timestamp), 31011310200312009116(String), a58b2894635045b18a63c250d46ce8a8(String), 2020-06-17 15:32:08.309(Timestamp) 
2020-06-17 15:32:08.331 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 2 
2020-06-17 15:32:11.556 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 15:32:11.556 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 15:32:11.561 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 15:32:11.571 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 15:32:11.572 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 15:32:11.577 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 15:32:11.581 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 15:32:11.581 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 15:32:11.585 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-17 15:32:11.589 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 15:32:11.590 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:32:11.594 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 15:32:11.598 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 15:32:11.598 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:32:11.603 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 15:32:11.608 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 15:32:11.608 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 15:32:11.608 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 15:32:11.609 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:32:11.613 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 15:32:11.617 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 15:32:11.617 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:32:11.622 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 15:32:11.626 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 15:32:11.626 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:32:11.631 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 15:32:11.634 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 15:32:11.635 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:32:11.649 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 15:32:11.653 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 15:32:11.653 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 15:32:11.653 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 15:32:11.654 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:32:11.659 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 15:32:11.664 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 15:32:11.664 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:32:11.667 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 15:32:11.672 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 15:32:11.672 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:32:11.678 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 15:32:11.681 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 15:32:11.682 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:32:11.686 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 15:32:11.700 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:现住址乡镇（街道）名称长度异常长度>100字符 
2020-06-17 15:32:11.702 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:现住址长度异常长度>100字符（包含省市区、乡镇街道名称（如有）、村居委会名称（如有）、详细地址） 
2020-06-17 15:32:11.703 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:血型与RH血型逻辑不符同时满足以下条件： 1、个人基本信息表《血型》填写为“不详” 2、个人基本信息表《RH血型》填写为“阴性”或“阳性” 
2020-06-17 15:32:11.705 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-17 15:32:11.706 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 40c92f3721704bb7a6eb42a8ca1976b6(String), 2020-06-17 15:32:11.705(Timestamp), 31011310200312009116(String), 91665e0b2efa4f86aea807ec9f4883c3(String), 2020-06-17 15:32:11.705(Timestamp), 31011310200312009116(String), a58b2894635045b18a63c250d46ce8a8(String), 2020-06-17 15:32:11.705(Timestamp) 
2020-06-17 15:32:11.725 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 3 
2020-06-17 15:32:14.998 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 15:32:14.999 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 15:32:15.004 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 15:32:15.009 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 15:32:15.009 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 15:32:15.015 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 15:32:15.023 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 15:32:15.023 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 15:32:15.031 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-17 15:32:15.038 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 15:32:15.039 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:32:15.047 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 15:32:15.055 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 15:32:15.056 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:32:15.068 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 15:32:15.075 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 15:32:15.076 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 15:32:15.076 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 15:32:15.077 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:32:15.083 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 15:32:15.089 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 15:32:15.089 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:32:15.095 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 15:32:15.099 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 15:32:15.100 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:32:15.105 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 15:32:15.111 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 15:32:15.112 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:32:15.127 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 15:32:15.136 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 15:32:15.136 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 15:32:15.137 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 15:32:15.137 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:32:15.142 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 15:32:15.146 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 15:32:15.147 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:32:15.153 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 15:32:15.158 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 15:32:15.158 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:32:15.163 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 15:32:15.167 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 15:32:15.168 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:32:15.172 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 15:32:15.188 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:现住址村（居）委会名称未填写村（居）委会名称为空值 
2020-06-17 15:32:15.190 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:血型与RH血型逻辑不符同时满足以下条件： 1、个人基本信息表《血型》填写为“不详” 2、个人基本信息表《RH血型》填写为“阴性”或“阳性” 
2020-06-17 15:32:15.193 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-17 15:32:15.193 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 647ba5f94d274d04955478e4c7e9a593(String), 2020-06-17 15:32:15.193(Timestamp), 31011310200312009116(String), a58b2894635045b18a63c250d46ce8a8(String), 2020-06-17 15:32:15.193(Timestamp) 
2020-06-17 15:32:15.219 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 2 
2020-06-17 15:32:18.556 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 15:32:18.557 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 15:32:18.562 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 15:32:18.566 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 15:32:18.566 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 15:32:18.572 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 15:32:18.576 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 15:32:18.576 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 15:32:18.581 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-17 15:32:18.585 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 15:32:18.585 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:32:18.589 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 15:32:18.594 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 15:32:18.594 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:32:18.599 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 15:32:18.603 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 15:32:18.604 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 15:32:18.604 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 15:32:18.604 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:32:18.610 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 15:32:18.614 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 15:32:18.614 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:32:18.619 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 15:32:18.623 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 15:32:18.623 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:32:18.628 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 15:32:18.632 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 15:32:18.632 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:32:18.647 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 15:32:18.652 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 15:32:18.652 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 15:32:18.652 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 15:32:18.652 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:32:18.657 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 15:32:18.662 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 15:32:18.662 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:32:18.668 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 15:32:18.673 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 15:32:18.673 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:32:18.678 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 15:32:18.682 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 15:32:18.682 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:32:18.687 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 15:32:18.704 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:血型与RH血型逻辑不符同时满足以下条件： 1、个人基本信息表《血型》填写为“不详” 2、个人基本信息表《RH血型》填写为“阴性”或“阳性” 
2020-06-17 15:32:18.705 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:现住址村（居）委会名称不为汉字村（居）委会名称不为汉字 
2020-06-17 15:32:18.707 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-17 15:32:18.708 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), a58b2894635045b18a63c250d46ce8a8(String), 2020-06-17 15:32:18.707(Timestamp), 31011310200312009116(String), ac0fdca3fa96484680d8a0871d00eb3b(String), 2020-06-17 15:32:18.707(Timestamp) 
2020-06-17 15:32:18.729 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 2 
2020-06-17 15:32:22.002 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 15:32:22.003 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 15:32:22.008 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 15:32:22.012 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 15:32:22.012 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 15:32:22.017 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 15:32:22.021 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 15:32:22.022 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 15:32:22.026 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-17 15:32:22.030 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 15:32:22.031 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:32:22.035 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 15:32:22.039 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 15:32:22.039 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:32:22.046 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 15:32:22.052 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 15:32:22.053 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 15:32:22.053 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 15:32:22.053 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:32:22.058 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 15:32:22.063 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 15:32:22.063 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:32:22.067 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 15:32:22.073 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 15:32:22.073 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:32:22.078 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 15:32:22.082 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 15:32:22.082 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:32:22.099 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 15:32:22.104 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 15:32:22.104 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 15:32:22.104 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 15:32:22.105 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:32:22.114 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 15:32:22.119 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 15:32:22.119 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:32:22.124 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 15:32:22.128 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 15:32:22.128 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:32:22.133 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 15:32:22.138 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 15:32:22.139 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:32:22.144 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 15:32:22.161 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:现住址长度异常长度>100字符（包含省市区、乡镇街道名称（如有）、村居委会名称（如有）、详细地址） 
2020-06-17 15:32:22.162 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:现住址村（居）委会名称长度异常长度>100字符 
2020-06-17 15:32:22.162 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:血型与RH血型逻辑不符同时满足以下条件： 1、个人基本信息表《血型》填写为“不详” 2、个人基本信息表《RH血型》填写为“阴性”或“阳性” 
2020-06-17 15:32:22.165 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-17 15:32:22.166 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 91665e0b2efa4f86aea807ec9f4883c3(String), 2020-06-17 15:32:22.165(Timestamp), 31011310200312009116(String), 9df07515be3d4c2887e947c6ce5adace(String), 2020-06-17 15:32:22.165(Timestamp), 31011310200312009116(String), a58b2894635045b18a63c250d46ce8a8(String), 2020-06-17 15:32:22.165(Timestamp) 
2020-06-17 15:32:22.191 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 3 
2020-06-17 15:32:25.479 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 15:32:25.479 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 15:32:25.484 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 15:32:25.488 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 15:32:25.489 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 15:32:25.497 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 15:32:25.506 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 15:32:25.506 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 15:32:25.511 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-17 15:32:25.516 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 15:32:25.516 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:32:25.521 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 15:32:25.525 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 15:32:25.526 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:32:25.531 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 15:32:25.536 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 15:32:25.536 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 15:32:25.536 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 15:32:25.537 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:32:25.542 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 15:32:25.546 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 15:32:25.546 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:32:25.551 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 15:32:25.555 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 15:32:25.555 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:32:25.561 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 15:32:25.565 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 15:32:25.566 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:32:25.579 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 15:32:25.584 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 15:32:25.584 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 15:32:25.585 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 15:32:25.585 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:32:25.589 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 15:32:25.593 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 15:32:25.593 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:32:25.598 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 15:32:25.603 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 15:32:25.604 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:32:25.608 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 15:32:25.612 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 15:32:25.612 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:32:25.617 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 15:32:25.635 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:血型与RH血型逻辑不符同时满足以下条件： 1、个人基本信息表《血型》填写为“不详” 2、个人基本信息表《RH血型》填写为“阴性”或“阳性” 
2020-06-17 15:32:25.636 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:建档单位未填写建档单位为空值 
2020-06-17 15:32:25.637 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-17 15:32:25.638 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), a58b2894635045b18a63c250d46ce8a8(String), 2020-06-17 15:32:25.637(Timestamp), 31011310200312009116(String), c2d756b07b7540e79209ad532c666dfc(String), 2020-06-17 15:32:25.637(Timestamp) 
2020-06-17 15:32:25.686 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 2 
2020-06-17 15:32:28.896 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 15:32:28.896 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 15:32:28.902 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 15:32:28.907 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 15:32:28.907 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 15:32:28.912 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 15:32:28.917 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 15:32:28.917 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 15:32:28.924 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-17 15:32:28.931 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 15:32:28.931 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:32:28.937 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 15:32:28.942 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 15:32:28.942 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:32:28.950 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 15:32:28.955 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 15:32:28.956 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 15:32:28.956 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 15:32:28.956 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:32:28.960 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 15:32:28.964 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 15:32:28.965 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:32:28.969 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 15:32:28.974 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 15:32:28.974 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:32:28.979 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 15:32:28.984 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 15:32:28.984 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:32:28.998 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 15:32:29.002 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 15:32:29.002 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 15:32:29.003 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 15:32:29.003 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:32:29.007 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 15:32:29.012 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 15:32:29.012 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:32:29.017 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 15:32:29.021 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 15:32:29.022 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:32:29.026 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 15:32:29.031 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 15:32:29.032 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:32:29.039 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 15:32:29.051 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:建档单位长度异常长度>100字符 
2020-06-17 15:32:29.054 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:血型与RH血型逻辑不符同时满足以下条件： 1、个人基本信息表《血型》填写为“不详” 2、个人基本信息表《RH血型》填写为“阴性”或“阳性” 
2020-06-17 15:32:29.056 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-17 15:32:29.056 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 403a97f9ec40406b9723b3c6845a6cee(String), 2020-06-17 15:32:29.055(Timestamp), 31011310200312009116(String), a58b2894635045b18a63c250d46ce8a8(String), 2020-06-17 15:32:29.055(Timestamp) 
2020-06-17 15:32:29.073 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 2 
2020-06-17 15:32:32.288 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 15:32:32.288 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 15:32:32.294 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 15:32:32.299 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 15:32:32.299 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 15:32:32.305 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 15:32:32.310 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 15:32:32.310 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 15:32:32.317 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-17 15:32:32.322 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 15:32:32.322 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:32:32.327 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 15:32:32.331 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 15:32:32.332 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:32:32.338 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 15:32:32.343 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 15:32:32.343 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 15:32:32.344 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 15:32:32.344 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:32:32.348 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 15:32:32.353 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 15:32:32.354 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:32:32.359 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 15:32:32.363 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 15:32:32.364 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:32:32.368 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 15:32:32.372 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 15:32:32.373 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:32:32.386 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 15:32:32.390 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 15:32:32.390 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 15:32:32.390 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 15:32:32.391 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:32:32.397 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 15:32:32.404 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 15:32:32.404 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:32:32.409 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 15:32:32.413 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 15:32:32.413 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:32:32.419 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 15:32:32.424 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 15:32:32.424 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:32:32.429 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 15:32:32.445 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:血型与RH血型逻辑不符同时满足以下条件： 1、个人基本信息表《血型》填写为“不详” 2、个人基本信息表《RH血型》填写为“阴性”或“阳性” 
2020-06-17 15:32:32.446 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:建档人未填写建档人为空值 
2020-06-17 15:32:32.448 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-17 15:32:32.448 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), a58b2894635045b18a63c250d46ce8a8(String), 2020-06-17 15:32:32.448(Timestamp), 31011310200312009116(String), b36febf99ee24323a59f6e04c22ce60d(String), 2020-06-17 15:32:32.448(Timestamp) 
2020-06-17 15:32:32.472 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 2 
2020-06-17 15:32:35.713 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 15:32:35.714 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 15:32:35.719 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 15:32:35.727 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 15:32:35.727 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 15:32:35.732 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 15:32:35.737 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 15:32:35.737 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 15:32:35.748 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-17 15:32:35.753 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 15:32:35.753 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:32:35.758 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 15:32:35.763 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 15:32:35.764 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:32:35.769 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 15:32:35.774 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 15:32:35.775 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 15:32:35.776 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 15:32:35.776 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:32:35.781 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 15:32:35.787 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 15:32:35.787 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:32:35.793 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 15:32:35.798 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 15:32:35.799 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:32:35.807 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 15:32:35.812 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 15:32:35.813 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:32:35.829 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 15:32:35.833 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 15:32:35.834 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 15:32:35.835 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 15:32:35.835 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:32:35.840 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 15:32:35.848 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 15:32:35.848 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:32:35.853 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 15:32:35.858 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 15:32:35.859 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:32:35.864 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 15:32:35.869 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 15:32:35.870 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:32:35.875 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 15:32:35.898 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:责任医生未填写责任医生为空值 
2020-06-17 15:32:35.901 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:血型与RH血型逻辑不符同时满足以下条件： 1、个人基本信息表《血型》填写为“不详” 2、个人基本信息表《RH血型》填写为“阴性”或“阳性” 
2020-06-17 15:32:35.905 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-17 15:32:35.906 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 79a8c8c64d3b49bf99e573cacf2d5cfc(String), 2020-06-17 15:32:35.905(Timestamp), 31011310200312009116(String), a58b2894635045b18a63c250d46ce8a8(String), 2020-06-17 15:32:35.905(Timestamp) 
2020-06-17 15:32:35.926 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 2 
2020-06-17 15:32:39.152 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 15:32:39.152 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 15:32:39.157 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 15:32:39.161 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 15:32:39.162 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 15:32:39.166 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 15:32:39.171 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 15:32:39.172 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 15:32:39.176 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-17 15:32:39.181 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 15:32:39.181 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:32:39.186 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 15:32:39.190 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 15:32:39.191 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:32:39.196 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 15:32:39.201 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 15:32:39.201 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 15:32:39.202 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 15:32:39.202 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:32:39.206 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 15:32:39.212 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 15:32:39.212 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:32:39.217 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 15:32:39.222 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 15:32:39.222 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:32:39.227 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 15:32:39.232 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 15:32:39.232 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:32:39.247 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 15:32:39.251 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 15:32:39.251 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 15:32:39.251 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 15:32:39.251 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:32:39.257 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 15:32:39.265 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 15:32:39.266 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:32:39.311 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 15:32:39.320 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 15:32:39.322 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:32:39.327 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 15:32:39.341 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 15:32:39.342 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:32:39.347 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 15:32:39.373 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:责任医生长度异常长度>50字符 
2020-06-17 15:32:39.374 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:血型与RH血型逻辑不符同时满足以下条件： 1、个人基本信息表《血型》填写为“不详” 2、个人基本信息表《RH血型》填写为“阴性”或“阳性” 
2020-06-17 15:32:39.383 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-17 15:32:39.384 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 9042bba97fb74b558de96e35ab2ffdc2(String), 2020-06-17 15:32:39.382(Timestamp), 31011310200312009116(String), a58b2894635045b18a63c250d46ce8a8(String), 2020-06-17 15:32:39.382(Timestamp) 
2020-06-17 15:32:39.418 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 2 
2020-06-17 15:32:42.618 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 15:32:42.619 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 15:32:42.624 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 15:32:42.628 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 15:32:42.629 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 15:32:42.635 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 15:32:42.639 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 15:32:42.640 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 15:32:42.644 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-17 15:32:42.649 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 15:32:42.649 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:32:42.654 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 15:32:42.659 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 15:32:42.659 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:32:42.664 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 15:32:42.668 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 15:32:42.668 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 15:32:42.669 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 15:32:42.669 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:32:42.673 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 15:32:42.678 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 15:32:42.679 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:32:42.683 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 15:32:42.687 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 15:32:42.687 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:32:42.693 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 15:32:42.696 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 15:32:42.697 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:32:42.710 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 15:32:42.714 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 15:32:42.714 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 15:32:42.715 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 15:32:42.715 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:32:42.719 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 15:32:42.723 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 15:32:42.723 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:32:42.728 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 15:32:42.732 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 15:32:42.733 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:32:42.737 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 15:32:42.741 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 15:32:42.742 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:32:42.747 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 15:32:42.758 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:建档日期未填写建档日期为空值 
2020-06-17 15:32:42.760 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:血型与RH血型逻辑不符同时满足以下条件： 1、个人基本信息表《血型》填写为“不详” 2、个人基本信息表《RH血型》填写为“阴性”或“阳性” 
2020-06-17 15:32:42.762 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-17 15:32:42.762 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 354eecdb40b24830ade601d368aa8e01(String), 2020-06-17 15:32:42.762(Timestamp), 31011310200312009116(String), a58b2894635045b18a63c250d46ce8a8(String), 2020-06-17 15:32:42.762(Timestamp) 
2020-06-17 15:32:42.782 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 2 
2020-06-17 15:32:46.035 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 15:32:46.035 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 15:32:46.040 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 15:32:46.044 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 15:32:46.044 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 15:32:46.049 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 15:32:46.053 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 15:32:46.054 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 15:32:46.058 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-17 15:32:46.062 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 15:32:46.063 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:32:46.067 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 15:32:46.070 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 15:32:46.070 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:32:46.077 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 15:32:46.083 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 15:32:46.083 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 15:32:46.084 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 15:32:46.084 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:32:46.089 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 15:32:46.093 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 15:32:46.094 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:32:46.098 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 15:32:46.102 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 15:32:46.103 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:32:46.108 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 15:32:46.112 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 15:32:46.113 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:32:46.136 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 15:32:46.143 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 15:32:46.143 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 15:32:46.143 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 15:32:46.144 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:32:46.147 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 15:32:46.152 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 15:32:46.152 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:32:46.156 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 15:32:46.161 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 15:32:46.161 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:32:46.166 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 15:32:46.170 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 15:32:46.170 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:32:46.175 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 15:32:46.188 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:血型与RH血型逻辑不符同时满足以下条件： 1、个人基本信息表《血型》填写为“不详” 2、个人基本信息表《RH血型》填写为“阴性”或“阳性” 
2020-06-17 15:32:46.189 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:个人基本信息表性别性别为空值 
2020-06-17 15:32:46.191 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-17 15:32:46.191 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), a58b2894635045b18a63c250d46ce8a8(String), 2020-06-17 15:32:46.191(Timestamp), 31011310200312009116(String), f43cf10e3bcf44078cabcd8d790c8ea2(String), 2020-06-17 15:32:46.191(Timestamp) 
2020-06-17 15:32:46.211 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 2 
2020-06-17 15:32:49.381 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 15:32:49.381 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 15:32:49.389 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 15:32:49.395 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 15:32:49.395 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 15:32:49.400 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 15:32:49.405 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 15:32:49.405 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 15:32:49.409 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-17 15:32:49.414 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 15:32:49.414 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:32:49.419 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 15:32:49.423 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 15:32:49.423 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:32:49.428 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 15:32:49.433 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 15:32:49.433 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 15:32:49.433 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 15:32:49.434 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:32:49.438 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 15:32:49.442 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 15:32:49.442 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:32:49.447 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 15:32:49.451 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 15:32:49.452 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:32:49.456 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 15:32:49.460 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 15:32:49.461 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:32:49.474 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 15:32:49.478 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 15:32:49.478 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 15:32:49.478 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 15:32:49.479 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:32:49.484 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 15:32:49.489 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 15:32:49.489 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:32:49.493 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 15:32:49.497 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 15:32:49.497 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:32:49.501 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 15:32:49.506 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 15:32:49.507 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:32:49.511 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 15:32:49.524 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:个人基本信息表性别不属于性别字典范围（1 男 2 女 9 未说明的性别 0 未知的性别） 
2020-06-17 15:32:49.526 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:个人基本信息表性别性别与身份证号不一致 
2020-06-17 15:32:49.526 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:血型与RH血型逻辑不符同时满足以下条件： 1、个人基本信息表《血型》填写为“不详” 2、个人基本信息表《RH血型》填写为“阴性”或“阳性” 
2020-06-17 15:32:49.529 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-17 15:32:49.529 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 34278f71cf1d42c88158aaf637fa5203(String), 2020-06-17 15:32:49.528(Timestamp), 31011310200312009116(String), 8d30baa03bfc4233a8f115c57a0ebf08(String), 2020-06-17 15:32:49.528(Timestamp), 31011310200312009116(String), a58b2894635045b18a63c250d46ce8a8(String), 2020-06-17 15:32:49.528(Timestamp) 
2020-06-17 15:32:49.544 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 3 
2020-06-17 15:32:52.813 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 15:32:52.813 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 15:32:52.819 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 15:32:52.824 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 15:32:52.825 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 15:32:52.829 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 15:32:52.834 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 15:32:52.834 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 15:32:52.839 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-17 15:32:52.843 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 15:32:52.844 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:32:52.848 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 15:32:52.852 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 15:32:52.853 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:32:52.859 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 15:32:52.863 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 15:32:52.863 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 15:32:52.863 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 15:32:52.863 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:32:52.868 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 15:32:52.873 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 15:32:52.873 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:32:52.878 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 15:32:52.883 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 15:32:52.883 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:32:52.889 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 15:32:52.893 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 15:32:52.893 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:32:52.907 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 15:32:52.911 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 15:32:52.912 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 15:32:52.912 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 15:32:52.913 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:32:52.918 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 15:32:52.923 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 15:32:52.924 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:32:52.929 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 15:32:52.936 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 15:32:52.937 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:32:52.943 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 15:32:52.948 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 15:32:52.949 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:32:52.954 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 15:32:52.981 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:个人基本信息表性别性别与身份证号不一致 
2020-06-17 15:32:52.982 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:血型与RH血型逻辑不符同时满足以下条件： 1、个人基本信息表《血型》填写为“不详” 2、个人基本信息表《RH血型》填写为“阴性”或“阳性” 
2020-06-17 15:32:52.986 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-17 15:32:52.987 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 8d30baa03bfc4233a8f115c57a0ebf08(String), 2020-06-17 15:32:52.986(Timestamp), 31011310200312009116(String), a58b2894635045b18a63c250d46ce8a8(String), 2020-06-17 15:32:52.986(Timestamp) 
2020-06-17 15:32:53.000 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 2 
2020-06-17 15:32:56.246 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 15:32:56.247 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 15:32:56.252 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 15:32:56.261 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 15:32:56.261 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 15:32:56.266 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 15:32:56.270 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 15:32:56.271 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 15:32:56.275 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-17 15:32:56.280 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 15:32:56.280 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:32:56.285 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 15:32:56.289 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 15:32:56.290 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:32:56.295 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 15:32:56.300 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 15:32:56.300 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 15:32:56.300 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 15:32:56.301 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:32:56.306 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 15:32:56.310 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 15:32:56.311 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:32:56.326 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 15:32:56.332 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 15:32:56.332 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:32:56.336 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 15:32:56.348 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 15:32:56.348 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:32:56.376 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 15:32:56.388 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 15:32:56.388 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 15:32:56.389 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 15:32:56.390 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:32:56.396 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 15:32:56.401 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 15:32:56.402 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:32:56.407 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 15:32:56.412 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 15:32:56.413 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:32:56.418 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 15:32:56.423 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 15:32:56.423 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:32:56.429 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 15:32:56.455 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:个人基本信息表出生日期出生日期填写不规范 
2020-06-17 15:32:56.456 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:个人基本信息表出生日期出生日期未填写 
2020-06-17 15:32:56.457 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:血型与RH血型逻辑不符同时满足以下条件： 1、个人基本信息表《血型》填写为“不详” 2、个人基本信息表《RH血型》填写为“阴性”或“阳性” 
2020-06-17 15:32:56.460 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-17 15:32:56.461 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 7ed2379800b4474fbf8c6d433cb7daa7(String), 2020-06-17 15:32:56.46(Timestamp), 31011310200312009116(String), 8c2d9c298aea47f1925532283c3ce5f9(String), 2020-06-17 15:32:56.46(Timestamp), 31011310200312009116(String), a58b2894635045b18a63c250d46ce8a8(String), 2020-06-17 15:32:56.46(Timestamp) 
2020-06-17 15:32:56.489 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 3 
2020-06-17 15:32:59.695 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 15:32:59.696 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 15:32:59.700 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 15:32:59.705 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 15:32:59.705 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 15:32:59.709 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 15:32:59.713 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 15:32:59.714 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 15:32:59.717 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-17 15:32:59.722 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 15:32:59.722 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:32:59.726 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 15:32:59.732 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 15:32:59.732 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:32:59.736 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 15:32:59.740 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 15:32:59.741 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 15:32:59.741 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 15:32:59.741 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:32:59.747 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 15:32:59.752 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 15:32:59.752 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:32:59.756 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 15:32:59.760 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 15:32:59.761 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:32:59.766 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 15:32:59.770 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 15:32:59.770 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:32:59.784 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 15:32:59.789 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 15:32:59.789 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 15:32:59.789 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 15:32:59.789 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:32:59.794 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 15:32:59.798 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 15:32:59.799 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:32:59.803 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 15:32:59.807 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 15:32:59.808 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:32:59.812 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 15:32:59.816 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 15:32:59.817 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:32:59.821 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 15:32:59.833 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:个人基本信息表出生日期出生日期大于建档日期 
2020-06-17 15:32:59.836 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:血型与RH血型逻辑不符同时满足以下条件： 1、个人基本信息表《血型》填写为“不详” 2、个人基本信息表《RH血型》填写为“阴性”或“阳性” 
2020-06-17 15:32:59.836 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:既往史手术时间小于出生日期既往史外伤时间<出生日期 
2020-06-17 15:32:59.837 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:个人基本信息表出生日期出生日期与身份证号不一致 
2020-06-17 15:32:59.838 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:个人基本信息表既往史既往史疾病确诊时间小于出生日期 
2020-06-17 15:32:59.839 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-17 15:32:59.839 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 0d4385ad8bcd4988894ef7621bb776f8(String), 2020-06-17 15:32:59.838(Timestamp), 31011310200312009116(String), a58b2894635045b18a63c250d46ce8a8(String), 2020-06-17 15:32:59.838(Timestamp), 31011310200312009116(String), b27399b0c58241ebbcb8a00353d41d7d(String), 2020-06-17 15:32:59.838(Timestamp), 31011310200312009116(String), b2dce4796dfd4c438e3577283a7d7950(String), 2020-06-17 15:32:59.838(Timestamp), 31011310200312009116(String), ec2b097f882c469a92ccd0dc37088dc6(String), 2020-06-17 15:32:59.838(Timestamp) 
2020-06-17 15:32:59.855 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 5 
2020-06-17 15:33:03.258 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 15:33:03.258 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 15:33:03.267 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 15:33:03.272 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 15:33:03.273 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 15:33:03.278 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 15:33:03.283 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 15:33:03.283 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 15:33:03.289 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-17 15:33:03.294 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 15:33:03.294 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:33:03.298 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 15:33:03.308 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 15:33:03.308 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:33:03.314 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 15:33:03.320 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 15:33:03.320 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 15:33:03.320 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 15:33:03.321 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:33:03.325 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 15:33:03.331 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 15:33:03.332 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:33:03.336 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 15:33:03.341 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 15:33:03.341 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:33:03.346 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 15:33:03.351 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 15:33:03.351 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:33:03.366 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 15:33:03.369 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 15:33:03.369 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 15:33:03.369 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 15:33:03.370 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:33:03.374 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 15:33:03.378 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 15:33:03.379 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:33:03.384 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 15:33:03.391 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 15:33:03.392 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:33:03.400 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 15:33:03.405 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 15:33:03.406 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:33:03.411 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 15:33:03.435 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:血型与RH血型逻辑不符同时满足以下条件： 1、个人基本信息表《血型》填写为“不详” 2、个人基本信息表《RH血型》填写为“阴性”或“阳性” 
2020-06-17 15:33:03.436 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:个人基本信息表出生日期出生日期与身份证号不一致 
2020-06-17 15:33:03.439 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-17 15:33:03.441 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), a58b2894635045b18a63c250d46ce8a8(String), 2020-06-17 15:33:03.439(Timestamp), 31011310200312009116(String), b2dce4796dfd4c438e3577283a7d7950(String), 2020-06-17 15:33:03.439(Timestamp) 
2020-06-17 15:33:03.455 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 2 
2020-06-17 15:33:06.882 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 15:33:06.882 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 15:33:06.887 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 15:33:06.894 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 15:33:06.895 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 15:33:06.900 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 15:33:06.906 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 15:33:06.906 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 15:33:06.918 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-17 15:33:06.926 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 15:33:06.927 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: null 
2020-06-17 15:33:06.944 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 0 
2020-06-17 15:33:06.954 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 15:33:06.955 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: null 
2020-06-17 15:33:06.969 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 0 
2020-06-17 15:33:06.977 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 15:33:06.978 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 0 
2020-06-17 15:33:06.978 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 15:33:06.979 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: null 
2020-06-17 15:33:07.017 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 0 
2020-06-17 15:33:07.020 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 15:33:07.021 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 0 
2020-06-17 15:33:07.021 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 15:33:07.022 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: null 
2020-06-17 15:33:07.029 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 15:33:07.045 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:个人基本信息表身份证号为空值 
2020-06-17 15:33:07.048 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:血型与RH血型逻辑不符同时满足以下条件： 1、个人基本信息表《血型》填写为“不详” 2、个人基本信息表《RH血型》填写为“阴性”或“阳性” 
2020-06-17 15:33:07.051 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-17 15:33:07.051 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 17945c1124044e7098f14634c6091077(String), 2020-06-17 15:33:07.051(Timestamp), 31011310200312009116(String), a58b2894635045b18a63c250d46ce8a8(String), 2020-06-17 15:33:07.051(Timestamp) 
2020-06-17 15:33:07.104 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 2 
2020-06-17 15:33:10.310 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 15:33:10.311 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 15:33:10.316 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 15:33:10.320 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 15:33:10.321 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 15:33:10.325 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 15:33:10.329 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 15:33:10.330 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 15:33:10.334 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-17 15:33:10.338 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 15:33:10.339 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 4115261995052754137(String) 
2020-06-17 15:33:10.343 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 0 
2020-06-17 15:33:10.347 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 15:33:10.348 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 4115261995052754137(String) 
2020-06-17 15:33:10.352 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 0 
2020-06-17 15:33:10.357 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 15:33:10.357 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 0 
2020-06-17 15:33:10.357 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 15:33:10.357 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 4115261995052754137(String) 
2020-06-17 15:33:10.363 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 0 
2020-06-17 15:33:10.367 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 15:33:10.367 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 0 
2020-06-17 15:33:10.367 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 15:33:10.367 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 4115261995052754137(String) 
2020-06-17 15:33:10.372 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 15:33:10.383 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:个人基本信息表身份证号身份证号长度异常 
2020-06-17 15:33:10.386 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:血型与RH血型逻辑不符同时满足以下条件： 1、个人基本信息表《血型》填写为“不详” 2、个人基本信息表《RH血型》填写为“阴性”或“阳性” 
2020-06-17 15:33:10.388 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-17 15:33:10.388 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 0d7eebffe3a94841b55df249cd50918c(String), 2020-06-17 15:33:10.388(Timestamp), 31011310200312009116(String), a58b2894635045b18a63c250d46ce8a8(String), 2020-06-17 15:33:10.388(Timestamp) 
2020-06-17 15:33:10.408 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 2 
2020-06-17 15:33:13.596 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 15:33:13.597 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 15:33:13.602 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 15:33:13.606 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 15:33:13.606 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 15:33:13.610 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 15:33:13.616 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 15:33:13.616 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 15:33:13.622 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-17 15:33:13.626 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 15:33:13.626 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 632123821927051(String) 
2020-06-17 15:33:13.630 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 0 
2020-06-17 15:33:13.634 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 15:33:13.634 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 632123821927051(String) 
2020-06-17 15:33:13.640 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 0 
2020-06-17 15:33:13.643 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 15:33:13.644 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 0 
2020-06-17 15:33:13.644 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 15:33:13.644 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 632123821927051(String) 
2020-06-17 15:33:13.649 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 0 
2020-06-17 15:33:13.653 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 15:33:13.654 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 0 
2020-06-17 15:33:13.654 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 15:33:13.654 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 632123821927051(String) 
2020-06-17 15:33:13.659 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 15:33:13.674 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:个人基本信息表身份证号身份证号不合法 
2020-06-17 15:33:13.676 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:血型与RH血型逻辑不符同时满足以下条件： 1、个人基本信息表《血型》填写为“不详” 2、个人基本信息表《RH血型》填写为“阴性”或“阳性” 
2020-06-17 15:33:13.678 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-17 15:33:13.679 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 4108f6f0aabe44ad92dd57ae3abe8ebe(String), 2020-06-17 15:33:13.678(Timestamp), 31011310200312009116(String), a58b2894635045b18a63c250d46ce8a8(String), 2020-06-17 15:33:13.678(Timestamp) 
2020-06-17 15:33:13.695 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 2 
2020-06-17 15:33:16.902 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 15:33:16.902 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 15:33:16.907 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 15:33:16.911 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 15:33:16.912 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 15:33:16.916 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 15:33:16.920 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 15:33:16.920 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 15:33:16.925 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-17 15:33:16.929 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 15:33:16.930 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 411526199515275413(String) 
2020-06-17 15:33:16.934 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 0 
2020-06-17 15:33:16.939 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 15:33:16.940 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 411526199515275413(String) 
2020-06-17 15:33:16.944 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 0 
2020-06-17 15:33:16.948 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 15:33:16.948 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 0 
2020-06-17 15:33:16.949 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 15:33:16.949 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 411526199515275413(String) 
2020-06-17 15:33:16.954 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 0 
2020-06-17 15:33:16.961 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 15:33:16.961 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 0 
2020-06-17 15:33:16.962 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 15:33:16.962 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 411526199515275413(String) 
2020-06-17 15:33:16.967 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 15:33:16.979 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:个人基本信息表身份证号身份证号不合法 
2020-06-17 15:33:16.981 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:血型与RH血型逻辑不符同时满足以下条件： 1、个人基本信息表《血型》填写为“不详” 2、个人基本信息表《RH血型》填写为“阴性”或“阳性” 
2020-06-17 15:33:16.983 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-17 15:33:16.984 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 36d70cac4ba44075bf370a9ab795d25d(String), 2020-06-17 15:33:16.983(Timestamp), 31011310200312009116(String), a58b2894635045b18a63c250d46ce8a8(String), 2020-06-17 15:33:16.983(Timestamp) 
2020-06-17 15:33:16.994 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 2 
2020-06-17 15:33:20.254 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 15:33:20.254 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 15:33:20.262 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 15:33:20.268 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 15:33:20.268 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 15:33:20.273 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 15:33:20.278 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 15:33:20.279 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 15:33:20.283 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-17 15:33:20.288 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 15:33:20.288 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:33:20.292 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 15:33:20.297 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 15:33:20.297 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:33:20.302 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 15:33:20.306 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 15:33:20.307 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 15:33:20.307 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 15:33:20.307 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:33:20.313 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 15:33:20.318 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 15:33:20.319 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:33:20.325 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 15:33:20.330 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 15:33:20.330 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:33:20.335 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 15:33:20.339 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 15:33:20.340 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:33:20.353 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 15:33:20.358 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 15:33:20.358 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 15:33:20.358 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 15:33:20.359 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:33:20.364 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 15:33:20.367 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 15:33:20.368 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:33:20.374 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 15:33:20.378 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 15:33:20.378 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:33:20.385 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 15:33:20.389 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 15:33:20.390 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:33:20.394 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 15:33:20.421 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:个人基本信息表工作单位工作单位未填写 
2020-06-17 15:33:20.423 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:血型与RH血型逻辑不符同时满足以下条件： 1、个人基本信息表《血型》填写为“不详” 2、个人基本信息表《RH血型》填写为“阴性”或“阳性” 
2020-06-17 15:33:20.428 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-17 15:33:20.428 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 85f9e772245549a2b39c8212e08908cc(String), 2020-06-17 15:33:20.427(Timestamp), 31011310200312009116(String), a58b2894635045b18a63c250d46ce8a8(String), 2020-06-17 15:33:20.427(Timestamp) 
2020-06-17 15:33:20.448 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 2 
2020-06-17 15:33:23.697 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 15:33:23.697 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 15:33:23.702 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 15:33:23.707 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 15:33:23.707 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 15:33:23.712 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 15:33:23.716 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 15:33:23.717 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 15:33:23.721 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-17 15:33:23.725 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 15:33:23.726 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:33:23.729 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 15:33:23.733 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 15:33:23.733 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:33:23.737 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 15:33:23.742 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 15:33:23.742 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 15:33:23.742 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 15:33:23.742 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:33:23.747 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 15:33:23.751 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 15:33:23.751 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:33:23.756 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 15:33:23.759 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 15:33:23.760 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:33:23.766 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 15:33:23.770 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 15:33:23.771 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:33:23.786 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 15:33:23.795 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 15:33:23.796 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 15:33:23.796 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 15:33:23.797 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:33:23.802 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 15:33:23.807 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 15:33:23.807 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:33:23.813 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 15:33:23.820 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 15:33:23.821 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:33:23.827 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 15:33:23.831 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 15:33:23.831 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:33:23.836 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 15:33:23.850 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:个人基本信息表工作单位工作单位不为汉字 
2020-06-17 15:33:23.852 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:血型与RH血型逻辑不符同时满足以下条件： 1、个人基本信息表《血型》填写为“不详” 2、个人基本信息表《RH血型》填写为“阴性”或“阳性” 
2020-06-17 15:33:23.857 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-17 15:33:23.858 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 4ad5f41e777d499894964fe735a4ed46(String), 2020-06-17 15:33:23.857(Timestamp), 31011310200312009116(String), a58b2894635045b18a63c250d46ce8a8(String), 2020-06-17 15:33:23.857(Timestamp) 
2020-06-17 15:33:23.875 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 2 
2020-06-17 15:33:27.087 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 15:33:27.087 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 15:33:27.093 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 15:33:27.098 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 15:33:27.098 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 15:33:27.105 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 15:33:27.109 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 15:33:27.110 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 15:33:27.114 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-17 15:33:27.119 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 15:33:27.119 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:33:27.124 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 15:33:27.129 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 15:33:27.129 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:33:27.134 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 15:33:27.139 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 15:33:27.140 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 15:33:27.140 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 15:33:27.140 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:33:27.144 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 15:33:27.148 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 15:33:27.148 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:33:27.154 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 15:33:27.158 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 15:33:27.158 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:33:27.163 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 15:33:27.167 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 15:33:27.167 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:33:27.181 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 15:33:27.185 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 15:33:27.186 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 15:33:27.186 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 15:33:27.186 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:33:27.193 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 15:33:27.198 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 15:33:27.198 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:33:27.203 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 15:33:27.207 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 15:33:27.207 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:33:27.212 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 15:33:27.216 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 15:33:27.216 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:33:27.221 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 15:33:27.236 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:个人基本信息表本人电话本人电话未填写 
2020-06-17 15:33:27.237 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:血型与RH血型逻辑不符同时满足以下条件： 1、个人基本信息表《血型》填写为“不详” 2、个人基本信息表《RH血型》填写为“阴性”或“阳性” 
2020-06-17 15:33:27.239 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-17 15:33:27.240 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 7838cdc133cb43e1be4828444054e220(String), 2020-06-17 15:33:27.239(Timestamp), 31011310200312009116(String), a58b2894635045b18a63c250d46ce8a8(String), 2020-06-17 15:33:27.239(Timestamp) 
2020-06-17 15:33:27.255 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 2 
2020-06-17 15:33:30.587 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 15:33:30.587 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 15:33:30.603 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 15:33:30.608 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 15:33:30.608 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 15:33:30.614 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 15:33:30.619 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 15:33:30.619 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 15:33:30.624 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-17 15:33:30.628 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 15:33:30.629 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:33:30.633 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 15:33:30.637 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 15:33:30.638 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:33:30.643 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 15:33:30.653 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 15:33:30.653 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 15:33:30.654 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 15:33:30.654 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:33:30.680 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 15:33:30.687 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 15:33:30.688 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:33:30.701 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 15:33:30.706 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 15:33:30.707 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:33:30.714 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 15:33:30.749 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 15:33:30.750 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:33:30.777 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 15:33:30.784 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 15:33:30.784 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 15:33:30.785 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 15:33:30.786 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:33:30.791 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 15:33:30.802 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 15:33:30.803 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:33:30.842 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 15:33:30.847 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 15:33:30.848 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:33:30.855 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 15:33:30.860 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 15:33:30.861 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:33:30.866 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 15:33:30.898 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:血型与RH血型逻辑不符同时满足以下条件： 1、个人基本信息表《血型》填写为“不详” 2、个人基本信息表《RH血型》填写为“阴性”或“阳性” 
2020-06-17 15:33:30.898 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:个人基本信息表本人电话手机号码长度异常 
2020-06-17 15:33:30.901 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-17 15:33:30.901 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), a58b2894635045b18a63c250d46ce8a8(String), 2020-06-17 15:33:30.901(Timestamp), 31011310200312009116(String), e4e48ae4f913467ca0fd86dae3ce568d(String), 2020-06-17 15:33:30.901(Timestamp) 
2020-06-17 15:33:30.925 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 2 
2020-06-17 15:33:34.318 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 15:33:34.318 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 15:33:34.323 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 15:33:34.327 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 15:33:34.327 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 15:33:34.332 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 15:33:34.336 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 15:33:34.336 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 15:33:34.342 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-17 15:33:34.348 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 15:33:34.348 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:33:34.356 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 15:33:34.360 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 15:33:34.360 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:33:34.366 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 15:33:34.370 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 15:33:34.370 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 15:33:34.370 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 15:33:34.371 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:33:34.378 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 15:33:34.382 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 15:33:34.383 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:33:34.387 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 15:33:34.392 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 15:33:34.392 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:33:34.399 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 15:33:34.405 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 15:33:34.405 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:33:34.419 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 15:33:34.428 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 15:33:34.428 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 15:33:34.429 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 15:33:34.429 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:33:34.434 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 15:33:34.439 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 15:33:34.440 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:33:34.447 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 15:33:34.453 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 15:33:34.454 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:33:34.458 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 15:33:34.466 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 15:33:34.466 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:33:34.473 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 15:33:34.495 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:血型与RH血型逻辑不符同时满足以下条件： 1、个人基本信息表《血型》填写为“不详” 2、个人基本信息表《RH血型》填写为“阴性”或“阳性” 
2020-06-17 15:33:34.497 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:个人基本信息表本人电话手机号码校验失败 
2020-06-17 15:33:34.498 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-17 15:33:34.499 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), a58b2894635045b18a63c250d46ce8a8(String), 2020-06-17 15:33:34.498(Timestamp), 31011310200312009116(String), f87a9c2f676841839db93c9e730dad76(String), 2020-06-17 15:33:34.498(Timestamp) 
2020-06-17 15:33:34.513 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 2 
2020-06-17 15:33:37.717 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 15:33:37.717 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 15:33:37.722 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 15:33:37.729 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 15:33:37.730 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 15:33:37.735 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 15:33:37.739 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 15:33:37.740 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 15:33:37.745 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-17 15:33:37.754 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 15:33:37.755 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:33:37.760 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 15:33:37.768 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 15:33:37.769 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:33:37.776 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 15:33:37.779 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 15:33:37.780 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 15:33:37.780 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 15:33:37.781 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:33:37.789 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 15:33:37.794 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 15:33:37.795 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:33:37.799 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 15:33:37.803 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 15:33:37.804 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:33:37.809 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 15:33:37.813 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 15:33:37.814 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:33:37.829 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 15:33:37.837 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 15:33:37.838 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 15:33:37.838 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 15:33:37.839 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:33:37.860 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 15:33:37.865 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 15:33:37.866 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:33:37.871 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 15:33:37.878 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 15:33:37.879 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:33:37.886 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 15:33:37.890 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 15:33:37.890 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:33:37.895 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 15:33:37.918 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:血型与RH血型逻辑不符同时满足以下条件： 1、个人基本信息表《血型》填写为“不详” 2、个人基本信息表《RH血型》填写为“阴性”或“阳性” 
2020-06-17 15:33:37.919 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:个人基本信息表本人电话固定电话长度异常（含区号） 
2020-06-17 15:33:37.920 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-17 15:33:37.920 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), a58b2894635045b18a63c250d46ce8a8(String), 2020-06-17 15:33:37.92(Timestamp), 31011310200312009116(String), ca55e89173e84859877ee564ba43b7ef(String), 2020-06-17 15:33:37.92(Timestamp) 
2020-06-17 15:33:37.967 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 2 
2020-06-17 15:33:41.242 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 15:33:41.242 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 15:33:41.248 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 15:33:41.252 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 15:33:41.252 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 15:33:41.256 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 15:33:41.261 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 15:33:41.261 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 15:33:41.266 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-17 15:33:41.270 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 15:33:41.270 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:33:41.274 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 15:33:41.278 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 15:33:41.279 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:33:41.284 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 15:33:41.288 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 15:33:41.288 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 15:33:41.288 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 15:33:41.289 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:33:41.294 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 15:33:41.298 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 15:33:41.299 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:33:41.303 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 15:33:41.307 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 15:33:41.307 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:33:41.313 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 15:33:41.317 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 15:33:41.317 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:33:41.331 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 15:33:41.335 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 15:33:41.335 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 15:33:41.336 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 15:33:41.336 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:33:41.342 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 15:33:41.346 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 15:33:41.346 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:33:41.350 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 15:33:41.357 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 15:33:41.357 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:33:41.363 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 15:33:41.367 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 15:33:41.368 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:33:41.372 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 15:33:41.385 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:个人基本信息表本人电话固定电话长度异常（不含区号） 
2020-06-17 15:33:41.388 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:血型与RH血型逻辑不符同时满足以下条件： 1、个人基本信息表《血型》填写为“不详” 2、个人基本信息表《RH血型》填写为“阴性”或“阳性” 
2020-06-17 15:33:41.390 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-17 15:33:41.391 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 5f7ecb11a3894e1d83e68322c3e3071d(String), 2020-06-17 15:33:41.39(Timestamp), 31011310200312009116(String), a58b2894635045b18a63c250d46ce8a8(String), 2020-06-17 15:33:41.39(Timestamp) 
2020-06-17 15:33:41.415 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 2 
2020-06-17 15:33:44.613 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 15:33:44.616 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 15:33:44.622 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 15:33:44.629 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 15:33:44.629 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 15:33:44.634 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 15:33:44.638 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 15:33:44.639 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 15:33:44.643 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-17 15:33:44.647 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 15:33:44.648 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:33:44.652 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 15:33:44.656 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 15:33:44.657 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:33:44.665 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 15:33:44.670 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 15:33:44.670 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 15:33:44.671 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 15:33:44.671 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:33:44.676 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 15:33:44.679 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 15:33:44.680 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:33:44.685 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 15:33:44.689 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 15:33:44.690 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:33:44.695 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 15:33:44.699 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 15:33:44.699 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:33:44.713 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 15:33:44.718 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 15:33:44.718 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 15:33:44.718 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 15:33:44.719 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:33:44.723 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 15:33:44.727 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 15:33:44.728 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:33:44.733 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 15:33:44.738 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 15:33:44.739 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:33:44.744 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 15:33:44.756 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 15:33:44.757 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:33:44.763 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 15:33:44.779 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:血型与RH血型逻辑不符同时满足以下条件： 1、个人基本信息表《血型》填写为“不详” 2、个人基本信息表《RH血型》填写为“阴性”或“阳性” 
2020-06-17 15:33:44.780 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:个人基本信息表本人电话本人电话不为纯数字 
2020-06-17 15:33:44.781 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:个人基本信息表本人电话手机号码长度异常 
2020-06-17 15:33:44.783 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-17 15:33:44.784 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), a58b2894635045b18a63c250d46ce8a8(String), 2020-06-17 15:33:44.783(Timestamp), 31011310200312009116(String), bfd7b3c3376e4254889ed061d3e17e0b(String), 2020-06-17 15:33:44.783(Timestamp), 31011310200312009116(String), e4e48ae4f913467ca0fd86dae3ce568d(String), 2020-06-17 15:33:44.783(Timestamp) 
2020-06-17 15:33:44.803 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 3 
2020-06-17 15:33:48.037 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 15:33:48.038 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 15:33:48.043 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 15:33:48.048 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 15:33:48.048 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 15:33:48.053 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 15:33:48.057 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 15:33:48.057 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 15:33:48.062 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-17 15:33:48.067 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 15:33:48.067 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:33:48.071 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 15:33:48.076 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 15:33:48.076 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:33:48.082 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 15:33:48.086 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 15:33:48.086 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 15:33:48.086 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 15:33:48.086 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:33:48.090 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 15:33:48.094 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 15:33:48.095 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:33:48.100 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 15:33:48.104 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 15:33:48.104 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:33:48.110 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 15:33:48.114 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 15:33:48.115 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:33:48.128 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 15:33:48.133 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 15:33:48.133 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 15:33:48.133 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 15:33:48.134 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:33:48.139 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 15:33:48.144 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 15:33:48.144 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:33:48.148 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 15:33:48.153 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 15:33:48.153 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:33:48.159 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 15:33:48.164 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 15:33:48.164 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:33:48.168 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 15:33:48.183 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:个人基本信息表本人电话固定电话长度异常（不含区号） 
2020-06-17 15:33:48.185 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:血型与RH血型逻辑不符同时满足以下条件： 1、个人基本信息表《血型》填写为“不详” 2、个人基本信息表《RH血型》填写为“阴性”或“阳性” 
2020-06-17 15:33:48.186 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:个人基本信息表本人电话本人电话为同一个数字 
2020-06-17 15:33:48.187 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-17 15:33:48.188 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 5f7ecb11a3894e1d83e68322c3e3071d(String), 2020-06-17 15:33:48.187(Timestamp), 31011310200312009116(String), a58b2894635045b18a63c250d46ce8a8(String), 2020-06-17 15:33:48.187(Timestamp), 31011310200312009116(String), b9365945d8e542db9c8243c240695e67(String), 2020-06-17 15:33:48.187(Timestamp) 
2020-06-17 15:33:48.202 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 3 
2020-06-17 15:33:51.671 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 15:33:51.672 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 15:33:51.679 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 15:33:51.684 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 15:33:51.684 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 15:33:51.690 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 15:33:51.695 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 15:33:51.695 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 15:33:51.700 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-17 15:33:51.704 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 15:33:51.704 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:33:51.708 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 15:33:51.713 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 15:33:51.713 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:33:51.720 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 15:33:51.724 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 15:33:51.724 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 15:33:51.725 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 15:33:51.725 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:33:51.731 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 15:33:51.737 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 15:33:51.737 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:33:51.743 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 15:33:51.747 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 15:33:51.747 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:33:51.752 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 15:33:51.756 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 15:33:51.756 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:33:51.770 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 15:33:51.774 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 15:33:51.775 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 15:33:51.775 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 15:33:51.775 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:33:51.779 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 15:33:51.783 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 15:33:51.784 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:33:51.788 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 15:33:51.792 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 15:33:51.793 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:33:51.797 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 15:33:51.803 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 15:33:51.804 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:33:51.808 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 15:33:51.822 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:血型与RH血型逻辑不符同时满足以下条件： 1、个人基本信息表《血型》填写为“不详” 2、个人基本信息表《RH血型》填写为“阴性”或“阳性” 
2020-06-17 15:33:51.823 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:个人基本信息表联系人姓名联系人姓名未填写 
2020-06-17 15:33:51.825 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-17 15:33:51.825 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), a58b2894635045b18a63c250d46ce8a8(String), 2020-06-17 15:33:51.824(Timestamp), 31011310200312009116(String), d0d444ce2a444fe6811ea43a137cc432(String), 2020-06-17 15:33:51.824(Timestamp) 
2020-06-17 15:33:51.840 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 2 
2020-06-17 15:33:55.103 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 15:33:55.103 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 15:33:55.109 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 15:33:55.113 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 15:33:55.113 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 15:33:55.120 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 15:33:55.124 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 15:33:55.125 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 15:33:55.130 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-17 15:33:55.135 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 15:33:55.136 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:33:55.140 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 15:33:55.144 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 15:33:55.145 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:33:55.150 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 15:33:55.154 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 15:33:55.154 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 15:33:55.155 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 15:33:55.155 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:33:55.159 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 15:33:55.165 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 15:33:55.165 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:33:55.170 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 15:33:55.177 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 15:33:55.177 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:33:55.182 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 15:33:55.186 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 15:33:55.186 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:33:55.201 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 15:33:55.205 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 15:33:55.205 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 15:33:55.205 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 15:33:55.206 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:33:55.210 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 15:33:55.214 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 15:33:55.215 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:33:55.219 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 15:33:55.224 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 15:33:55.225 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:33:55.229 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 15:33:55.231 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 15:33:55.232 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:33:55.237 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 15:33:55.253 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:血型与RH血型逻辑不符同时满足以下条件： 1、个人基本信息表《血型》填写为“不详” 2、个人基本信息表《RH血型》填写为“阴性”或“阳性” 
2020-06-17 15:33:55.255 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:个人基本信息表联系人姓名联系人姓名长度异常 
2020-06-17 15:33:55.257 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-17 15:33:55.258 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), a58b2894635045b18a63c250d46ce8a8(String), 2020-06-17 15:33:55.257(Timestamp), 31011310200312009116(String), e585471016994d99a353a7cc79be1235(String), 2020-06-17 15:33:55.257(Timestamp) 
2020-06-17 15:33:55.276 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 2 
2020-06-17 15:33:58.475 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 15:33:58.475 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 15:33:58.480 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 15:33:58.485 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 15:33:58.485 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 15:33:58.489 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 15:33:58.495 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 15:33:58.495 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 15:33:58.499 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-17 15:33:58.503 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 15:33:58.504 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:33:58.508 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 15:33:58.513 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 15:33:58.513 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:33:58.519 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 15:33:58.523 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 15:33:58.523 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 15:33:58.524 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 15:33:58.524 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:33:58.528 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 15:33:58.532 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 15:33:58.533 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:33:58.538 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 15:33:58.542 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 15:33:58.542 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:33:58.547 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 15:33:58.551 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 15:33:58.551 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:33:58.566 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 15:33:58.571 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 15:33:58.571 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 15:33:58.571 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 15:33:58.571 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:33:58.576 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 15:33:58.580 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 15:33:58.580 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:33:58.585 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 15:33:58.590 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 15:33:58.590 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:33:58.595 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 15:33:58.600 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 15:33:58.600 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:33:58.604 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 15:33:58.620 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:血型与RH血型逻辑不符同时满足以下条件： 1、个人基本信息表《血型》填写为“不详” 2、个人基本信息表《RH血型》填写为“阴性”或“阳性” 
2020-06-17 15:33:58.622 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:个人基本信息表联系人电话联系人电话未填写 
2020-06-17 15:33:58.623 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-17 15:33:58.624 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), a58b2894635045b18a63c250d46ce8a8(String), 2020-06-17 15:33:58.623(Timestamp), 31011310200312009116(String), ec56f4e1864e4a5bb0ad8ce1e94aa382(String), 2020-06-17 15:33:58.623(Timestamp) 
2020-06-17 15:33:58.643 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 2 
2020-06-17 15:34:01.925 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 15:34:01.925 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 15:34:01.931 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 15:34:01.935 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 15:34:01.936 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 15:34:01.940 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 15:34:01.946 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 15:34:01.947 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 15:34:01.952 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-17 15:34:01.958 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 15:34:01.958 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:34:01.965 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 15:34:01.975 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 15:34:01.976 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:34:01.984 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 15:34:01.988 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 15:34:01.989 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 15:34:01.990 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 15:34:01.991 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:34:01.996 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 15:34:02.003 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 15:34:02.004 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:34:02.010 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 15:34:02.018 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 15:34:02.019 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:34:02.024 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 15:34:02.028 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 15:34:02.030 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:34:02.044 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 15:34:02.050 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 15:34:02.051 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 15:34:02.051 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 15:34:02.052 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:34:02.059 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 15:34:02.064 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 15:34:02.065 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:34:02.072 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 15:34:02.076 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 15:34:02.077 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:34:02.082 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 15:34:02.087 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 15:34:02.088 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:34:02.092 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 15:34:02.108 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:手机号码长度异常同时满足以下条件： 1、联系人电话不为空值 2、联系人电话为手机号码（是1开头判断为手机号） 3、号码长度小于11位或大于11位 
2020-06-17 15:34:02.114 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:血型与RH血型逻辑不符同时满足以下条件： 1、个人基本信息表《血型》填写为“不详” 2、个人基本信息表《RH血型》填写为“阴性”或“阳性” 
2020-06-17 15:34:02.115 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:手机号码校验失败1、联系人电话不为空值 2、联系人电话为手机号码（是1开头判断为手机号） 3、号码长度为11位，但是不存在这个号段（进行号段校验） 
2020-06-17 15:34:02.118 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-17 15:34:02.119 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 00081d1c0cce49fd88ac68b7627d6e1c(String), 2020-06-17 15:34:02.118(Timestamp), 31011310200312009116(String), a58b2894635045b18a63c250d46ce8a8(String), 2020-06-17 15:34:02.118(Timestamp), 31011310200312009116(String), be536190ff164df18656c4aca5fc7504(String), 2020-06-17 15:34:02.118(Timestamp) 
2020-06-17 15:34:02.159 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 3 
2020-06-17 15:34:05.421 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 15:34:05.422 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 15:34:05.428 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 15:34:05.434 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 15:34:05.434 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 15:34:05.440 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 15:34:05.444 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 15:34:05.444 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 15:34:05.449 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-17 15:34:05.453 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 15:34:05.454 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:34:05.458 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 15:34:05.463 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 15:34:05.463 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:34:05.469 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 15:34:05.474 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 15:34:05.474 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 15:34:05.474 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 15:34:05.475 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:34:05.480 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 15:34:05.484 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 15:34:05.485 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:34:05.489 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 15:34:05.493 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 15:34:05.494 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:34:05.499 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 15:34:05.503 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 15:34:05.503 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:34:05.517 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 15:34:05.520 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 15:34:05.521 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 15:34:05.521 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 15:34:05.521 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:34:05.526 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 15:34:05.530 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 15:34:05.530 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:34:05.538 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 15:34:05.543 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 15:34:05.543 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:34:05.549 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 15:34:05.554 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 15:34:05.554 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:34:05.559 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 15:34:05.575 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:血型与RH血型逻辑不符同时满足以下条件： 1、个人基本信息表《血型》填写为“不详” 2、个人基本信息表《RH血型》填写为“阴性”或“阳性” 
2020-06-17 15:34:05.576 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:手机号码校验失败1、联系人电话不为空值 2、联系人电话为手机号码（是1开头判断为手机号） 3、号码长度为11位，但是不存在这个号段（进行号段校验） 
2020-06-17 15:34:05.578 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-17 15:34:05.579 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), a58b2894635045b18a63c250d46ce8a8(String), 2020-06-17 15:34:05.578(Timestamp), 31011310200312009116(String), be536190ff164df18656c4aca5fc7504(String), 2020-06-17 15:34:05.578(Timestamp) 
2020-06-17 15:34:05.612 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 2 
2020-06-17 15:34:09.030 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 15:34:09.030 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 15:34:09.035 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 15:34:09.041 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 15:34:09.042 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 15:34:09.047 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 15:34:09.051 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 15:34:09.052 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 15:34:09.056 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-17 15:34:09.062 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 15:34:09.063 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:34:09.067 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 15:34:09.072 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 15:34:09.072 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:34:09.077 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 15:34:09.082 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 15:34:09.083 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 15:34:09.083 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 15:34:09.084 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:34:09.087 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 15:34:09.092 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 15:34:09.092 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:34:09.097 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 15:34:09.101 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 15:34:09.102 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:34:09.107 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 15:34:09.111 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 15:34:09.111 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:34:09.125 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 15:34:09.129 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 15:34:09.130 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 15:34:09.130 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 15:34:09.131 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:34:09.135 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 15:34:09.139 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 15:34:09.140 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:34:09.144 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 15:34:09.149 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 15:34:09.149 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:34:09.154 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 15:34:09.159 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 15:34:09.159 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:34:09.165 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 15:34:09.183 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:血型与RH血型逻辑不符同时满足以下条件： 1、个人基本信息表《血型》填写为“不详” 2、个人基本信息表《RH血型》填写为“阴性”或“阳性” 
2020-06-17 15:34:09.185 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:固定电话长度异常（含区号）1同时满足以下条件： 1、联系电话不为空值 2、联系电话为固定电话（是0开头判断为固定电话） 3、号码长度小于11位或大于12位 
2020-06-17 15:34:09.186 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-17 15:34:09.187 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), a58b2894635045b18a63c250d46ce8a8(String), 2020-06-17 15:34:09.186(Timestamp), 31011310200312009116(String), ea35b1d533784b8696401a09cae12f3d(String), 2020-06-17 15:34:09.186(Timestamp) 
2020-06-17 15:34:09.212 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 2 
2020-06-17 15:34:12.518 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 15:34:12.518 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 15:34:12.523 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 15:34:12.527 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 15:34:12.528 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 15:34:12.532 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 15:34:12.539 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 15:34:12.540 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 15:34:12.545 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-17 15:34:12.555 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 15:34:12.555 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:34:12.560 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 15:34:12.565 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 15:34:12.566 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:34:12.571 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 15:34:12.575 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 15:34:12.575 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 15:34:12.576 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 15:34:12.576 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:34:12.581 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 15:34:12.586 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 15:34:12.587 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:34:12.591 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 15:34:12.595 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 15:34:12.596 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:34:12.600 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 15:34:12.605 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 15:34:12.605 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:34:12.619 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 15:34:12.625 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 15:34:12.626 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 15:34:12.626 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 15:34:12.627 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:34:12.632 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 15:34:12.636 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 15:34:12.637 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:34:12.641 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 15:34:12.646 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 15:34:12.647 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:34:12.651 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 15:34:12.656 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 15:34:12.657 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:34:12.661 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 15:34:12.684 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:固定电话长度异常（不含区号）同时满足以下条件： 1、联系人电话不为空值 2、联系人电话为固定电话（不是1和0开头判断为固定电话） 3、号码长度小于7位或大于8位 
2020-06-17 15:34:12.686 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:血型与RH血型逻辑不符同时满足以下条件： 1、个人基本信息表《血型》填写为“不详” 2、个人基本信息表《RH血型》填写为“阴性”或“阳性” 
2020-06-17 15:34:12.689 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-17 15:34:12.690 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 8282714ec36c405cbf094755098177e9(String), 2020-06-17 15:34:12.689(Timestamp), 31011310200312009116(String), a58b2894635045b18a63c250d46ce8a8(String), 2020-06-17 15:34:12.689(Timestamp) 
2020-06-17 15:34:12.720 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 2 
2020-06-17 15:34:15.966 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 15:34:15.966 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 15:34:15.972 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 15:34:15.976 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 15:34:15.976 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 15:34:15.981 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 15:34:15.984 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 15:34:15.985 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 15:34:15.991 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-17 15:34:15.995 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 15:34:15.995 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:34:15.999 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 15:34:16.004 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 15:34:16.004 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:34:16.009 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 15:34:16.014 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 15:34:16.014 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 15:34:16.014 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 15:34:16.014 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:34:16.019 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 15:34:16.025 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 15:34:16.026 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:34:16.030 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 15:34:16.035 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 15:34:16.035 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:34:16.042 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 15:34:16.048 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 15:34:16.048 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:34:16.063 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 15:34:16.067 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 15:34:16.067 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 15:34:16.069 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 15:34:16.069 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:34:16.074 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 15:34:16.079 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 15:34:16.080 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:34:16.086 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 15:34:16.091 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 15:34:16.092 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:34:16.097 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 15:34:16.101 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 15:34:16.102 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:34:16.107 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 15:34:16.130 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:固定电话长度异常（不含区号）同时满足以下条件： 1、联系人电话不为空值 2、联系人电话为固定电话（不是1和0开头判断为固定电话） 3、号码长度小于7位或大于8位 
2020-06-17 15:34:16.133 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:血型与RH血型逻辑不符同时满足以下条件： 1、个人基本信息表《血型》填写为“不详” 2、个人基本信息表《RH血型》填写为“阴性”或“阳性” 
2020-06-17 15:34:16.134 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:联系人电话不为纯数字同时满足以下条件： 1、联系人电话不为空值 2、联系人电话不是纯数字 
2020-06-17 15:34:16.137 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-17 15:34:16.137 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 8282714ec36c405cbf094755098177e9(String), 2020-06-17 15:34:16.137(Timestamp), 31011310200312009116(String), a58b2894635045b18a63c250d46ce8a8(String), 2020-06-17 15:34:16.137(Timestamp), 31011310200312009116(String), c80e1cf922fe4adf834f308a97853a34(String), 2020-06-17 15:34:16.137(Timestamp) 
2020-06-17 15:34:16.152 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 3 
2020-06-17 15:34:19.422 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 15:34:19.422 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 15:34:19.427 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 15:34:19.431 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 15:34:19.432 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 15:34:19.436 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 15:34:19.440 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 15:34:19.441 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 15:34:19.445 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-17 15:34:19.449 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 15:34:19.450 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:34:19.454 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 15:34:19.457 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 15:34:19.457 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:34:19.463 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 15:34:19.467 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 15:34:19.467 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 15:34:19.467 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 15:34:19.468 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:34:19.472 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 15:34:19.476 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 15:34:19.476 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:34:19.480 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 15:34:19.489 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 15:34:19.490 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:34:19.495 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 15:34:19.502 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 15:34:19.502 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:34:19.516 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 15:34:19.519 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 15:34:19.520 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 15:34:19.520 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 15:34:19.520 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:34:19.525 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 15:34:19.529 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 15:34:19.530 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:34:19.534 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 15:34:19.538 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 15:34:19.538 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:34:19.543 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 15:34:19.547 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 15:34:19.547 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:34:19.551 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 15:34:19.565 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:联系人电话为同一个数字同时满足以下条件： 1、联系电话不为空值 2、联系电话数字只包含一个数字，如99999999 
2020-06-17 15:34:19.566 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:血型与RH血型逻辑不符同时满足以下条件： 1、个人基本信息表《血型》填写为“不详” 2、个人基本信息表《RH血型》填写为“阴性”或“阳性” 
2020-06-17 15:34:19.569 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-17 15:34:19.569 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 73bde7f20d744d2382f82ea8fc476901(String), 2020-06-17 15:34:19.569(Timestamp), 31011310200312009116(String), a58b2894635045b18a63c250d46ce8a8(String), 2020-06-17 15:34:19.569(Timestamp) 
2020-06-17 15:34:19.601 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 2 
2020-06-17 15:34:22.828 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 15:34:22.828 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 15:34:22.833 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 15:34:22.837 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 15:34:22.837 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 15:34:22.841 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 15:34:22.846 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 15:34:22.846 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 15:34:22.850 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-17 15:34:22.855 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 15:34:22.855 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:34:22.859 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 15:34:22.863 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 15:34:22.864 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:34:22.869 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 15:34:22.873 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 15:34:22.873 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 15:34:22.873 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 15:34:22.874 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:34:22.879 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 15:34:22.883 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 15:34:22.883 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:34:22.888 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 15:34:22.892 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 15:34:22.892 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:34:22.897 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 15:34:22.901 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 15:34:22.901 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:34:22.915 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 15:34:22.919 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 15:34:22.920 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 15:34:22.920 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 15:34:22.921 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:34:22.925 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 15:34:22.934 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 15:34:22.934 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:34:22.941 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 15:34:22.950 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 15:34:22.951 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:34:22.956 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 15:34:22.960 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 15:34:22.961 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:34:22.965 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 15:34:22.984 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:血型与RH血型逻辑不符同时满足以下条件： 1、个人基本信息表《血型》填写为“不详” 2、个人基本信息表《RH血型》填写为“阴性”或“阳性” 
2020-06-17 15:34:22.986 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:常住类型未填写常住类型为空值 
2020-06-17 15:34:22.988 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-17 15:34:22.988 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), a58b2894635045b18a63c250d46ce8a8(String), 2020-06-17 15:34:22.988(Timestamp), 31011310200312009116(String), e39a29409dc844aab30fd036ed574c11(String), 2020-06-17 15:34:22.988(Timestamp) 
2020-06-17 15:34:23.032 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 2 
2020-06-17 15:34:26.402 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 15:34:26.402 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 15:34:26.409 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 15:34:26.414 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 15:34:26.415 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 15:34:26.420 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 15:34:26.425 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 15:34:26.425 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 15:34:26.430 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-17 15:34:26.434 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 15:34:26.435 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:34:26.439 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 15:34:26.443 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 15:34:26.444 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:34:26.449 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 15:34:26.453 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 15:34:26.454 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 15:34:26.454 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 15:34:26.455 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:34:26.459 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 15:34:26.463 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 15:34:26.464 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:34:26.467 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 15:34:26.474 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 15:34:26.475 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:34:26.480 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 15:34:26.486 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 15:34:26.486 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:34:26.499 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 15:34:26.505 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 15:34:26.505 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 15:34:26.506 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 15:34:26.506 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:34:26.510 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 15:34:26.515 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 15:34:26.515 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:34:26.519 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 15:34:26.525 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 15:34:26.525 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:34:26.530 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 15:34:26.534 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 15:34:26.535 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:34:26.539 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 15:34:26.559 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:与户籍地址逻辑不符同时满足以下条件： 1、封面《户籍地址》为“上海市”， 2、个人基本信息表《常住类型》填写“非户籍” 
2020-06-17 15:34:26.564 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:血型与RH血型逻辑不符同时满足以下条件： 1、个人基本信息表《血型》填写为“不详” 2、个人基本信息表《RH血型》填写为“阴性”或“阳性” 
2020-06-17 15:34:26.568 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-17 15:34:26.569 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 194d73527efd48088d9b42ee63f64b69(String), 2020-06-17 15:34:26.568(Timestamp), 31011310200312009116(String), a58b2894635045b18a63c250d46ce8a8(String), 2020-06-17 15:34:26.568(Timestamp) 
2020-06-17 15:34:26.602 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 2 
2020-06-17 15:34:29.765 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 15:34:29.765 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 15:34:29.773 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 15:34:29.777 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 15:34:29.777 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 15:34:29.786 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 15:34:29.790 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 15:34:29.791 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 15:34:29.797 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-17 15:34:29.802 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 15:34:29.802 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:34:29.807 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 15:34:29.811 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 15:34:29.811 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:34:29.816 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 15:34:29.820 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 15:34:29.820 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 15:34:29.820 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 15:34:29.821 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:34:29.825 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 15:34:29.829 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 15:34:29.829 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:34:29.833 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 15:34:29.837 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 15:34:29.837 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:34:29.841 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 15:34:29.845 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 15:34:29.846 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:34:29.860 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 15:34:29.863 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 15:34:29.863 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 15:34:29.864 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 15:34:29.864 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:34:29.868 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 15:34:29.873 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 15:34:29.873 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:34:29.885 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 15:34:29.889 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 15:34:29.889 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:34:29.894 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 15:34:29.897 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 15:34:29.897 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:34:29.902 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 15:34:29.915 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:民族未填写民族为空值 
2020-06-17 15:34:29.918 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:血型与RH血型逻辑不符同时满足以下条件： 1、个人基本信息表《血型》填写为“不详” 2、个人基本信息表《RH血型》填写为“阴性”或“阳性” 
2020-06-17 15:34:29.920 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-17 15:34:29.920 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 4868217488744fed817fee47873d8ae0(String), 2020-06-17 15:34:29.92(Timestamp), 31011310200312009116(String), a58b2894635045b18a63c250d46ce8a8(String), 2020-06-17 15:34:29.92(Timestamp) 
2020-06-17 15:34:29.950 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 2 
2020-06-17 15:34:33.136 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 15:34:33.137 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 15:34:33.145 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 15:34:33.150 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 15:34:33.150 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 15:34:33.155 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 15:34:33.159 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 15:34:33.159 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 15:34:33.164 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-17 15:34:33.168 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 15:34:33.168 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:34:33.173 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 15:34:33.176 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 15:34:33.177 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:34:33.182 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 15:34:33.186 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 15:34:33.187 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 15:34:33.188 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 15:34:33.188 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:34:33.191 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 15:34:33.196 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 15:34:33.196 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:34:33.200 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 15:34:33.204 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 15:34:33.205 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:34:33.209 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 15:34:33.213 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 15:34:33.214 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:34:33.229 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 15:34:33.233 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 15:34:33.234 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 15:34:33.234 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 15:34:33.234 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:34:33.239 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 15:34:33.243 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 15:34:33.243 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:34:33.247 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 15:34:33.251 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 15:34:33.252 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:34:33.258 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 15:34:33.262 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 15:34:33.263 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:34:33.267 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 15:34:33.281 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:血型与RH血型逻辑不符同时满足以下条件： 1、个人基本信息表《血型》填写为“不详” 2、个人基本信息表《RH血型》填写为“阴性”或“阳性” 
2020-06-17 15:34:33.281 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:民族填写错误同时满足以下条件： 1、民族不为空值 2、与56个名族的名称不符合 
2020-06-17 15:34:33.282 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:民族超出字典范围同时满足以下条件： 1、民族不为空值 2、民族不在字典范围内（民族字典按GB/T3304） 
2020-06-17 15:34:33.284 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-17 15:34:33.284 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), a58b2894635045b18a63c250d46ce8a8(String), 2020-06-17 15:34:33.284(Timestamp), 31011310200312009116(String), a96f5e6051f541159fca9dec2d47050e(String), 2020-06-17 15:34:33.284(Timestamp), 31011310200312009116(String), cac20bf188fd4f7296a3678a1604b001(String), 2020-06-17 15:34:33.284(Timestamp) 
2020-06-17 15:34:33.299 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 3 
2020-06-17 15:34:36.521 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 15:34:36.521 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 15:34:36.526 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 15:34:36.531 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 15:34:36.532 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 15:34:36.537 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 15:34:36.541 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 15:34:36.542 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 15:34:36.547 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-17 15:34:36.551 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 15:34:36.552 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:34:36.556 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 15:34:36.561 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 15:34:36.562 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:34:36.569 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 15:34:36.573 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 15:34:36.574 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 15:34:36.574 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 15:34:36.575 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:34:36.579 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 15:34:36.584 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 15:34:36.585 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:34:36.589 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 15:34:36.594 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 15:34:36.594 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:34:36.600 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 15:34:36.605 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 15:34:36.605 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:34:36.620 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 15:34:36.625 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 15:34:36.625 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 15:34:36.625 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 15:34:36.626 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:34:36.632 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 15:34:36.637 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 15:34:36.638 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:34:36.645 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 15:34:36.651 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 15:34:36.652 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:34:36.656 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 15:34:36.661 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 15:34:36.662 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:34:36.667 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 15:34:36.686 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:血型未填写血型为空值 
2020-06-17 15:34:36.690 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1)  
2020-06-17 15:34:36.690 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 5d67b4b3f4c34563a644fe8c9b883884(String), 2020-06-17 15:34:36.69(Timestamp) 
2020-06-17 15:34:36.707 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 1 
2020-06-17 15:34:39.987 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 15:34:39.987 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 15:34:39.994 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 15:34:39.998 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 15:34:39.998 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 15:34:40.003 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 15:34:40.007 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 15:34:40.008 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 15:34:40.012 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-17 15:34:40.016 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 15:34:40.017 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:34:40.020 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 15:34:40.025 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 15:34:40.025 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:34:40.030 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 15:34:40.034 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 15:34:40.034 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 15:34:40.035 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 15:34:40.035 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:34:40.039 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 15:34:40.043 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 15:34:40.044 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:34:40.048 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 15:34:40.052 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 15:34:40.053 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:34:40.057 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 15:34:40.061 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 15:34:40.062 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:34:40.075 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 15:34:40.079 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 15:34:40.080 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 15:34:40.080 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 15:34:40.081 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:34:40.087 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 15:34:40.092 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 15:34:40.092 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:34:40.096 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 15:34:40.100 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 15:34:40.101 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:34:40.106 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 15:34:40.110 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 15:34:40.110 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:34:40.115 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 15:34:40.136 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:RH血型未填写RH血型为空值 
2020-06-17 15:34:40.138 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1)  
2020-06-17 15:34:40.139 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), b9590438ed5d4bdb89f89c686856cdce(String), 2020-06-17 15:34:40.138(Timestamp) 
2020-06-17 15:34:40.174 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 1 
2020-06-17 15:34:43.431 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 15:34:43.431 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 15:34:43.436 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 15:34:43.440 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 15:34:43.440 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 15:34:43.444 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 15:34:43.448 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 15:34:43.449 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 15:34:43.453 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-17 15:34:43.457 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 15:34:43.457 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:34:43.461 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 15:34:43.465 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 15:34:43.466 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:34:43.483 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 15:34:43.487 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 15:34:43.488 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 15:34:43.488 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 15:34:43.488 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:34:43.492 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 15:34:43.496 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 15:34:43.496 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:34:43.502 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 15:34:43.506 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 15:34:43.506 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:34:43.511 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 15:34:43.515 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 15:34:43.515 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:34:43.529 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 15:34:43.533 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 15:34:43.534 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 15:34:43.534 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 15:34:43.534 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:34:43.538 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 15:34:43.542 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 15:34:43.542 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:34:43.546 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 15:34:43.551 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 15:34:43.551 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:34:43.556 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 15:34:43.560 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 15:34:43.560 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:34:43.565 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 15:34:43.580 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:RH超出字典范围RH不在字典范围内（1 阴性 2 阳性 3 不详 ） 
2020-06-17 15:34:43.583 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1)  
2020-06-17 15:34:43.584 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 92dc5e8124ba4c5396a3fa7c3d1dd8db(String), 2020-06-17 15:34:43.583(Timestamp) 
2020-06-17 15:34:43.597 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 1 
2020-06-17 15:34:46.830 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 15:34:46.831 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 15:34:46.836 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 15:34:46.841 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 15:34:46.841 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 15:34:46.846 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 15:34:46.852 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 15:34:46.853 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 15:34:46.858 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-17 15:34:46.863 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 15:34:46.864 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:34:46.869 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 15:34:46.876 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 15:34:46.877 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:34:46.887 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 15:34:46.892 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 15:34:46.893 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 15:34:46.894 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 15:34:46.894 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:34:46.899 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 15:34:46.904 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 15:34:46.905 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:34:46.910 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 15:34:46.915 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 15:34:46.916 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:34:46.921 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 15:34:46.928 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 15:34:46.929 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:34:46.943 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 15:34:46.950 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 15:34:46.951 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 15:34:46.952 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 15:34:46.953 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:34:46.957 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 15:34:46.962 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 15:34:46.963 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:34:46.968 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 15:34:46.973 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 15:34:46.974 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:34:46.980 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 15:34:46.985 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 15:34:46.986 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:34:46.992 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 15:34:47.024 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:RH超出字典范围RH不在字典范围内（1 阴性 2 阳性 3 不详 ） 
2020-06-17 15:34:47.027 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:文化程度未填写文化程度为空值 
2020-06-17 15:34:47.032 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-17 15:34:47.033 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 92dc5e8124ba4c5396a3fa7c3d1dd8db(String), 2020-06-17 15:34:47.031(Timestamp), 31011310200312009116(String), b7530f3af05f46b2b8fdccab8369f0f1(String), 2020-06-17 15:34:47.031(Timestamp) 
2020-06-17 15:34:47.048 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 2 
2020-06-17 15:34:50.309 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 15:34:50.309 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 15:34:50.316 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 15:34:50.321 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 15:34:50.321 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 15:34:50.326 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 15:34:50.330 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 15:34:50.331 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 15:34:50.336 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-17 15:34:50.340 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 15:34:50.341 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:34:50.345 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 15:34:50.350 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 15:34:50.350 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:34:50.356 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 15:34:50.360 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 15:34:50.361 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 15:34:50.362 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 15:34:50.362 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:34:50.366 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 15:34:50.371 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 15:34:50.372 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:34:50.375 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 15:34:50.380 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 15:34:50.380 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:34:50.386 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 15:34:50.389 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 15:34:50.390 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:34:50.403 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 15:34:50.408 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 15:34:50.408 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 15:34:50.408 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 15:34:50.409 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:34:50.415 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 15:34:50.420 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 15:34:50.420 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:34:50.425 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 15:34:50.430 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 15:34:50.430 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:34:50.435 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 15:34:50.439 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 15:34:50.440 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:34:50.448 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 15:34:50.465 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:文化程度超出字典范围文化程度不在字典范围内（1 研究生 2 大学本科 3 大学专科和专科学校 4 中等专业学校 5 技工学校 6 高中 7 初中 8小学9文盲或半文盲10不详 ） 
2020-06-17 15:34:50.468 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:RH超出字典范围RH不在字典范围内（1 阴性 2 阳性 3 不详 ） 
2020-06-17 15:34:50.472 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-17 15:34:50.473 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 59d8e69348314e3ca04bb4f0f94bd54e(String), 2020-06-17 15:34:50.472(Timestamp), 31011310200312009116(String), 92dc5e8124ba4c5396a3fa7c3d1dd8db(String), 2020-06-17 15:34:50.472(Timestamp) 
2020-06-17 15:34:50.505 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 2 
2020-06-17 15:34:53.734 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 15:34:53.734 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 15:34:53.739 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 15:34:53.744 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 15:34:53.745 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 15:34:53.749 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 15:34:53.754 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 15:34:53.754 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 15:34:53.760 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-17 15:34:53.765 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 15:34:53.766 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:34:53.771 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 15:34:53.775 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 15:34:53.776 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:34:53.784 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 15:34:53.788 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 15:34:53.789 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 15:34:53.789 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 15:34:53.790 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:34:53.796 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 15:34:53.800 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 15:34:53.801 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:34:53.805 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 15:34:53.809 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 15:34:53.810 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:34:53.815 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 15:34:53.819 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 15:34:53.820 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:34:53.835 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 15:34:53.838 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 15:34:53.838 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 15:34:53.839 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 15:34:53.839 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:34:53.844 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 15:34:53.848 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 15:34:53.848 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:34:53.854 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 15:34:53.858 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 15:34:53.859 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:34:53.863 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 15:34:53.867 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 15:34:53.868 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:34:53.872 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 15:34:53.891 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:RH超出字典范围RH不在字典范围内（1 阴性 2 阳性 3 不详 ） 
2020-06-17 15:34:53.892 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:职业未填写职业为空值 
2020-06-17 15:34:53.897 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-17 15:34:53.897 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 92dc5e8124ba4c5396a3fa7c3d1dd8db(String), 2020-06-17 15:34:53.896(Timestamp), 31011310200312009116(String), 9f7d738548c24c6bbedb92e0e0f1cc30(String), 2020-06-17 15:34:53.896(Timestamp) 
2020-06-17 15:34:53.922 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 2 
2020-06-17 15:34:57.083 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 15:34:57.083 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 15:34:57.090 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 15:34:57.094 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 15:34:57.095 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 15:34:57.101 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 15:34:57.105 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 15:34:57.105 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 15:34:57.110 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-17 15:34:57.114 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 15:34:57.114 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:34:57.118 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 15:34:57.122 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 15:34:57.122 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:34:57.128 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 15:34:57.131 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 15:34:57.132 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 15:34:57.132 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 15:34:57.132 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:34:57.136 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 15:34:57.140 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 15:34:57.141 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:34:57.144 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 15:34:57.150 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 15:34:57.150 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:34:57.154 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 15:34:57.158 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 15:34:57.158 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:34:57.172 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 15:34:57.179 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 15:34:57.180 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 15:34:57.180 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 15:34:57.180 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:34:57.186 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 15:34:57.190 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 15:34:57.191 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:34:57.195 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 15:34:57.199 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 15:34:57.199 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:34:57.204 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 15:34:57.208 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 15:34:57.208 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:34:57.212 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 15:34:57.226 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:RH超出字典范围RH不在字典范围内（1 阴性 2 阳性 3 不详 ） 
2020-06-17 15:34:57.227 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:婚姻状况未填写婚姻状况为空值 
2020-06-17 15:34:57.229 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-17 15:34:57.229 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 92dc5e8124ba4c5396a3fa7c3d1dd8db(String), 2020-06-17 15:34:57.229(Timestamp), 31011310200312009116(String), bfbe9eef04fa4ad9a1bad60b9dd74c13(String), 2020-06-17 15:34:57.229(Timestamp) 
2020-06-17 15:34:57.246 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 2 
2020-06-17 15:35:00.638 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 15:35:00.638 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 15:35:00.643 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 15:35:00.649 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 15:35:00.650 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 15:35:00.655 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 15:35:00.660 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 15:35:00.660 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 15:35:00.665 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 13 
2020-06-17 15:35:00.670 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 15:35:00.670 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:35:00.676 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 15:35:00.681 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 15:35:00.682 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:35:00.688 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 15:35:00.692 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 15:35:00.693 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 15:35:00.693 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 15:35:00.694 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:35:00.699 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 15:35:00.703 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 15:35:00.704 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:35:00.709 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 15:35:00.714 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 15:35:00.714 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:35:00.719 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 15:35:00.725 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 15:35:00.726 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:35:00.739 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 15:35:00.743 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 15:35:00.744 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 15:35:00.744 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 15:35:00.745 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:35:00.749 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 15:35:00.755 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 15:35:00.755 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:35:00.760 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 15:35:00.765 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 15:35:00.765 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:35:00.770 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 15:35:00.775 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 15:35:00.776 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:35:00.781 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 15:35:00.801 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:医疗费用支付方式未填写医疗费用支付方式为空值 
2020-06-17 15:35:00.802 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:RH超出字典范围RH不在字典范围内（1 阴性 2 阳性 3 不详 ） 
2020-06-17 15:35:00.806 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-17 15:35:00.807 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 87e0e78866e8446a8bf91c5fd7880ddb(String), 2020-06-17 15:35:00.806(Timestamp), 31011310200312009116(String), 92dc5e8124ba4c5396a3fa7c3d1dd8db(String), 2020-06-17 15:35:00.806(Timestamp) 
2020-06-17 15:35:00.821 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 2 
2020-06-17 15:35:04.155 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 15:35:04.156 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 15:35:04.161 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 15:35:04.166 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 15:35:04.167 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 15:35:04.172 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 15:35:04.179 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 15:35:04.180 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 15:35:04.186 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 13 
2020-06-17 15:35:04.191 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 15:35:04.191 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:35:04.196 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 15:35:04.200 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 15:35:04.201 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:35:04.206 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 15:35:04.210 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 15:35:04.210 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 15:35:04.211 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 15:35:04.211 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:35:04.216 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 15:35:04.221 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 15:35:04.221 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:35:04.225 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 15:35:04.229 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 15:35:04.230 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:35:04.234 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 15:35:04.239 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 15:35:04.239 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:35:04.253 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 15:35:04.260 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 15:35:04.261 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 15:35:04.261 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 15:35:04.261 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:35:04.266 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 15:35:04.269 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 15:35:04.270 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:35:04.275 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 15:35:04.279 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 15:35:04.280 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:35:04.285 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 15:35:04.290 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 15:35:04.291 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:35:04.296 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 15:35:04.312 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:药物过敏史未填写药物过敏史为空值 
2020-06-17 15:35:04.316 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:RH超出字典范围RH不在字典范围内（1 阴性 2 阳性 3 不详 ） 
2020-06-17 15:35:04.319 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-17 15:35:04.320 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 0e82a90122434b1989a6a6fd97ced399(String), 2020-06-17 15:35:04.319(Timestamp), 31011310200312009116(String), 92dc5e8124ba4c5396a3fa7c3d1dd8db(String), 2020-06-17 15:35:04.319(Timestamp) 
2020-06-17 15:35:04.428 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 2 
2020-06-17 15:35:07.830 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 15:35:07.830 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 15:35:07.835 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 15:35:07.841 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 15:35:07.842 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 15:35:07.847 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 15:35:07.852 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 15:35:07.852 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 15:35:07.857 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 15 
2020-06-17 15:35:07.862 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 15:35:07.862 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:35:07.866 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 15:35:07.870 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 15:35:07.871 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:35:07.878 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 15:35:07.883 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 15:35:07.883 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 15:35:07.884 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 15:35:07.884 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:35:07.890 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 15:35:07.895 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 15:35:07.895 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:35:07.905 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 15:35:07.916 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 15:35:07.917 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:35:07.926 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 15:35:07.931 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 15:35:07.932 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:35:07.945 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 15:35:07.949 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 15:35:07.950 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 15:35:07.950 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 15:35:07.950 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:35:07.954 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 15:35:07.958 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 15:35:07.958 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:35:07.962 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 15:35:07.967 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 15:35:07.967 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:35:07.973 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 15:35:07.977 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 15:35:07.978 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:35:07.982 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 15:35:08.001 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:个人基本信息表药物过敏史药物过敏史填写内容冲突 
2020-06-17 15:35:08.005 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:RH超出字典范围RH不在字典范围内（1 阴性 2 阳性 3 不详 ） 
2020-06-17 15:35:08.008 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-17 15:35:08.009 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 215a4080eedc48189a956184f531da35(String), 2020-06-17 15:35:08.008(Timestamp), 31011310200312009116(String), 92dc5e8124ba4c5396a3fa7c3d1dd8db(String), 2020-06-17 15:35:08.008(Timestamp) 
2020-06-17 15:35:08.185 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 2 
2020-06-17 15:35:11.716 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 15:35:11.716 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 15:35:11.721 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 15:35:11.725 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 15:35:11.726 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 15:35:11.730 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 15:35:11.736 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 15:35:11.737 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 15:35:11.742 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 12 
2020-06-17 15:35:11.747 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 15:35:11.747 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:35:11.752 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 15:35:11.755 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 15:35:11.755 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:35:11.760 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 15:35:11.764 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 15:35:11.764 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 15:35:11.764 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 15:35:11.765 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:35:11.769 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 15:35:11.774 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 15:35:11.775 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:35:11.779 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 15:35:11.783 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 15:35:11.783 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:35:11.788 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 15:35:11.792 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 15:35:11.792 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:35:11.806 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 15:35:11.810 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 15:35:11.810 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 15:35:11.811 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 15:35:11.811 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:35:11.816 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 15:35:11.820 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 15:35:11.821 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:35:11.825 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 15:35:11.829 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 15:35:11.830 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:35:11.834 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 15:35:11.839 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 15:35:11.840 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:35:11.844 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 15:35:11.855 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:药物过敏史未填写药物过敏史为空值 
2020-06-17 15:35:11.858 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:RH超出字典范围RH不在字典范围内（1 阴性 2 阳性 3 不详 ） 
2020-06-17 15:35:11.860 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:个人基本信息表暴露史暴露史未填写 
2020-06-17 15:35:11.861 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-17 15:35:11.861 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 0e82a90122434b1989a6a6fd97ced399(String), 2020-06-17 15:35:11.861(Timestamp), 31011310200312009116(String), 92dc5e8124ba4c5396a3fa7c3d1dd8db(String), 2020-06-17 15:35:11.861(Timestamp), 31011310200312009116(String), fa6c0d8204684279a021f89e0d49e460(String), 2020-06-17 15:35:11.861(Timestamp) 
2020-06-17 15:35:11.919 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 3 
2020-06-17 15:35:15.252 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 15:35:15.252 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 15:35:15.258 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 15:35:15.263 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 15:35:15.263 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 15:35:15.268 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 15:35:15.274 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 15:35:15.275 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 15:35:15.280 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 12 
2020-06-17 15:35:15.285 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 15:35:15.286 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:35:15.291 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 15:35:15.297 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 15:35:15.298 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:35:15.306 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 15:35:15.311 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 15:35:15.311 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 15:35:15.312 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 15:35:15.313 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:35:15.322 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 15:35:15.327 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 15:35:15.328 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:35:15.334 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 15:35:15.339 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 15:35:15.339 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:35:15.346 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 15:35:15.351 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 15:35:15.353 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:35:15.367 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 15:35:15.373 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 15:35:15.373 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 15:35:15.374 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 15:35:15.375 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:35:15.381 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 15:35:15.387 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 15:35:15.388 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:35:15.393 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 15:35:15.398 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 15:35:15.399 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:35:15.412 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 15:35:15.417 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 15:35:15.418 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:35:15.424 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 15:35:15.448 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:药物过敏史未填写药物过敏史为空值 
2020-06-17 15:35:15.449 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:个人基本信息表既往史既往史疾病未填写 
2020-06-17 15:35:15.451 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:个人基本信息表既往史既往史疾病确诊时间填写不规范 
2020-06-17 15:35:15.452 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:RH超出字典范围RH不在字典范围内（1 阴性 2 阳性 3 不详 ） 
2020-06-17 15:35:15.455 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-17 15:35:15.455 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 0e82a90122434b1989a6a6fd97ced399(String), 2020-06-17 15:35:15.454(Timestamp), 31011310200312009116(String), 1c6d4ebc12b549398a8a42ff110c4bba(String), 2020-06-17 15:35:15.454(Timestamp), 31011310200312009116(String), 923bfb7880204efa8f26fd200d1bd17e(String), 2020-06-17 15:35:15.454(Timestamp), 31011310200312009116(String), 92dc5e8124ba4c5396a3fa7c3d1dd8db(String), 2020-06-17 15:35:15.454(Timestamp) 
2020-06-17 15:35:15.527 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 4 
2020-06-17 15:35:18.842 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 15:35:18.843 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 15:35:18.848 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 15:35:18.852 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 15:35:18.852 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 15:35:18.857 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 15:35:18.861 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 15:35:18.861 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 15:35:18.866 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 13 
2020-06-17 15:35:18.870 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 15:35:18.870 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:35:18.874 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 15:35:18.879 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 15:35:18.879 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:35:18.885 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 15:35:18.889 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 15:35:18.889 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 15:35:18.890 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 15:35:18.890 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:35:18.894 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 15:35:18.899 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 15:35:18.899 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:35:18.904 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 15:35:18.908 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 15:35:18.908 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:35:18.913 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 15:35:18.917 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 15:35:18.917 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:35:18.931 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 15:35:18.936 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 15:35:18.936 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 15:35:18.936 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 15:35:18.936 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:35:18.940 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 15:35:18.945 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 15:35:18.946 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:35:18.952 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 15:35:18.955 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 15:35:18.956 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:35:18.961 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 15:35:18.963 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 15:35:18.964 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:35:18.969 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 15:35:18.986 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:药物过敏史未填写药物过敏史为空值 
2020-06-17 15:35:18.988 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:个人基本信息表既往史疾病名称未填写（恶性肿瘤） 
2020-06-17 15:35:18.989 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:个人基本信息表既往史既往史疾病确诊时间未填写 
2020-06-17 15:35:18.993 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:个人基本信息表既往史既往史疾病确诊时间填写不规范 
2020-06-17 15:35:18.993 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:RH超出字典范围RH不在字典范围内（1 阴性 2 阳性 3 不详 ） 
2020-06-17 15:35:18.996 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-17 15:35:18.997 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 0e82a90122434b1989a6a6fd97ced399(String), 2020-06-17 15:35:18.996(Timestamp), 31011310200312009116(String), 5ffdb7838d8e430596d05929dbd8551e(String), 2020-06-17 15:35:18.996(Timestamp), 31011310200312009116(String), 6302b0fcdcd7482099581602a1fec501(String), 2020-06-17 15:35:18.996(Timestamp), 31011310200312009116(String), 923bfb7880204efa8f26fd200d1bd17e(String), 2020-06-17 15:35:18.996(Timestamp), 31011310200312009116(String), 92dc5e8124ba4c5396a3fa7c3d1dd8db(String), 2020-06-17 15:35:18.996(Timestamp) 
2020-06-17 15:35:19.018 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 5 
2020-06-17 15:35:22.675 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 15:35:22.675 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 15:35:22.680 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 15:35:22.685 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 15:35:22.685 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 15:35:22.692 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 15:35:22.697 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 15:35:22.697 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 15:35:22.702 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 13 
2020-06-17 15:35:22.706 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 15:35:22.707 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:35:22.711 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 15:35:22.716 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 15:35:22.716 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:35:22.721 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 15:35:22.725 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 15:35:22.726 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 15:35:22.726 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 15:35:22.726 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:35:22.731 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 15:35:22.736 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 15:35:22.737 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:35:22.741 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 15:35:22.746 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 15:35:22.747 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:35:22.753 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 15:35:22.758 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 15:35:22.759 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:35:22.773 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 15:35:22.779 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 15:35:22.780 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 15:35:22.781 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 15:35:22.782 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:35:22.787 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 15:35:22.793 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 15:35:22.794 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:35:22.798 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 15:35:22.803 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 15:35:22.804 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:35:22.810 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 15:35:22.816 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 15:35:22.817 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:35:22.822 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 15:35:22.846 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:药物过敏史未填写药物过敏史为空值 
2020-06-17 15:35:22.850 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:个人基本信息表既往史既往史疾病确诊时间未填写 
2020-06-17 15:35:22.852 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:个人基本信息表既往史疾病名称未填写（职业病） 
2020-06-17 15:35:22.853 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:个人基本信息表既往史既往史疾病确诊时间填写不规范 
2020-06-17 15:35:22.853 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:RH超出字典范围RH不在字典范围内（1 阴性 2 阳性 3 不详 ） 
2020-06-17 15:35:22.857 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-17 15:35:22.857 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 0e82a90122434b1989a6a6fd97ced399(String), 2020-06-17 15:35:22.857(Timestamp), 31011310200312009116(String), 6302b0fcdcd7482099581602a1fec501(String), 2020-06-17 15:35:22.857(Timestamp), 31011310200312009116(String), 80949448119a47a4a539508ad34af579(String), 2020-06-17 15:35:22.857(Timestamp), 31011310200312009116(String), 923bfb7880204efa8f26fd200d1bd17e(String), 2020-06-17 15:35:22.857(Timestamp), 31011310200312009116(String), 92dc5e8124ba4c5396a3fa7c3d1dd8db(String), 2020-06-17 15:35:22.857(Timestamp) 
2020-06-17 15:35:22.876 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 5 
2020-06-17 15:35:26.379 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 15:35:26.379 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 15:35:26.386 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 15:35:26.390 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 15:35:26.391 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 15:35:26.395 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 15:35:26.399 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 15:35:26.399 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 15:35:26.404 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 13 
2020-06-17 15:35:26.408 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 15:35:26.408 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:35:26.412 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 15:35:26.416 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 15:35:26.416 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:35:26.421 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 15:35:26.425 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 15:35:26.425 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 15:35:26.425 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 15:35:26.425 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:35:26.429 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 15:35:26.433 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 15:35:26.434 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:35:26.438 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 15:35:26.442 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 15:35:26.442 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:35:26.447 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 15:35:26.451 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 15:35:26.451 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:35:26.465 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 15:35:26.469 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 15:35:26.470 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 15:35:26.470 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 15:35:26.470 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:35:26.474 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 15:35:26.478 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 15:35:26.479 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:35:26.485 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 15:35:26.489 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 15:35:26.489 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:35:26.494 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 15:35:26.499 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 15:35:26.499 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:35:26.504 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 15:35:26.515 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:药物过敏史未填写药物过敏史为空值 
2020-06-17 15:35:26.516 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:个人基本信息表既往史既往史疾病确诊时间未填写 
2020-06-17 15:35:26.518 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:个人基本信息表既往史既往史疾病确诊时间填写不规范 
2020-06-17 15:35:26.518 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:RH超出字典范围RH不在字典范围内（1 阴性 2 阳性 3 不详 ） 
2020-06-17 15:35:26.519 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:个人基本信息表既往史疾病名称未填写（其他） 
2020-06-17 15:35:26.520 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-17 15:35:26.521 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 0e82a90122434b1989a6a6fd97ced399(String), 2020-06-17 15:35:26.52(Timestamp), 31011310200312009116(String), 6302b0fcdcd7482099581602a1fec501(String), 2020-06-17 15:35:26.52(Timestamp), 31011310200312009116(String), 923bfb7880204efa8f26fd200d1bd17e(String), 2020-06-17 15:35:26.52(Timestamp), 31011310200312009116(String), 92dc5e8124ba4c5396a3fa7c3d1dd8db(String), 2020-06-17 15:35:26.52(Timestamp), 31011310200312009116(String), cecf4941a48048c0ad396cfa4c04c616(String), 2020-06-17 15:35:26.52(Timestamp) 
2020-06-17 15:35:26.535 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 5 
2020-06-17 15:35:30.026 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 15:35:30.026 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 15:35:30.031 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 15:35:30.035 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 15:35:30.036 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 15:35:30.041 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 15:35:30.045 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 15:35:30.045 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 15:35:30.050 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 13 
2020-06-17 15:35:30.054 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 15:35:30.055 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:35:30.059 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 15:35:30.063 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 15:35:30.064 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:35:30.069 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 15:35:30.073 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 15:35:30.073 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 15:35:30.074 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 15:35:30.074 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:35:30.079 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 15:35:30.083 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 15:35:30.083 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:35:30.088 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 15:35:30.093 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 15:35:30.093 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:35:30.098 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 15:35:30.102 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 15:35:30.103 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:35:30.116 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 15:35:30.121 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 15:35:30.121 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 15:35:30.121 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 15:35:30.122 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:35:30.126 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 15:35:30.130 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 15:35:30.130 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:35:30.135 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 15:35:30.139 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 15:35:30.140 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:35:30.144 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 15:35:30.148 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 15:35:30.149 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:35:30.154 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 15:35:30.166 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:药物过敏史未填写药物过敏史为空值 
2020-06-17 15:35:30.170 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:RH超出字典范围RH不在字典范围内（1 阴性 2 阳性 3 不详 ） 
2020-06-17 15:35:30.173 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:个人基本信息表既往史既往史疾病确诊时间小于出生日期 
2020-06-17 15:35:30.174 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-17 15:35:30.175 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 0e82a90122434b1989a6a6fd97ced399(String), 2020-06-17 15:35:30.174(Timestamp), 31011310200312009116(String), 92dc5e8124ba4c5396a3fa7c3d1dd8db(String), 2020-06-17 15:35:30.174(Timestamp), 31011310200312009116(String), ec2b097f882c469a92ccd0dc37088dc6(String), 2020-06-17 15:35:30.174(Timestamp) 
2020-06-17 15:35:30.192 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 3 
2020-06-17 15:35:33.796 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 15:35:33.797 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 15:35:33.802 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 15:35:33.806 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 15:35:33.806 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 15:35:33.810 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 15:35:33.815 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 15:35:33.815 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 15:35:33.819 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 12 
2020-06-17 15:35:33.824 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 15:35:33.825 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:35:33.829 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 15:35:33.833 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 15:35:33.834 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:35:33.839 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 15:35:33.842 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 15:35:33.843 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 15:35:33.843 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 15:35:33.843 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:35:33.847 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 15:35:33.851 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 15:35:33.852 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:35:33.856 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 15:35:33.860 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 15:35:33.860 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:35:33.865 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 15:35:33.869 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 15:35:33.869 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:35:33.883 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 15:35:33.887 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 15:35:33.887 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 15:35:33.887 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 15:35:33.888 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:35:33.892 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 15:35:33.896 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 15:35:33.896 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:35:33.900 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 15:35:33.904 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 15:35:33.905 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:35:33.909 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 15:35:33.913 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 15:35:33.914 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:35:33.918 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 15:35:33.930 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:药物过敏史未填写药物过敏史为空值 
2020-06-17 15:35:33.934 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:既往史手术未填写既往史手术为空值 
2020-06-17 15:35:33.935 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:RH超出字典范围RH不在字典范围内（1 阴性 2 阳性 3 不详 ） 
2020-06-17 15:35:33.938 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-17 15:35:33.938 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 0e82a90122434b1989a6a6fd97ced399(String), 2020-06-17 15:35:33.937(Timestamp), 31011310200312009116(String), 80119ac5c3f9438390adc99341babd75(String), 2020-06-17 15:35:33.937(Timestamp), 31011310200312009116(String), 92dc5e8124ba4c5396a3fa7c3d1dd8db(String), 2020-06-17 15:35:33.937(Timestamp) 
2020-06-17 15:35:33.965 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 3 
2020-06-17 15:35:37.582 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 15:35:37.583 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 15:35:37.588 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 15:35:37.592 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 15:35:37.592 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 15:35:37.608 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 15:35:37.612 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 15:35:37.613 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 15:35:37.617 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 13 
2020-06-17 15:35:37.621 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 15:35:37.621 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:35:37.625 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 15:35:37.629 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 15:35:37.630 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:35:37.635 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 15:35:37.639 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 15:35:37.640 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 15:35:37.640 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 15:35:37.640 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:35:37.649 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 15:35:37.656 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 15:35:37.657 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:35:37.661 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 15:35:37.665 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 15:35:37.666 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:35:37.671 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 15:35:37.676 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 15:35:37.676 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:35:37.689 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 15:35:37.694 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 15:35:37.694 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 15:35:37.694 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 15:35:37.694 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:35:37.699 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 15:35:37.705 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 15:35:37.705 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:35:37.709 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 15:35:37.713 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 15:35:37.713 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:35:37.717 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 15:35:37.722 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 15:35:37.722 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:35:37.727 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 15:35:37.739 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:药物过敏史未填写药物过敏史为空值 
2020-06-17 15:35:37.740 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:既往史手术名称未填写同时满足以下条件： 1、既往史手术选“有” 2、既往史手术名称为空值 
2020-06-17 15:35:37.743 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:RH超出字典范围RH不在字典范围内（1 阴性 2 阳性 3 不详 ） 
2020-06-17 15:35:37.746 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-17 15:35:37.746 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 0e82a90122434b1989a6a6fd97ced399(String), 2020-06-17 15:35:37.746(Timestamp), 31011310200312009116(String), 4bc34fc151244d1782a933cb2e20e7b1(String), 2020-06-17 15:35:37.746(Timestamp), 31011310200312009116(String), 92dc5e8124ba4c5396a3fa7c3d1dd8db(String), 2020-06-17 15:35:37.746(Timestamp) 
2020-06-17 15:35:37.790 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 3 
2020-06-17 15:35:41.613 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 15:35:41.614 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 15:35:41.619 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 15:35:41.622 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 15:35:41.623 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 15:35:41.628 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 15:35:41.636 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 15:35:41.636 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 15:35:41.640 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 12 
2020-06-17 15:35:41.645 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 15:35:41.645 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:35:41.650 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 15:35:41.653 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 15:35:41.653 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:35:41.659 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 15:35:41.667 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 15:35:41.667 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 15:35:41.667 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 15:35:41.667 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:35:41.671 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 15:35:41.676 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 15:35:41.676 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:35:41.681 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 15:35:41.685 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 15:35:41.686 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:35:41.691 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 15:35:41.695 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 15:35:41.695 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:35:41.709 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 15:35:41.714 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 15:35:41.714 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 15:35:41.714 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 15:35:41.714 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:35:41.720 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 15:35:41.725 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 15:35:41.725 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:35:41.730 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 15:35:41.736 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 15:35:41.737 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:35:41.741 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 15:35:41.746 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 15:35:41.746 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:35:41.751 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 15:35:41.762 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:药物过敏史未填写药物过敏史为空值 
2020-06-17 15:35:41.765 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:RH超出字典范围RH不在字典范围内（1 阴性 2 阳性 3 不详 ） 
2020-06-17 15:35:41.765 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:既往史手术时间未填写同时满足以下条件： 1、既往史手术选“有” 2、既往史手术填写了手术名称 3、手术时间为空值 
2020-06-17 15:35:41.766 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:既往史输血未填写既往史输血为空值 
2020-06-17 15:35:41.768 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-17 15:35:41.768 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 0e82a90122434b1989a6a6fd97ced399(String), 2020-06-17 15:35:41.767(Timestamp), 31011310200312009116(String), 92dc5e8124ba4c5396a3fa7c3d1dd8db(String), 2020-06-17 15:35:41.767(Timestamp), 31011310200312009116(String), 9dd8f43bbd5f4c6bb27aeca1774bc345(String), 2020-06-17 15:35:41.767(Timestamp), 31011310200312009116(String), daa41bd0401e41fcb3523f1abb6e08d1(String), 2020-06-17 15:35:41.767(Timestamp) 
2020-06-17 15:35:41.782 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 4 
2020-06-17 15:35:45.293 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 15:35:45.294 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 15:35:45.298 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 15:35:45.308 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 15:35:45.309 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 15:35:45.313 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 15:35:45.317 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 15:35:45.318 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 15:35:45.322 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 12 
2020-06-17 15:35:45.326 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 15:35:45.327 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:35:45.331 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 15:35:45.338 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 15:35:45.339 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:35:45.344 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 15:35:45.347 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 15:35:45.348 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 15:35:45.348 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 15:35:45.348 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:35:45.352 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 15:35:45.357 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 15:35:45.357 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:35:45.361 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 15:35:45.365 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 15:35:45.365 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:35:45.369 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 15:35:45.374 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 15:35:45.374 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:35:45.387 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 15:35:45.391 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 15:35:45.392 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 15:35:45.392 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 15:35:45.392 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:35:45.396 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 15:35:45.400 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 15:35:45.401 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:35:45.405 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 15:35:45.409 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 15:35:45.409 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:35:45.415 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 15:35:45.419 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 15:35:45.419 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:35:45.426 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 15:35:45.438 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:药物过敏史未填写药物过敏史为空值 
2020-06-17 15:35:45.441 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:家族史（父亲）未填写家族史父亲为空值 
2020-06-17 15:35:45.442 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:既往史输血时间未填写同时满足以下条件： 1、既往史输血选“有” 2、既往史输血填写了输血原因 3、输血时间为空值 
2020-06-17 15:35:45.442 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:RH超出字典范围RH不在字典范围内（1 阴性 2 阳性 3 不详 ） 
2020-06-17 15:35:45.443 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:既往史手术时间未填写同时满足以下条件： 1、既往史手术选“有” 2、既往史手术填写了手术名称 3、手术时间为空值 
2020-06-17 15:35:45.445 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-17 15:35:45.446 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 0e82a90122434b1989a6a6fd97ced399(String), 2020-06-17 15:35:45.445(Timestamp), 31011310200312009116(String), 84550b227fcd42be9a28d596d2095866(String), 2020-06-17 15:35:45.445(Timestamp), 31011310200312009116(String), 8987ac9747cd44aa9e6570e08c8dd822(String), 2020-06-17 15:35:45.445(Timestamp), 31011310200312009116(String), 92dc5e8124ba4c5396a3fa7c3d1dd8db(String), 2020-06-17 15:35:45.445(Timestamp), 31011310200312009116(String), 9dd8f43bbd5f4c6bb27aeca1774bc345(String), 2020-06-17 15:35:45.445(Timestamp) 
2020-06-17 15:35:45.467 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 5 
2020-06-17 15:35:49.295 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 15:35:49.295 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 15:35:49.300 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 15:35:49.304 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 15:35:49.305 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 15:35:49.311 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 15:35:49.315 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 15:35:49.315 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 15:35:49.319 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 12 
2020-06-17 15:35:49.323 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 15:35:49.324 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:35:49.328 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 15:35:49.332 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 15:35:49.333 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:35:49.340 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 15:35:49.344 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 15:35:49.344 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 15:35:49.344 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 15:35:49.345 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:35:49.349 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 15:35:49.352 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 15:35:49.353 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:35:49.358 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 15:35:49.361 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 15:35:49.361 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:35:49.366 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 15:35:49.370 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 15:35:49.371 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:35:49.383 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 15:35:49.389 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 15:35:49.389 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 15:35:49.389 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 15:35:49.390 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:35:49.394 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 15:35:49.398 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 15:35:49.399 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:35:49.404 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 15:35:49.409 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 15:35:49.410 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:35:49.414 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 15:35:49.418 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 15:35:49.418 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:35:49.423 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 15:35:49.437 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:药物过敏史未填写药物过敏史为空值 
2020-06-17 15:35:49.440 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:既往史输血时间未填写同时满足以下条件： 1、既往史输血选“有” 2、既往史输血填写了输血原因 3、输血时间为空值 
2020-06-17 15:35:49.440 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:RH超出字典范围RH不在字典范围内（1 阴性 2 阳性 3 不详 ） 
2020-06-17 15:35:49.441 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:既往史手术时间未填写同时满足以下条件： 1、既往史手术选“有” 2、既往史手术填写了手术名称 3、手术时间为空值 
2020-06-17 15:35:49.441 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:家族史（母亲）未填写家族史母亲为空值 
2020-06-17 15:35:49.443 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-17 15:35:49.443 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 0e82a90122434b1989a6a6fd97ced399(String), 2020-06-17 15:35:49.443(Timestamp), 31011310200312009116(String), 8987ac9747cd44aa9e6570e08c8dd822(String), 2020-06-17 15:35:49.443(Timestamp), 31011310200312009116(String), 92dc5e8124ba4c5396a3fa7c3d1dd8db(String), 2020-06-17 15:35:49.443(Timestamp), 31011310200312009116(String), 9dd8f43bbd5f4c6bb27aeca1774bc345(String), 2020-06-17 15:35:49.443(Timestamp), 31011310200312009116(String), a8d3c4a4780b451d9c8c8ce38a168e34(String), 2020-06-17 15:35:49.443(Timestamp) 
2020-06-17 15:35:49.464 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 5 
2020-06-17 15:35:53.114 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 15:35:53.115 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 15:35:53.119 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 15:35:53.124 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 15:35:53.124 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 15:35:53.132 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 15:35:53.136 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 15:35:53.136 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 15:35:53.143 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 12 
2020-06-17 15:35:53.147 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 15:35:53.147 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:35:53.153 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 15:35:53.158 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 15:35:53.158 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:35:53.163 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 15:35:53.167 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 15:35:53.168 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 15:35:53.168 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 15:35:53.168 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:35:53.172 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 15:35:53.177 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 15:35:53.177 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:35:53.182 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 15:35:53.185 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 15:35:53.185 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:35:53.191 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 15:35:53.195 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 15:35:53.195 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:35:53.209 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 15:35:53.212 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 15:35:53.212 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 15:35:53.213 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 15:35:53.213 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:35:53.217 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 15:35:53.223 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 15:35:53.223 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:35:53.228 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 15:35:53.232 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 15:35:53.233 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:35:53.237 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 15:35:53.241 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 15:35:53.242 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:35:53.246 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 15:35:53.257 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:家族史（兄弟姐妹）未填写家族史兄弟姐妹为空值 
2020-06-17 15:35:53.258 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:药物过敏史未填写药物过敏史为空值 
2020-06-17 15:35:53.260 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:既往史输血时间未填写同时满足以下条件： 1、既往史输血选“有” 2、既往史输血填写了输血原因 3、输血时间为空值 
2020-06-17 15:35:53.261 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:RH超出字典范围RH不在字典范围内（1 阴性 2 阳性 3 不详 ） 
2020-06-17 15:35:53.261 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:既往史手术时间未填写同时满足以下条件： 1、既往史手术选“有” 2、既往史手术填写了手术名称 3、手术时间为空值 
2020-06-17 15:35:53.263 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-17 15:35:53.263 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 063e61b0210a4375ad1df0522af17295(String), 2020-06-17 15:35:53.263(Timestamp), 31011310200312009116(String), 0e82a90122434b1989a6a6fd97ced399(String), 2020-06-17 15:35:53.263(Timestamp), 31011310200312009116(String), 8987ac9747cd44aa9e6570e08c8dd822(String), 2020-06-17 15:35:53.263(Timestamp), 31011310200312009116(String), 92dc5e8124ba4c5396a3fa7c3d1dd8db(String), 2020-06-17 15:35:53.263(Timestamp), 31011310200312009116(String), 9dd8f43bbd5f4c6bb27aeca1774bc345(String), 2020-06-17 15:35:53.263(Timestamp) 
2020-06-17 15:35:53.287 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 5 
2020-06-17 15:35:56.756 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 15:35:56.757 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 15:35:56.762 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 15:35:56.767 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 15:35:56.767 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 15:35:56.772 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 15:35:56.776 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 15:35:56.776 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 15:35:56.782 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 12 
2020-06-17 15:35:56.786 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 15:35:56.786 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:35:56.790 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 15:35:56.794 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 15:35:56.795 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:35:56.800 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 15:35:56.803 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 15:35:56.804 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 15:35:56.804 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 15:35:56.804 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:35:56.810 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 15:35:56.814 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 15:35:56.816 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:35:56.821 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 15:35:56.825 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 15:35:56.825 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:35:56.830 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 15:35:56.834 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 15:35:56.834 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:35:56.848 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 15:35:56.852 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 15:35:56.852 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 15:35:56.852 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 15:35:56.853 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:35:56.859 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 15:35:56.863 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 15:35:56.863 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:35:56.867 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 15:35:56.871 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 15:35:56.872 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:35:56.876 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 15:35:56.880 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 15:35:56.880 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:35:56.889 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 15:35:56.901 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:药物过敏史未填写药物过敏史为空值 
2020-06-17 15:35:56.904 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:既往史输血时间未填写同时满足以下条件： 1、既往史输血选“有” 2、既往史输血填写了输血原因 3、输血时间为空值 
2020-06-17 15:35:56.904 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:RH超出字典范围RH不在字典范围内（1 阴性 2 阳性 3 不详 ） 
2020-06-17 15:35:56.905 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:家族史（儿子）未填写家族史兄弟姐妹为空值 
2020-06-17 15:35:56.905 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:既往史手术时间未填写同时满足以下条件： 1、既往史手术选“有” 2、既往史手术填写了手术名称 3、手术时间为空值 
2020-06-17 15:35:56.908 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-17 15:35:56.908 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 0e82a90122434b1989a6a6fd97ced399(String), 2020-06-17 15:35:56.907(Timestamp), 31011310200312009116(String), 8987ac9747cd44aa9e6570e08c8dd822(String), 2020-06-17 15:35:56.907(Timestamp), 31011310200312009116(String), 92dc5e8124ba4c5396a3fa7c3d1dd8db(String), 2020-06-17 15:35:56.907(Timestamp), 31011310200312009116(String), 9be1b4d7723e4208963bb95278bbf25f(String), 2020-06-17 15:35:56.907(Timestamp), 31011310200312009116(String), 9dd8f43bbd5f4c6bb27aeca1774bc345(String), 2020-06-17 15:35:56.907(Timestamp) 
2020-06-17 15:35:56.936 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 5 
2020-06-17 15:36:00.392 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 15:36:00.393 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 15:36:00.398 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 15:36:00.402 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 15:36:00.403 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 15:36:00.407 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 15:36:00.411 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 15:36:00.411 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 15:36:00.415 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 13 
2020-06-17 15:36:00.420 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 15:36:00.420 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:36:00.424 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 15:36:00.428 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 15:36:00.429 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:36:00.434 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 15:36:00.439 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 15:36:00.439 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 15:36:00.439 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 15:36:00.439 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:36:00.444 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 15:36:00.448 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 15:36:00.449 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:36:00.453 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 15:36:00.457 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 15:36:00.457 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:36:00.462 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 15:36:00.466 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 15:36:00.466 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:36:00.480 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 15:36:00.483 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 15:36:00.484 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 15:36:00.484 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 15:36:00.484 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:36:00.489 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 15:36:00.494 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 15:36:00.494 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:36:00.499 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 15:36:00.504 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 15:36:00.504 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:36:00.509 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 15:36:00.513 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 15:36:00.513 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:36:00.518 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 15:36:00.529 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:药物过敏史未填写药物过敏史为空值 
2020-06-17 15:36:00.530 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:遗传史未填写遗传史为空值 
2020-06-17 15:36:00.532 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:既往史输血时间未填写同时满足以下条件： 1、既往史输血选“有” 2、既往史输血填写了输血原因 3、输血时间为空值 
2020-06-17 15:36:00.533 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:RH超出字典范围RH不在字典范围内（1 阴性 2 阳性 3 不详 ） 
2020-06-17 15:36:00.534 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:既往史手术时间未填写同时满足以下条件： 1、既往史手术选“有” 2、既往史手术填写了手术名称 3、手术时间为空值 
2020-06-17 15:36:00.536 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-17 15:36:00.537 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 0e82a90122434b1989a6a6fd97ced399(String), 2020-06-17 15:36:00.536(Timestamp), 31011310200312009116(String), 309c992a7fcb41b0959cf342b8e4e0ad(String), 2020-06-17 15:36:00.536(Timestamp), 31011310200312009116(String), 8987ac9747cd44aa9e6570e08c8dd822(String), 2020-06-17 15:36:00.536(Timestamp), 31011310200312009116(String), 92dc5e8124ba4c5396a3fa7c3d1dd8db(String), 2020-06-17 15:36:00.536(Timestamp), 31011310200312009116(String), 9dd8f43bbd5f4c6bb27aeca1774bc345(String), 2020-06-17 15:36:00.536(Timestamp) 
2020-06-17 15:36:00.571 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 5 
2020-06-17 15:36:03.922 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 15:36:03.922 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 15:36:03.930 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 15:36:03.935 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 15:36:03.935 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 15:36:03.940 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 15:36:03.944 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 15:36:03.944 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 15:36:03.949 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 13 
2020-06-17 15:36:03.954 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 15:36:03.954 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:36:03.958 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 15:36:03.965 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 15:36:03.965 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:36:03.971 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 15:36:03.975 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 15:36:03.976 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 15:36:03.976 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 15:36:03.976 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:36:03.984 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 15:36:03.988 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 15:36:03.988 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:36:03.993 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 15:36:03.998 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 15:36:03.998 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:36:04.003 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 15:36:04.007 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 15:36:04.008 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:36:04.021 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 15:36:04.025 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 15:36:04.025 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 15:36:04.025 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 15:36:04.026 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:36:04.031 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 15:36:04.035 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 15:36:04.035 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:36:04.039 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 15:36:04.043 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 15:36:04.044 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:36:04.048 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 15:36:04.053 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 15:36:04.053 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:36:04.057 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 15:36:04.073 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:药物过敏史未填写药物过敏史为空值 
2020-06-17 15:36:04.076 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:既往史输血时间未填写同时满足以下条件： 1、既往史输血选“有” 2、既往史输血填写了输血原因 3、输血时间为空值 
2020-06-17 15:36:04.076 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:RH超出字典范围RH不在字典范围内（1 阴性 2 阳性 3 不详 ） 
2020-06-17 15:36:04.076 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:既往史手术时间未填写同时满足以下条件： 1、既往史手术选“有” 2、既往史手术填写了手术名称 3、手术时间为空值 
2020-06-17 15:36:04.078 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:厨房排风设施未填写生活环境厨房排风设施为空值 
2020-06-17 15:36:04.079 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-17 15:36:04.079 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 0e82a90122434b1989a6a6fd97ced399(String), 2020-06-17 15:36:04.079(Timestamp), 31011310200312009116(String), 8987ac9747cd44aa9e6570e08c8dd822(String), 2020-06-17 15:36:04.079(Timestamp), 31011310200312009116(String), 92dc5e8124ba4c5396a3fa7c3d1dd8db(String), 2020-06-17 15:36:04.079(Timestamp), 31011310200312009116(String), 9dd8f43bbd5f4c6bb27aeca1774bc345(String), 2020-06-17 15:36:04.079(Timestamp), 31011310200312009116(String), f2ada73ddc464ea5bdc843a94afdcc58(String), 2020-06-17 15:36:04.079(Timestamp) 
2020-06-17 15:36:04.111 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 5 
2020-06-17 15:36:07.391 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 15:36:07.391 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 15:36:07.396 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 15:36:07.399 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 15:36:07.400 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 15:36:07.405 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 15:36:07.410 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 15:36:07.410 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 15:36:07.415 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 13 
2020-06-17 15:36:07.419 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 15:36:07.420 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:36:07.424 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 15:36:07.428 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 15:36:07.428 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:36:07.433 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 15:36:07.437 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 15:36:07.437 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 15:36:07.438 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 15:36:07.438 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:36:07.443 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 15:36:07.447 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 15:36:07.447 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:36:07.451 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 15:36:07.456 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 15:36:07.456 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:36:07.460 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 15:36:07.465 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 15:36:07.466 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:36:07.479 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 15:36:07.483 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 15:36:07.484 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 15:36:07.484 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 15:36:07.484 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:36:07.488 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 15:36:07.493 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 15:36:07.493 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:36:07.498 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 15:36:07.502 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 15:36:07.503 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:36:07.507 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 15:36:07.512 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 15:36:07.512 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:36:07.518 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 15:36:07.530 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:药物过敏史未填写药物过敏史为空值 
2020-06-17 15:36:07.533 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:既往史输血时间未填写同时满足以下条件： 1、既往史输血选“有” 2、既往史输血填写了输血原因 3、输血时间为空值 
2020-06-17 15:36:07.533 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:RH超出字典范围RH不在字典范围内（1 阴性 2 阳性 3 不详 ） 
2020-06-17 15:36:07.534 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:既往史手术时间未填写同时满足以下条件： 1、既往史手术选“有” 2、既往史手术填写了手术名称 3、手术时间为空值 
2020-06-17 15:36:07.535 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:厨房排风设施超出字典范围厨房排风设施选项不在字典范围（1 无, 2 油烟机, 3 换气扇, 4 烟囱） 
2020-06-17 15:36:07.536 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-17 15:36:07.537 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 0e82a90122434b1989a6a6fd97ced399(String), 2020-06-17 15:36:07.536(Timestamp), 31011310200312009116(String), 8987ac9747cd44aa9e6570e08c8dd822(String), 2020-06-17 15:36:07.536(Timestamp), 31011310200312009116(String), 92dc5e8124ba4c5396a3fa7c3d1dd8db(String), 2020-06-17 15:36:07.536(Timestamp), 31011310200312009116(String), 9dd8f43bbd5f4c6bb27aeca1774bc345(String), 2020-06-17 15:36:07.536(Timestamp), 31011310200312009116(String), caee967163d44945a84844b7d912b993(String), 2020-06-17 15:36:07.536(Timestamp) 
2020-06-17 15:36:07.578 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 5 
2020-06-17 15:36:11.233 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 15:36:11.234 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 15:36:11.240 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 15:36:11.245 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 15:36:11.245 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 15:36:11.250 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 15:36:11.254 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 15:36:11.254 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 15:36:11.259 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 13 
2020-06-17 15:36:11.264 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 15:36:11.264 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:36:11.268 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 15:36:11.274 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 15:36:11.275 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:36:11.279 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 15:36:11.283 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 15:36:11.283 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 15:36:11.284 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 15:36:11.284 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:36:11.288 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 15:36:11.292 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 15:36:11.293 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:36:11.298 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 15:36:11.302 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 15:36:11.303 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:36:11.307 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 15:36:11.311 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 15:36:11.311 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:36:11.326 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 15:36:11.330 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 15:36:11.330 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 15:36:11.331 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 15:36:11.331 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:36:11.335 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 15:36:11.340 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 15:36:11.341 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:36:11.344 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 15:36:11.349 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 15:36:11.349 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:36:11.353 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 15:36:11.358 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 15:36:11.359 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:36:11.363 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 15:36:11.376 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:药物过敏史未填写药物过敏史为空值 
2020-06-17 15:36:11.383 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:既往史输血时间未填写同时满足以下条件： 1、既往史输血选“有” 2、既往史输血填写了输血原因 3、输血时间为空值 
2020-06-17 15:36:11.387 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:RH超出字典范围RH不在字典范围内（1 阴性 2 阳性 3 不详 ） 
2020-06-17 15:36:11.388 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:既往史手术时间未填写同时满足以下条件： 1、既往史手术选“有” 2、既往史手术填写了手术名称 3、手术时间为空值 
2020-06-17 15:36:11.390 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:燃料类型未填写生活环境燃料类型为空值 
2020-06-17 15:36:11.392 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-17 15:36:11.395 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 0e82a90122434b1989a6a6fd97ced399(String), 2020-06-17 15:36:11.391(Timestamp), 31011310200312009116(String), 8987ac9747cd44aa9e6570e08c8dd822(String), 2020-06-17 15:36:11.391(Timestamp), 31011310200312009116(String), 92dc5e8124ba4c5396a3fa7c3d1dd8db(String), 2020-06-17 15:36:11.391(Timestamp), 31011310200312009116(String), 9dd8f43bbd5f4c6bb27aeca1774bc345(String), 2020-06-17 15:36:11.391(Timestamp), 31011310200312009116(String), e9926def7bf94b0997175c2784419105(String), 2020-06-17 15:36:11.391(Timestamp) 
2020-06-17 15:36:11.419 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 5 
2020-06-17 15:36:14.784 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 15:36:14.784 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 15:36:14.789 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 15:36:14.794 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 15:36:14.794 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 15:36:14.798 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 15:36:14.803 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 15:36:14.803 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 15:36:14.807 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 13 
2020-06-17 15:36:14.812 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 15:36:14.813 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:36:14.817 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 15:36:14.821 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 15:36:14.821 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:36:14.826 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 15:36:14.842 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 15:36:14.842 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 15:36:14.843 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 15:36:14.843 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:36:14.848 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 15:36:14.855 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 15:36:14.855 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:36:14.859 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 15:36:14.864 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 15:36:14.864 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:36:14.868 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 15:36:14.872 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 15:36:14.873 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:36:14.886 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 15:36:14.890 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 15:36:14.891 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 15:36:14.891 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 15:36:14.891 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:36:14.896 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 15:36:14.901 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 15:36:14.901 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:36:14.906 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 15:36:14.910 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 15:36:14.910 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:36:14.915 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 15:36:14.919 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 15:36:14.919 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:36:14.923 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 15:36:14.940 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:药物过敏史未填写药物过敏史为空值 
2020-06-17 15:36:14.941 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:燃料类型超出字典范围燃料类型选项不在字典范围（1 液化气, 2 煤, 3 天然气,m 4 沼气, 5 柴火, 6 其他） 
2020-06-17 15:36:14.943 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:既往史输血时间未填写同时满足以下条件： 1、既往史输血选“有” 2、既往史输血填写了输血原因 3、输血时间为空值 
2020-06-17 15:36:14.944 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:RH超出字典范围RH不在字典范围内（1 阴性 2 阳性 3 不详 ） 
2020-06-17 15:36:14.944 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:既往史手术时间未填写同时满足以下条件： 1、既往史手术选“有” 2、既往史手术填写了手术名称 3、手术时间为空值 
2020-06-17 15:36:14.946 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-17 15:36:14.946 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 0e82a90122434b1989a6a6fd97ced399(String), 2020-06-17 15:36:14.946(Timestamp), 31011310200312009116(String), 2b41b4683ac44aa885e0d0ef089a3ca5(String), 2020-06-17 15:36:14.946(Timestamp), 31011310200312009116(String), 8987ac9747cd44aa9e6570e08c8dd822(String), 2020-06-17 15:36:14.946(Timestamp), 31011310200312009116(String), 92dc5e8124ba4c5396a3fa7c3d1dd8db(String), 2020-06-17 15:36:14.946(Timestamp), 31011310200312009116(String), 9dd8f43bbd5f4c6bb27aeca1774bc345(String), 2020-06-17 15:36:14.946(Timestamp) 
2020-06-17 15:36:14.984 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 5 
2020-06-17 15:36:18.413 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 15:36:18.413 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 15:36:18.418 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 15:36:18.423 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 15:36:18.423 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 15:36:18.428 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 15:36:18.432 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 15:36:18.432 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 15:36:18.437 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 13 
2020-06-17 15:36:18.441 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 15:36:18.442 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:36:18.446 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 15:36:18.451 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 15:36:18.452 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:36:18.456 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 15:36:18.461 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 15:36:18.461 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 15:36:18.462 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 15:36:18.462 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:36:18.466 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 15:36:18.471 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 15:36:18.471 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:36:18.476 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 15:36:18.480 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 15:36:18.480 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:36:18.485 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 15:36:18.490 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 15:36:18.490 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:36:18.503 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 15:36:18.507 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 15:36:18.508 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 15:36:18.508 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 15:36:18.508 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:36:18.513 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 15:36:18.517 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 15:36:18.518 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:36:18.524 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 15:36:18.528 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 15:36:18.528 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:36:18.533 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 15:36:18.537 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 15:36:18.537 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:36:18.542 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 15:36:18.556 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:药物过敏史未填写药物过敏史为空值 
2020-06-17 15:36:18.560 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:既往史输血时间未填写同时满足以下条件： 1、既往史输血选“有” 2、既往史输血填写了输血原因 3、输血时间为空值 
2020-06-17 15:36:18.560 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:RH超出字典范围RH不在字典范围内（1 阴性 2 阳性 3 不详 ） 
2020-06-17 15:36:18.561 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:既往史手术时间未填写同时满足以下条件： 1、既往史手术选“有” 2、既往史手术填写了手术名称 3、手术时间为空值 
2020-06-17 15:36:18.562 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:饮水未填写生活环境饮水为空值 
2020-06-17 15:36:18.564 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-17 15:36:18.565 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 0e82a90122434b1989a6a6fd97ced399(String), 2020-06-17 15:36:18.564(Timestamp), 31011310200312009116(String), 8987ac9747cd44aa9e6570e08c8dd822(String), 2020-06-17 15:36:18.564(Timestamp), 31011310200312009116(String), 92dc5e8124ba4c5396a3fa7c3d1dd8db(String), 2020-06-17 15:36:18.564(Timestamp), 31011310200312009116(String), 9dd8f43bbd5f4c6bb27aeca1774bc345(String), 2020-06-17 15:36:18.564(Timestamp), 31011310200312009116(String), d70a24821287417d808263f40bc73679(String), 2020-06-17 15:36:18.564(Timestamp) 
2020-06-17 15:36:18.584 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 5 
2020-06-17 15:36:21.902 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 15:36:21.902 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 15:36:21.913 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 15:36:21.919 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 15:36:21.919 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 15:36:21.923 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 15:36:21.927 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 15:36:21.928 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 15:36:21.932 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 13 
2020-06-17 15:36:21.936 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 15:36:21.936 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:36:21.940 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 15:36:21.944 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 15:36:21.944 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:36:21.950 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 15:36:21.954 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 15:36:21.954 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 15:36:21.954 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 15:36:21.955 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:36:21.960 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 15:36:21.965 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 15:36:21.965 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:36:21.969 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 15:36:21.973 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 15:36:21.973 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:36:21.978 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 15:36:21.983 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 15:36:21.983 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:36:21.996 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 15:36:22.000 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 15:36:22.001 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 15:36:22.001 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 15:36:22.002 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:36:22.006 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 15:36:22.010 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 15:36:22.010 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:36:22.013 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 15:36:22.017 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 15:36:22.017 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:36:22.021 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 15:36:22.027 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 15:36:22.027 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:36:22.032 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 15:36:22.044 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:药物过敏史未填写药物过敏史为空值 
2020-06-17 15:36:22.047 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:既往史输血时间未填写同时满足以下条件： 1、既往史输血选“有” 2、既往史输血填写了输血原因 3、输血时间为空值 
2020-06-17 15:36:22.048 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:RH超出字典范围RH不在字典范围内（1 阴性 2 阳性 3 不详 ） 
2020-06-17 15:36:22.048 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:既往史手术时间未填写同时满足以下条件： 1、既往史手术选“有” 2、既往史手术填写了手术名称 3、手术时间为空值 
2020-06-17 15:36:22.049 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:饮水超出字典范围饮水选项不在字典范围（1自来水, 2经净化过滤的水, 3井水, 4河湖水, 5 塘水, 6其他） 
2020-06-17 15:36:22.051 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-17 15:36:22.052 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 0e82a90122434b1989a6a6fd97ced399(String), 2020-06-17 15:36:22.051(Timestamp), 31011310200312009116(String), 8987ac9747cd44aa9e6570e08c8dd822(String), 2020-06-17 15:36:22.051(Timestamp), 31011310200312009116(String), 92dc5e8124ba4c5396a3fa7c3d1dd8db(String), 2020-06-17 15:36:22.051(Timestamp), 31011310200312009116(String), 9dd8f43bbd5f4c6bb27aeca1774bc345(String), 2020-06-17 15:36:22.051(Timestamp), 31011310200312009116(String), b617e78f0d204457b8db6cf72d9b1347(String), 2020-06-17 15:36:22.051(Timestamp) 
2020-06-17 15:36:22.075 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 5 
2020-06-17 15:36:25.624 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 15:36:25.625 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 15:36:25.630 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 15:36:25.634 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 15:36:25.635 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 15:36:25.641 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 15:36:25.645 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 15:36:25.646 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 15:36:25.650 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 13 
2020-06-17 15:36:25.654 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 15:36:25.654 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:36:25.658 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 15:36:25.662 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 15:36:25.663 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:36:25.667 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 15:36:25.676 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 15:36:25.676 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 15:36:25.676 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 15:36:25.677 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:36:25.682 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 15:36:25.686 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 15:36:25.686 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:36:25.689 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 15:36:25.695 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 15:36:25.695 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:36:25.701 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 15:36:25.706 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 15:36:25.706 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:36:25.720 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 15:36:25.730 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 15:36:25.730 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 15:36:25.730 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 15:36:25.731 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:36:25.735 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 15:36:25.739 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 15:36:25.739 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:36:25.744 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 15:36:25.749 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 15:36:25.749 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:36:25.754 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 15:36:25.758 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 15:36:25.758 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:36:25.763 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 15:36:25.774 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:药物过敏史未填写药物过敏史为空值 
2020-06-17 15:36:25.775 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:厕所未填写生活环境厕所为空值 
2020-06-17 15:36:25.777 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:既往史输血时间未填写同时满足以下条件： 1、既往史输血选“有” 2、既往史输血填写了输血原因 3、输血时间为空值 
2020-06-17 15:36:25.778 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:RH超出字典范围RH不在字典范围内（1 阴性 2 阳性 3 不详 ） 
2020-06-17 15:36:25.778 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:既往史手术时间未填写同时满足以下条件： 1、既往史手术选“有” 2、既往史手术填写了手术名称 3、手术时间为空值 
2020-06-17 15:36:25.781 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-17 15:36:25.782 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 0e82a90122434b1989a6a6fd97ced399(String), 2020-06-17 15:36:25.781(Timestamp), 31011310200312009116(String), 46e5ac5dc6014dd4977cfd7deadaae34(String), 2020-06-17 15:36:25.781(Timestamp), 31011310200312009116(String), 8987ac9747cd44aa9e6570e08c8dd822(String), 2020-06-17 15:36:25.781(Timestamp), 31011310200312009116(String), 92dc5e8124ba4c5396a3fa7c3d1dd8db(String), 2020-06-17 15:36:25.781(Timestamp), 31011310200312009116(String), 9dd8f43bbd5f4c6bb27aeca1774bc345(String), 2020-06-17 15:36:25.781(Timestamp) 
2020-06-17 15:36:25.795 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 5 
2020-06-17 15:36:29.289 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 15:36:29.290 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 15:36:29.294 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 15:36:29.298 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 15:36:29.299 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 15:36:29.304 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 15:36:29.309 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 15:36:29.310 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 15:36:29.314 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 13 
2020-06-17 15:36:29.318 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 15:36:29.318 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:36:29.322 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 15:36:29.327 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 15:36:29.327 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:36:29.332 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 15:36:29.336 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 15:36:29.337 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 15:36:29.337 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 15:36:29.337 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:36:29.341 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 15:36:29.345 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 15:36:29.346 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:36:29.351 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 15:36:29.355 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 15:36:29.355 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:36:29.360 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 15:36:29.364 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 15:36:29.364 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:36:29.378 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 15:36:29.382 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 15:36:29.382 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 15:36:29.382 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 15:36:29.383 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:36:29.386 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 15:36:29.390 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 15:36:29.391 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:36:29.395 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 15:36:29.398 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 15:36:29.398 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:36:29.402 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 15:36:29.406 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 15:36:29.407 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:36:29.411 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 15:36:29.425 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:药物过敏史未填写药物过敏史为空值 
2020-06-17 15:36:29.426 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:厕所超出字典范围厕所选项不在字典范围（1 卫生厕所 2 一格或二格粪池式 3 马桶  4 露天粪坑  5 简易棚厕 ） 
2020-06-17 15:36:29.427 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:既往史输血时间未填写同时满足以下条件： 1、既往史输血选“有” 2、既往史输血填写了输血原因 3、输血时间为空值 
2020-06-17 15:36:29.428 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:RH超出字典范围RH不在字典范围内（1 阴性 2 阳性 3 不详 ） 
2020-06-17 15:36:29.428 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:既往史手术时间未填写同时满足以下条件： 1、既往史手术选“有” 2、既往史手术填写了手术名称 3、手术时间为空值 
2020-06-17 15:36:29.431 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-17 15:36:29.432 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 0e82a90122434b1989a6a6fd97ced399(String), 2020-06-17 15:36:29.431(Timestamp), 31011310200312009116(String), 37bdeecdf7044a70a76394b6853245a3(String), 2020-06-17 15:36:29.431(Timestamp), 31011310200312009116(String), 8987ac9747cd44aa9e6570e08c8dd822(String), 2020-06-17 15:36:29.431(Timestamp), 31011310200312009116(String), 92dc5e8124ba4c5396a3fa7c3d1dd8db(String), 2020-06-17 15:36:29.431(Timestamp), 31011310200312009116(String), 9dd8f43bbd5f4c6bb27aeca1774bc345(String), 2020-06-17 15:36:29.431(Timestamp) 
2020-06-17 15:36:29.449 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 5 
2020-06-17 15:36:32.943 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 15:36:32.944 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 15:36:32.949 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 15:36:32.953 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 15:36:32.954 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 15:36:32.958 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 15:36:32.963 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 15:36:32.963 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 15:36:32.968 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 13 
2020-06-17 15:36:32.972 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 15:36:32.972 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:36:32.976 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 15:36:32.980 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 15:36:32.980 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:36:32.986 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 15:36:32.990 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 15:36:32.990 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 15:36:32.990 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 15:36:32.990 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:36:32.995 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 15:36:32.999 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 15:36:32.999 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:36:33.004 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 15:36:33.007 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 15:36:33.008 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:36:33.011 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 15:36:33.015 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 15:36:33.016 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:36:33.029 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 15:36:33.033 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 15:36:33.033 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 15:36:33.034 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 15:36:33.034 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:36:33.039 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 15:36:33.042 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 15:36:33.043 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:36:33.047 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 15:36:33.051 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 15:36:33.051 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:36:33.055 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 15:36:33.061 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 15:36:33.062 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:36:33.066 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 15:36:33.078 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:药物过敏史未填写药物过敏史为空值 
2020-06-17 15:36:33.078 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:禽畜栏未填写生活环境禽畜栏为空值 
2020-06-17 15:36:33.081 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:既往史输血时间未填写同时满足以下条件： 1、既往史输血选“有” 2、既往史输血填写了输血原因 3、输血时间为空值 
2020-06-17 15:36:33.081 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:RH超出字典范围RH不在字典范围内（1 阴性 2 阳性 3 不详 ） 
2020-06-17 15:36:33.082 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:既往史手术时间未填写同时满足以下条件： 1、既往史手术选“有” 2、既往史手术填写了手术名称 3、手术时间为空值 
2020-06-17 15:36:33.084 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-17 15:36:33.085 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 0e82a90122434b1989a6a6fd97ced399(String), 2020-06-17 15:36:33.084(Timestamp), 31011310200312009116(String), 1c08fb70e9744af887041d4da5b25ea8(String), 2020-06-17 15:36:33.084(Timestamp), 31011310200312009116(String), 8987ac9747cd44aa9e6570e08c8dd822(String), 2020-06-17 15:36:33.084(Timestamp), 31011310200312009116(String), 92dc5e8124ba4c5396a3fa7c3d1dd8db(String), 2020-06-17 15:36:33.084(Timestamp), 31011310200312009116(String), 9dd8f43bbd5f4c6bb27aeca1774bc345(String), 2020-06-17 15:36:33.084(Timestamp) 
2020-06-17 15:36:33.102 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 5 
2020-06-17 15:36:36.939 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 15:36:36.939 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 15:36:36.944 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 15:36:36.948 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 15:36:36.948 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 15:36:36.953 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 15:36:36.957 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 15:36:36.958 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 15:36:36.962 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 13 
2020-06-17 15:36:36.966 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 15:36:36.966 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:36:36.971 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 15:36:36.975 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 15:36:36.975 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:36:36.980 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 15:36:36.984 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 15:36:36.984 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 15:36:36.984 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 15:36:36.984 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:36:36.989 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 15:36:36.993 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 15:36:36.994 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:36:36.998 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 15:36:37.003 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 15:36:37.003 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:36:37.008 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 15:36:37.012 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 15:36:37.012 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:36:37.027 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 15:36:37.030 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 15:36:37.032 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 15:36:37.033 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 15:36:37.033 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:36:37.038 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 15:36:37.042 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 15:36:37.042 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:36:37.046 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 15:36:37.050 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 15:36:37.051 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:36:37.055 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 15:36:37.060 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 15:36:37.060 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:36:37.065 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 15:36:37.083 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:药物过敏史未填写药物过敏史为空值 
2020-06-17 15:36:37.085 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:既往史输血时间未填写同时满足以下条件： 1、既往史输血选“有” 2、既往史输血填写了输血原因 3、输血时间为空值 
2020-06-17 15:36:37.086 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:RH超出字典范围RH不在字典范围内（1 阴性 2 阳性 3 不详 ） 
2020-06-17 15:36:37.086 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:既往史手术时间未填写同时满足以下条件： 1、既往史手术选“有” 2、既往史手术填写了手术名称 3、手术时间为空值 
2020-06-17 15:36:37.087 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:禽畜栏超出字典范围禽畜栏选项不在字典范围（1 无, 2 单设, 3 室内, 4 室外） 
2020-06-17 15:36:37.089 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-17 15:36:37.089 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 0e82a90122434b1989a6a6fd97ced399(String), 2020-06-17 15:36:37.089(Timestamp), 31011310200312009116(String), 8987ac9747cd44aa9e6570e08c8dd822(String), 2020-06-17 15:36:37.089(Timestamp), 31011310200312009116(String), 92dc5e8124ba4c5396a3fa7c3d1dd8db(String), 2020-06-17 15:36:37.089(Timestamp), 31011310200312009116(String), 9dd8f43bbd5f4c6bb27aeca1774bc345(String), 2020-06-17 15:36:37.089(Timestamp), 31011310200312009116(String), a827e00ae95e4c5a8d9e7227ca08b08a(String), 2020-06-17 15:36:37.089(Timestamp) 
2020-06-17 15:36:37.115 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 5 
2020-06-17 15:37:11.485 [INFO ] com.benetech.rules.RulesApplication                - [logStarting:55] Starting RulesApplication v1.0-SNAPSHOT on DESKTOP-EOCO1V0 with PID 3020 (D:\51\python\project\instance\zyjk\EHR\controlRuleNew\config\healthRecordRules.jar started by ZY in D:\51\python\project\instance\zyjk\EHR\controlRuleNew) 
2020-06-17 15:37:11.504 [DEBUG] com.benetech.rules.RulesApplication                - [logStarting:56] Running with Spring Boot v2.2.1.RELEASE, Spring v5.2.1.RELEASE 
2020-06-17 15:37:11.505 [INFO ] com.benetech.rules.RulesApplication                - [logStartupProfileInfo:655] The following profiles are active: test 
2020-06-17 15:37:13.074 [INFO ] o.s.boot.web.embedded.tomcat.TomcatWebServer       - [initialize:92] Tomcat initialized with port(s): 8838 (http) 
2020-06-17 15:37:13.086 [INFO ] org.apache.coyote.http11.Http11NioProtocol         - [log:173] Initializing ProtocolHandler ["http-nio-8838"] 
2020-06-17 15:37:13.087 [INFO ] org.apache.catalina.core.StandardService           - [log:173] Starting service [Tomcat] 
2020-06-17 15:37:13.087 [INFO ] org.apache.catalina.core.StandardEngine            - [log:173] Starting Servlet engine: [Apache Tomcat/9.0.27] 
2020-06-17 15:37:13.161 [INFO ] o.a.c.c.C.[.[localhost].[/healthRecordRules]       - [log:173] Initializing Spring embedded WebApplicationContext 
2020-06-17 15:37:13.161 [INFO ] org.springframework.web.context.ContextLoader      - [prepareWebApplicationContext:284] Root WebApplicationContext: initialization completed in 1556 ms 
2020-06-17 15:37:13.241 [DEBUG] org.apache.ibatis.logging.LogFactory               - [setImplementation:135] Logging initialized using 'class org.apache.ibatis.logging.slf4j.Slf4jImpl' adapter. 
2020-06-17 15:37:13.520 [WARN ] org.mybatis.spring.SqlSessionFactoryBean           - [buildSqlSessionFactory:467] Can't find class in '[com.benetech.rules.*.entity]' package. Please check your configuration. 
2020-06-17 15:37:14.211 [INFO ] com.alibaba.druid.pool.DruidDataSource             - [init:930] {dataSource-1} inited 
2020-06-17 15:37:14.454 [DEBUG] c.b.r.m.e.mapper.RuleEngineMapper.getAllRules      - [debug:159] ==>  Preparing: select a.RuleId as ruleId, a.RuleSql as clazz from HrRule a join HrRuleProps b on a.RuleId = b.RuleId where -- RuleId in ('34278f71cf1d42c88158aaf637fa5203', '8d30baa03bfc4233a8f115c57a0ebf08', '63eb82a44bf64c96a0b9023fa2a3c9d9') a.RuleSql != '' and a.RuleSql is not null and b.Enable = 1  
2020-06-17 15:37:14.471 [DEBUG] c.b.r.m.e.mapper.RuleEngineMapper.getAllRules      - [debug:159] ==> Parameters:  
2020-06-17 15:37:14.556 [DEBUG] c.b.r.m.e.mapper.RuleEngineMapper.getAllRules      - [debug:159] <==      Total: 508 
2020-06-17 15:37:14.753 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 15:37:14.754 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 15:37:14.758 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 15:37:14.763 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 15:37:14.763 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 15:37:14.770 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 15:37:14.774 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 15:37:14.774 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 15:37:14.778 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 13 
2020-06-17 15:37:14.782 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 15:37:14.783 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:37:14.788 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 15:37:14.793 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 15:37:14.793 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:37:14.800 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 15:37:14.804 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 15:37:14.805 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 15:37:14.805 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 15:37:14.805 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:37:14.809 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 15:37:14.815 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 15:37:14.815 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:37:14.820 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 15:37:14.824 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 15:37:14.824 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:37:14.829 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 15:37:14.834 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 15:37:14.834 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:37:14.848 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 15:37:14.857 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 15:37:14.857 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 15:37:14.857 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 15:37:14.858 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:37:14.862 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 15:37:14.866 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 15:37:14.866 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:37:14.870 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 15:37:14.874 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 15:37:14.875 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:37:14.880 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 15:37:14.884 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 15:37:14.884 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:37:14.889 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 15:37:14.905 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:药物过敏史未填写药物过敏史为空值 
2020-06-17 15:37:14.907 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:血型未填写血型为空值 
2020-06-17 15:37:14.909 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:既往史输血时间未填写同时满足以下条件： 1、既往史输血选“有” 2、既往史输血填写了输血原因 3、输血时间为空值 
2020-06-17 15:37:14.910 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:RH超出字典范围RH不在字典范围内（1 阴性 2 阳性 3 不详 ） 
2020-06-17 15:37:14.910 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:既往史手术时间未填写同时满足以下条件： 1、既往史手术选“有” 2、既往史手术填写了手术名称 3、手术时间为空值 
2020-06-17 15:37:14.913 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-17 15:37:14.913 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 0e82a90122434b1989a6a6fd97ced399(String), 2020-06-17 15:37:14.912(Timestamp), 31011310200312009116(String), 5d67b4b3f4c34563a644fe8c9b883884(String), 2020-06-17 15:37:14.912(Timestamp), 31011310200312009116(String), 8987ac9747cd44aa9e6570e08c8dd822(String), 2020-06-17 15:37:14.912(Timestamp), 31011310200312009116(String), 92dc5e8124ba4c5396a3fa7c3d1dd8db(String), 2020-06-17 15:37:14.912(Timestamp), 31011310200312009116(String), 9dd8f43bbd5f4c6bb27aeca1774bc345(String), 2020-06-17 15:37:14.912(Timestamp) 
2020-06-17 15:37:14.949 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 5 
2020-06-17 15:37:14.989 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [init:68] 加载规则：508 条 
2020-06-17 15:37:15.009 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.getAllCode    - [debug:159] ==>  Preparing: SELECT codeSysType AS type, code AS code, [value] AS value FROM tb_code_value WHERE code != '' AND [value] != ''  
2020-06-17 15:37:15.010 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.getAllCode    - [debug:159] ==> Parameters:  
2020-06-17 15:37:15.495 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.getAllCode    - [debug:159] <==      Total: 44881 
2020-06-17 15:37:15.523 [INFO ] c.b.r.m.m.service.impl.EhrModelBuildServiceImpl    - [init:96] 初始化字典类型: 467 种 
2020-06-17 15:37:15.523 [INFO ] c.b.r.m.m.service.impl.EhrModelBuildServiceImpl    - [init:97] 初始化字典: 44881 条 
2020-06-17 15:37:15.524 [ERROR] c.b.r.m.process.service.impl.QcProcessServiceImpl  - [init:44] 初始化线程池 
2020-06-17 15:37:15.669 [INFO ] o.s.scheduling.concurrent.ThreadPoolTaskExecutor   - [initialize:171] Initializing ExecutorService 'applicationTaskExecutor' 
2020-06-17 15:37:15.959 [INFO ] org.apache.coyote.http11.Http11NioProtocol         - [log:173] Starting ProtocolHandler ["http-nio-8838"] 
2020-06-17 15:37:15.973 [INFO ] org.apache.coyote.http11.Http11NioProtocol         - [log:173] Pausing ProtocolHandler ["http-nio-8838"] 
2020-06-17 15:37:15.974 [INFO ] org.apache.catalina.core.StandardService           - [log:173] Stopping service [Tomcat] 
2020-06-17 15:37:15.980 [INFO ] org.apache.coyote.http11.Http11NioProtocol         - [log:173] Stopping ProtocolHandler ["http-nio-8838"] 
2020-06-17 15:37:15.983 [INFO ] org.apache.coyote.http11.Http11NioProtocol         - [log:173] Destroying ProtocolHandler ["http-nio-8838"] 
2020-06-17 15:37:15.985 [INFO ] o.s.b.a.l.ConditionEvaluationReportLoggingListener - [logMessage:136]     Error starting ApplicationContext. To display the conditions report re-run your application with 'debug' enabled. 
2020-06-17 15:37:15.987 [ERROR] o.s.b.diagnostics.LoggingFailureAnalysisReporter   - [report:40]     ***************************  APPLICATION FAILED TO START  ***************************    Description:    Web server failed to start. Port 8838 was already in use.    Action:    Identify and stop the process that's listening on port 8838 or configure this application to listen on another port.   
2020-06-17 15:37:15.993 [INFO ] o.s.scheduling.concurrent.ThreadPoolTaskExecutor   - [shutdown:208] Shutting down ExecutorService 'applicationTaskExecutor' 
2020-06-17 15:37:15.997 [INFO ] com.alibaba.druid.pool.DruidDataSource             - [close:1825] {dataSource-1} closed 
2020-06-17 15:37:18.552 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 15:37:18.552 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 15:37:18.560 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 15:37:18.565 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 15:37:18.565 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 15:37:18.569 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 15:37:18.573 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 15:37:18.573 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 15:37:18.578 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 13 
2020-06-17 15:37:18.582 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 15:37:18.582 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:37:18.587 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 15:37:18.591 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 15:37:18.592 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:37:18.597 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 15:37:18.600 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 15:37:18.600 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 15:37:18.601 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 15:37:18.601 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:37:18.605 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 15:37:18.610 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 15:37:18.610 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:37:18.615 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 15:37:18.619 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 15:37:18.620 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:37:18.626 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 15:37:18.631 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 15:37:18.632 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:37:18.646 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 15:37:18.651 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 15:37:18.651 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 15:37:18.652 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 15:37:18.653 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:37:18.657 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 15:37:18.662 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 15:37:18.663 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:37:18.666 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 15:37:18.675 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 15:37:18.675 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:37:18.681 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 15:37:18.687 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 15:37:18.688 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:37:18.694 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 15:37:18.714 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:药物过敏史未填写药物过敏史为空值 
2020-06-17 15:37:18.720 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:既往史输血时间未填写同时满足以下条件： 1、既往史输血选“有” 2、既往史输血填写了输血原因 3、输血时间为空值 
2020-06-17 15:37:18.721 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:RH超出字典范围RH不在字典范围内（1 阴性 2 阳性 3 不详 ） 
2020-06-17 15:37:18.722 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:既往史手术时间未填写同时满足以下条件： 1、既往史手术选“有” 2、既往史手术填写了手术名称 3、手术时间为空值 
2020-06-17 15:37:18.727 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-17 15:37:18.728 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 0e82a90122434b1989a6a6fd97ced399(String), 2020-06-17 15:37:18.726(Timestamp), 31011310200312009116(String), 8987ac9747cd44aa9e6570e08c8dd822(String), 2020-06-17 15:37:18.726(Timestamp), 31011310200312009116(String), 92dc5e8124ba4c5396a3fa7c3d1dd8db(String), 2020-06-17 15:37:18.726(Timestamp), 31011310200312009116(String), 9dd8f43bbd5f4c6bb27aeca1774bc345(String), 2020-06-17 15:37:18.726(Timestamp) 
2020-06-17 15:37:18.744 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 4 
2020-06-17 15:37:22.121 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 15:37:22.122 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 15:37:22.129 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 15:37:22.134 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 15:37:22.135 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 15:37:22.143 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 15:37:22.147 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 15:37:22.148 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 15:37:22.154 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 13 
2020-06-17 15:37:22.159 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 15:37:22.159 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:37:22.163 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 15:37:22.168 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 15:37:22.168 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:37:22.175 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 15:37:22.179 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 15:37:22.179 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 15:37:22.180 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 15:37:22.180 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:37:22.185 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 15:37:22.192 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 15:37:22.192 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:37:22.199 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 15:37:22.204 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 15:37:22.204 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:37:22.208 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 15:37:22.212 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 15:37:22.212 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:37:22.229 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 15:37:22.234 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 15:37:22.234 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 15:37:22.235 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 15:37:22.236 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:37:22.241 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 15:37:22.246 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 15:37:22.246 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:37:22.252 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 15:37:22.256 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 15:37:22.257 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:37:22.262 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 15:37:22.266 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 15:37:22.267 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:37:22.271 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 15:37:22.287 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:药物过敏史未填写药物过敏史为空值 
2020-06-17 15:37:22.292 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:既往史输血时间未填写同时满足以下条件： 1、既往史输血选“有” 2、既往史输血填写了输血原因 3、输血时间为空值 
2020-06-17 15:37:22.293 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:既往史手术时间未填写同时满足以下条件： 1、既往史手术选“有” 2、既往史手术填写了手术名称 3、手术时间为空值 
2020-06-17 15:37:22.294 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:RH血型未填写RH血型为空值 
2020-06-17 15:37:22.297 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-17 15:37:22.298 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 0e82a90122434b1989a6a6fd97ced399(String), 2020-06-17 15:37:22.297(Timestamp), 31011310200312009116(String), 8987ac9747cd44aa9e6570e08c8dd822(String), 2020-06-17 15:37:22.297(Timestamp), 31011310200312009116(String), 9dd8f43bbd5f4c6bb27aeca1774bc345(String), 2020-06-17 15:37:22.297(Timestamp), 31011310200312009116(String), b9590438ed5d4bdb89f89c686856cdce(String), 2020-06-17 15:37:22.297(Timestamp) 
2020-06-17 15:37:22.341 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 4 
2020-06-17 15:37:25.606 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-17 15:37:25.606 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 15:37:25.611 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-17 15:37:25.616 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-17 15:37:25.617 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-17 15:37:25.622 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-17 15:37:25.629 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-17 15:37:25.629 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-17 15:37:25.635 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 13 
2020-06-17 15:37:25.640 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-17 15:37:25.640 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:37:25.644 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-17 15:37:25.649 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 15:37:25.649 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:37:25.656 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 15:37:25.661 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-17 15:37:25.661 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-17 15:37:25.661 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 15:37:25.662 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:37:25.667 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-17 15:37:25.671 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-17 15:37:25.672 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:37:25.676 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-17 15:37:25.681 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 15:37:25.681 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:37:25.686 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-17 15:37:25.691 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-17 15:37:25.691 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:37:25.705 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-17 15:37:25.709 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-17 15:37:25.709 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-17 15:37:25.710 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 15:37:25.710 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:37:25.715 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-17 15:37:25.720 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-17 15:37:25.720 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-17 15:37:25.726 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-17 15:37:25.732 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-17 15:37:25.733 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:37:25.739 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-17 15:37:25.743 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-17 15:37:25.743 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-17 15:37:25.750 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-17 15:37:25.763 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:药物过敏史未填写药物过敏史为空值 
2020-06-17 15:37:25.766 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:既往史输血时间未填写同时满足以下条件： 1、既往史输血选“有” 2、既往史输血填写了输血原因 3、输血时间为空值 
2020-06-17 15:37:25.767 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:RH超出字典范围RH不在字典范围内（1 阴性 2 阳性 3 不详 ） 
2020-06-17 15:37:25.767 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:既往史手术时间未填写同时满足以下条件： 1、既往史手术选“有” 2、既往史手术填写了手术名称 3、手术时间为空值 
2020-06-17 15:37:25.770 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-17 15:37:25.771 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 0e82a90122434b1989a6a6fd97ced399(String), 2020-06-17 15:37:25.77(Timestamp), 31011310200312009116(String), 8987ac9747cd44aa9e6570e08c8dd822(String), 2020-06-17 15:37:25.77(Timestamp), 31011310200312009116(String), 92dc5e8124ba4c5396a3fa7c3d1dd8db(String), 2020-06-17 15:37:25.77(Timestamp), 31011310200312009116(String), 9dd8f43bbd5f4c6bb27aeca1774bc345(String), 2020-06-17 15:37:25.77(Timestamp) 
2020-06-17 15:37:25.789 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 4 
2020-06-17 15:37:48.600 [INFO ] com.benetech.rules.RulesApplication                - [logStarting:55] Starting RulesApplication v1.0-SNAPSHOT on DESKTOP-EOCO1V0 with PID 5280 (D:\51\python\project\instance\zyjk\EHR\controlRuleNew\config\healthRecordRules.jar started by ZY in D:\51\python\project\instance\zyjk\EHR\controlRuleNew) 
2020-06-17 15:37:48.604 [DEBUG] com.benetech.rules.RulesApplication                - [logStarting:56] Running with Spring Boot v2.2.1.RELEASE, Spring v5.2.1.RELEASE 
2020-06-17 15:37:48.604 [INFO ] com.benetech.rules.RulesApplication                - [logStartupProfileInfo:655] The following profiles are active: test 
2020-06-17 15:37:50.215 [INFO ] o.s.boot.web.embedded.tomcat.TomcatWebServer       - [initialize:92] Tomcat initialized with port(s): 8838 (http) 
2020-06-17 15:37:50.228 [INFO ] org.apache.coyote.http11.Http11NioProtocol         - [log:173] Initializing ProtocolHandler ["http-nio-8838"] 
2020-06-17 15:37:50.229 [INFO ] org.apache.catalina.core.StandardService           - [log:173] Starting service [Tomcat] 
2020-06-17 15:37:50.230 [INFO ] org.apache.catalina.core.StandardEngine            - [log:173] Starting Servlet engine: [Apache Tomcat/9.0.27] 
2020-06-17 15:37:50.301 [INFO ] o.a.c.c.C.[.[localhost].[/healthRecordRules]       - [log:173] Initializing Spring embedded WebApplicationContext 
2020-06-17 15:37:50.302 [INFO ] org.springframework.web.context.ContextLoader      - [prepareWebApplicationContext:284] Root WebApplicationContext: initialization completed in 1590 ms 
2020-06-17 15:37:50.385 [DEBUG] org.apache.ibatis.logging.LogFactory               - [setImplementation:135] Logging initialized using 'class org.apache.ibatis.logging.slf4j.Slf4jImpl' adapter. 
2020-06-17 15:37:50.648 [WARN ] org.mybatis.spring.SqlSessionFactoryBean           - [buildSqlSessionFactory:467] Can't find class in '[com.benetech.rules.*.entity]' package. Please check your configuration. 
2020-06-17 15:37:51.320 [INFO ] com.alibaba.druid.pool.DruidDataSource             - [init:930] {dataSource-1} inited 
2020-06-17 15:37:51.587 [DEBUG] c.b.r.m.e.mapper.RuleEngineMapper.getAllRules      - [debug:159] ==>  Preparing: select a.RuleId as ruleId, a.RuleSql as clazz from HrRule a join HrRuleProps b on a.RuleId = b.RuleId where -- RuleId in ('34278f71cf1d42c88158aaf637fa5203', '8d30baa03bfc4233a8f115c57a0ebf08', '63eb82a44bf64c96a0b9023fa2a3c9d9') a.RuleSql != '' and a.RuleSql is not null and b.Enable = 1  
2020-06-17 15:37:51.607 [DEBUG] c.b.r.m.e.mapper.RuleEngineMapper.getAllRules      - [debug:159] ==> Parameters:  
2020-06-17 15:37:51.710 [DEBUG] c.b.r.m.e.mapper.RuleEngineMapper.getAllRules      - [debug:159] <==      Total: 508 
2020-06-17 15:37:52.098 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [init:68] 加载规则：508 条 
2020-06-17 15:37:52.137 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.getAllCode    - [debug:159] ==>  Preparing: SELECT codeSysType AS type, code AS code, [value] AS value FROM tb_code_value WHERE code != '' AND [value] != ''  
2020-06-17 15:37:52.138 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.getAllCode    - [debug:159] ==> Parameters:  
2020-06-17 15:37:53.225 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.getAllCode    - [debug:159] <==      Total: 44881 
2020-06-17 15:37:53.250 [INFO ] c.b.r.m.m.service.impl.EhrModelBuildServiceImpl    - [init:96] 初始化字典类型: 467 种 
2020-06-17 15:37:53.251 [INFO ] c.b.r.m.m.service.impl.EhrModelBuildServiceImpl    - [init:97] 初始化字典: 44881 条 
2020-06-17 15:37:53.251 [ERROR] c.b.r.m.process.service.impl.QcProcessServiceImpl  - [init:44] 初始化线程池 
2020-06-17 15:37:53.417 [INFO ] o.s.scheduling.concurrent.ThreadPoolTaskExecutor   - [initialize:171] Initializing ExecutorService 'applicationTaskExecutor' 
2020-06-17 15:37:53.690 [INFO ] org.apache.coyote.http11.Http11NioProtocol         - [log:173] Starting ProtocolHandler ["http-nio-8838"] 
2020-06-17 15:37:53.715 [INFO ] org.apache.coyote.http11.Http11NioProtocol         - [log:173] Pausing ProtocolHandler ["http-nio-8838"] 
2020-06-17 15:37:53.717 [INFO ] org.apache.catalina.core.StandardService           - [log:173] Stopping service [Tomcat] 
2020-06-17 15:37:53.725 [INFO ] org.apache.coyote.http11.Http11NioProtocol         - [log:173] Stopping ProtocolHandler ["http-nio-8838"] 
2020-06-17 15:37:53.726 [INFO ] org.apache.coyote.http11.Http11NioProtocol         - [log:173] Destroying ProtocolHandler ["http-nio-8838"] 
2020-06-17 15:37:53.728 [INFO ] o.s.b.a.l.ConditionEvaluationReportLoggingListener - [logMessage:136]     Error starting ApplicationContext. To display the conditions report re-run your application with 'debug' enabled. 
2020-06-17 15:37:53.730 [ERROR] o.s.b.diagnostics.LoggingFailureAnalysisReporter   - [report:40]     ***************************  APPLICATION FAILED TO START  ***************************    Description:    Web server failed to start. Port 8838 was already in use.    Action:    Identify and stop the process that's listening on port 8838 or configure this application to listen on another port.   
2020-06-17 15:37:53.733 [INFO ] o.s.scheduling.concurrent.ThreadPoolTaskExecutor   - [shutdown:208] Shutting down ExecutorService 'applicationTaskExecutor' 
2020-06-17 15:37:53.738 [INFO ] com.alibaba.druid.pool.DruidDataSource             - [close:1825] {dataSource-1} closed 
