2020-06-15 16:52:09.809 [INFO ] com.benetech.rules.RulesApplication                - [logStarting:55] Starting RulesApplication v1.0-SNAPSHOT on DESKTOP-EOCO1V0 with PID 16032 (D:\51\python\project\instance\zyjk\EHR\controlRuleNew\config\healthRecordRules.jar started by ZY in D:\51\python\project\instance\zyjk\EHR\controlRuleNew) 
2020-06-15 16:52:09.818 [DEBUG] com.benetech.rules.RulesApplication                - [logStarting:56] Running with Spring Boot v2.2.1.RELEASE, Spring v5.2.1.RELEASE 
2020-06-15 16:52:09.819 [INFO ] com.benetech.rules.RulesApplication                - [logStartupProfileInfo:655] The following profiles are active: test 
2020-06-15 16:52:12.037 [INFO ] o.s.boot.web.embedded.tomcat.TomcatWebServer       - [initialize:92] Tomcat initialized with port(s): 8838 (http) 
2020-06-15 16:52:12.056 [INFO ] org.apache.coyote.http11.Http11NioProtocol         - [log:173] Initializing ProtocolHandler ["http-nio-8838"] 
2020-06-15 16:52:12.057 [INFO ] org.apache.catalina.core.StandardService           - [log:173] Starting service [Tomcat] 
2020-06-15 16:52:12.057 [INFO ] org.apache.catalina.core.StandardEngine            - [log:173] Starting Servlet engine: [Apache Tomcat/9.0.27] 
2020-06-15 16:52:12.143 [INFO ] o.a.c.c.C.[.[localhost].[/healthRecordRules]       - [log:173] Initializing Spring embedded WebApplicationContext 
2020-06-15 16:52:12.143 [INFO ] org.springframework.web.context.ContextLoader      - [prepareWebApplicationContext:284] Root WebApplicationContext: initialization completed in 2063 ms 
2020-06-15 16:52:12.232 [DEBUG] org.apache.ibatis.logging.LogFactory               - [setImplementation:135] Logging initialized using 'class org.apache.ibatis.logging.slf4j.Slf4jImpl' adapter. 
2020-06-15 16:52:12.616 [WARN ] org.mybatis.spring.SqlSessionFactoryBean           - [buildSqlSessionFactory:467] Can't find class in '[com.benetech.rules.*.entity]' package. Please check your configuration. 
2020-06-15 16:52:13.523 [INFO ] com.alibaba.druid.pool.DruidDataSource             - [init:930] {dataSource-1} inited 
2020-06-15 16:52:13.775 [DEBUG] c.b.r.m.e.mapper.RuleEngineMapper.getAllRules      - [debug:159] ==>  Preparing: select a.RuleId as ruleId, a.RuleSql as clazz from HrRule a join HrRuleProps b on a.RuleId = b.RuleId where -- RuleId in ('34278f71cf1d42c88158aaf637fa5203', '8d30baa03bfc4233a8f115c57a0ebf08', '63eb82a44bf64c96a0b9023fa2a3c9d9') a.RuleSql != '' and a.RuleSql is not null and b.Enable = 1  
2020-06-15 16:52:13.791 [DEBUG] c.b.r.m.e.mapper.RuleEngineMapper.getAllRules      - [debug:159] ==> Parameters:  
2020-06-15 16:52:13.872 [DEBUG] c.b.r.m.e.mapper.RuleEngineMapper.getAllRules      - [debug:159] <==      Total: 310 
2020-06-15 16:52:14.080 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [init:64] 加载规则：310 条 
2020-06-15 16:52:14.096 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.getAllCode    - [debug:159] ==>  Preparing: SELECT codeSysType AS type, code AS code, [value] AS value FROM tb_code_value WHERE code != '' AND [value] != ''  
2020-06-15 16:52:14.096 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.getAllCode    - [debug:159] ==> Parameters:  
2020-06-15 16:52:14.580 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.getAllCode    - [debug:159] <==      Total: 44881 
2020-06-15 16:52:14.606 [INFO ] c.b.r.m.m.service.impl.EhrModelBuildServiceImpl    - [init:96] 初始化字典类型: 467 种 
2020-06-15 16:52:14.606 [INFO ] c.b.r.m.m.service.impl.EhrModelBuildServiceImpl    - [init:97] 初始化字典: 44881 条 
2020-06-15 16:52:14.835 [INFO ] o.s.scheduling.concurrent.ThreadPoolTaskExecutor   - [initialize:171] Initializing ExecutorService 'applicationTaskExecutor' 
2020-06-15 16:52:15.138 [INFO ] org.apache.coyote.http11.Http11NioProtocol         - [log:173] Starting ProtocolHandler ["http-nio-8838"] 
2020-06-15 16:52:15.167 [INFO ] o.s.boot.web.embedded.tomcat.TomcatWebServer       - [start:204] Tomcat started on port(s): 8838 (http) with context path '/healthRecordRules' 
2020-06-15 16:52:15.173 [INFO ] com.benetech.rules.RulesApplication                - [logStarted:61] Started RulesApplication in 6.077 seconds (JVM running for 7.199) 
2020-06-15 16:52:15.174 [INFO ] com.benetech.rules.RulesApplication                - [main:20] -------------启动成功------------- 
2020-06-15 16:52:18.234 [INFO ] o.a.c.c.C.[.[localhost].[/healthRecordRules]       - [log:173] Initializing Spring DispatcherServlet 'dispatcherServlet' 
2020-06-15 16:52:18.234 [INFO ] org.springframework.web.servlet.DispatcherServlet  - [initServletBean:525] Initializing Servlet 'dispatcherServlet' 
2020-06-15 16:52:18.246 [INFO ] org.springframework.web.servlet.DispatcherServlet  - [initServletBean:547] Completed initialization in 12 ms 
2020-06-15 16:52:18.287 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-15 16:52:18.293 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-15 16:52:18.310 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-15 16:52:18.318 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-15 16:52:18.319 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-15 16:52:18.328 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-15 16:52:18.333 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-15 16:52:18.334 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-15 16:52:18.340 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-15 16:52:18.346 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-15 16:52:18.346 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-15 16:52:18.351 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-15 16:52:18.356 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t2.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-15 16:52:18.356 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-15 16:52:18.367 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-15 16:52:18.383 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-15 16:52:18.383 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-15 16:52:18.384 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-15 16:52:18.384 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-15 16:52:18.391 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-15 16:52:18.396 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-15 16:52:18.396 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-15 16:52:18.400 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-15 16:52:18.405 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-15 16:52:18.405 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-15 16:52:18.410 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-15 16:52:18.415 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t2.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-15 16:52:18.415 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-15 16:52:18.431 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 3 
2020-06-15 16:52:18.436 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-15 16:52:18.436 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 3 
2020-06-15 16:52:18.437 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-15 16:52:18.438 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-15 16:52:18.450 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-15 16:52:18.459 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-15 16:52:18.459 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-15 16:52:18.465 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-15 16:52:18.472 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-15 16:52:18.472 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-15 16:52:18.477 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-15 16:52:18.482 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-15 16:52:18.483 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190401596084000(String) 
2020-06-15 16:52:18.491 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-15 16:52:18.504 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-15 16:52:18.507 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190401596084000(String) 
2020-06-15 16:52:18.522 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-15 16:52:18.528 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-15 16:52:18.529 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-15 16:52:18.534 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-15 16:52:18.539 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-15 16:52:18.540 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190408596837900(String) 
2020-06-15 16:52:18.545 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-15 16:52:18.549 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-15 16:52:18.550 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190408596837900(String) 
2020-06-15 16:52:18.555 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-15 16:52:18.560 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-15 16:52:18.560 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-15 16:52:18.565 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-15 16:52:18.570 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-15 16:52:18.570 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-15 16:52:18.575 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-15 16:52:18.793 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:个人基本信息表既往史建档前与三级医院住院就诊记录诊断逻辑不符（恶性肿瘤） 
2020-06-15 16:52:18.796 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:姓名填写不规范同时满足以下条件： 1、联系人姓名不为空值 2、联系人姓名为纯数字 
2020-06-15 16:52:18.799 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:个人基本信息表既往史建档前与三级医院住院就诊记录诊断逻辑不符（严重精神障碍） 
2020-06-15 16:52:18.802 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:与三级医院住院就诊记录表姓名不一致同时满足以下条件： 1、封面《姓名》不为空值 2、三级医院住院就诊记录表《患者姓名》不为空 3、封面《姓名》与住院就诊记录表中《患者姓名》不相等 
2020-06-15 16:52:18.804 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:与三级医院门诊就诊记录表姓名不一致同时满足以下条件： 1、封面《姓名》不为空值 2、三级医院门诊就诊记录表《患者姓名》不为空 3、封面《姓名》与门诊就诊记录表中《患者姓名》不相等 
2020-06-15 16:52:18.809 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:个人基本信息表既往史建档前与三级医院住院就诊记录诊断逻辑不符（脑卒中） 
2020-06-15 16:52:18.812 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:个人基本信息表既往史建档前与三级医院住院就诊记录诊断逻辑不符（冠心病） 
2020-06-15 16:52:18.813 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:个人基本信息表既往史建档前与三级医院住院就诊记录诊断逻辑不符（慢性阻塞性肺疾病） 
2020-06-15 16:52:18.816 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:个人基本信息表既往史建档前与三级医院住院就诊记录诊断逻辑不符（糖尿病） 
2020-06-15 16:52:18.818 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:联系电话不为纯数字同时满足以下条件： 1、联系电话不为空值 2、联系电话不是纯数字 
2020-06-15 16:52:18.820 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:个人基本信息表既往史建档前与三级医院住院就诊记录诊断逻辑不符（高血压） 
2020-06-15 16:52:18.821 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:个人基本信息表既往史建档前与三级医院住院就诊记录诊断逻辑不符（糖尿病） 
2020-06-15 16:52:18.822 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:个人基本信息表既往史建档前与三级医院住院就诊记录诊断逻辑不符（结核病） 
2020-06-15 16:52:18.823 [INFO ] c.b.r.m.m.service.impl.EhrModelBuildServiceImpl    - [saveResult:158] 规则执行结束结果条数为:13 
2020-06-15 16:52:18.868 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-15 16:52:18.869 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 4148ac732c724fc7b87f96a04079d821(String), 2020-06-15 16:52:18.824(Timestamp), 31011310200312009116(String), 61ed70b670f2460a94ebc183f6b86f5d(String), 2020-06-15 16:52:18.824(Timestamp), 31011310200312009116(String), 72de975121d24cd3bbdfd8324ae36aba(String), 2020-06-15 16:52:18.824(Timestamp), 31011310200312009116(String), 814b3d0aca3642af82ef320f98d4dfba(String), 2020-06-15 16:52:18.824(Timestamp), 31011310200312009116(String), 847bc4b46918417dab4aa917af3355c3(String), 2020-06-15 16:52:18.824(Timestamp), 31011310200312009116(String), 9c830141ce3e4854847cc2b52c46aa60(String), 2020-06-15 16:52:18.824(Timestamp), 31011310200312009116(String), b0789ee1f8404172941794b5431fd75d(String), 2020-06-15 16:52:18.824(Timestamp), 31011310200312009116(String), b46c567e4517456798ca3a5b0f34863d(String), 2020-06-15 16:52:18.824(Timestamp), 31011310200312009116(String), c8e65283e6a243a5a1b89ae2117b6479(String), 2020-06-15 16:52:18.824(Timestamp), 31011310200312009116(String), db6607db218b4182924b980ecb900b19(String), 2020-06-15 16:52:18.824(Timestamp), 31011310200312009116(String), f14d68452e254abd9a4cb294ffda7da8(String), 2020-06-15 16:52:18.824(Timestamp), 31011310200312009116(String), f3e5596b011443049fa85ecee89c330e(String), 2020-06-15 16:52:18.824(Timestamp), 31011310200312009116(String), fd711d1c91624b46b7ecb8bf2aa6efe0(String), 2020-06-15 16:52:18.824(Timestamp) 
2020-06-15 16:52:18.897 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 13 
2020-06-15 16:52:22.193 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-15 16:52:22.194 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-15 16:52:22.201 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-15 16:52:22.207 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-15 16:52:22.208 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-15 16:52:22.214 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-15 16:52:22.220 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-15 16:52:22.221 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-15 16:52:22.232 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-15 16:52:22.238 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-15 16:52:22.239 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-15 16:52:22.244 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-15 16:52:22.250 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t2.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-15 16:52:22.251 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-15 16:52:22.259 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-15 16:52:22.263 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-15 16:52:22.264 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-15 16:52:22.264 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-15 16:52:22.265 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-15 16:52:22.269 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-15 16:52:22.309 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-15 16:52:22.309 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-15 16:52:22.321 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-15 16:52:22.328 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-15 16:52:22.329 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-15 16:52:22.333 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-15 16:52:22.338 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t2.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-15 16:52:22.339 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-15 16:52:22.353 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 3 
2020-06-15 16:52:22.358 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-15 16:52:22.358 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 3 
2020-06-15 16:52:22.359 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-15 16:52:22.359 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-15 16:52:22.363 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-15 16:52:22.368 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-15 16:52:22.368 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-15 16:52:22.372 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-15 16:52:22.377 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-15 16:52:22.377 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-15 16:52:22.384 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-15 16:52:22.388 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-15 16:52:22.389 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190401596084000(String) 
2020-06-15 16:52:22.393 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-15 16:52:22.397 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-15 16:52:22.398 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190401596084000(String) 
2020-06-15 16:52:22.402 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-15 16:52:22.407 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-15 16:52:22.407 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-15 16:52:22.411 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-15 16:52:22.416 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-15 16:52:22.417 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190408596837900(String) 
2020-06-15 16:52:22.421 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-15 16:52:22.425 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-15 16:52:22.426 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190408596837900(String) 
2020-06-15 16:52:22.430 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-15 16:52:22.435 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-15 16:52:22.435 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-15 16:52:22.440 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-15 16:52:22.444 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-15 16:52:22.445 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-15 16:52:22.449 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-15 16:52:22.491 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:个人基本信息表既往史建档前与三级医院住院就诊记录诊断逻辑不符（恶性肿瘤） 
2020-06-15 16:52:22.506 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:个人基本信息表既往史建档前与三级医院住院就诊记录诊断逻辑不符（严重精神障碍） 
2020-06-15 16:52:22.510 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:与三级医院住院就诊记录表姓名不一致同时满足以下条件： 1、封面《姓名》不为空值 2、三级医院住院就诊记录表《患者姓名》不为空 3、封面《姓名》与住院就诊记录表中《患者姓名》不相等 
2020-06-15 16:52:22.510 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:与三级医院门诊就诊记录表姓名不一致同时满足以下条件： 1、封面《姓名》不为空值 2、三级医院门诊就诊记录表《患者姓名》不为空 3、封面《姓名》与门诊就诊记录表中《患者姓名》不相等 
2020-06-15 16:52:22.512 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:个人基本信息表既往史建档前与三级医院住院就诊记录诊断逻辑不符（脑卒中） 
2020-06-15 16:52:22.519 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:个人基本信息表既往史建档前与三级医院住院就诊记录诊断逻辑不符（冠心病） 
2020-06-15 16:52:22.520 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:个人基本信息表既往史建档前与三级医院住院就诊记录诊断逻辑不符（慢性阻塞性肺疾病） 
2020-06-15 16:52:22.521 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:姓名长度异常长度>50字符 
2020-06-15 16:52:22.530 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:个人基本信息表既往史建档前与三级医院住院就诊记录诊断逻辑不符（糖尿病） 
2020-06-15 16:52:22.531 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:联系电话不为纯数字同时满足以下条件： 1、联系电话不为空值 2、联系电话不是纯数字 
2020-06-15 16:52:22.533 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:个人基本信息表既往史建档前与三级医院住院就诊记录诊断逻辑不符（高血压） 
2020-06-15 16:52:22.534 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:个人基本信息表既往史建档前与三级医院住院就诊记录诊断逻辑不符（糖尿病） 
2020-06-15 16:52:22.535 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:个人基本信息表既往史建档前与三级医院住院就诊记录诊断逻辑不符（结核病） 
2020-06-15 16:52:22.535 [INFO ] c.b.r.m.m.service.impl.EhrModelBuildServiceImpl    - [saveResult:158] 规则执行结束结果条数为:13 
2020-06-15 16:52:22.543 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-15 16:52:22.547 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 4148ac732c724fc7b87f96a04079d821(String), 2020-06-15 16:52:22.536(Timestamp), 31011310200312009116(String), 72de975121d24cd3bbdfd8324ae36aba(String), 2020-06-15 16:52:22.536(Timestamp), 31011310200312009116(String), 814b3d0aca3642af82ef320f98d4dfba(String), 2020-06-15 16:52:22.536(Timestamp), 31011310200312009116(String), 847bc4b46918417dab4aa917af3355c3(String), 2020-06-15 16:52:22.536(Timestamp), 31011310200312009116(String), 9c830141ce3e4854847cc2b52c46aa60(String), 2020-06-15 16:52:22.536(Timestamp), 31011310200312009116(String), b0789ee1f8404172941794b5431fd75d(String), 2020-06-15 16:52:22.536(Timestamp), 31011310200312009116(String), b46c567e4517456798ca3a5b0f34863d(String), 2020-06-15 16:52:22.536(Timestamp), 31011310200312009116(String), b8eeb38e528544b28133b9ee94c5fbc4(String), 2020-06-15 16:52:22.536(Timestamp), 31011310200312009116(String), c8e65283e6a243a5a1b89ae2117b6479(String), 2020-06-15 16:52:22.536(Timestamp), 31011310200312009116(String), db6607db218b4182924b980ecb900b19(String), 2020-06-15 16:52:22.536(Timestamp), 31011310200312009116(String), f14d68452e254abd9a4cb294ffda7da8(String), 2020-06-15 16:52:22.536(Timestamp), 31011310200312009116(String), f3e5596b011443049fa85ecee89c330e(String), 2020-06-15 16:52:22.536(Timestamp), 31011310200312009116(String), fd711d1c91624b46b7ecb8bf2aa6efe0(String), 2020-06-15 16:52:22.536(Timestamp) 
2020-06-15 16:52:22.571 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 13 
2020-06-15 16:52:34.976 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-15 16:52:34.977 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-15 16:52:34.982 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-15 16:52:34.987 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-15 16:52:34.988 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-15 16:52:34.995 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-15 16:52:35.001 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-15 16:52:35.002 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-15 16:52:35.008 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-15 16:52:35.013 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-15 16:52:35.014 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-15 16:52:35.018 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-15 16:52:35.023 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t2.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-15 16:52:35.024 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-15 16:52:35.030 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-15 16:52:35.035 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-15 16:52:35.035 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-15 16:52:35.036 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-15 16:52:35.036 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-15 16:52:35.041 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-15 16:52:35.046 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-15 16:52:35.046 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-15 16:52:35.050 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-15 16:52:35.054 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-15 16:52:35.055 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-15 16:52:35.060 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-15 16:52:35.066 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t2.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-15 16:52:35.067 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-15 16:52:35.081 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 3 
2020-06-15 16:52:35.085 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-15 16:52:35.086 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 3 
2020-06-15 16:52:35.086 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-15 16:52:35.086 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-15 16:52:35.091 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-15 16:52:35.095 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-15 16:52:35.096 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-15 16:52:35.100 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-15 16:52:35.105 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-15 16:52:35.106 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-15 16:52:35.109 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-15 16:52:35.114 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-15 16:52:35.115 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190401596084000(String) 
2020-06-15 16:52:35.119 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-15 16:52:35.124 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-15 16:52:35.124 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190401596084000(String) 
2020-06-15 16:52:35.129 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-15 16:52:35.134 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-15 16:52:35.134 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-15 16:52:35.139 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-15 16:52:35.143 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-15 16:52:35.144 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190408596837900(String) 
2020-06-15 16:52:35.149 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-15 16:52:35.154 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-15 16:52:35.155 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190408596837900(String) 
2020-06-15 16:52:35.161 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-15 16:52:35.166 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-15 16:52:35.166 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-15 16:52:35.172 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-15 16:52:35.177 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-15 16:52:35.178 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-15 16:52:35.183 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-15 16:52:35.224 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:个人基本信息表既往史建档前与三级医院住院就诊记录诊断逻辑不符（恶性肿瘤） 
2020-06-15 16:52:35.226 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:个人基本信息表既往史建档前与三级医院住院就诊记录诊断逻辑不符（严重精神障碍） 
2020-06-15 16:52:35.227 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:与三级医院住院就诊记录表姓名不一致同时满足以下条件： 1、封面《姓名》不为空值 2、三级医院住院就诊记录表《患者姓名》不为空 3、封面《姓名》与住院就诊记录表中《患者姓名》不相等 
2020-06-15 16:52:35.227 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:与三级医院门诊就诊记录表姓名不一致同时满足以下条件： 1、封面《姓名》不为空值 2、三级医院门诊就诊记录表《患者姓名》不为空 3、封面《姓名》与门诊就诊记录表中《患者姓名》不相等 
2020-06-15 16:52:35.239 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:个人基本信息表既往史建档前与三级医院住院就诊记录诊断逻辑不符（脑卒中） 
2020-06-15 16:52:35.240 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:个人基本信息表既往史建档前与三级医院住院就诊记录诊断逻辑不符（冠心病） 
2020-06-15 16:52:35.241 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:现住址未填写同时满足以下条件： 1、现住址中的省、市、区都为空值 2、现住址中的详细地址为空值 
2020-06-15 16:52:35.241 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:个人基本信息表既往史建档前与三级医院住院就诊记录诊断逻辑不符（慢性阻塞性肺疾病） 
2020-06-15 16:52:35.244 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:个人基本信息表既往史建档前与三级医院住院就诊记录诊断逻辑不符（糖尿病） 
2020-06-15 16:52:35.247 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:联系电话不为纯数字同时满足以下条件： 1、联系电话不为空值 2、联系电话不是纯数字 
2020-06-15 16:52:35.249 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:个人基本信息表既往史建档前与三级医院住院就诊记录诊断逻辑不符（高血压） 
2020-06-15 16:52:35.250 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:个人基本信息表既往史建档前与三级医院住院就诊记录诊断逻辑不符（糖尿病） 
2020-06-15 16:52:35.251 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:个人基本信息表既往史建档前与三级医院住院就诊记录诊断逻辑不符（结核病） 
2020-06-15 16:52:35.251 [INFO ] c.b.r.m.m.service.impl.EhrModelBuildServiceImpl    - [saveResult:158] 规则执行结束结果条数为:13 
2020-06-15 16:52:35.253 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-15 16:52:35.254 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 4148ac732c724fc7b87f96a04079d821(String), 2020-06-15 16:52:35.251(Timestamp), 31011310200312009116(String), 72de975121d24cd3bbdfd8324ae36aba(String), 2020-06-15 16:52:35.251(Timestamp), 31011310200312009116(String), 814b3d0aca3642af82ef320f98d4dfba(String), 2020-06-15 16:52:35.251(Timestamp), 31011310200312009116(String), 847bc4b46918417dab4aa917af3355c3(String), 2020-06-15 16:52:35.251(Timestamp), 31011310200312009116(String), 9c830141ce3e4854847cc2b52c46aa60(String), 2020-06-15 16:52:35.251(Timestamp), 31011310200312009116(String), b0789ee1f8404172941794b5431fd75d(String), 2020-06-15 16:52:35.251(Timestamp), 31011310200312009116(String), b3bb8566dc154106b6a400f40a0fe914(String), 2020-06-15 16:52:35.251(Timestamp), 31011310200312009116(String), b46c567e4517456798ca3a5b0f34863d(String), 2020-06-15 16:52:35.251(Timestamp), 31011310200312009116(String), c8e65283e6a243a5a1b89ae2117b6479(String), 2020-06-15 16:52:35.251(Timestamp), 31011310200312009116(String), db6607db218b4182924b980ecb900b19(String), 2020-06-15 16:52:35.251(Timestamp), 31011310200312009116(String), f14d68452e254abd9a4cb294ffda7da8(String), 2020-06-15 16:52:35.251(Timestamp), 31011310200312009116(String), f3e5596b011443049fa85ecee89c330e(String), 2020-06-15 16:52:35.251(Timestamp), 31011310200312009116(String), fd711d1c91624b46b7ecb8bf2aa6efe0(String), 2020-06-15 16:52:35.251(Timestamp) 
2020-06-15 16:52:35.295 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 13 
2020-06-15 16:52:38.993 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-15 16:52:38.993 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-15 16:52:38.999 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-15 16:52:39.004 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-15 16:52:39.004 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-15 16:52:39.010 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-15 16:52:39.016 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-15 16:52:39.016 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-15 16:52:39.022 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-15 16:52:39.028 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-15 16:52:39.029 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-15 16:52:39.033 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-15 16:52:39.038 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t2.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-15 16:52:39.038 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-15 16:52:39.043 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-15 16:52:39.049 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-15 16:52:39.049 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-15 16:52:39.049 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-15 16:52:39.049 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-15 16:52:39.055 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-15 16:52:39.059 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-15 16:52:39.059 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-15 16:52:39.064 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-15 16:52:39.068 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-15 16:52:39.069 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-15 16:52:39.074 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-15 16:52:39.079 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t2.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-15 16:52:39.080 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-15 16:52:39.094 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 3 
2020-06-15 16:52:39.099 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-15 16:52:39.099 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 3 
2020-06-15 16:52:39.099 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-15 16:52:39.099 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-15 16:52:39.103 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-15 16:52:39.109 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-15 16:52:39.110 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-15 16:52:39.115 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-15 16:52:39.121 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-15 16:52:39.121 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-15 16:52:39.131 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-15 16:52:39.135 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-15 16:52:39.136 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190401596084000(String) 
2020-06-15 16:52:39.141 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-15 16:52:39.145 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-15 16:52:39.146 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190401596084000(String) 
2020-06-15 16:52:39.150 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-15 16:52:39.155 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-15 16:52:39.155 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-15 16:52:39.160 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-15 16:52:39.166 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-15 16:52:39.166 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190408596837900(String) 
2020-06-15 16:52:39.170 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-15 16:52:39.174 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-15 16:52:39.175 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190408596837900(String) 
2020-06-15 16:52:39.179 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-15 16:52:39.184 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-15 16:52:39.185 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-15 16:52:39.190 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-15 16:52:39.195 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-15 16:52:39.195 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-15 16:52:39.201 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-15 16:52:39.227 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:个人基本信息表既往史建档前与三级医院住院就诊记录诊断逻辑不符（恶性肿瘤） 
2020-06-15 16:52:39.229 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:个人基本信息表既往史建档前与三级医院住院就诊记录诊断逻辑不符（严重精神障碍） 
2020-06-15 16:52:39.230 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:与三级医院住院就诊记录表姓名不一致同时满足以下条件： 1、封面《姓名》不为空值 2、三级医院住院就诊记录表《患者姓名》不为空 3、封面《姓名》与住院就诊记录表中《患者姓名》不相等 
2020-06-15 16:52:39.231 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:与三级医院门诊就诊记录表姓名不一致同时满足以下条件： 1、封面《姓名》不为空值 2、三级医院门诊就诊记录表《患者姓名》不为空 3、封面《姓名》与门诊就诊记录表中《患者姓名》不相等 
2020-06-15 16:52:39.232 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:现住址长度异常长度>100字符（包含省市区、乡镇街道名称（如有）、村居委会名称（如有）、详细地址） 
2020-06-15 16:52:39.233 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:个人基本信息表既往史建档前与三级医院住院就诊记录诊断逻辑不符（脑卒中） 
2020-06-15 16:52:39.234 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:个人基本信息表既往史建档前与三级医院住院就诊记录诊断逻辑不符（冠心病） 
2020-06-15 16:52:39.235 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:个人基本信息表既往史建档前与三级医院住院就诊记录诊断逻辑不符（慢性阻塞性肺疾病） 
2020-06-15 16:52:39.236 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:个人基本信息表既往史建档前与三级医院住院就诊记录诊断逻辑不符（糖尿病） 
2020-06-15 16:52:39.237 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:联系电话不为纯数字同时满足以下条件： 1、联系电话不为空值 2、联系电话不是纯数字 
2020-06-15 16:52:39.239 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:个人基本信息表既往史建档前与三级医院住院就诊记录诊断逻辑不符（高血压） 
2020-06-15 16:52:39.240 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:个人基本信息表既往史建档前与三级医院住院就诊记录诊断逻辑不符（糖尿病） 
2020-06-15 16:52:39.241 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:个人基本信息表既往史建档前与三级医院住院就诊记录诊断逻辑不符（结核病） 
2020-06-15 16:52:39.242 [INFO ] c.b.r.m.m.service.impl.EhrModelBuildServiceImpl    - [saveResult:158] 规则执行结束结果条数为:13 
2020-06-15 16:52:39.243 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-15 16:52:39.244 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 4148ac732c724fc7b87f96a04079d821(String), 2020-06-15 16:52:39.242(Timestamp), 31011310200312009116(String), 72de975121d24cd3bbdfd8324ae36aba(String), 2020-06-15 16:52:39.242(Timestamp), 31011310200312009116(String), 814b3d0aca3642af82ef320f98d4dfba(String), 2020-06-15 16:52:39.242(Timestamp), 31011310200312009116(String), 847bc4b46918417dab4aa917af3355c3(String), 2020-06-15 16:52:39.242(Timestamp), 31011310200312009116(String), 91665e0b2efa4f86aea807ec9f4883c3(String), 2020-06-15 16:52:39.242(Timestamp), 31011310200312009116(String), 9c830141ce3e4854847cc2b52c46aa60(String), 2020-06-15 16:52:39.242(Timestamp), 31011310200312009116(String), b0789ee1f8404172941794b5431fd75d(String), 2020-06-15 16:52:39.242(Timestamp), 31011310200312009116(String), b46c567e4517456798ca3a5b0f34863d(String), 2020-06-15 16:52:39.242(Timestamp), 31011310200312009116(String), c8e65283e6a243a5a1b89ae2117b6479(String), 2020-06-15 16:52:39.242(Timestamp), 31011310200312009116(String), db6607db218b4182924b980ecb900b19(String), 2020-06-15 16:52:39.242(Timestamp), 31011310200312009116(String), f14d68452e254abd9a4cb294ffda7da8(String), 2020-06-15 16:52:39.242(Timestamp), 31011310200312009116(String), f3e5596b011443049fa85ecee89c330e(String), 2020-06-15 16:52:39.242(Timestamp), 31011310200312009116(String), fd711d1c91624b46b7ecb8bf2aa6efe0(String), 2020-06-15 16:52:39.242(Timestamp) 
2020-06-15 16:52:39.279 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 13 
2020-06-15 16:52:43.938 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-15 16:52:43.938 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-15 16:52:43.947 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-15 16:52:43.956 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-15 16:52:43.957 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-15 16:52:43.964 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-15 16:52:43.969 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-15 16:52:43.969 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-15 16:52:43.975 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-15 16:52:43.979 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-15 16:52:43.980 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-15 16:52:43.984 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-15 16:52:43.989 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t2.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-15 16:52:43.989 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-15 16:52:43.995 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-15 16:52:43.999 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-15 16:52:43.999 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-15 16:52:44.000 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-15 16:52:44.000 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-15 16:52:44.005 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-15 16:52:44.009 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-15 16:52:44.010 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-15 16:52:44.016 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-15 16:52:44.021 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-15 16:52:44.021 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-15 16:52:44.026 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-15 16:52:44.030 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t2.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-15 16:52:44.031 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-15 16:52:44.045 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 3 
2020-06-15 16:52:44.049 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-15 16:52:44.049 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 3 
2020-06-15 16:52:44.050 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-15 16:52:44.051 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-15 16:52:44.056 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-15 16:52:44.060 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-15 16:52:44.061 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-15 16:52:44.064 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-15 16:52:44.069 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-15 16:52:44.070 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-15 16:52:44.075 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-15 16:52:44.079 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-15 16:52:44.079 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190401596084000(String) 
2020-06-15 16:52:44.084 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-15 16:52:44.088 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-15 16:52:44.089 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190401596084000(String) 
2020-06-15 16:52:44.093 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-15 16:52:44.098 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-15 16:52:44.098 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-15 16:52:44.104 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-15 16:52:44.108 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-15 16:52:44.108 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190408596837900(String) 
2020-06-15 16:52:44.113 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-15 16:52:44.117 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-15 16:52:44.118 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190408596837900(String) 
2020-06-15 16:52:44.123 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-15 16:52:44.128 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-15 16:52:44.128 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-15 16:52:44.132 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-15 16:52:44.138 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-15 16:52:44.138 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-15 16:52:44.143 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-15 16:52:44.160 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:个人基本信息表既往史建档前与三级医院住院就诊记录诊断逻辑不符（恶性肿瘤） 
2020-06-15 16:52:44.162 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:个人基本信息表既往史建档前与三级医院住院就诊记录诊断逻辑不符（严重精神障碍） 
2020-06-15 16:52:44.163 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:与三级医院住院就诊记录表姓名不一致同时满足以下条件： 1、封面《姓名》不为空值 2、三级医院住院就诊记录表《患者姓名》不为空 3、封面《姓名》与住院就诊记录表中《患者姓名》不相等 
2020-06-15 16:52:44.164 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:与三级医院门诊就诊记录表姓名不一致同时满足以下条件： 1、封面《姓名》不为空值 2、三级医院门诊就诊记录表《患者姓名》不为空 3、封面《姓名》与门诊就诊记录表中《患者姓名》不相等 
2020-06-15 16:52:44.170 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:个人基本信息表既往史建档前与三级医院住院就诊记录诊断逻辑不符（脑卒中） 
2020-06-15 16:52:44.173 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:个人基本信息表既往史建档前与三级医院住院就诊记录诊断逻辑不符（冠心病） 
2020-06-15 16:52:44.173 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:个人基本信息表既往史建档前与三级医院住院就诊记录诊断逻辑不符（慢性阻塞性肺疾病） 
2020-06-15 16:52:44.174 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:个人基本信息表既往史建档前与三级医院住院就诊记录诊断逻辑不符（糖尿病） 
2020-06-15 16:52:44.175 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:联系电话不为纯数字同时满足以下条件： 1、联系电话不为空值 2、联系电话不是纯数字 
2020-06-15 16:52:44.175 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:个人基本信息表既往史建档前与三级医院住院就诊记录诊断逻辑不符（高血压） 
2020-06-15 16:52:44.176 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:个人基本信息表既往史建档前与三级医院住院就诊记录诊断逻辑不符（糖尿病） 
2020-06-15 16:52:44.176 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:个人基本信息表既往史建档前与三级医院住院就诊记录诊断逻辑不符（结核病） 
2020-06-15 16:52:44.177 [INFO ] c.b.r.m.m.service.impl.EhrModelBuildServiceImpl    - [saveResult:158] 规则执行结束结果条数为:12 
2020-06-15 16:52:44.178 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-15 16:52:44.178 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 4148ac732c724fc7b87f96a04079d821(String), 2020-06-15 16:52:44.177(Timestamp), 31011310200312009116(String), 72de975121d24cd3bbdfd8324ae36aba(String), 2020-06-15 16:52:44.177(Timestamp), 31011310200312009116(String), 814b3d0aca3642af82ef320f98d4dfba(String), 2020-06-15 16:52:44.177(Timestamp), 31011310200312009116(String), 847bc4b46918417dab4aa917af3355c3(String), 2020-06-15 16:52:44.177(Timestamp), 31011310200312009116(String), 9c830141ce3e4854847cc2b52c46aa60(String), 2020-06-15 16:52:44.177(Timestamp), 31011310200312009116(String), b0789ee1f8404172941794b5431fd75d(String), 2020-06-15 16:52:44.177(Timestamp), 31011310200312009116(String), b46c567e4517456798ca3a5b0f34863d(String), 2020-06-15 16:52:44.177(Timestamp), 31011310200312009116(String), c8e65283e6a243a5a1b89ae2117b6479(String), 2020-06-15 16:52:44.177(Timestamp), 31011310200312009116(String), db6607db218b4182924b980ecb900b19(String), 2020-06-15 16:52:44.177(Timestamp), 31011310200312009116(String), f14d68452e254abd9a4cb294ffda7da8(String), 2020-06-15 16:52:44.177(Timestamp), 31011310200312009116(String), f3e5596b011443049fa85ecee89c330e(String), 2020-06-15 16:52:44.177(Timestamp), 31011310200312009116(String), fd711d1c91624b46b7ecb8bf2aa6efe0(String), 2020-06-15 16:52:44.177(Timestamp) 
2020-06-15 16:52:44.200 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 12 
2020-06-15 16:52:47.910 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-15 16:52:47.910 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-15 16:52:47.923 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-15 16:52:47.926 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-15 16:52:47.927 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-15 16:52:47.931 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-15 16:52:47.935 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-15 16:52:47.936 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-15 16:52:47.941 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-15 16:52:47.945 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-15 16:52:47.946 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-15 16:52:47.950 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-15 16:52:47.954 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t2.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-15 16:52:47.955 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-15 16:52:47.964 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-15 16:52:47.968 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-15 16:52:47.968 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-15 16:52:47.968 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-15 16:52:47.969 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-15 16:52:47.973 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-15 16:52:47.977 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-15 16:52:47.978 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-15 16:52:47.982 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-15 16:52:47.986 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-15 16:52:47.987 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-15 16:52:47.991 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-15 16:52:47.995 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t2.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-15 16:52:47.996 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-15 16:52:48.010 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 3 
2020-06-15 16:52:48.015 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-15 16:52:48.015 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 3 
2020-06-15 16:52:48.016 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-15 16:52:48.016 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-15 16:52:48.020 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-15 16:52:48.025 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-15 16:52:48.025 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-15 16:52:48.029 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-15 16:52:48.032 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-15 16:52:48.032 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-15 16:52:48.038 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-15 16:52:48.042 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-15 16:52:48.043 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190401596084000(String) 
2020-06-15 16:52:48.047 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-15 16:52:48.052 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-15 16:52:48.052 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190401596084000(String) 
2020-06-15 16:52:48.057 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-15 16:52:48.061 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-15 16:52:48.061 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-15 16:52:48.065 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-15 16:52:48.070 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-15 16:52:48.070 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190408596837900(String) 
2020-06-15 16:52:48.074 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-15 16:52:48.079 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-15 16:52:48.079 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190408596837900(String) 
2020-06-15 16:52:48.083 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-15 16:52:48.087 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-15 16:52:48.088 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-15 16:52:48.092 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-15 16:52:48.096 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-15 16:52:48.097 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-15 16:52:48.101 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-15 16:52:48.114 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:户籍地址长度异常长度>100字符（包含省市区、乡镇街道名称（如有）、村居委会名称（如有）、详细地址） 
2020-06-15 16:52:48.115 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:个人基本信息表既往史建档前与三级医院住院就诊记录诊断逻辑不符（恶性肿瘤） 
2020-06-15 16:52:48.117 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:个人基本信息表既往史建档前与三级医院住院就诊记录诊断逻辑不符（严重精神障碍） 
2020-06-15 16:52:48.118 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:与三级医院住院就诊记录表姓名不一致同时满足以下条件： 1、封面《姓名》不为空值 2、三级医院住院就诊记录表《患者姓名》不为空 3、封面《姓名》与住院就诊记录表中《患者姓名》不相等 
2020-06-15 16:52:48.118 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:与三级医院门诊就诊记录表姓名不一致同时满足以下条件： 1、封面《姓名》不为空值 2、三级医院门诊就诊记录表《患者姓名》不为空 3、封面《姓名》与门诊就诊记录表中《患者姓名》不相等 
2020-06-15 16:52:48.119 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:个人基本信息表既往史建档前与三级医院住院就诊记录诊断逻辑不符（脑卒中） 
2020-06-15 16:52:48.121 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:个人基本信息表既往史建档前与三级医院住院就诊记录诊断逻辑不符（冠心病） 
2020-06-15 16:52:48.121 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:个人基本信息表既往史建档前与三级医院住院就诊记录诊断逻辑不符（慢性阻塞性肺疾病） 
2020-06-15 16:52:48.122 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:个人基本信息表既往史建档前与三级医院住院就诊记录诊断逻辑不符（糖尿病） 
2020-06-15 16:52:48.123 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:联系电话不为纯数字同时满足以下条件： 1、联系电话不为空值 2、联系电话不是纯数字 
2020-06-15 16:52:48.124 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:个人基本信息表既往史建档前与三级医院住院就诊记录诊断逻辑不符（高血压） 
2020-06-15 16:52:48.124 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:个人基本信息表既往史建档前与三级医院住院就诊记录诊断逻辑不符（糖尿病） 
2020-06-15 16:52:48.125 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:个人基本信息表既往史建档前与三级医院住院就诊记录诊断逻辑不符（结核病） 
2020-06-15 16:52:48.125 [INFO ] c.b.r.m.m.service.impl.EhrModelBuildServiceImpl    - [saveResult:158] 规则执行结束结果条数为:13 
2020-06-15 16:52:48.126 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-15 16:52:48.126 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 329b69c7855544e986fc0073b77fe9be(String), 2020-06-15 16:52:48.125(Timestamp), 31011310200312009116(String), 4148ac732c724fc7b87f96a04079d821(String), 2020-06-15 16:52:48.125(Timestamp), 31011310200312009116(String), 72de975121d24cd3bbdfd8324ae36aba(String), 2020-06-15 16:52:48.125(Timestamp), 31011310200312009116(String), 814b3d0aca3642af82ef320f98d4dfba(String), 2020-06-15 16:52:48.125(Timestamp), 31011310200312009116(String), 847bc4b46918417dab4aa917af3355c3(String), 2020-06-15 16:52:48.125(Timestamp), 31011310200312009116(String), 9c830141ce3e4854847cc2b52c46aa60(String), 2020-06-15 16:52:48.125(Timestamp), 31011310200312009116(String), b0789ee1f8404172941794b5431fd75d(String), 2020-06-15 16:52:48.125(Timestamp), 31011310200312009116(String), b46c567e4517456798ca3a5b0f34863d(String), 2020-06-15 16:52:48.125(Timestamp), 31011310200312009116(String), c8e65283e6a243a5a1b89ae2117b6479(String), 2020-06-15 16:52:48.125(Timestamp), 31011310200312009116(String), db6607db218b4182924b980ecb900b19(String), 2020-06-15 16:52:48.125(Timestamp), 31011310200312009116(String), f14d68452e254abd9a4cb294ffda7da8(String), 2020-06-15 16:52:48.125(Timestamp), 31011310200312009116(String), f3e5596b011443049fa85ecee89c330e(String), 2020-06-15 16:52:48.125(Timestamp), 31011310200312009116(String), fd711d1c91624b46b7ecb8bf2aa6efe0(String), 2020-06-15 16:52:48.125(Timestamp) 
2020-06-15 16:52:48.153 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 13 
2020-06-15 16:55:47.460 [INFO ] com.benetech.rules.RulesApplication                - [logStarting:55] Starting RulesApplication v1.0-SNAPSHOT on DESKTOP-EOCO1V0 with PID 10936 (D:\51\python\project\instance\zyjk\EHR\controlRuleNew\config\healthRecordRules.jar started by ZY in D:\51\python\project\instance\zyjk\EHR\controlRuleNew) 
2020-06-15 16:55:47.463 [DEBUG] com.benetech.rules.RulesApplication                - [logStarting:56] Running with Spring Boot v2.2.1.RELEASE, Spring v5.2.1.RELEASE 
2020-06-15 16:55:47.463 [INFO ] com.benetech.rules.RulesApplication                - [logStartupProfileInfo:655] The following profiles are active: test 
2020-06-15 16:55:48.918 [INFO ] o.s.boot.web.embedded.tomcat.TomcatWebServer       - [initialize:92] Tomcat initialized with port(s): 8838 (http) 
2020-06-15 16:55:48.929 [INFO ] org.apache.coyote.http11.Http11NioProtocol         - [log:173] Initializing ProtocolHandler ["http-nio-8838"] 
2020-06-15 16:55:48.930 [INFO ] org.apache.catalina.core.StandardService           - [log:173] Starting service [Tomcat] 
2020-06-15 16:55:48.930 [INFO ] org.apache.catalina.core.StandardEngine            - [log:173] Starting Servlet engine: [Apache Tomcat/9.0.27] 
2020-06-15 16:55:48.993 [INFO ] o.a.c.c.C.[.[localhost].[/healthRecordRules]       - [log:173] Initializing Spring embedded WebApplicationContext 
2020-06-15 16:55:49.044 [INFO ] org.springframework.web.context.ContextLoader      - [prepareWebApplicationContext:284] Root WebApplicationContext: initialization completed in 1489 ms 
2020-06-15 16:55:49.156 [DEBUG] org.apache.ibatis.logging.LogFactory               - [setImplementation:135] Logging initialized using 'class org.apache.ibatis.logging.slf4j.Slf4jImpl' adapter. 
2020-06-15 16:55:49.420 [WARN ] org.mybatis.spring.SqlSessionFactoryBean           - [buildSqlSessionFactory:467] Can't find class in '[com.benetech.rules.*.entity]' package. Please check your configuration. 
2020-06-15 16:55:50.047 [INFO ] com.alibaba.druid.pool.DruidDataSource             - [init:930] {dataSource-1} inited 
2020-06-15 16:55:50.244 [DEBUG] c.b.r.m.e.mapper.RuleEngineMapper.getAllRules      - [debug:159] ==>  Preparing: select a.RuleId as ruleId, a.RuleSql as clazz from HrRule a join HrRuleProps b on a.RuleId = b.RuleId where -- RuleId in ('34278f71cf1d42c88158aaf637fa5203', '8d30baa03bfc4233a8f115c57a0ebf08', '63eb82a44bf64c96a0b9023fa2a3c9d9') a.RuleSql != '' and a.RuleSql is not null and b.Enable = 1  
2020-06-15 16:55:50.263 [DEBUG] c.b.r.m.e.mapper.RuleEngineMapper.getAllRules      - [debug:159] ==> Parameters:  
2020-06-15 16:55:50.344 [DEBUG] c.b.r.m.e.mapper.RuleEngineMapper.getAllRules      - [debug:159] <==      Total: 310 
2020-06-15 16:55:50.564 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [init:64] 加载规则：310 条 
2020-06-15 16:55:50.581 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.getAllCode    - [debug:159] ==>  Preparing: SELECT codeSysType AS type, code AS code, [value] AS value FROM tb_code_value WHERE code != '' AND [value] != ''  
2020-06-15 16:55:50.581 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.getAllCode    - [debug:159] ==> Parameters:  
2020-06-15 16:55:50.943 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.getAllCode    - [debug:159] <==      Total: 44881 
2020-06-15 16:55:50.969 [INFO ] c.b.r.m.m.service.impl.EhrModelBuildServiceImpl    - [init:96] 初始化字典类型: 467 种 
2020-06-15 16:55:50.969 [INFO ] c.b.r.m.m.service.impl.EhrModelBuildServiceImpl    - [init:97] 初始化字典: 44881 条 
2020-06-15 16:55:51.098 [INFO ] o.s.scheduling.concurrent.ThreadPoolTaskExecutor   - [initialize:171] Initializing ExecutorService 'applicationTaskExecutor' 
2020-06-15 16:55:51.319 [INFO ] org.apache.coyote.http11.Http11NioProtocol         - [log:173] Starting ProtocolHandler ["http-nio-8838"] 
2020-06-15 16:55:51.345 [INFO ] o.s.boot.web.embedded.tomcat.TomcatWebServer       - [start:204] Tomcat started on port(s): 8838 (http) with context path '/healthRecordRules' 
2020-06-15 16:55:51.348 [INFO ] com.benetech.rules.RulesApplication                - [logStarted:61] Started RulesApplication in 4.413 seconds (JVM running for 4.843) 
2020-06-15 16:55:51.349 [INFO ] com.benetech.rules.RulesApplication                - [main:20] -------------启动成功------------- 
2020-06-15 16:55:51.602 [INFO ] o.a.c.c.C.[.[localhost].[/healthRecordRules]       - [log:173] Initializing Spring DispatcherServlet 'dispatcherServlet' 
2020-06-15 16:55:51.602 [INFO ] org.springframework.web.servlet.DispatcherServlet  - [initServletBean:525] Initializing Servlet 'dispatcherServlet' 
2020-06-15 16:55:51.609 [INFO ] org.springframework.web.servlet.DispatcherServlet  - [initServletBean:547] Completed initialization in 7 ms 
2020-06-15 16:55:51.646 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-15 16:55:51.651 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-15 16:55:51.662 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-15 16:55:51.667 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-15 16:55:51.668 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-15 16:55:51.677 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-15 16:55:51.682 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-15 16:55:51.682 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-15 16:55:51.688 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-15 16:55:51.693 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-15 16:55:51.694 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-15 16:55:51.699 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-15 16:55:51.703 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t2.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-15 16:55:51.704 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-15 16:55:51.711 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-15 16:55:51.716 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-15 16:55:51.716 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-15 16:55:51.717 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-15 16:55:51.717 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-15 16:55:51.722 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-15 16:55:51.726 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-15 16:55:51.727 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-15 16:55:51.732 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-15 16:55:51.737 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-15 16:55:51.738 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-15 16:55:51.744 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-15 16:55:51.749 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t2.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-15 16:55:51.749 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-15 16:55:51.763 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 3 
2020-06-15 16:55:51.767 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-15 16:55:51.767 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 3 
2020-06-15 16:55:51.768 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-15 16:55:51.768 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-15 16:55:51.772 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-15 16:55:51.780 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-15 16:55:51.780 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-15 16:55:51.785 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-15 16:55:51.790 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-15 16:55:51.790 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-15 16:55:51.794 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-15 16:55:51.799 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-15 16:55:51.799 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190401596084000(String) 
2020-06-15 16:55:51.803 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-15 16:55:51.808 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-15 16:55:51.812 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190401596084000(String) 
2020-06-15 16:55:51.817 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-15 16:55:51.823 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-15 16:55:51.823 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-15 16:55:51.832 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-15 16:55:51.836 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-15 16:55:51.837 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190408596837900(String) 
2020-06-15 16:55:51.845 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-15 16:55:51.849 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-15 16:55:51.850 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190408596837900(String) 
2020-06-15 16:55:51.854 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-15 16:55:51.859 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-15 16:55:51.861 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-15 16:55:51.869 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-15 16:55:51.874 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-15 16:55:51.875 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-15 16:55:51.881 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-15 16:55:51.959 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:户籍地址长度异常长度>100字符（包含省市区、乡镇街道名称（如有）、村居委会名称（如有）、详细地址） 
2020-06-15 16:55:51.975 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:个人基本信息表既往史建档前与三级医院住院就诊记录诊断逻辑不符（恶性肿瘤） 
2020-06-15 16:55:51.978 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:姓名未填写姓名为空值 
2020-06-15 16:55:51.981 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:个人基本信息表既往史建档前与三级医院住院就诊记录诊断逻辑不符（严重精神障碍） 
2020-06-15 16:55:51.989 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:个人基本信息表既往史建档前与三级医院住院就诊记录诊断逻辑不符（脑卒中） 
2020-06-15 16:55:51.993 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:个人基本信息表既往史建档前与三级医院住院就诊记录诊断逻辑不符（冠心病） 
2020-06-15 16:55:51.995 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:个人基本信息表既往史建档前与三级医院住院就诊记录诊断逻辑不符（慢性阻塞性肺疾病） 
2020-06-15 16:55:52.004 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:个人基本信息表既往史建档前与三级医院住院就诊记录诊断逻辑不符（糖尿病） 
2020-06-15 16:55:52.008 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:联系电话不为纯数字同时满足以下条件： 1、联系电话不为空值 2、联系电话不是纯数字 
2020-06-15 16:55:52.011 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:个人基本信息表既往史建档前与三级医院住院就诊记录诊断逻辑不符（高血压） 
2020-06-15 16:55:52.012 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:个人基本信息表既往史建档前与三级医院住院就诊记录诊断逻辑不符（糖尿病） 
2020-06-15 16:55:52.021 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:个人基本信息表既往史建档前与三级医院住院就诊记录诊断逻辑不符（结核病） 
2020-06-15 16:55:52.022 [INFO ] c.b.r.m.m.service.impl.EhrModelBuildServiceImpl    - [saveResult:158] 规则执行结束结果条数为:12 
2020-06-15 16:55:52.049 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-15 16:55:52.050 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 329b69c7855544e986fc0073b77fe9be(String), 2020-06-15 16:55:52.022(Timestamp), 31011310200312009116(String), 4148ac732c724fc7b87f96a04079d821(String), 2020-06-15 16:55:52.022(Timestamp), 31011310200312009116(String), 63eb82a44bf64c96a0b9023fa2a3c9d9(String), 2020-06-15 16:55:52.022(Timestamp), 31011310200312009116(String), 72de975121d24cd3bbdfd8324ae36aba(String), 2020-06-15 16:55:52.022(Timestamp), 31011310200312009116(String), 9c830141ce3e4854847cc2b52c46aa60(String), 2020-06-15 16:55:52.022(Timestamp), 31011310200312009116(String), b0789ee1f8404172941794b5431fd75d(String), 2020-06-15 16:55:52.022(Timestamp), 31011310200312009116(String), b46c567e4517456798ca3a5b0f34863d(String), 2020-06-15 16:55:52.022(Timestamp), 31011310200312009116(String), c8e65283e6a243a5a1b89ae2117b6479(String), 2020-06-15 16:55:52.022(Timestamp), 31011310200312009116(String), db6607db218b4182924b980ecb900b19(String), 2020-06-15 16:55:52.022(Timestamp), 31011310200312009116(String), f14d68452e254abd9a4cb294ffda7da8(String), 2020-06-15 16:55:52.022(Timestamp), 31011310200312009116(String), f3e5596b011443049fa85ecee89c330e(String), 2020-06-15 16:55:52.022(Timestamp), 31011310200312009116(String), fd711d1c91624b46b7ecb8bf2aa6efe0(String), 2020-06-15 16:55:52.022(Timestamp) 
2020-06-15 16:55:52.076 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 12 
2020-06-15 16:55:55.398 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-15 16:55:55.399 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-15 16:55:55.405 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-15 16:55:55.409 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-15 16:55:55.410 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-15 16:55:55.416 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-15 16:55:55.422 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-15 16:55:55.422 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-15 16:55:55.429 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-15 16:55:55.434 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-15 16:55:55.434 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-15 16:55:55.439 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-15 16:55:55.444 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t2.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-15 16:55:55.444 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-15 16:55:55.458 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-15 16:55:55.463 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-15 16:55:55.463 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-15 16:55:55.464 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-15 16:55:55.464 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-15 16:55:55.469 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-15 16:55:55.474 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-15 16:55:55.475 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-15 16:55:55.479 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-15 16:55:55.483 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-15 16:55:55.484 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-15 16:55:55.489 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-15 16:55:55.494 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t2.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-15 16:55:55.495 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-15 16:55:55.509 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 3 
2020-06-15 16:55:55.514 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-15 16:55:55.514 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 3 
2020-06-15 16:55:55.515 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-15 16:55:55.515 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-15 16:55:55.520 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-15 16:55:55.525 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-15 16:55:55.526 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-15 16:55:55.530 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-15 16:55:55.534 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-15 16:55:55.535 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-15 16:55:55.539 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-15 16:55:55.543 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-15 16:55:55.543 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190401596084000(String) 
2020-06-15 16:55:55.547 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-15 16:55:55.552 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-15 16:55:55.552 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190401596084000(String) 
2020-06-15 16:55:55.556 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-15 16:55:55.561 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-15 16:55:55.562 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-15 16:55:55.567 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-15 16:55:55.571 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-15 16:55:55.572 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190408596837900(String) 
2020-06-15 16:55:55.576 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-15 16:55:55.581 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-15 16:55:55.581 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190408596837900(String) 
2020-06-15 16:55:55.586 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-15 16:55:55.590 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-15 16:55:55.591 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-15 16:55:55.595 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-15 16:55:55.601 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-15 16:55:55.601 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-15 16:55:55.606 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-15 16:55:55.651 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:户籍地址长度异常长度>100字符（包含省市区、乡镇街道名称（如有）、村居委会名称（如有）、详细地址） 
2020-06-15 16:55:55.653 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:个人基本信息表既往史建档前与三级医院住院就诊记录诊断逻辑不符（恶性肿瘤） 
2020-06-15 16:55:55.658 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:姓名填写不规范同时满足以下条件： 1、联系人姓名不为空值 2、联系人姓名为纯数字 
2020-06-15 16:55:55.660 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:个人基本信息表既往史建档前与三级医院住院就诊记录诊断逻辑不符（严重精神障碍） 
2020-06-15 16:55:55.662 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:与三级医院住院就诊记录表姓名不一致同时满足以下条件： 1、封面《姓名》不为空值 2、三级医院住院就诊记录表《患者姓名》不为空 3、封面《姓名》与住院就诊记录表中《患者姓名》不相等 
2020-06-15 16:55:55.662 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:与三级医院门诊就诊记录表姓名不一致同时满足以下条件： 1、封面《姓名》不为空值 2、三级医院门诊就诊记录表《患者姓名》不为空 3、封面《姓名》与门诊就诊记录表中《患者姓名》不相等 
2020-06-15 16:55:55.663 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:个人基本信息表既往史建档前与三级医院住院就诊记录诊断逻辑不符（脑卒中） 
2020-06-15 16:55:55.664 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:个人基本信息表既往史建档前与三级医院住院就诊记录诊断逻辑不符（冠心病） 
2020-06-15 16:55:55.665 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:个人基本信息表既往史建档前与三级医院住院就诊记录诊断逻辑不符（慢性阻塞性肺疾病） 
2020-06-15 16:55:55.666 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:个人基本信息表既往史建档前与三级医院住院就诊记录诊断逻辑不符（糖尿病） 
2020-06-15 16:55:55.667 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:联系电话不为纯数字同时满足以下条件： 1、联系电话不为空值 2、联系电话不是纯数字 
2020-06-15 16:55:55.669 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:个人基本信息表既往史建档前与三级医院住院就诊记录诊断逻辑不符（高血压） 
2020-06-15 16:55:55.670 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:个人基本信息表既往史建档前与三级医院住院就诊记录诊断逻辑不符（糖尿病） 
2020-06-15 16:55:55.670 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:个人基本信息表既往史建档前与三级医院住院就诊记录诊断逻辑不符（结核病） 
2020-06-15 16:55:55.671 [INFO ] c.b.r.m.m.service.impl.EhrModelBuildServiceImpl    - [saveResult:158] 规则执行结束结果条数为:14 
2020-06-15 16:55:55.672 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-15 16:55:55.674 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 329b69c7855544e986fc0073b77fe9be(String), 2020-06-15 16:55:55.671(Timestamp), 31011310200312009116(String), 4148ac732c724fc7b87f96a04079d821(String), 2020-06-15 16:55:55.671(Timestamp), 31011310200312009116(String), 61ed70b670f2460a94ebc183f6b86f5d(String), 2020-06-15 16:55:55.671(Timestamp), 31011310200312009116(String), 72de975121d24cd3bbdfd8324ae36aba(String), 2020-06-15 16:55:55.671(Timestamp), 31011310200312009116(String), 814b3d0aca3642af82ef320f98d4dfba(String), 2020-06-15 16:55:55.671(Timestamp), 31011310200312009116(String), 847bc4b46918417dab4aa917af3355c3(String), 2020-06-15 16:55:55.671(Timestamp), 31011310200312009116(String), 9c830141ce3e4854847cc2b52c46aa60(String), 2020-06-15 16:55:55.671(Timestamp), 31011310200312009116(String), b0789ee1f8404172941794b5431fd75d(String), 2020-06-15 16:55:55.671(Timestamp), 31011310200312009116(String), b46c567e4517456798ca3a5b0f34863d(String), 2020-06-15 16:55:55.671(Timestamp), 31011310200312009116(String), c8e65283e6a243a5a1b89ae2117b6479(String), 2020-06-15 16:55:55.671(Timestamp), 31011310200312009116(String), db6607db218b4182924b980ecb900b19(String), 2020-06-15 16:55:55.671(Timestamp), 31011310200312009116(String), f14d68452e254abd9a4cb294ffda7da8(String), 2020-06-15 16:55:55.671(Timestamp), 31011310200312009116(String), f3e5596b011443049fa85ecee89c330e(String), 2020-06-15 16:55:55.671(Timestamp), 31011310200312009116(String), fd711d1c91624b46b7ecb8bf2aa6efe0(String), 2020-06-15 16:55:55.671(Timestamp) 
2020-06-15 16:55:55.695 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 14 
2020-06-15 16:55:59.029 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-15 16:55:59.030 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-15 16:55:59.037 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-15 16:55:59.041 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-15 16:55:59.042 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-15 16:55:59.048 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-15 16:55:59.052 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-15 16:55:59.053 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-15 16:55:59.057 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-15 16:55:59.063 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-15 16:55:59.064 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-15 16:55:59.068 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-15 16:55:59.073 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t2.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-15 16:55:59.074 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-15 16:55:59.079 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-15 16:55:59.083 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-15 16:55:59.084 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-15 16:55:59.084 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-15 16:55:59.084 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-15 16:55:59.089 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-15 16:55:59.094 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-15 16:55:59.094 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-15 16:55:59.099 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-15 16:55:59.103 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-15 16:55:59.104 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-15 16:55:59.108 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-15 16:55:59.112 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t2.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-15 16:55:59.112 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-15 16:55:59.130 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 3 
2020-06-15 16:55:59.134 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-15 16:55:59.134 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 3 
2020-06-15 16:55:59.135 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-15 16:55:59.135 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-15 16:55:59.139 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-15 16:55:59.145 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-15 16:55:59.146 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-15 16:55:59.153 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-15 16:55:59.159 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-15 16:55:59.159 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-15 16:55:59.164 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-15 16:55:59.169 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-15 16:55:59.170 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190401596084000(String) 
2020-06-15 16:55:59.174 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-15 16:55:59.180 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-15 16:55:59.180 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190401596084000(String) 
2020-06-15 16:55:59.183 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-15 16:55:59.188 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-15 16:55:59.189 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-15 16:55:59.193 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-15 16:55:59.198 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-15 16:55:59.199 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190408596837900(String) 
2020-06-15 16:55:59.204 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-15 16:55:59.208 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-15 16:55:59.209 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190408596837900(String) 
2020-06-15 16:55:59.214 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-15 16:55:59.219 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-15 16:55:59.219 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-15 16:55:59.224 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-15 16:55:59.229 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-15 16:55:59.229 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-15 16:55:59.234 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-15 16:55:59.258 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:户籍地址长度异常长度>100字符（包含省市区、乡镇街道名称（如有）、村居委会名称（如有）、详细地址） 
2020-06-15 16:55:59.259 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:个人基本信息表既往史建档前与三级医院住院就诊记录诊断逻辑不符（恶性肿瘤） 
2020-06-15 16:55:59.267 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:个人基本信息表既往史建档前与三级医院住院就诊记录诊断逻辑不符（严重精神障碍） 
2020-06-15 16:55:59.268 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:与三级医院住院就诊记录表姓名不一致同时满足以下条件： 1、封面《姓名》不为空值 2、三级医院住院就诊记录表《患者姓名》不为空 3、封面《姓名》与住院就诊记录表中《患者姓名》不相等 
2020-06-15 16:55:59.268 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:与三级医院门诊就诊记录表姓名不一致同时满足以下条件： 1、封面《姓名》不为空值 2、三级医院门诊就诊记录表《患者姓名》不为空 3、封面《姓名》与门诊就诊记录表中《患者姓名》不相等 
2020-06-15 16:55:59.270 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:个人基本信息表既往史建档前与三级医院住院就诊记录诊断逻辑不符（脑卒中） 
2020-06-15 16:55:59.271 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:个人基本信息表既往史建档前与三级医院住院就诊记录诊断逻辑不符（冠心病） 
2020-06-15 16:55:59.271 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:个人基本信息表既往史建档前与三级医院住院就诊记录诊断逻辑不符（慢性阻塞性肺疾病） 
2020-06-15 16:55:59.277 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:姓名长度异常长度>50字符 
2020-06-15 16:55:59.278 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:个人基本信息表既往史建档前与三级医院住院就诊记录诊断逻辑不符（糖尿病） 
2020-06-15 16:55:59.279 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:联系电话不为纯数字同时满足以下条件： 1、联系电话不为空值 2、联系电话不是纯数字 
2020-06-15 16:55:59.280 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:个人基本信息表既往史建档前与三级医院住院就诊记录诊断逻辑不符（高血压） 
2020-06-15 16:55:59.280 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:个人基本信息表既往史建档前与三级医院住院就诊记录诊断逻辑不符（糖尿病） 
2020-06-15 16:55:59.281 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:个人基本信息表既往史建档前与三级医院住院就诊记录诊断逻辑不符（结核病） 
2020-06-15 16:55:59.281 [INFO ] c.b.r.m.m.service.impl.EhrModelBuildServiceImpl    - [saveResult:158] 规则执行结束结果条数为:14 
2020-06-15 16:55:59.282 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-15 16:55:59.283 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 329b69c7855544e986fc0073b77fe9be(String), 2020-06-15 16:55:59.281(Timestamp), 31011310200312009116(String), 4148ac732c724fc7b87f96a04079d821(String), 2020-06-15 16:55:59.281(Timestamp), 31011310200312009116(String), 72de975121d24cd3bbdfd8324ae36aba(String), 2020-06-15 16:55:59.281(Timestamp), 31011310200312009116(String), 814b3d0aca3642af82ef320f98d4dfba(String), 2020-06-15 16:55:59.281(Timestamp), 31011310200312009116(String), 847bc4b46918417dab4aa917af3355c3(String), 2020-06-15 16:55:59.281(Timestamp), 31011310200312009116(String), 9c830141ce3e4854847cc2b52c46aa60(String), 2020-06-15 16:55:59.281(Timestamp), 31011310200312009116(String), b0789ee1f8404172941794b5431fd75d(String), 2020-06-15 16:55:59.281(Timestamp), 31011310200312009116(String), b46c567e4517456798ca3a5b0f34863d(String), 2020-06-15 16:55:59.281(Timestamp), 31011310200312009116(String), b8eeb38e528544b28133b9ee94c5fbc4(String), 2020-06-15 16:55:59.281(Timestamp), 31011310200312009116(String), c8e65283e6a243a5a1b89ae2117b6479(String), 2020-06-15 16:55:59.281(Timestamp), 31011310200312009116(String), db6607db218b4182924b980ecb900b19(String), 2020-06-15 16:55:59.281(Timestamp), 31011310200312009116(String), f14d68452e254abd9a4cb294ffda7da8(String), 2020-06-15 16:55:59.281(Timestamp), 31011310200312009116(String), f3e5596b011443049fa85ecee89c330e(String), 2020-06-15 16:55:59.281(Timestamp), 31011310200312009116(String), fd711d1c91624b46b7ecb8bf2aa6efe0(String), 2020-06-15 16:55:59.281(Timestamp) 
2020-06-15 16:55:59.309 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 14 
