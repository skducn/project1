2020-06-16 15:59:22.355 [INFO ] com.benetech.rules.RulesApplication                - [logStarting:55] Starting RulesApplication v1.0-SNAPSHOT on DESKTOP-EOCO1V0 with PID 6020 (D:\51\python\project\instance\zyjk\EHR\controlRuleNew\config\healthRecordRules.jar started by ZY in D:\51\python\project\instance\zyjk\EHR\controlRuleNew) 
2020-06-16 15:59:22.365 [DEBUG] com.benetech.rules.RulesApplication                - [logStarting:56] Running with Spring Boot v2.2.1.RELEASE, Spring v5.2.1.RELEASE 
2020-06-16 15:59:22.366 [INFO ] com.benetech.rules.RulesApplication                - [logStartupProfileInfo:655] The following profiles are active: test 
2020-06-16 15:59:25.013 [INFO ] o.s.boot.web.embedded.tomcat.TomcatWebServer       - [initialize:92] Tomcat initialized with port(s): 8838 (http) 
2020-06-16 15:59:25.026 [INFO ] org.apache.coyote.http11.Http11NioProtocol         - [log:173] Initializing ProtocolHandler ["http-nio-8838"] 
2020-06-16 15:59:25.027 [INFO ] org.apache.catalina.core.StandardService           - [log:173] Starting service [Tomcat] 
2020-06-16 15:59:25.028 [INFO ] org.apache.catalina.core.StandardEngine            - [log:173] Starting Servlet engine: [Apache Tomcat/9.0.27] 
2020-06-16 15:59:25.106 [INFO ] o.a.c.c.C.[.[localhost].[/healthRecordRules]       - [log:173] Initializing Spring embedded WebApplicationContext 
2020-06-16 15:59:25.106 [INFO ] org.springframework.web.context.ContextLoader      - [prepareWebApplicationContext:284] Root WebApplicationContext: initialization completed in 2585 ms 
2020-06-16 15:59:25.234 [DEBUG] org.apache.ibatis.logging.LogFactory               - [setImplementation:135] Logging initialized using 'class org.apache.ibatis.logging.slf4j.Slf4jImpl' adapter. 
2020-06-16 15:59:25.531 [WARN ] org.mybatis.spring.SqlSessionFactoryBean           - [buildSqlSessionFactory:467] Can't find class in '[com.benetech.rules.*.entity]' package. Please check your configuration. 
2020-06-16 15:59:26.319 [INFO ] com.alibaba.druid.pool.DruidDataSource             - [init:930] {dataSource-1} inited 
2020-06-16 15:59:26.609 [DEBUG] c.b.r.m.e.mapper.RuleEngineMapper.getAllRules      - [debug:159] ==>  Preparing: select a.RuleId as ruleId, a.RuleSql as clazz from HrRule a join HrRuleProps b on a.RuleId = b.RuleId where -- RuleId in ('34278f71cf1d42c88158aaf637fa5203', '8d30baa03bfc4233a8f115c57a0ebf08', '63eb82a44bf64c96a0b9023fa2a3c9d9') a.RuleSql != '' and a.RuleSql is not null and b.Enable = 1  
2020-06-16 15:59:26.626 [DEBUG] c.b.r.m.e.mapper.RuleEngineMapper.getAllRules      - [debug:159] ==> Parameters:  
2020-06-16 15:59:26.701 [DEBUG] c.b.r.m.e.mapper.RuleEngineMapper.getAllRules      - [debug:159] <==      Total: 310 
2020-06-16 15:59:26.928 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [init:64] 加载规则：310 条 
2020-06-16 15:59:26.944 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.getAllCode    - [debug:159] ==>  Preparing: SELECT codeSysType AS type, code AS code, [value] AS value FROM tb_code_value WHERE code != '' AND [value] != ''  
2020-06-16 15:59:26.944 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.getAllCode    - [debug:159] ==> Parameters:  
2020-06-16 15:59:27.419 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.getAllCode    - [debug:159] <==      Total: 44881 
2020-06-16 15:59:27.447 [INFO ] c.b.r.m.m.service.impl.EhrModelBuildServiceImpl    - [init:96] 初始化字典类型: 467 种 
2020-06-16 15:59:27.447 [INFO ] c.b.r.m.m.service.impl.EhrModelBuildServiceImpl    - [init:97] 初始化字典: 44881 条 
2020-06-16 15:59:27.591 [INFO ] o.s.scheduling.concurrent.ThreadPoolTaskExecutor   - [initialize:171] Initializing ExecutorService 'applicationTaskExecutor' 
2020-06-16 15:59:27.866 [INFO ] org.apache.coyote.http11.Http11NioProtocol         - [log:173] Starting ProtocolHandler ["http-nio-8838"] 
2020-06-16 15:59:27.909 [INFO ] o.s.boot.web.embedded.tomcat.TomcatWebServer       - [start:204] Tomcat started on port(s): 8838 (http) with context path '/healthRecordRules' 
2020-06-16 15:59:27.916 [INFO ] com.benetech.rules.RulesApplication                - [logStarted:61] Started RulesApplication in 6.615 seconds (JVM running for 7.979) 
2020-06-16 15:59:27.917 [INFO ] com.benetech.rules.RulesApplication                - [main:20] -------------启动成功------------- 
2020-06-16 15:59:31.137 [INFO ] o.a.c.c.C.[.[localhost].[/healthRecordRules]       - [log:173] Initializing Spring DispatcherServlet 'dispatcherServlet' 
2020-06-16 15:59:31.138 [INFO ] org.springframework.web.servlet.DispatcherServlet  - [initServletBean:525] Initializing Servlet 'dispatcherServlet' 
2020-06-16 15:59:31.149 [INFO ] org.springframework.web.servlet.DispatcherServlet  - [initServletBean:547] Completed initialization in 11 ms 
2020-06-16 15:59:31.192 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-16 15:59:31.198 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 15:59:31.208 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-16 15:59:31.213 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-16 15:59:31.213 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 15:59:31.221 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-16 15:59:31.227 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-16 15:59:31.227 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-16 15:59:31.236 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-16 15:59:31.244 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-16 15:59:31.244 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 15:59:31.251 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-16 15:59:31.259 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t2.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 15:59:31.260 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 15:59:31.270 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 15:59:31.278 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-16 15:59:31.278 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-16 15:59:31.279 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 15:59:31.279 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 15:59:31.286 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-16 15:59:31.294 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 15:59:31.294 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 15:59:31.302 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-16 15:59:31.309 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 15:59:31.310 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 15:59:31.318 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-16 15:59:31.326 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t2.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 15:59:31.326 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 15:59:31.344 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 3 
2020-06-16 15:59:31.353 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-16 15:59:31.353 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 3 
2020-06-16 15:59:31.354 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 15:59:31.355 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 15:59:31.360 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-16 15:59:31.369 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 15:59:31.369 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 15:59:31.376 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-16 15:59:31.384 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 15:59:31.385 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 15:59:31.394 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-16 15:59:31.401 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 15:59:31.401 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190401596084000(String) 
2020-06-16 15:59:31.407 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-16 15:59:31.416 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 15:59:31.419 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190401596084000(String) 
2020-06-16 15:59:31.427 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-16 15:59:31.435 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 15:59:31.435 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 15:59:31.443 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-16 15:59:31.450 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 15:59:31.451 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190408596837900(String) 
2020-06-16 15:59:31.458 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-16 15:59:31.466 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 15:59:31.467 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190408596837900(String) 
2020-06-16 15:59:31.472 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-16 15:59:31.478 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 15:59:31.478 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 15:59:31.485 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-16 15:59:31.493 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-16 15:59:31.494 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 15:59:31.501 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-16 15:59:31.711 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:户籍地址长度异常长度>100字符（包含省市区、乡镇街道名称（如有）、村居委会名称（如有）、详细地址） 
2020-06-16 15:59:31.732 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:个人基本信息表既往史建档前与三级医院住院就诊记录诊断逻辑不符（恶性肿瘤） 
2020-06-16 15:59:31.735 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:姓名填写不规范同时满足以下条件： 1、联系人姓名不为空值 2、联系人姓名为纯数字 
2020-06-16 15:59:31.738 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:个人基本信息表既往史建档前与三级医院住院就诊记录诊断逻辑不符（严重精神障碍） 
2020-06-16 15:59:31.741 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:与三级医院住院就诊记录表姓名不一致同时满足以下条件： 1、封面《姓名》不为空值 2、三级医院住院就诊记录表《患者姓名》不为空 3、封面《姓名》与住院就诊记录表中《患者姓名》不相等 
2020-06-16 15:59:31.742 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:与三级医院门诊就诊记录表姓名不一致同时满足以下条件： 1、封面《姓名》不为空值 2、三级医院门诊就诊记录表《患者姓名》不为空 3、封面《姓名》与门诊就诊记录表中《患者姓名》不相等 
2020-06-16 15:59:31.747 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:个人基本信息表既往史建档前与三级医院住院就诊记录诊断逻辑不符（脑卒中） 
2020-06-16 15:59:31.750 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:个人基本信息表既往史建档前与三级医院住院就诊记录诊断逻辑不符（冠心病） 
2020-06-16 15:59:31.751 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:个人基本信息表既往史建档前与三级医院住院就诊记录诊断逻辑不符（慢性阻塞性肺疾病） 
2020-06-16 15:59:31.755 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:个人基本信息表既往史建档前与三级医院住院就诊记录诊断逻辑不符（糖尿病） 
2020-06-16 15:59:31.756 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:联系电话不为纯数字同时满足以下条件： 1、联系电话不为空值 2、联系电话不是纯数字 
2020-06-16 15:59:31.759 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:个人基本信息表既往史建档前与三级医院住院就诊记录诊断逻辑不符（高血压） 
2020-06-16 15:59:31.759 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:个人基本信息表既往史建档前与三级医院住院就诊记录诊断逻辑不符（糖尿病） 
2020-06-16 15:59:31.761 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:个人基本信息表既往史建档前与三级医院住院就诊记录诊断逻辑不符（结核病） 
2020-06-16 15:59:31.763 [INFO ] c.b.r.m.m.service.impl.EhrModelBuildServiceImpl    - [saveResult:158] 规则执行结束结果条数为:14 
2020-06-16 15:59:31.787 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-16 15:59:31.788 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 329b69c7855544e986fc0073b77fe9be(String), 2020-06-16 15:59:31.763(Timestamp), 31011310200312009116(String), 4148ac732c724fc7b87f96a04079d821(String), 2020-06-16 15:59:31.763(Timestamp), 31011310200312009116(String), 61ed70b670f2460a94ebc183f6b86f5d(String), 2020-06-16 15:59:31.763(Timestamp), 31011310200312009116(String), 72de975121d24cd3bbdfd8324ae36aba(String), 2020-06-16 15:59:31.763(Timestamp), 31011310200312009116(String), 814b3d0aca3642af82ef320f98d4dfba(String), 2020-06-16 15:59:31.763(Timestamp), 31011310200312009116(String), 847bc4b46918417dab4aa917af3355c3(String), 2020-06-16 15:59:31.763(Timestamp), 31011310200312009116(String), 9c830141ce3e4854847cc2b52c46aa60(String), 2020-06-16 15:59:31.763(Timestamp), 31011310200312009116(String), b0789ee1f8404172941794b5431fd75d(String), 2020-06-16 15:59:31.763(Timestamp), 31011310200312009116(String), b46c567e4517456798ca3a5b0f34863d(String), 2020-06-16 15:59:31.763(Timestamp), 31011310200312009116(String), c8e65283e6a243a5a1b89ae2117b6479(String), 2020-06-16 15:59:31.763(Timestamp), 31011310200312009116(String), db6607db218b4182924b980ecb900b19(String), 2020-06-16 15:59:31.763(Timestamp), 31011310200312009116(String), f14d68452e254abd9a4cb294ffda7da8(String), 2020-06-16 15:59:31.763(Timestamp), 31011310200312009116(String), f3e5596b011443049fa85ecee89c330e(String), 2020-06-16 15:59:31.763(Timestamp), 31011310200312009116(String), fd711d1c91624b46b7ecb8bf2aa6efe0(String), 2020-06-16 15:59:31.763(Timestamp) 
2020-06-16 15:59:31.819 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 14 
2020-06-16 15:59:35.342 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-16 15:59:35.343 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 15:59:35.354 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-16 15:59:35.359 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-16 15:59:35.359 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 15:59:35.373 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-16 15:59:35.379 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-16 15:59:35.380 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-16 15:59:35.387 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-16 15:59:35.392 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-16 15:59:35.392 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 15:59:35.397 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-16 15:59:35.401 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t2.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 15:59:35.402 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 15:59:35.407 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 15:59:35.411 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-16 15:59:35.411 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-16 15:59:35.412 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 15:59:35.412 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 15:59:35.418 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-16 15:59:35.422 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 15:59:35.422 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 15:59:35.426 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-16 15:59:35.431 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 15:59:35.431 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 15:59:35.436 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-16 15:59:35.440 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t2.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 15:59:35.440 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 15:59:35.454 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 3 
2020-06-16 15:59:35.458 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-16 15:59:35.459 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 3 
2020-06-16 15:59:35.459 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 15:59:35.460 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 15:59:35.464 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-16 15:59:35.469 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 15:59:35.470 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 15:59:35.474 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-16 15:59:35.479 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 15:59:35.479 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 15:59:35.484 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-16 15:59:35.488 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 15:59:35.489 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190401596084000(String) 
2020-06-16 15:59:35.493 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-16 15:59:35.498 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 15:59:35.498 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190401596084000(String) 
2020-06-16 15:59:35.503 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-16 15:59:35.508 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 15:59:35.508 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 15:59:35.513 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-16 15:59:35.518 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 15:59:35.519 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190408596837900(String) 
2020-06-16 15:59:35.523 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-16 15:59:35.527 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 15:59:35.527 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190408596837900(String) 
2020-06-16 15:59:35.531 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-16 15:59:35.538 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 15:59:35.539 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 15:59:35.544 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-16 15:59:35.551 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-16 15:59:35.551 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 15:59:35.556 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-16 15:59:35.597 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:户籍地址长度异常长度>100字符（包含省市区、乡镇街道名称（如有）、村居委会名称（如有）、详细地址） 
2020-06-16 15:59:35.602 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:个人基本信息表既往史建档前与三级医院住院就诊记录诊断逻辑不符（恶性肿瘤） 
2020-06-16 15:59:35.608 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:个人基本信息表既往史建档前与三级医院住院就诊记录诊断逻辑不符（严重精神障碍） 
2020-06-16 15:59:35.609 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:与三级医院住院就诊记录表姓名不一致同时满足以下条件： 1、封面《姓名》不为空值 2、三级医院住院就诊记录表《患者姓名》不为空 3、封面《姓名》与住院就诊记录表中《患者姓名》不相等 
2020-06-16 15:59:35.609 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:与三级医院门诊就诊记录表姓名不一致同时满足以下条件： 1、封面《姓名》不为空值 2、三级医院门诊就诊记录表《患者姓名》不为空 3、封面《姓名》与门诊就诊记录表中《患者姓名》不相等 
2020-06-16 15:59:35.610 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:个人基本信息表既往史建档前与三级医院住院就诊记录诊断逻辑不符（脑卒中） 
2020-06-16 15:59:35.617 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:个人基本信息表既往史建档前与三级医院住院就诊记录诊断逻辑不符（冠心病） 
2020-06-16 15:59:35.618 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:个人基本信息表既往史建档前与三级医院住院就诊记录诊断逻辑不符（慢性阻塞性肺疾病） 
2020-06-16 15:59:35.619 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:姓名长度异常长度>50字符 
2020-06-16 15:59:35.619 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:个人基本信息表既往史建档前与三级医院住院就诊记录诊断逻辑不符（糖尿病） 
2020-06-16 15:59:35.622 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:联系电话不为纯数字同时满足以下条件： 1、联系电话不为空值 2、联系电话不是纯数字 
2020-06-16 15:59:35.630 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:个人基本信息表既往史建档前与三级医院住院就诊记录诊断逻辑不符（高血压） 
2020-06-16 15:59:35.631 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:个人基本信息表既往史建档前与三级医院住院就诊记录诊断逻辑不符（糖尿病） 
2020-06-16 15:59:35.632 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:个人基本信息表既往史建档前与三级医院住院就诊记录诊断逻辑不符（结核病） 
2020-06-16 15:59:35.633 [INFO ] c.b.r.m.m.service.impl.EhrModelBuildServiceImpl    - [saveResult:158] 规则执行结束结果条数为:14 
2020-06-16 15:59:35.639 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-16 15:59:35.652 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 329b69c7855544e986fc0073b77fe9be(String), 2020-06-16 15:59:35.633(Timestamp), 31011310200312009116(String), 4148ac732c724fc7b87f96a04079d821(String), 2020-06-16 15:59:35.633(Timestamp), 31011310200312009116(String), 72de975121d24cd3bbdfd8324ae36aba(String), 2020-06-16 15:59:35.633(Timestamp), 31011310200312009116(String), 814b3d0aca3642af82ef320f98d4dfba(String), 2020-06-16 15:59:35.633(Timestamp), 31011310200312009116(String), 847bc4b46918417dab4aa917af3355c3(String), 2020-06-16 15:59:35.633(Timestamp), 31011310200312009116(String), 9c830141ce3e4854847cc2b52c46aa60(String), 2020-06-16 15:59:35.633(Timestamp), 31011310200312009116(String), b0789ee1f8404172941794b5431fd75d(String), 2020-06-16 15:59:35.633(Timestamp), 31011310200312009116(String), b46c567e4517456798ca3a5b0f34863d(String), 2020-06-16 15:59:35.633(Timestamp), 31011310200312009116(String), b8eeb38e528544b28133b9ee94c5fbc4(String), 2020-06-16 15:59:35.633(Timestamp), 31011310200312009116(String), c8e65283e6a243a5a1b89ae2117b6479(String), 2020-06-16 15:59:35.633(Timestamp), 31011310200312009116(String), db6607db218b4182924b980ecb900b19(String), 2020-06-16 15:59:35.633(Timestamp), 31011310200312009116(String), f14d68452e254abd9a4cb294ffda7da8(String), 2020-06-16 15:59:35.633(Timestamp), 31011310200312009116(String), f3e5596b011443049fa85ecee89c330e(String), 2020-06-16 15:59:35.633(Timestamp), 31011310200312009116(String), fd711d1c91624b46b7ecb8bf2aa6efe0(String), 2020-06-16 15:59:35.633(Timestamp) 
2020-06-16 15:59:35.675 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 14 
2020-06-16 15:59:48.686 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-16 15:59:48.687 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 15:59:48.692 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-16 15:59:48.696 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-16 15:59:48.696 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 15:59:48.701 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-16 15:59:48.706 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-16 15:59:48.706 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-16 15:59:48.715 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-16 15:59:48.731 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-16 15:59:48.732 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 15:59:48.736 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-16 15:59:48.742 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t2.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 15:59:48.742 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 15:59:48.748 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 15:59:48.752 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-16 15:59:48.752 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-16 15:59:48.753 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 15:59:48.753 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 15:59:48.758 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-16 15:59:48.762 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 15:59:48.763 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 15:59:48.767 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-16 15:59:48.771 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 15:59:48.772 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 15:59:48.776 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-16 15:59:48.781 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t2.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 15:59:48.781 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 15:59:48.801 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 3 
2020-06-16 15:59:48.806 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-16 15:59:48.806 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 3 
2020-06-16 15:59:48.807 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 15:59:48.807 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 15:59:48.815 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-16 15:59:48.824 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 15:59:48.825 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 15:59:48.829 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-16 15:59:48.836 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 15:59:48.837 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 15:59:48.848 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-16 15:59:48.855 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 15:59:48.856 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190401596084000(String) 
2020-06-16 15:59:48.862 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-16 15:59:48.870 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 15:59:48.871 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190401596084000(String) 
2020-06-16 15:59:48.877 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-16 15:59:48.885 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 15:59:48.886 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 15:59:48.891 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-16 15:59:48.897 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 15:59:48.898 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190408596837900(String) 
2020-06-16 15:59:48.903 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-16 15:59:48.909 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 15:59:48.909 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190408596837900(String) 
2020-06-16 15:59:48.916 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-16 15:59:48.921 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 15:59:48.921 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 15:59:48.928 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-16 15:59:48.935 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-16 15:59:48.935 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 15:59:48.941 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-16 15:59:48.999 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:户籍地址长度异常长度>100字符（包含省市区、乡镇街道名称（如有）、村居委会名称（如有）、详细地址） 
2020-06-16 15:59:48.999 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:个人基本信息表既往史建档前与三级医院住院就诊记录诊断逻辑不符（恶性肿瘤） 
2020-06-16 15:59:49.004 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:个人基本信息表既往史建档前与三级医院住院就诊记录诊断逻辑不符（严重精神障碍） 
2020-06-16 15:59:49.010 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:与三级医院住院就诊记录表姓名不一致同时满足以下条件： 1、封面《姓名》不为空值 2、三级医院住院就诊记录表《患者姓名》不为空 3、封面《姓名》与住院就诊记录表中《患者姓名》不相等 
2020-06-16 15:59:49.010 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:与三级医院门诊就诊记录表姓名不一致同时满足以下条件： 1、封面《姓名》不为空值 2、三级医院门诊就诊记录表《患者姓名》不为空 3、封面《姓名》与门诊就诊记录表中《患者姓名》不相等 
2020-06-16 15:59:49.011 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:个人基本信息表既往史建档前与三级医院住院就诊记录诊断逻辑不符（脑卒中） 
2020-06-16 15:59:49.013 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:个人基本信息表既往史建档前与三级医院住院就诊记录诊断逻辑不符（冠心病） 
2020-06-16 15:59:49.014 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:现住址未填写同时满足以下条件： 1、现住址中的省、市、区都为空值 2、现住址中的详细地址为空值 
2020-06-16 15:59:49.019 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:个人基本信息表既往史建档前与三级医院住院就诊记录诊断逻辑不符（慢性阻塞性肺疾病） 
2020-06-16 15:59:49.020 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:个人基本信息表既往史建档前与三级医院住院就诊记录诊断逻辑不符（糖尿病） 
2020-06-16 15:59:49.022 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:联系电话不为纯数字同时满足以下条件： 1、联系电话不为空值 2、联系电话不是纯数字 
2020-06-16 15:59:49.023 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:个人基本信息表既往史建档前与三级医院住院就诊记录诊断逻辑不符（高血压） 
2020-06-16 15:59:49.024 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:个人基本信息表既往史建档前与三级医院住院就诊记录诊断逻辑不符（糖尿病） 
2020-06-16 15:59:49.024 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:个人基本信息表既往史建档前与三级医院住院就诊记录诊断逻辑不符（结核病） 
2020-06-16 15:59:49.025 [INFO ] c.b.r.m.m.service.impl.EhrModelBuildServiceImpl    - [saveResult:158] 规则执行结束结果条数为:14 
2020-06-16 15:59:49.027 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-16 15:59:49.029 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 329b69c7855544e986fc0073b77fe9be(String), 2020-06-16 15:59:49.025(Timestamp), 31011310200312009116(String), 4148ac732c724fc7b87f96a04079d821(String), 2020-06-16 15:59:49.025(Timestamp), 31011310200312009116(String), 72de975121d24cd3bbdfd8324ae36aba(String), 2020-06-16 15:59:49.025(Timestamp), 31011310200312009116(String), 814b3d0aca3642af82ef320f98d4dfba(String), 2020-06-16 15:59:49.025(Timestamp), 31011310200312009116(String), 847bc4b46918417dab4aa917af3355c3(String), 2020-06-16 15:59:49.025(Timestamp), 31011310200312009116(String), 9c830141ce3e4854847cc2b52c46aa60(String), 2020-06-16 15:59:49.025(Timestamp), 31011310200312009116(String), b0789ee1f8404172941794b5431fd75d(String), 2020-06-16 15:59:49.025(Timestamp), 31011310200312009116(String), b3bb8566dc154106b6a400f40a0fe914(String), 2020-06-16 15:59:49.025(Timestamp), 31011310200312009116(String), b46c567e4517456798ca3a5b0f34863d(String), 2020-06-16 15:59:49.025(Timestamp), 31011310200312009116(String), c8e65283e6a243a5a1b89ae2117b6479(String), 2020-06-16 15:59:49.025(Timestamp), 31011310200312009116(String), db6607db218b4182924b980ecb900b19(String), 2020-06-16 15:59:49.025(Timestamp), 31011310200312009116(String), f14d68452e254abd9a4cb294ffda7da8(String), 2020-06-16 15:59:49.025(Timestamp), 31011310200312009116(String), f3e5596b011443049fa85ecee89c330e(String), 2020-06-16 15:59:49.025(Timestamp), 31011310200312009116(String), fd711d1c91624b46b7ecb8bf2aa6efe0(String), 2020-06-16 15:59:49.025(Timestamp) 
2020-06-16 15:59:49.064 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 14 
2020-06-16 15:59:52.840 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-16 15:59:52.840 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 15:59:52.847 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-16 15:59:52.855 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-16 15:59:52.855 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 15:59:52.871 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-16 15:59:52.878 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-16 15:59:52.878 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-16 15:59:52.887 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-16 15:59:52.894 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-16 15:59:52.894 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 15:59:52.902 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-16 15:59:52.909 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t2.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 15:59:52.909 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 15:59:52.918 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 15:59:52.923 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-16 15:59:52.923 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-16 15:59:52.924 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 15:59:52.924 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 15:59:52.931 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-16 15:59:52.937 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 15:59:52.937 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 15:59:52.944 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-16 15:59:52.952 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 15:59:52.953 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 15:59:52.960 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-16 15:59:52.967 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t2.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 15:59:52.968 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 15:59:52.985 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 3 
2020-06-16 15:59:52.989 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-16 15:59:52.989 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 3 
2020-06-16 15:59:52.989 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 15:59:52.990 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 15:59:52.994 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-16 15:59:52.998 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 15:59:52.998 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 15:59:53.002 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-16 15:59:53.007 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 15:59:53.007 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 15:59:53.012 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-16 15:59:53.017 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 15:59:53.018 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190401596084000(String) 
2020-06-16 15:59:53.022 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-16 15:59:53.026 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 15:59:53.027 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190401596084000(String) 
2020-06-16 15:59:53.031 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-16 15:59:53.035 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 15:59:53.036 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 15:59:53.040 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-16 15:59:53.045 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 15:59:53.045 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190408596837900(String) 
2020-06-16 15:59:53.050 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-16 15:59:53.055 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 15:59:53.055 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190408596837900(String) 
2020-06-16 15:59:53.059 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-16 15:59:53.064 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 15:59:53.065 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 15:59:53.070 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-16 15:59:53.075 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-16 15:59:53.075 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 15:59:53.079 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-16 15:59:53.098 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:户籍地址长度异常长度>100字符（包含省市区、乡镇街道名称（如有）、村居委会名称（如有）、详细地址） 
2020-06-16 15:59:53.099 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:个人基本信息表既往史建档前与三级医院住院就诊记录诊断逻辑不符（恶性肿瘤） 
2020-06-16 15:59:53.101 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:个人基本信息表既往史建档前与三级医院住院就诊记录诊断逻辑不符（严重精神障碍） 
2020-06-16 15:59:53.102 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:与三级医院住院就诊记录表姓名不一致同时满足以下条件： 1、封面《姓名》不为空值 2、三级医院住院就诊记录表《患者姓名》不为空 3、封面《姓名》与住院就诊记录表中《患者姓名》不相等 
2020-06-16 15:59:53.103 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:与三级医院门诊就诊记录表姓名不一致同时满足以下条件： 1、封面《姓名》不为空值 2、三级医院门诊就诊记录表《患者姓名》不为空 3、封面《姓名》与门诊就诊记录表中《患者姓名》不相等 
2020-06-16 15:59:53.104 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:现住址长度异常长度>100字符（包含省市区、乡镇街道名称（如有）、村居委会名称（如有）、详细地址） 
2020-06-16 15:59:53.105 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:个人基本信息表既往史建档前与三级医院住院就诊记录诊断逻辑不符（脑卒中） 
2020-06-16 15:59:53.106 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:个人基本信息表既往史建档前与三级医院住院就诊记录诊断逻辑不符（冠心病） 
2020-06-16 15:59:53.106 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:个人基本信息表既往史建档前与三级医院住院就诊记录诊断逻辑不符（慢性阻塞性肺疾病） 
2020-06-16 15:59:53.107 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:个人基本信息表既往史建档前与三级医院住院就诊记录诊断逻辑不符（糖尿病） 
2020-06-16 15:59:53.108 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:联系电话不为纯数字同时满足以下条件： 1、联系电话不为空值 2、联系电话不是纯数字 
2020-06-16 15:59:53.109 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:个人基本信息表既往史建档前与三级医院住院就诊记录诊断逻辑不符（高血压） 
2020-06-16 15:59:53.110 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:个人基本信息表既往史建档前与三级医院住院就诊记录诊断逻辑不符（糖尿病） 
2020-06-16 15:59:53.111 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:个人基本信息表既往史建档前与三级医院住院就诊记录诊断逻辑不符（结核病） 
2020-06-16 15:59:53.111 [INFO ] c.b.r.m.m.service.impl.EhrModelBuildServiceImpl    - [saveResult:158] 规则执行结束结果条数为:14 
2020-06-16 15:59:53.113 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-16 15:59:53.114 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 329b69c7855544e986fc0073b77fe9be(String), 2020-06-16 15:59:53.111(Timestamp), 31011310200312009116(String), 4148ac732c724fc7b87f96a04079d821(String), 2020-06-16 15:59:53.111(Timestamp), 31011310200312009116(String), 72de975121d24cd3bbdfd8324ae36aba(String), 2020-06-16 15:59:53.111(Timestamp), 31011310200312009116(String), 814b3d0aca3642af82ef320f98d4dfba(String), 2020-06-16 15:59:53.111(Timestamp), 31011310200312009116(String), 847bc4b46918417dab4aa917af3355c3(String), 2020-06-16 15:59:53.111(Timestamp), 31011310200312009116(String), 91665e0b2efa4f86aea807ec9f4883c3(String), 2020-06-16 15:59:53.111(Timestamp), 31011310200312009116(String), 9c830141ce3e4854847cc2b52c46aa60(String), 2020-06-16 15:59:53.111(Timestamp), 31011310200312009116(String), b0789ee1f8404172941794b5431fd75d(String), 2020-06-16 15:59:53.111(Timestamp), 31011310200312009116(String), b46c567e4517456798ca3a5b0f34863d(String), 2020-06-16 15:59:53.111(Timestamp), 31011310200312009116(String), c8e65283e6a243a5a1b89ae2117b6479(String), 2020-06-16 15:59:53.111(Timestamp), 31011310200312009116(String), db6607db218b4182924b980ecb900b19(String), 2020-06-16 15:59:53.111(Timestamp), 31011310200312009116(String), f14d68452e254abd9a4cb294ffda7da8(String), 2020-06-16 15:59:53.111(Timestamp), 31011310200312009116(String), f3e5596b011443049fa85ecee89c330e(String), 2020-06-16 15:59:53.111(Timestamp), 31011310200312009116(String), fd711d1c91624b46b7ecb8bf2aa6efe0(String), 2020-06-16 15:59:53.111(Timestamp) 
2020-06-16 15:59:53.139 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 14 
2020-06-16 15:59:57.995 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-16 15:59:57.996 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 15:59:58.002 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-16 15:59:58.006 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-16 15:59:58.007 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 15:59:58.012 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-16 15:59:58.017 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-16 15:59:58.017 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-16 15:59:58.022 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-16 15:59:58.027 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-16 15:59:58.027 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 15:59:58.031 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-16 15:59:58.036 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t2.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 15:59:58.037 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 15:59:58.042 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 15:59:58.046 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-16 15:59:58.046 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-16 15:59:58.047 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 15:59:58.047 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 15:59:58.051 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-16 15:59:58.054 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 15:59:58.055 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 15:59:58.059 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-16 15:59:58.063 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 15:59:58.064 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 15:59:58.068 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-16 15:59:58.072 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t2.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 15:59:58.073 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 15:59:58.086 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 3 
2020-06-16 15:59:58.090 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-16 15:59:58.090 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 3 
2020-06-16 15:59:58.091 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 15:59:58.091 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 15:59:58.096 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-16 15:59:58.101 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 15:59:58.101 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 15:59:58.104 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-16 15:59:58.108 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 15:59:58.109 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 15:59:58.114 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-16 15:59:58.118 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 15:59:58.119 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190401596084000(String) 
2020-06-16 15:59:58.123 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-16 15:59:58.128 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 15:59:58.128 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190401596084000(String) 
2020-06-16 15:59:58.132 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-16 15:59:58.136 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 15:59:58.137 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 15:59:58.142 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-16 15:59:58.147 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 15:59:58.147 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190408596837900(String) 
2020-06-16 15:59:58.151 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-16 15:59:58.156 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 15:59:58.157 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190408596837900(String) 
2020-06-16 15:59:58.161 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-16 15:59:58.166 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 15:59:58.166 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 15:59:58.171 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-16 15:59:58.176 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-16 15:59:58.176 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 15:59:58.181 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-16 15:59:58.212 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:个人基本信息表既往史建档前与三级医院住院就诊记录诊断逻辑不符（恶性肿瘤） 
2020-06-16 15:59:58.215 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:个人基本信息表既往史建档前与三级医院住院就诊记录诊断逻辑不符（严重精神障碍） 
2020-06-16 15:59:58.216 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:与三级医院住院就诊记录表姓名不一致同时满足以下条件： 1、封面《姓名》不为空值 2、三级医院住院就诊记录表《患者姓名》不为空 3、封面《姓名》与住院就诊记录表中《患者姓名》不相等 
2020-06-16 15:59:58.219 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:与三级医院门诊就诊记录表姓名不一致同时满足以下条件： 1、封面《姓名》不为空值 2、三级医院门诊就诊记录表《患者姓名》不为空 3、封面《姓名》与门诊就诊记录表中《患者姓名》不相等 
2020-06-16 15:59:58.220 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:个人基本信息表既往史建档前与三级医院住院就诊记录诊断逻辑不符（脑卒中） 
2020-06-16 15:59:58.222 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:个人基本信息表既往史建档前与三级医院住院就诊记录诊断逻辑不符（冠心病） 
2020-06-16 15:59:58.222 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:个人基本信息表既往史建档前与三级医院住院就诊记录诊断逻辑不符（慢性阻塞性肺疾病） 
2020-06-16 15:59:58.223 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:个人基本信息表既往史建档前与三级医院住院就诊记录诊断逻辑不符（糖尿病） 
2020-06-16 15:59:58.224 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:联系电话不为纯数字同时满足以下条件： 1、联系电话不为空值 2、联系电话不是纯数字 
2020-06-16 15:59:58.225 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:个人基本信息表既往史建档前与三级医院住院就诊记录诊断逻辑不符（高血压） 
2020-06-16 15:59:58.226 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:个人基本信息表既往史建档前与三级医院住院就诊记录诊断逻辑不符（糖尿病） 
2020-06-16 15:59:58.226 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:个人基本信息表既往史建档前与三级医院住院就诊记录诊断逻辑不符（结核病） 
2020-06-16 15:59:58.227 [INFO ] c.b.r.m.m.service.impl.EhrModelBuildServiceImpl    - [saveResult:158] 规则执行结束结果条数为:12 
2020-06-16 15:59:58.228 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-16 15:59:58.229 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 4148ac732c724fc7b87f96a04079d821(String), 2020-06-16 15:59:58.227(Timestamp), 31011310200312009116(String), 72de975121d24cd3bbdfd8324ae36aba(String), 2020-06-16 15:59:58.227(Timestamp), 31011310200312009116(String), 814b3d0aca3642af82ef320f98d4dfba(String), 2020-06-16 15:59:58.227(Timestamp), 31011310200312009116(String), 847bc4b46918417dab4aa917af3355c3(String), 2020-06-16 15:59:58.227(Timestamp), 31011310200312009116(String), 9c830141ce3e4854847cc2b52c46aa60(String), 2020-06-16 15:59:58.227(Timestamp), 31011310200312009116(String), b0789ee1f8404172941794b5431fd75d(String), 2020-06-16 15:59:58.227(Timestamp), 31011310200312009116(String), b46c567e4517456798ca3a5b0f34863d(String), 2020-06-16 15:59:58.227(Timestamp), 31011310200312009116(String), c8e65283e6a243a5a1b89ae2117b6479(String), 2020-06-16 15:59:58.227(Timestamp), 31011310200312009116(String), db6607db218b4182924b980ecb900b19(String), 2020-06-16 15:59:58.227(Timestamp), 31011310200312009116(String), f14d68452e254abd9a4cb294ffda7da8(String), 2020-06-16 15:59:58.227(Timestamp), 31011310200312009116(String), f3e5596b011443049fa85ecee89c330e(String), 2020-06-16 15:59:58.227(Timestamp), 31011310200312009116(String), fd711d1c91624b46b7ecb8bf2aa6efe0(String), 2020-06-16 15:59:58.227(Timestamp) 
2020-06-16 15:59:58.246 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 12 
2020-06-16 16:00:02.062 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-16 16:00:02.063 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 16:00:02.070 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-16 16:00:02.075 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-16 16:00:02.076 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 16:00:02.082 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-16 16:00:02.087 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-16 16:00:02.088 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-16 16:00:02.092 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-16 16:00:02.097 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-16 16:00:02.098 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 16:00:02.102 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-16 16:00:02.107 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t2.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 16:00:02.108 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 16:00:02.113 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 16:00:02.117 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-16 16:00:02.117 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-16 16:00:02.118 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 16:00:02.118 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 16:00:02.122 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-16 16:00:02.127 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 16:00:02.128 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 16:00:02.132 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-16 16:00:02.137 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 16:00:02.138 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 16:00:02.143 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-16 16:00:02.149 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t2.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 16:00:02.149 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 16:00:02.165 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 3 
2020-06-16 16:00:02.170 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-16 16:00:02.171 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 3 
2020-06-16 16:00:02.171 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 16:00:02.172 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 16:00:02.176 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-16 16:00:02.181 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 16:00:02.181 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 16:00:02.185 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-16 16:00:02.190 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 16:00:02.190 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 16:00:02.194 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-16 16:00:02.199 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 16:00:02.199 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190401596084000(String) 
2020-06-16 16:00:02.205 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-16 16:00:02.210 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 16:00:02.210 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190401596084000(String) 
2020-06-16 16:00:02.214 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-16 16:00:02.219 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 16:00:02.219 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 16:00:02.224 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-16 16:00:02.228 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 16:00:02.228 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190408596837900(String) 
2020-06-16 16:00:02.232 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-16 16:00:02.236 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 16:00:02.236 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190408596837900(String) 
2020-06-16 16:00:02.240 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-16 16:00:02.244 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 16:00:02.245 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 16:00:02.249 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-16 16:00:02.254 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-16 16:00:02.254 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 16:00:02.259 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-16 16:00:02.273 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:户籍地址长度异常长度>100字符（包含省市区、乡镇街道名称（如有）、村居委会名称（如有）、详细地址） 
2020-06-16 16:00:02.274 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:个人基本信息表既往史建档前与三级医院住院就诊记录诊断逻辑不符（恶性肿瘤） 
2020-06-16 16:00:02.276 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:个人基本信息表既往史建档前与三级医院住院就诊记录诊断逻辑不符（严重精神障碍） 
2020-06-16 16:00:02.277 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:与三级医院住院就诊记录表姓名不一致同时满足以下条件： 1、封面《姓名》不为空值 2、三级医院住院就诊记录表《患者姓名》不为空 3、封面《姓名》与住院就诊记录表中《患者姓名》不相等 
2020-06-16 16:00:02.277 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:与三级医院门诊就诊记录表姓名不一致同时满足以下条件： 1、封面《姓名》不为空值 2、三级医院门诊就诊记录表《患者姓名》不为空 3、封面《姓名》与门诊就诊记录表中《患者姓名》不相等 
2020-06-16 16:00:02.278 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:个人基本信息表既往史建档前与三级医院住院就诊记录诊断逻辑不符（脑卒中） 
2020-06-16 16:00:02.282 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:个人基本信息表既往史建档前与三级医院住院就诊记录诊断逻辑不符（冠心病） 
2020-06-16 16:00:02.282 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:个人基本信息表既往史建档前与三级医院住院就诊记录诊断逻辑不符（慢性阻塞性肺疾病） 
2020-06-16 16:00:02.283 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:个人基本信息表既往史建档前与三级医院住院就诊记录诊断逻辑不符（糖尿病） 
2020-06-16 16:00:02.284 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:联系电话不为纯数字同时满足以下条件： 1、联系电话不为空值 2、联系电话不是纯数字 
2020-06-16 16:00:02.286 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:个人基本信息表既往史建档前与三级医院住院就诊记录诊断逻辑不符（高血压） 
2020-06-16 16:00:02.286 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:个人基本信息表既往史建档前与三级医院住院就诊记录诊断逻辑不符（糖尿病） 
2020-06-16 16:00:02.286 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:个人基本信息表既往史建档前与三级医院住院就诊记录诊断逻辑不符（结核病） 
2020-06-16 16:00:02.287 [INFO ] c.b.r.m.m.service.impl.EhrModelBuildServiceImpl    - [saveResult:158] 规则执行结束结果条数为:13 
2020-06-16 16:00:02.288 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-16 16:00:02.289 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 329b69c7855544e986fc0073b77fe9be(String), 2020-06-16 16:00:02.287(Timestamp), 31011310200312009116(String), 4148ac732c724fc7b87f96a04079d821(String), 2020-06-16 16:00:02.287(Timestamp), 31011310200312009116(String), 72de975121d24cd3bbdfd8324ae36aba(String), 2020-06-16 16:00:02.287(Timestamp), 31011310200312009116(String), 814b3d0aca3642af82ef320f98d4dfba(String), 2020-06-16 16:00:02.287(Timestamp), 31011310200312009116(String), 847bc4b46918417dab4aa917af3355c3(String), 2020-06-16 16:00:02.287(Timestamp), 31011310200312009116(String), 9c830141ce3e4854847cc2b52c46aa60(String), 2020-06-16 16:00:02.287(Timestamp), 31011310200312009116(String), b0789ee1f8404172941794b5431fd75d(String), 2020-06-16 16:00:02.287(Timestamp), 31011310200312009116(String), b46c567e4517456798ca3a5b0f34863d(String), 2020-06-16 16:00:02.287(Timestamp), 31011310200312009116(String), c8e65283e6a243a5a1b89ae2117b6479(String), 2020-06-16 16:00:02.287(Timestamp), 31011310200312009116(String), db6607db218b4182924b980ecb900b19(String), 2020-06-16 16:00:02.287(Timestamp), 31011310200312009116(String), f14d68452e254abd9a4cb294ffda7da8(String), 2020-06-16 16:00:02.287(Timestamp), 31011310200312009116(String), f3e5596b011443049fa85ecee89c330e(String), 2020-06-16 16:00:02.287(Timestamp), 31011310200312009116(String), fd711d1c91624b46b7ecb8bf2aa6efe0(String), 2020-06-16 16:00:02.287(Timestamp) 
2020-06-16 16:00:02.315 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 13 
2020-06-16 16:00:05.793 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-16 16:00:05.794 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 16:00:05.801 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-16 16:00:05.806 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-16 16:00:05.807 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 16:00:05.812 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-16 16:00:05.817 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-16 16:00:05.818 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-16 16:00:05.824 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-16 16:00:05.828 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-16 16:00:05.829 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 16:00:05.834 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-16 16:00:05.841 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t2.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 16:00:05.841 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 16:00:05.847 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 16:00:05.851 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-16 16:00:05.851 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-16 16:00:05.852 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 16:00:05.853 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 16:00:05.858 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-16 16:00:05.862 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 16:00:05.863 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 16:00:05.867 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-16 16:00:05.871 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 16:00:05.871 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 16:00:05.876 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-16 16:00:05.880 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t2.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 16:00:05.880 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 16:00:05.894 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 3 
2020-06-16 16:00:05.899 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-16 16:00:05.899 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 3 
2020-06-16 16:00:05.899 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 16:00:05.899 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 16:00:05.904 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-16 16:00:05.908 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 16:00:05.908 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 16:00:05.913 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-16 16:00:05.919 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 16:00:05.919 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 16:00:05.924 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-16 16:00:05.930 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 16:00:05.931 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190401596084000(String) 
2020-06-16 16:00:05.936 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-16 16:00:05.946 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 16:00:05.946 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190401596084000(String) 
2020-06-16 16:00:05.953 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-16 16:00:05.958 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 16:00:05.958 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 16:00:05.965 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-16 16:00:05.970 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 16:00:05.971 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190408596837900(String) 
2020-06-16 16:00:05.977 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-16 16:00:05.981 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 16:00:05.982 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190408596837900(String) 
2020-06-16 16:00:05.986 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-16 16:00:05.991 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 16:00:05.992 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 16:00:05.997 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-16 16:00:06.001 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-16 16:00:06.002 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 16:00:06.006 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-16 16:00:06.020 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:个人基本信息表既往史建档前与三级医院住院就诊记录诊断逻辑不符（恶性肿瘤） 
2020-06-16 16:00:06.023 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:个人基本信息表既往史建档前与三级医院住院就诊记录诊断逻辑不符（严重精神障碍） 
2020-06-16 16:00:06.024 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:与三级医院住院就诊记录表姓名不一致同时满足以下条件： 1、封面《姓名》不为空值 2、三级医院住院就诊记录表《患者姓名》不为空 3、封面《姓名》与住院就诊记录表中《患者姓名》不相等 
2020-06-16 16:00:06.024 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:与三级医院门诊就诊记录表姓名不一致同时满足以下条件： 1、封面《姓名》不为空值 2、三级医院门诊就诊记录表《患者姓名》不为空 3、封面《姓名》与门诊就诊记录表中《患者姓名》不相等 
2020-06-16 16:00:06.025 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:联系电话未填写联系电话为空值 
2020-06-16 16:00:06.026 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:个人基本信息表既往史建档前与三级医院住院就诊记录诊断逻辑不符（脑卒中） 
2020-06-16 16:00:06.027 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:个人基本信息表既往史建档前与三级医院住院就诊记录诊断逻辑不符（冠心病） 
2020-06-16 16:00:06.028 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:个人基本信息表既往史建档前与三级医院住院就诊记录诊断逻辑不符（慢性阻塞性肺疾病） 
2020-06-16 16:00:06.029 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:个人基本信息表既往史建档前与三级医院住院就诊记录诊断逻辑不符（糖尿病） 
2020-06-16 16:00:06.040 [INFO ] c.b.r.m.m.service.impl.EhrModelBuildServiceImpl    - [saveResult:158] 规则执行结束结果条数为:9 
2020-06-16 16:00:06.041 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-16 16:00:06.041 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 4148ac732c724fc7b87f96a04079d821(String), 2020-06-16 16:00:06.04(Timestamp), 31011310200312009116(String), 72de975121d24cd3bbdfd8324ae36aba(String), 2020-06-16 16:00:06.04(Timestamp), 31011310200312009116(String), 814b3d0aca3642af82ef320f98d4dfba(String), 2020-06-16 16:00:06.04(Timestamp), 31011310200312009116(String), 847bc4b46918417dab4aa917af3355c3(String), 2020-06-16 16:00:06.04(Timestamp), 31011310200312009116(String), 8c22db3c92bb445b9712ca61107e8312(String), 2020-06-16 16:00:06.04(Timestamp), 31011310200312009116(String), 9c830141ce3e4854847cc2b52c46aa60(String), 2020-06-16 16:00:06.04(Timestamp), 31011310200312009116(String), b0789ee1f8404172941794b5431fd75d(String), 2020-06-16 16:00:06.04(Timestamp), 31011310200312009116(String), b46c567e4517456798ca3a5b0f34863d(String), 2020-06-16 16:00:06.04(Timestamp), 31011310200312009116(String), c8e65283e6a243a5a1b89ae2117b6479(String), 2020-06-16 16:00:06.04(Timestamp) 
2020-06-16 16:00:06.089 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 9 
2020-06-16 16:00:09.618 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-16 16:00:09.618 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 16:00:09.626 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-16 16:00:09.631 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-16 16:00:09.632 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 16:00:09.638 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-16 16:00:09.645 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-16 16:00:09.646 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-16 16:00:09.652 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-16 16:00:09.660 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-16 16:00:09.661 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 16:00:09.669 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-16 16:00:09.675 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t2.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 16:00:09.675 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 16:00:09.685 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 16:00:09.692 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-16 16:00:09.693 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-16 16:00:09.693 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 16:00:09.694 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 16:00:09.700 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-16 16:00:09.706 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 16:00:09.707 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 16:00:09.716 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-16 16:00:09.723 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 16:00:09.724 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 16:00:09.729 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-16 16:00:09.735 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t2.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 16:00:09.736 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 16:00:09.752 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 3 
2020-06-16 16:00:09.756 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-16 16:00:09.757 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 3 
2020-06-16 16:00:09.757 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 16:00:09.757 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 16:00:09.763 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-16 16:00:09.768 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 16:00:09.769 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 16:00:09.775 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-16 16:00:09.780 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 16:00:09.780 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 16:00:09.785 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-16 16:00:09.789 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 16:00:09.790 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190401596084000(String) 
2020-06-16 16:00:09.794 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-16 16:00:09.799 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 16:00:09.799 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190401596084000(String) 
2020-06-16 16:00:09.804 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-16 16:00:09.808 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 16:00:09.808 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 16:00:09.813 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-16 16:00:09.817 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 16:00:09.818 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190408596837900(String) 
2020-06-16 16:00:09.822 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-16 16:00:09.827 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 16:00:09.827 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190408596837900(String) 
2020-06-16 16:00:09.831 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-16 16:00:09.836 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 16:00:09.836 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 16:00:09.840 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-16 16:00:09.844 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-16 16:00:09.845 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 16:00:09.849 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-16 16:00:09.862 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:个人基本信息表既往史建档前与三级医院住院就诊记录诊断逻辑不符（恶性肿瘤） 
2020-06-16 16:00:09.864 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:个人基本信息表既往史建档前与三级医院住院就诊记录诊断逻辑不符（严重精神障碍） 
2020-06-16 16:00:09.865 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:与三级医院住院就诊记录表姓名不一致同时满足以下条件： 1、封面《姓名》不为空值 2、三级医院住院就诊记录表《患者姓名》不为空 3、封面《姓名》与住院就诊记录表中《患者姓名》不相等 
2020-06-16 16:00:09.865 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:与三级医院门诊就诊记录表姓名不一致同时满足以下条件： 1、封面《姓名》不为空值 2、三级医院门诊就诊记录表《患者姓名》不为空 3、封面《姓名》与门诊就诊记录表中《患者姓名》不相等 
2020-06-16 16:00:09.866 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:个人基本信息表既往史建档前与三级医院住院就诊记录诊断逻辑不符（脑卒中） 
2020-06-16 16:00:09.867 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:个人基本信息表既往史建档前与三级医院住院就诊记录诊断逻辑不符（冠心病） 
2020-06-16 16:00:09.867 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:个人基本信息表既往史建档前与三级医院住院就诊记录诊断逻辑不符（慢性阻塞性肺疾病） 
2020-06-16 16:00:09.868 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:个人基本信息表既往史建档前与三级医院住院就诊记录诊断逻辑不符（糖尿病） 
2020-06-16 16:00:09.868 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:联系电话手机号码长度异常同时满足以下条件： 1、联系电话不为空值 2、联系电话为手机号码（是1开头判断为手机号） 3、号码长度小于11位或大于11位 
2020-06-16 16:00:09.869 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:联系电话不为纯数字同时满足以下条件： 1、联系电话不为空值 2、联系电话不是纯数字 
2020-06-16 16:00:09.870 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:个人基本信息表既往史建档前与三级医院住院就诊记录诊断逻辑不符（高血压） 
2020-06-16 16:00:09.870 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:个人基本信息表既往史建档前与三级医院住院就诊记录诊断逻辑不符（糖尿病） 
2020-06-16 16:00:09.871 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:个人基本信息表既往史建档前与三级医院住院就诊记录诊断逻辑不符（结核病） 
2020-06-16 16:00:09.871 [INFO ] c.b.r.m.m.service.impl.EhrModelBuildServiceImpl    - [saveResult:158] 规则执行结束结果条数为:13 
2020-06-16 16:00:09.872 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-16 16:00:09.872 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 4148ac732c724fc7b87f96a04079d821(String), 2020-06-16 16:00:09.871(Timestamp), 31011310200312009116(String), 72de975121d24cd3bbdfd8324ae36aba(String), 2020-06-16 16:00:09.871(Timestamp), 31011310200312009116(String), 814b3d0aca3642af82ef320f98d4dfba(String), 2020-06-16 16:00:09.871(Timestamp), 31011310200312009116(String), 847bc4b46918417dab4aa917af3355c3(String), 2020-06-16 16:00:09.871(Timestamp), 31011310200312009116(String), 9c830141ce3e4854847cc2b52c46aa60(String), 2020-06-16 16:00:09.871(Timestamp), 31011310200312009116(String), b0789ee1f8404172941794b5431fd75d(String), 2020-06-16 16:00:09.871(Timestamp), 31011310200312009116(String), b46c567e4517456798ca3a5b0f34863d(String), 2020-06-16 16:00:09.871(Timestamp), 31011310200312009116(String), c8e65283e6a243a5a1b89ae2117b6479(String), 2020-06-16 16:00:09.871(Timestamp), 31011310200312009116(String), d07ab42169144816afe341ba43d0b68c(String), 2020-06-16 16:00:09.871(Timestamp), 31011310200312009116(String), db6607db218b4182924b980ecb900b19(String), 2020-06-16 16:00:09.871(Timestamp), 31011310200312009116(String), f14d68452e254abd9a4cb294ffda7da8(String), 2020-06-16 16:00:09.871(Timestamp), 31011310200312009116(String), f3e5596b011443049fa85ecee89c330e(String), 2020-06-16 16:00:09.871(Timestamp), 31011310200312009116(String), fd711d1c91624b46b7ecb8bf2aa6efe0(String), 2020-06-16 16:00:09.871(Timestamp) 
2020-06-16 16:00:09.998 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 13 
2020-06-16 16:00:13.432 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-16 16:00:13.433 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 16:00:13.438 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-16 16:00:13.445 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-16 16:00:13.445 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 16:00:13.455 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-16 16:00:13.460 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-16 16:00:13.461 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-16 16:00:13.466 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-16 16:00:13.471 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-16 16:00:13.471 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 16:00:13.476 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-16 16:00:13.480 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t2.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 16:00:13.480 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 16:00:13.486 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 16:00:13.490 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-16 16:00:13.490 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-16 16:00:13.491 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 16:00:13.491 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 16:00:13.495 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-16 16:00:13.500 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 16:00:13.500 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 16:00:13.505 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-16 16:00:13.509 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 16:00:13.509 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 16:00:13.514 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-16 16:00:13.518 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t2.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 16:00:13.519 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 16:00:13.533 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 3 
2020-06-16 16:00:13.537 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-16 16:00:13.537 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 3 
2020-06-16 16:00:13.538 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 16:00:13.538 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 16:00:13.543 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-16 16:00:13.546 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 16:00:13.547 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 16:00:13.551 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-16 16:00:13.556 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 16:00:13.557 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 16:00:13.562 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-16 16:00:13.567 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 16:00:13.568 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190401596084000(String) 
2020-06-16 16:00:13.572 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-16 16:00:13.577 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 16:00:13.578 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190401596084000(String) 
2020-06-16 16:00:13.583 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-16 16:00:13.588 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 16:00:13.589 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 16:00:13.594 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-16 16:00:13.599 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 16:00:13.600 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190408596837900(String) 
2020-06-16 16:00:13.604 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-16 16:00:13.609 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 16:00:13.609 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190408596837900(String) 
2020-06-16 16:00:13.614 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-16 16:00:13.618 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 16:00:13.619 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 16:00:13.623 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-16 16:00:13.628 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-16 16:00:13.629 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 16:00:13.634 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-16 16:00:13.647 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:手机号码校验失败同时满足以下条件： 1、联系电话不为空值 2、联系电话为手机号码（是1开头判断为手机号） 3、号码长度为11位，但是不存在这个号段（进行号段校验） 
2020-06-16 16:00:13.648 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:个人基本信息表既往史建档前与三级医院住院就诊记录诊断逻辑不符（恶性肿瘤） 
2020-06-16 16:00:13.649 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:个人基本信息表既往史建档前与三级医院住院就诊记录诊断逻辑不符（严重精神障碍） 
2020-06-16 16:00:13.650 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:与三级医院住院就诊记录表姓名不一致同时满足以下条件： 1、封面《姓名》不为空值 2、三级医院住院就诊记录表《患者姓名》不为空 3、封面《姓名》与住院就诊记录表中《患者姓名》不相等 
2020-06-16 16:00:13.650 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:与三级医院门诊就诊记录表姓名不一致同时满足以下条件： 1、封面《姓名》不为空值 2、三级医院门诊就诊记录表《患者姓名》不为空 3、封面《姓名》与门诊就诊记录表中《患者姓名》不相等 
2020-06-16 16:00:13.651 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:个人基本信息表既往史建档前与三级医院住院就诊记录诊断逻辑不符（脑卒中） 
2020-06-16 16:00:13.651 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:个人基本信息表既往史建档前与三级医院住院就诊记录诊断逻辑不符（冠心病） 
2020-06-16 16:00:13.652 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:个人基本信息表既往史建档前与三级医院住院就诊记录诊断逻辑不符（慢性阻塞性肺疾病） 
2020-06-16 16:00:13.653 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:个人基本信息表既往史建档前与三级医院住院就诊记录诊断逻辑不符（糖尿病） 
2020-06-16 16:00:13.654 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:联系电话不为纯数字同时满足以下条件： 1、联系电话不为空值 2、联系电话不是纯数字 
2020-06-16 16:00:13.654 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:个人基本信息表既往史建档前与三级医院住院就诊记录诊断逻辑不符（高血压） 
2020-06-16 16:00:13.655 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:个人基本信息表既往史建档前与三级医院住院就诊记录诊断逻辑不符（糖尿病） 
2020-06-16 16:00:13.655 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:个人基本信息表既往史建档前与三级医院住院就诊记录诊断逻辑不符（结核病） 
2020-06-16 16:00:13.655 [INFO ] c.b.r.m.m.service.impl.EhrModelBuildServiceImpl    - [saveResult:158] 规则执行结束结果条数为:13 
2020-06-16 16:00:13.656 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-16 16:00:13.657 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 18c8a8a81e25426f8a7958b46716c295(String), 2020-06-16 16:00:13.656(Timestamp), 31011310200312009116(String), 4148ac732c724fc7b87f96a04079d821(String), 2020-06-16 16:00:13.656(Timestamp), 31011310200312009116(String), 72de975121d24cd3bbdfd8324ae36aba(String), 2020-06-16 16:00:13.656(Timestamp), 31011310200312009116(String), 814b3d0aca3642af82ef320f98d4dfba(String), 2020-06-16 16:00:13.656(Timestamp), 31011310200312009116(String), 847bc4b46918417dab4aa917af3355c3(String), 2020-06-16 16:00:13.656(Timestamp), 31011310200312009116(String), 9c830141ce3e4854847cc2b52c46aa60(String), 2020-06-16 16:00:13.656(Timestamp), 31011310200312009116(String), b0789ee1f8404172941794b5431fd75d(String), 2020-06-16 16:00:13.656(Timestamp), 31011310200312009116(String), b46c567e4517456798ca3a5b0f34863d(String), 2020-06-16 16:00:13.656(Timestamp), 31011310200312009116(String), c8e65283e6a243a5a1b89ae2117b6479(String), 2020-06-16 16:00:13.656(Timestamp), 31011310200312009116(String), db6607db218b4182924b980ecb900b19(String), 2020-06-16 16:00:13.656(Timestamp), 31011310200312009116(String), f14d68452e254abd9a4cb294ffda7da8(String), 2020-06-16 16:00:13.656(Timestamp), 31011310200312009116(String), f3e5596b011443049fa85ecee89c330e(String), 2020-06-16 16:00:13.656(Timestamp), 31011310200312009116(String), fd711d1c91624b46b7ecb8bf2aa6efe0(String), 2020-06-16 16:00:13.656(Timestamp) 
2020-06-16 16:00:13.682 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 13 
2020-06-16 16:00:17.135 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-16 16:00:17.136 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 16:00:17.141 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-16 16:00:17.149 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-16 16:00:17.150 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 16:00:17.155 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-16 16:00:17.160 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-16 16:00:17.160 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-16 16:00:17.166 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-16 16:00:17.171 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-16 16:00:17.172 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 16:00:17.176 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-16 16:00:17.181 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t2.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 16:00:17.182 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 16:00:17.188 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 16:00:17.193 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-16 16:00:17.193 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-16 16:00:17.194 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 16:00:17.194 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 16:00:17.199 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-16 16:00:17.203 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 16:00:17.203 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 16:00:17.207 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-16 16:00:17.212 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 16:00:17.212 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 16:00:17.217 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-16 16:00:17.222 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t2.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 16:00:17.223 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 16:00:17.238 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 3 
2020-06-16 16:00:17.243 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-16 16:00:17.243 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 3 
2020-06-16 16:00:17.244 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 16:00:17.245 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 16:00:17.250 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-16 16:00:17.254 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 16:00:17.255 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 16:00:17.261 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-16 16:00:17.265 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 16:00:17.266 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 16:00:17.271 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-16 16:00:17.276 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 16:00:17.277 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190401596084000(String) 
2020-06-16 16:00:17.284 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-16 16:00:17.289 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 16:00:17.289 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190401596084000(String) 
2020-06-16 16:00:17.294 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-16 16:00:17.298 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 16:00:17.299 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 16:00:17.304 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-16 16:00:17.309 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 16:00:17.310 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190408596837900(String) 
2020-06-16 16:00:17.314 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-16 16:00:17.319 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 16:00:17.319 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190408596837900(String) 
2020-06-16 16:00:17.324 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-16 16:00:17.329 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 16:00:17.329 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 16:00:17.334 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-16 16:00:17.338 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-16 16:00:17.338 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 16:00:17.343 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-16 16:00:17.358 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:个人基本信息表既往史建档前与三级医院住院就诊记录诊断逻辑不符（恶性肿瘤） 
2020-06-16 16:00:17.358 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:固定电话长度异常（含区号）同时满足以下条件： 1、联系电话不为空值 2、联系电话为固定电话（是0开头判断为固定电话） 3、号码长度小于11位或大于12位 
2020-06-16 16:00:17.359 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:个人基本信息表既往史建档前与三级医院住院就诊记录诊断逻辑不符（严重精神障碍） 
2020-06-16 16:00:17.359 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:与三级医院住院就诊记录表姓名不一致同时满足以下条件： 1、封面《姓名》不为空值 2、三级医院住院就诊记录表《患者姓名》不为空 3、封面《姓名》与住院就诊记录表中《患者姓名》不相等 
2020-06-16 16:00:17.360 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:与三级医院门诊就诊记录表姓名不一致同时满足以下条件： 1、封面《姓名》不为空值 2、三级医院门诊就诊记录表《患者姓名》不为空 3、封面《姓名》与门诊就诊记录表中《患者姓名》不相等 
2020-06-16 16:00:17.362 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:个人基本信息表既往史建档前与三级医院住院就诊记录诊断逻辑不符（脑卒中） 
2020-06-16 16:00:17.363 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:个人基本信息表既往史建档前与三级医院住院就诊记录诊断逻辑不符（冠心病） 
2020-06-16 16:00:17.364 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:个人基本信息表既往史建档前与三级医院住院就诊记录诊断逻辑不符（慢性阻塞性肺疾病） 
2020-06-16 16:00:17.365 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:个人基本信息表既往史建档前与三级医院住院就诊记录诊断逻辑不符（糖尿病） 
2020-06-16 16:00:17.366 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:联系电话不为纯数字同时满足以下条件： 1、联系电话不为空值 2、联系电话不是纯数字 
2020-06-16 16:00:17.366 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:个人基本信息表既往史建档前与三级医院住院就诊记录诊断逻辑不符（高血压） 
2020-06-16 16:00:17.367 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:个人基本信息表既往史建档前与三级医院住院就诊记录诊断逻辑不符（糖尿病） 
2020-06-16 16:00:17.367 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:个人基本信息表既往史建档前与三级医院住院就诊记录诊断逻辑不符（结核病） 
2020-06-16 16:00:17.367 [INFO ] c.b.r.m.m.service.impl.EhrModelBuildServiceImpl    - [saveResult:158] 规则执行结束结果条数为:13 
2020-06-16 16:00:17.369 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-16 16:00:17.370 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 4148ac732c724fc7b87f96a04079d821(String), 2020-06-16 16:00:17.367(Timestamp), 31011310200312009116(String), 605d17cf2e38410da56726f765f8c34c(String), 2020-06-16 16:00:17.367(Timestamp), 31011310200312009116(String), 72de975121d24cd3bbdfd8324ae36aba(String), 2020-06-16 16:00:17.367(Timestamp), 31011310200312009116(String), 814b3d0aca3642af82ef320f98d4dfba(String), 2020-06-16 16:00:17.367(Timestamp), 31011310200312009116(String), 847bc4b46918417dab4aa917af3355c3(String), 2020-06-16 16:00:17.367(Timestamp), 31011310200312009116(String), 9c830141ce3e4854847cc2b52c46aa60(String), 2020-06-16 16:00:17.367(Timestamp), 31011310200312009116(String), b0789ee1f8404172941794b5431fd75d(String), 2020-06-16 16:00:17.367(Timestamp), 31011310200312009116(String), b46c567e4517456798ca3a5b0f34863d(String), 2020-06-16 16:00:17.367(Timestamp), 31011310200312009116(String), c8e65283e6a243a5a1b89ae2117b6479(String), 2020-06-16 16:00:17.367(Timestamp), 31011310200312009116(String), db6607db218b4182924b980ecb900b19(String), 2020-06-16 16:00:17.367(Timestamp), 31011310200312009116(String), f14d68452e254abd9a4cb294ffda7da8(String), 2020-06-16 16:00:17.367(Timestamp), 31011310200312009116(String), f3e5596b011443049fa85ecee89c330e(String), 2020-06-16 16:00:17.367(Timestamp), 31011310200312009116(String), fd711d1c91624b46b7ecb8bf2aa6efe0(String), 2020-06-16 16:00:17.367(Timestamp) 
2020-06-16 16:00:17.393 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 13 
2020-06-16 16:00:20.869 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-16 16:00:20.870 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 16:00:20.875 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-16 16:00:20.881 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-16 16:00:20.881 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 16:00:20.886 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-16 16:00:20.890 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-16 16:00:20.891 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-16 16:00:20.896 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-16 16:00:20.900 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-16 16:00:20.900 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 16:00:20.904 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-16 16:00:20.909 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t2.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 16:00:20.909 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 16:00:20.914 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 16:00:20.919 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-16 16:00:20.919 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-16 16:00:20.919 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 16:00:20.920 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 16:00:20.924 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-16 16:00:20.928 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 16:00:20.928 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 16:00:20.932 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-16 16:00:20.936 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 16:00:20.936 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 16:00:20.941 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-16 16:00:20.945 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t2.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 16:00:20.945 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 16:00:20.959 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 3 
2020-06-16 16:00:20.964 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-16 16:00:20.964 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 3 
2020-06-16 16:00:20.965 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 16:00:20.965 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 16:00:20.970 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-16 16:00:20.974 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 16:00:20.975 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 16:00:20.979 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-16 16:00:20.984 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 16:00:20.984 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 16:00:20.989 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-16 16:00:20.994 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 16:00:20.994 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190401596084000(String) 
2020-06-16 16:00:20.999 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-16 16:00:21.004 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 16:00:21.004 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190401596084000(String) 
2020-06-16 16:00:21.009 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-16 16:00:21.014 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 16:00:21.015 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 16:00:21.020 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-16 16:00:21.024 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 16:00:21.025 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190408596837900(String) 
2020-06-16 16:00:21.029 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-16 16:00:21.033 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 16:00:21.034 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190408596837900(String) 
2020-06-16 16:00:21.038 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-16 16:00:21.043 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 16:00:21.044 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 16:00:21.048 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-16 16:00:21.052 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-16 16:00:21.053 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 16:00:21.057 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-16 16:00:21.071 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:个人基本信息表既往史建档前与三级医院住院就诊记录诊断逻辑不符（恶性肿瘤） 
2020-06-16 16:00:21.073 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:个人基本信息表既往史建档前与三级医院住院就诊记录诊断逻辑不符（严重精神障碍） 
2020-06-16 16:00:21.073 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:与三级医院住院就诊记录表姓名不一致同时满足以下条件： 1、封面《姓名》不为空值 2、三级医院住院就诊记录表《患者姓名》不为空 3、封面《姓名》与住院就诊记录表中《患者姓名》不相等 
2020-06-16 16:00:21.074 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:与三级医院门诊就诊记录表姓名不一致同时满足以下条件： 1、封面《姓名》不为空值 2、三级医院门诊就诊记录表《患者姓名》不为空 3、封面《姓名》与门诊就诊记录表中《患者姓名》不相等 
2020-06-16 16:00:21.075 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:个人基本信息表既往史建档前与三级医院住院就诊记录诊断逻辑不符（脑卒中） 
2020-06-16 16:00:21.076 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:个人基本信息表既往史建档前与三级医院住院就诊记录诊断逻辑不符（冠心病） 
2020-06-16 16:00:21.076 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:固定电话长度异常（不含区号）同时满足以下条件： 1、联系电话不为空值 2、联系电话为固定电话（不是1和0开头判断为固定电话） 3、号码长度小于7位或大于8位 
2020-06-16 16:00:21.077 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:个人基本信息表既往史建档前与三级医院住院就诊记录诊断逻辑不符（慢性阻塞性肺疾病） 
2020-06-16 16:00:21.078 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:个人基本信息表既往史建档前与三级医院住院就诊记录诊断逻辑不符（糖尿病） 
2020-06-16 16:00:21.079 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:联系电话不为纯数字同时满足以下条件： 1、联系电话不为空值 2、联系电话不是纯数字 
2020-06-16 16:00:21.079 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:个人基本信息表既往史建档前与三级医院住院就诊记录诊断逻辑不符（高血压） 
2020-06-16 16:00:21.080 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:个人基本信息表既往史建档前与三级医院住院就诊记录诊断逻辑不符（糖尿病） 
2020-06-16 16:00:21.080 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:个人基本信息表既往史建档前与三级医院住院就诊记录诊断逻辑不符（结核病） 
2020-06-16 16:00:21.081 [INFO ] c.b.r.m.m.service.impl.EhrModelBuildServiceImpl    - [saveResult:158] 规则执行结束结果条数为:13 
2020-06-16 16:00:21.081 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-16 16:00:21.082 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 4148ac732c724fc7b87f96a04079d821(String), 2020-06-16 16:00:21.081(Timestamp), 31011310200312009116(String), 72de975121d24cd3bbdfd8324ae36aba(String), 2020-06-16 16:00:21.081(Timestamp), 31011310200312009116(String), 814b3d0aca3642af82ef320f98d4dfba(String), 2020-06-16 16:00:21.081(Timestamp), 31011310200312009116(String), 847bc4b46918417dab4aa917af3355c3(String), 2020-06-16 16:00:21.081(Timestamp), 31011310200312009116(String), 9c830141ce3e4854847cc2b52c46aa60(String), 2020-06-16 16:00:21.081(Timestamp), 31011310200312009116(String), b0789ee1f8404172941794b5431fd75d(String), 2020-06-16 16:00:21.081(Timestamp), 31011310200312009116(String), b0d2d6a11e4b476b813f99750cb00786(String), 2020-06-16 16:00:21.081(Timestamp), 31011310200312009116(String), b46c567e4517456798ca3a5b0f34863d(String), 2020-06-16 16:00:21.081(Timestamp), 31011310200312009116(String), c8e65283e6a243a5a1b89ae2117b6479(String), 2020-06-16 16:00:21.081(Timestamp), 31011310200312009116(String), db6607db218b4182924b980ecb900b19(String), 2020-06-16 16:00:21.081(Timestamp), 31011310200312009116(String), f14d68452e254abd9a4cb294ffda7da8(String), 2020-06-16 16:00:21.081(Timestamp), 31011310200312009116(String), f3e5596b011443049fa85ecee89c330e(String), 2020-06-16 16:00:21.081(Timestamp), 31011310200312009116(String), fd711d1c91624b46b7ecb8bf2aa6efe0(String), 2020-06-16 16:00:21.081(Timestamp) 
2020-06-16 16:00:21.100 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 13 
2020-06-16 16:00:24.546 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-16 16:00:24.547 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 16:00:24.552 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-16 16:00:24.558 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-16 16:00:24.558 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 16:00:24.563 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-16 16:00:24.568 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-16 16:00:24.568 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-16 16:00:24.573 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-16 16:00:24.578 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-16 16:00:24.578 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 16:00:24.582 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-16 16:00:24.587 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t2.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 16:00:24.587 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 16:00:24.593 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 16:00:24.596 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-16 16:00:24.597 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-16 16:00:24.597 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 16:00:24.598 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 16:00:24.601 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-16 16:00:24.606 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 16:00:24.606 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 16:00:24.611 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-16 16:00:24.615 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 16:00:24.616 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 16:00:24.620 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-16 16:00:24.624 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t2.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 16:00:24.624 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 16:00:24.638 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 3 
2020-06-16 16:00:24.643 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-16 16:00:24.644 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 3 
2020-06-16 16:00:24.645 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 16:00:24.645 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 16:00:24.650 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-16 16:00:24.655 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 16:00:24.656 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 16:00:24.660 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-16 16:00:24.665 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 16:00:24.666 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 16:00:24.671 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-16 16:00:24.676 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 16:00:24.677 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190401596084000(String) 
2020-06-16 16:00:24.682 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-16 16:00:24.687 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 16:00:24.688 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190401596084000(String) 
2020-06-16 16:00:24.692 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-16 16:00:24.698 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 16:00:24.699 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 16:00:24.703 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-16 16:00:24.709 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 16:00:24.709 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190408596837900(String) 
2020-06-16 16:00:24.714 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-16 16:00:24.719 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 16:00:24.720 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190408596837900(String) 
2020-06-16 16:00:24.724 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-16 16:00:24.729 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 16:00:24.730 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 16:00:24.735 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-16 16:00:24.740 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-16 16:00:24.741 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 16:00:24.745 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-16 16:00:24.759 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:个人基本信息表既往史建档前与三级医院住院就诊记录诊断逻辑不符（恶性肿瘤） 
2020-06-16 16:00:24.761 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:个人基本信息表既往史建档前与三级医院住院就诊记录诊断逻辑不符（严重精神障碍） 
2020-06-16 16:00:24.762 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:与三级医院住院就诊记录表姓名不一致同时满足以下条件： 1、封面《姓名》不为空值 2、三级医院住院就诊记录表《患者姓名》不为空 3、封面《姓名》与住院就诊记录表中《患者姓名》不相等 
2020-06-16 16:00:24.762 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:与三级医院门诊就诊记录表姓名不一致同时满足以下条件： 1、封面《姓名》不为空值 2、三级医院门诊就诊记录表《患者姓名》不为空 3、封面《姓名》与门诊就诊记录表中《患者姓名》不相等 
2020-06-16 16:00:24.763 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:个人基本信息表既往史建档前与三级医院住院就诊记录诊断逻辑不符（脑卒中） 
2020-06-16 16:00:24.763 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:个人基本信息表既往史建档前与三级医院住院就诊记录诊断逻辑不符（冠心病） 
2020-06-16 16:00:24.763 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:个人基本信息表既往史建档前与三级医院住院就诊记录诊断逻辑不符（慢性阻塞性肺疾病） 
2020-06-16 16:00:24.764 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:个人基本信息表既往史建档前与三级医院住院就诊记录诊断逻辑不符（糖尿病） 
2020-06-16 16:00:24.765 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:联系电话不为纯数字同时满足以下条件： 1、联系电话不为空值 2、联系电话不是纯数字 
2020-06-16 16:00:24.766 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:个人基本信息表既往史建档前与三级医院住院就诊记录诊断逻辑不符（高血压） 
2020-06-16 16:00:24.766 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:个人基本信息表既往史建档前与三级医院住院就诊记录诊断逻辑不符（糖尿病） 
2020-06-16 16:00:24.766 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:个人基本信息表既往史建档前与三级医院住院就诊记录诊断逻辑不符（结核病） 
2020-06-16 16:00:24.767 [INFO ] c.b.r.m.m.service.impl.EhrModelBuildServiceImpl    - [saveResult:158] 规则执行结束结果条数为:12 
2020-06-16 16:00:24.767 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-16 16:00:24.768 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 4148ac732c724fc7b87f96a04079d821(String), 2020-06-16 16:00:24.767(Timestamp), 31011310200312009116(String), 72de975121d24cd3bbdfd8324ae36aba(String), 2020-06-16 16:00:24.767(Timestamp), 31011310200312009116(String), 814b3d0aca3642af82ef320f98d4dfba(String), 2020-06-16 16:00:24.767(Timestamp), 31011310200312009116(String), 847bc4b46918417dab4aa917af3355c3(String), 2020-06-16 16:00:24.767(Timestamp), 31011310200312009116(String), 9c830141ce3e4854847cc2b52c46aa60(String), 2020-06-16 16:00:24.767(Timestamp), 31011310200312009116(String), b0789ee1f8404172941794b5431fd75d(String), 2020-06-16 16:00:24.767(Timestamp), 31011310200312009116(String), b46c567e4517456798ca3a5b0f34863d(String), 2020-06-16 16:00:24.767(Timestamp), 31011310200312009116(String), c8e65283e6a243a5a1b89ae2117b6479(String), 2020-06-16 16:00:24.767(Timestamp), 31011310200312009116(String), db6607db218b4182924b980ecb900b19(String), 2020-06-16 16:00:24.767(Timestamp), 31011310200312009116(String), f14d68452e254abd9a4cb294ffda7da8(String), 2020-06-16 16:00:24.767(Timestamp), 31011310200312009116(String), f3e5596b011443049fa85ecee89c330e(String), 2020-06-16 16:00:24.767(Timestamp), 31011310200312009116(String), fd711d1c91624b46b7ecb8bf2aa6efe0(String), 2020-06-16 16:00:24.767(Timestamp) 
2020-06-16 16:00:24.809 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 12 
2020-06-16 16:00:28.254 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-16 16:00:28.254 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 16:00:28.259 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-16 16:00:28.264 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-16 16:00:28.265 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 16:00:28.269 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-16 16:00:28.274 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-16 16:00:28.275 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-16 16:00:28.279 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-16 16:00:28.284 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-16 16:00:28.285 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 16:00:28.294 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-16 16:00:28.298 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t2.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 16:00:28.299 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 16:00:28.304 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 16:00:28.308 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-16 16:00:28.308 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-16 16:00:28.309 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 16:00:28.309 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 16:00:28.315 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-16 16:00:28.321 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 16:00:28.321 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 16:00:28.326 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-16 16:00:28.331 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 16:00:28.332 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 16:00:28.337 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-16 16:00:28.343 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t2.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 16:00:28.344 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 16:00:28.358 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 3 
2020-06-16 16:00:28.363 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-16 16:00:28.363 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 3 
2020-06-16 16:00:28.364 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 16:00:28.365 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 16:00:28.371 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-16 16:00:28.377 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 16:00:28.377 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 16:00:28.382 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-16 16:00:28.387 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 16:00:28.388 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 16:00:28.393 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-16 16:00:28.397 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 16:00:28.398 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190401596084000(String) 
2020-06-16 16:00:28.403 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-16 16:00:28.409 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 16:00:28.410 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190401596084000(String) 
2020-06-16 16:00:28.415 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-16 16:00:28.421 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 16:00:28.422 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 16:00:28.430 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-16 16:00:28.435 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 16:00:28.436 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190408596837900(String) 
2020-06-16 16:00:28.443 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-16 16:00:28.449 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 16:00:28.450 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190408596837900(String) 
2020-06-16 16:00:28.455 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-16 16:00:28.461 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 16:00:28.462 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 16:00:28.469 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-16 16:00:28.473 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-16 16:00:28.474 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 16:00:28.479 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-16 16:00:28.505 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:联系电话不为纯数字同时满足以下条件： 1、联系电话不为空值 2、联系电话数字只包含一个数字，如99999999 
2020-06-16 16:00:28.506 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:个人基本信息表既往史建档前与三级医院住院就诊记录诊断逻辑不符（恶性肿瘤） 
2020-06-16 16:00:28.508 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:个人基本信息表既往史建档前与三级医院住院就诊记录诊断逻辑不符（严重精神障碍） 
2020-06-16 16:00:28.509 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:与三级医院住院就诊记录表姓名不一致同时满足以下条件： 1、封面《姓名》不为空值 2、三级医院住院就诊记录表《患者姓名》不为空 3、封面《姓名》与住院就诊记录表中《患者姓名》不相等 
2020-06-16 16:00:28.510 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:与三级医院门诊就诊记录表姓名不一致同时满足以下条件： 1、封面《姓名》不为空值 2、三级医院门诊就诊记录表《患者姓名》不为空 3、封面《姓名》与门诊就诊记录表中《患者姓名》不相等 
2020-06-16 16:00:28.511 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:个人基本信息表既往史建档前与三级医院住院就诊记录诊断逻辑不符（脑卒中） 
2020-06-16 16:00:28.512 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:个人基本信息表既往史建档前与三级医院住院就诊记录诊断逻辑不符（冠心病） 
2020-06-16 16:00:28.513 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:固定电话长度异常（不含区号）同时满足以下条件： 1、联系电话不为空值 2、联系电话为固定电话（不是1和0开头判断为固定电话） 3、号码长度小于7位或大于8位 
2020-06-16 16:00:28.513 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:个人基本信息表既往史建档前与三级医院住院就诊记录诊断逻辑不符（慢性阻塞性肺疾病） 
2020-06-16 16:00:28.514 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:个人基本信息表既往史建档前与三级医院住院就诊记录诊断逻辑不符（糖尿病） 
2020-06-16 16:00:28.514 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:联系电话不为纯数字同时满足以下条件： 1、联系电话不为空值 2、联系电话不是纯数字 
2020-06-16 16:00:28.515 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:个人基本信息表既往史建档前与三级医院住院就诊记录诊断逻辑不符（高血压） 
2020-06-16 16:00:28.515 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:个人基本信息表既往史建档前与三级医院住院就诊记录诊断逻辑不符（糖尿病） 
2020-06-16 16:00:28.516 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:个人基本信息表既往史建档前与三级医院住院就诊记录诊断逻辑不符（结核病） 
2020-06-16 16:00:28.516 [INFO ] c.b.r.m.m.service.impl.EhrModelBuildServiceImpl    - [saveResult:158] 规则执行结束结果条数为:14 
2020-06-16 16:00:28.517 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-16 16:00:28.518 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 2be6482767e14818889eee74b5263746(String), 2020-06-16 16:00:28.516(Timestamp), 31011310200312009116(String), 4148ac732c724fc7b87f96a04079d821(String), 2020-06-16 16:00:28.516(Timestamp), 31011310200312009116(String), 72de975121d24cd3bbdfd8324ae36aba(String), 2020-06-16 16:00:28.516(Timestamp), 31011310200312009116(String), 814b3d0aca3642af82ef320f98d4dfba(String), 2020-06-16 16:00:28.516(Timestamp), 31011310200312009116(String), 847bc4b46918417dab4aa917af3355c3(String), 2020-06-16 16:00:28.516(Timestamp), 31011310200312009116(String), 9c830141ce3e4854847cc2b52c46aa60(String), 2020-06-16 16:00:28.516(Timestamp), 31011310200312009116(String), b0789ee1f8404172941794b5431fd75d(String), 2020-06-16 16:00:28.516(Timestamp), 31011310200312009116(String), b0d2d6a11e4b476b813f99750cb00786(String), 2020-06-16 16:00:28.516(Timestamp), 31011310200312009116(String), b46c567e4517456798ca3a5b0f34863d(String), 2020-06-16 16:00:28.516(Timestamp), 31011310200312009116(String), c8e65283e6a243a5a1b89ae2117b6479(String), 2020-06-16 16:00:28.516(Timestamp), 31011310200312009116(String), db6607db218b4182924b980ecb900b19(String), 2020-06-16 16:00:28.516(Timestamp), 31011310200312009116(String), f14d68452e254abd9a4cb294ffda7da8(String), 2020-06-16 16:00:28.516(Timestamp), 31011310200312009116(String), f3e5596b011443049fa85ecee89c330e(String), 2020-06-16 16:00:28.516(Timestamp), 31011310200312009116(String), fd711d1c91624b46b7ecb8bf2aa6efe0(String), 2020-06-16 16:00:28.516(Timestamp) 
2020-06-16 16:00:28.547 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 14 
2020-06-16 16:00:33.367 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-16 16:00:33.367 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 16:00:33.376 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-16 16:00:33.381 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-16 16:00:33.381 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 16:00:33.386 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-16 16:00:33.390 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-16 16:00:33.390 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-16 16:00:33.397 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-16 16:00:33.402 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-16 16:00:33.402 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 16:00:33.406 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-16 16:00:33.410 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t2.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 16:00:33.411 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 16:00:33.417 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 16:00:33.424 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-16 16:00:33.424 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-16 16:00:33.424 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 16:00:33.425 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 16:00:33.430 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-16 16:00:33.434 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 16:00:33.435 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 16:00:33.439 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-16 16:00:33.444 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 16:00:33.444 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 16:00:33.448 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-16 16:00:33.453 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t2.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 16:00:33.454 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 16:00:33.467 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 3 
2020-06-16 16:00:33.472 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-16 16:00:33.472 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 3 
2020-06-16 16:00:33.472 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 16:00:33.473 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 16:00:33.477 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-16 16:00:33.487 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 16:00:33.487 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 16:00:33.493 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-16 16:00:33.497 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 16:00:33.498 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 16:00:33.502 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-16 16:00:33.506 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 16:00:33.506 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190401596084000(String) 
2020-06-16 16:00:33.511 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-16 16:00:33.514 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 16:00:33.514 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190401596084000(String) 
2020-06-16 16:00:33.517 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-16 16:00:33.521 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 16:00:33.521 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 16:00:33.526 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-16 16:00:33.529 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 16:00:33.530 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190408596837900(String) 
2020-06-16 16:00:33.535 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-16 16:00:33.539 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 16:00:33.539 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190408596837900(String) 
2020-06-16 16:00:33.543 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-16 16:00:33.547 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 16:00:33.548 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 16:00:33.552 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-16 16:00:33.556 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-16 16:00:33.557 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 16:00:33.561 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-16 16:00:33.576 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:个人基本信息表既往史建档前与三级医院住院就诊记录诊断逻辑不符（恶性肿瘤） 
2020-06-16 16:00:33.577 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:现住址市乡镇（街道）名称未填写乡镇（街道）名称为空值 
2020-06-16 16:00:33.578 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:个人基本信息表既往史建档前与三级医院住院就诊记录诊断逻辑不符（严重精神障碍） 
2020-06-16 16:00:33.578 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:与三级医院住院就诊记录表姓名不一致同时满足以下条件： 1、封面《姓名》不为空值 2、三级医院住院就诊记录表《患者姓名》不为空 3、封面《姓名》与住院就诊记录表中《患者姓名》不相等 
2020-06-16 16:00:33.580 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:与三级医院门诊就诊记录表姓名不一致同时满足以下条件： 1、封面《姓名》不为空值 2、三级医院门诊就诊记录表《患者姓名》不为空 3、封面《姓名》与门诊就诊记录表中《患者姓名》不相等 
2020-06-16 16:00:33.581 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:个人基本信息表既往史建档前与三级医院住院就诊记录诊断逻辑不符（脑卒中） 
2020-06-16 16:00:33.582 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:个人基本信息表既往史建档前与三级医院住院就诊记录诊断逻辑不符（冠心病） 
2020-06-16 16:00:33.583 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:个人基本信息表既往史建档前与三级医院住院就诊记录诊断逻辑不符（慢性阻塞性肺疾病） 
2020-06-16 16:00:33.583 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:个人基本信息表既往史建档前与三级医院住院就诊记录诊断逻辑不符（糖尿病） 
2020-06-16 16:00:33.584 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:联系电话不为纯数字同时满足以下条件： 1、联系电话不为空值 2、联系电话不是纯数字 
2020-06-16 16:00:33.584 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:个人基本信息表既往史建档前与三级医院住院就诊记录诊断逻辑不符（高血压） 
2020-06-16 16:00:33.585 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:个人基本信息表既往史建档前与三级医院住院就诊记录诊断逻辑不符（糖尿病） 
2020-06-16 16:00:33.585 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:个人基本信息表既往史建档前与三级医院住院就诊记录诊断逻辑不符（结核病） 
2020-06-16 16:00:33.585 [INFO ] c.b.r.m.m.service.impl.EhrModelBuildServiceImpl    - [saveResult:158] 规则执行结束结果条数为:13 
2020-06-16 16:00:33.586 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-16 16:00:33.587 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 4148ac732c724fc7b87f96a04079d821(String), 2020-06-16 16:00:33.585(Timestamp), 31011310200312009116(String), 5989fb6d82aa4e618e2e5cdc2c36e01f(String), 2020-06-16 16:00:33.585(Timestamp), 31011310200312009116(String), 72de975121d24cd3bbdfd8324ae36aba(String), 2020-06-16 16:00:33.585(Timestamp), 31011310200312009116(String), 814b3d0aca3642af82ef320f98d4dfba(String), 2020-06-16 16:00:33.585(Timestamp), 31011310200312009116(String), 847bc4b46918417dab4aa917af3355c3(String), 2020-06-16 16:00:33.585(Timestamp), 31011310200312009116(String), 9c830141ce3e4854847cc2b52c46aa60(String), 2020-06-16 16:00:33.585(Timestamp), 31011310200312009116(String), b0789ee1f8404172941794b5431fd75d(String), 2020-06-16 16:00:33.585(Timestamp), 31011310200312009116(String), b46c567e4517456798ca3a5b0f34863d(String), 2020-06-16 16:00:33.585(Timestamp), 31011310200312009116(String), c8e65283e6a243a5a1b89ae2117b6479(String), 2020-06-16 16:00:33.585(Timestamp), 31011310200312009116(String), db6607db218b4182924b980ecb900b19(String), 2020-06-16 16:00:33.585(Timestamp), 31011310200312009116(String), f14d68452e254abd9a4cb294ffda7da8(String), 2020-06-16 16:00:33.585(Timestamp), 31011310200312009116(String), f3e5596b011443049fa85ecee89c330e(String), 2020-06-16 16:00:33.585(Timestamp), 31011310200312009116(String), fd711d1c91624b46b7ecb8bf2aa6efe0(String), 2020-06-16 16:00:33.585(Timestamp) 
2020-06-16 16:00:33.607 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 13 
2020-06-16 16:00:36.936 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-16 16:00:36.936 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 16:00:36.942 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-16 16:00:36.948 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-16 16:00:36.949 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 16:00:36.954 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-16 16:00:36.959 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-16 16:00:36.960 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-16 16:00:36.964 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-16 16:00:36.969 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-16 16:00:36.969 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 16:00:36.974 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-16 16:00:36.978 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t2.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 16:00:36.979 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 16:00:36.984 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 16:00:36.987 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-16 16:00:36.988 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-16 16:00:36.988 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 16:00:36.988 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 16:00:36.992 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-16 16:00:36.996 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 16:00:36.997 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 16:00:37.003 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-16 16:00:37.008 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 16:00:37.008 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 16:00:37.013 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-16 16:00:37.018 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t2.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 16:00:37.018 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 16:00:37.033 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 3 
2020-06-16 16:00:37.038 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-16 16:00:37.038 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 3 
2020-06-16 16:00:37.038 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 16:00:37.039 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 16:00:37.043 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-16 16:00:37.048 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 16:00:37.049 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 16:00:37.053 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-16 16:00:37.058 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 16:00:37.059 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 16:00:37.064 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-16 16:00:37.068 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 16:00:37.069 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190401596084000(String) 
2020-06-16 16:00:37.075 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-16 16:00:37.080 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 16:00:37.080 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190401596084000(String) 
2020-06-16 16:00:37.085 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-16 16:00:37.090 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 16:00:37.090 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 16:00:37.095 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-16 16:00:37.100 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 16:00:37.100 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190408596837900(String) 
2020-06-16 16:00:37.105 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-16 16:00:37.109 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 16:00:37.110 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190408596837900(String) 
2020-06-16 16:00:37.113 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-16 16:00:37.118 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 16:00:37.118 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 16:00:37.124 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-16 16:00:37.128 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-16 16:00:37.128 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 16:00:37.132 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-16 16:00:37.145 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:现住址乡镇（街道）名称不为汉字乡镇（街道）名称不为汉字 
2020-06-16 16:00:37.146 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:个人基本信息表既往史建档前与三级医院住院就诊记录诊断逻辑不符（恶性肿瘤） 
2020-06-16 16:00:37.148 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:个人基本信息表既往史建档前与三级医院住院就诊记录诊断逻辑不符（严重精神障碍） 
2020-06-16 16:00:37.148 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:与三级医院住院就诊记录表姓名不一致同时满足以下条件： 1、封面《姓名》不为空值 2、三级医院住院就诊记录表《患者姓名》不为空 3、封面《姓名》与住院就诊记录表中《患者姓名》不相等 
2020-06-16 16:00:37.148 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:与三级医院门诊就诊记录表姓名不一致同时满足以下条件： 1、封面《姓名》不为空值 2、三级医院门诊就诊记录表《患者姓名》不为空 3、封面《姓名》与门诊就诊记录表中《患者姓名》不相等 
2020-06-16 16:00:37.149 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:个人基本信息表既往史建档前与三级医院住院就诊记录诊断逻辑不符（脑卒中） 
2020-06-16 16:00:37.150 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:个人基本信息表既往史建档前与三级医院住院就诊记录诊断逻辑不符（冠心病） 
2020-06-16 16:00:37.150 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:个人基本信息表既往史建档前与三级医院住院就诊记录诊断逻辑不符（慢性阻塞性肺疾病） 
2020-06-16 16:00:37.151 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:个人基本信息表既往史建档前与三级医院住院就诊记录诊断逻辑不符（糖尿病） 
2020-06-16 16:00:37.152 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:联系电话不为纯数字同时满足以下条件： 1、联系电话不为空值 2、联系电话不是纯数字 
2020-06-16 16:00:37.153 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:个人基本信息表既往史建档前与三级医院住院就诊记录诊断逻辑不符（高血压） 
2020-06-16 16:00:37.153 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:个人基本信息表既往史建档前与三级医院住院就诊记录诊断逻辑不符（糖尿病） 
2020-06-16 16:00:37.154 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:个人基本信息表既往史建档前与三级医院住院就诊记录诊断逻辑不符（结核病） 
2020-06-16 16:00:37.154 [INFO ] c.b.r.m.m.service.impl.EhrModelBuildServiceImpl    - [saveResult:158] 规则执行结束结果条数为:13 
2020-06-16 16:00:37.155 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-16 16:00:37.156 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 2519a198f15a41ea970cf518d3c4bd89(String), 2020-06-16 16:00:37.154(Timestamp), 31011310200312009116(String), 4148ac732c724fc7b87f96a04079d821(String), 2020-06-16 16:00:37.154(Timestamp), 31011310200312009116(String), 72de975121d24cd3bbdfd8324ae36aba(String), 2020-06-16 16:00:37.154(Timestamp), 31011310200312009116(String), 814b3d0aca3642af82ef320f98d4dfba(String), 2020-06-16 16:00:37.154(Timestamp), 31011310200312009116(String), 847bc4b46918417dab4aa917af3355c3(String), 2020-06-16 16:00:37.154(Timestamp), 31011310200312009116(String), 9c830141ce3e4854847cc2b52c46aa60(String), 2020-06-16 16:00:37.154(Timestamp), 31011310200312009116(String), b0789ee1f8404172941794b5431fd75d(String), 2020-06-16 16:00:37.154(Timestamp), 31011310200312009116(String), b46c567e4517456798ca3a5b0f34863d(String), 2020-06-16 16:00:37.154(Timestamp), 31011310200312009116(String), c8e65283e6a243a5a1b89ae2117b6479(String), 2020-06-16 16:00:37.154(Timestamp), 31011310200312009116(String), db6607db218b4182924b980ecb900b19(String), 2020-06-16 16:00:37.154(Timestamp), 31011310200312009116(String), f14d68452e254abd9a4cb294ffda7da8(String), 2020-06-16 16:00:37.154(Timestamp), 31011310200312009116(String), f3e5596b011443049fa85ecee89c330e(String), 2020-06-16 16:00:37.154(Timestamp), 31011310200312009116(String), fd711d1c91624b46b7ecb8bf2aa6efe0(String), 2020-06-16 16:00:37.154(Timestamp) 
2020-06-16 16:00:37.180 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 13 
2020-06-16 16:00:40.870 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-16 16:00:40.871 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 16:00:40.880 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-16 16:00:40.885 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-16 16:00:40.885 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 16:00:40.893 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-16 16:00:40.899 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-16 16:00:40.900 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-16 16:00:40.905 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-16 16:00:40.909 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-16 16:00:40.910 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 16:00:40.914 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-16 16:00:40.918 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t2.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 16:00:40.919 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 16:00:40.925 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 16:00:40.929 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-16 16:00:40.929 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-16 16:00:40.929 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 16:00:40.930 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 16:00:40.935 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-16 16:00:40.940 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 16:00:40.940 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 16:00:40.944 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-16 16:00:40.947 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 16:00:40.948 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 16:00:40.953 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-16 16:00:40.957 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t2.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 16:00:40.957 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 16:00:40.971 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 3 
2020-06-16 16:00:40.975 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-16 16:00:40.976 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 3 
2020-06-16 16:00:40.976 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 16:00:40.976 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 16:00:40.980 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-16 16:00:40.984 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 16:00:40.984 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 16:00:40.989 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-16 16:00:40.993 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 16:00:40.993 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 16:00:40.997 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-16 16:00:41.002 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 16:00:41.002 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190401596084000(String) 
2020-06-16 16:00:41.006 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-16 16:00:41.011 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 16:00:41.011 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190401596084000(String) 
2020-06-16 16:00:41.015 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-16 16:00:41.019 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 16:00:41.019 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 16:00:41.024 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-16 16:00:41.027 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 16:00:41.028 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190408596837900(String) 
2020-06-16 16:00:41.032 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-16 16:00:41.036 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 16:00:41.036 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190408596837900(String) 
2020-06-16 16:00:41.040 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-16 16:00:41.045 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 16:00:41.045 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 16:00:41.049 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-16 16:00:41.053 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-16 16:00:41.054 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 16:00:41.058 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-16 16:00:41.080 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:现住址乡镇（街道）名称长度异常长度>100字符 
2020-06-16 16:00:41.081 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:个人基本信息表既往史建档前与三级医院住院就诊记录诊断逻辑不符（恶性肿瘤） 
2020-06-16 16:00:41.089 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:个人基本信息表既往史建档前与三级医院住院就诊记录诊断逻辑不符（严重精神障碍） 
2020-06-16 16:00:41.093 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:与三级医院住院就诊记录表姓名不一致同时满足以下条件： 1、封面《姓名》不为空值 2、三级医院住院就诊记录表《患者姓名》不为空 3、封面《姓名》与住院就诊记录表中《患者姓名》不相等 
2020-06-16 16:00:41.094 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:与三级医院门诊就诊记录表姓名不一致同时满足以下条件： 1、封面《姓名》不为空值 2、三级医院门诊就诊记录表《患者姓名》不为空 3、封面《姓名》与门诊就诊记录表中《患者姓名》不相等 
2020-06-16 16:00:41.096 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:现住址长度异常长度>100字符（包含省市区、乡镇街道名称（如有）、村居委会名称（如有）、详细地址） 
2020-06-16 16:00:41.098 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:个人基本信息表既往史建档前与三级医院住院就诊记录诊断逻辑不符（脑卒中） 
2020-06-16 16:00:41.101 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:个人基本信息表既往史建档前与三级医院住院就诊记录诊断逻辑不符（冠心病） 
2020-06-16 16:00:41.102 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:个人基本信息表既往史建档前与三级医院住院就诊记录诊断逻辑不符（慢性阻塞性肺疾病） 
2020-06-16 16:00:41.106 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:个人基本信息表既往史建档前与三级医院住院就诊记录诊断逻辑不符（糖尿病） 
2020-06-16 16:00:41.110 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:联系电话不为纯数字同时满足以下条件： 1、联系电话不为空值 2、联系电话不是纯数字 
2020-06-16 16:00:41.111 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:个人基本信息表既往史建档前与三级医院住院就诊记录诊断逻辑不符（高血压） 
2020-06-16 16:00:41.111 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:个人基本信息表既往史建档前与三级医院住院就诊记录诊断逻辑不符（糖尿病） 
2020-06-16 16:00:41.111 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:个人基本信息表既往史建档前与三级医院住院就诊记录诊断逻辑不符（结核病） 
2020-06-16 16:00:41.112 [INFO ] c.b.r.m.m.service.impl.EhrModelBuildServiceImpl    - [saveResult:158] 规则执行结束结果条数为:14 
2020-06-16 16:00:41.113 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-16 16:00:41.114 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 40c92f3721704bb7a6eb42a8ca1976b6(String), 2020-06-16 16:00:41.112(Timestamp), 31011310200312009116(String), 4148ac732c724fc7b87f96a04079d821(String), 2020-06-16 16:00:41.112(Timestamp), 31011310200312009116(String), 72de975121d24cd3bbdfd8324ae36aba(String), 2020-06-16 16:00:41.112(Timestamp), 31011310200312009116(String), 814b3d0aca3642af82ef320f98d4dfba(String), 2020-06-16 16:00:41.112(Timestamp), 31011310200312009116(String), 847bc4b46918417dab4aa917af3355c3(String), 2020-06-16 16:00:41.112(Timestamp), 31011310200312009116(String), 91665e0b2efa4f86aea807ec9f4883c3(String), 2020-06-16 16:00:41.112(Timestamp), 31011310200312009116(String), 9c830141ce3e4854847cc2b52c46aa60(String), 2020-06-16 16:00:41.112(Timestamp), 31011310200312009116(String), b0789ee1f8404172941794b5431fd75d(String), 2020-06-16 16:00:41.112(Timestamp), 31011310200312009116(String), b46c567e4517456798ca3a5b0f34863d(String), 2020-06-16 16:00:41.112(Timestamp), 31011310200312009116(String), c8e65283e6a243a5a1b89ae2117b6479(String), 2020-06-16 16:00:41.112(Timestamp), 31011310200312009116(String), db6607db218b4182924b980ecb900b19(String), 2020-06-16 16:00:41.112(Timestamp), 31011310200312009116(String), f14d68452e254abd9a4cb294ffda7da8(String), 2020-06-16 16:00:41.112(Timestamp), 31011310200312009116(String), f3e5596b011443049fa85ecee89c330e(String), 2020-06-16 16:00:41.112(Timestamp), 31011310200312009116(String), fd711d1c91624b46b7ecb8bf2aa6efe0(String), 2020-06-16 16:00:41.112(Timestamp) 
2020-06-16 16:00:41.148 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 14 
2020-06-16 16:00:44.558 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-16 16:00:44.558 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 16:00:44.565 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-16 16:00:44.570 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-16 16:00:44.570 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 16:00:44.577 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-16 16:00:44.583 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-16 16:00:44.584 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-16 16:00:44.594 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-16 16:00:44.600 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-16 16:00:44.601 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 16:00:44.607 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-16 16:00:44.612 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t2.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 16:00:44.612 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 16:00:44.618 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 16:00:44.623 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-16 16:00:44.623 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-16 16:00:44.624 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 16:00:44.625 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 16:00:44.630 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-16 16:00:44.634 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 16:00:44.635 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 16:00:44.639 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-16 16:00:44.644 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 16:00:44.644 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 16:00:44.648 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-16 16:00:44.652 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t2.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 16:00:44.653 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 16:00:44.666 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 3 
2020-06-16 16:00:44.671 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-16 16:00:44.671 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 3 
2020-06-16 16:00:44.671 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 16:00:44.672 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 16:00:44.678 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-16 16:00:44.682 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 16:00:44.682 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 16:00:44.688 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-16 16:00:44.693 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 16:00:44.693 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 16:00:44.697 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-16 16:00:44.702 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 16:00:44.702 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190401596084000(String) 
2020-06-16 16:00:44.708 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-16 16:00:44.713 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 16:00:44.713 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190401596084000(String) 
2020-06-16 16:00:44.718 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-16 16:00:44.723 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 16:00:44.724 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 16:00:44.729 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-16 16:00:44.734 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 16:00:44.734 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190408596837900(String) 
2020-06-16 16:00:44.739 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-16 16:00:44.744 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 16:00:44.745 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190408596837900(String) 
2020-06-16 16:00:44.749 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-16 16:00:44.754 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 16:00:44.755 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 16:00:44.759 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-16 16:00:44.764 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-16 16:00:44.764 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 16:00:44.768 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-16 16:00:44.784 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:个人基本信息表既往史建档前与三级医院住院就诊记录诊断逻辑不符（恶性肿瘤） 
2020-06-16 16:00:44.786 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:现住址村（居）委会名称未填写村（居）委会名称为空值 
2020-06-16 16:00:44.787 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:个人基本信息表既往史建档前与三级医院住院就诊记录诊断逻辑不符（严重精神障碍） 
2020-06-16 16:00:44.788 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:与三级医院住院就诊记录表姓名不一致同时满足以下条件： 1、封面《姓名》不为空值 2、三级医院住院就诊记录表《患者姓名》不为空 3、封面《姓名》与住院就诊记录表中《患者姓名》不相等 
2020-06-16 16:00:44.788 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:与三级医院门诊就诊记录表姓名不一致同时满足以下条件： 1、封面《姓名》不为空值 2、三级医院门诊就诊记录表《患者姓名》不为空 3、封面《姓名》与门诊就诊记录表中《患者姓名》不相等 
2020-06-16 16:00:44.789 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:个人基本信息表既往史建档前与三级医院住院就诊记录诊断逻辑不符（脑卒中） 
2020-06-16 16:00:44.791 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:个人基本信息表既往史建档前与三级医院住院就诊记录诊断逻辑不符（冠心病） 
2020-06-16 16:00:44.792 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:个人基本信息表既往史建档前与三级医院住院就诊记录诊断逻辑不符（慢性阻塞性肺疾病） 
2020-06-16 16:00:44.794 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:个人基本信息表既往史建档前与三级医院住院就诊记录诊断逻辑不符（糖尿病） 
2020-06-16 16:00:44.796 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:联系电话不为纯数字同时满足以下条件： 1、联系电话不为空值 2、联系电话不是纯数字 
2020-06-16 16:00:44.800 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:个人基本信息表既往史建档前与三级医院住院就诊记录诊断逻辑不符（高血压） 
2020-06-16 16:00:44.801 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:个人基本信息表既往史建档前与三级医院住院就诊记录诊断逻辑不符（糖尿病） 
2020-06-16 16:00:44.803 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:个人基本信息表既往史建档前与三级医院住院就诊记录诊断逻辑不符（结核病） 
2020-06-16 16:00:44.804 [INFO ] c.b.r.m.m.service.impl.EhrModelBuildServiceImpl    - [saveResult:158] 规则执行结束结果条数为:13 
2020-06-16 16:00:44.805 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-16 16:00:44.806 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 4148ac732c724fc7b87f96a04079d821(String), 2020-06-16 16:00:44.804(Timestamp), 31011310200312009116(String), 647ba5f94d274d04955478e4c7e9a593(String), 2020-06-16 16:00:44.804(Timestamp), 31011310200312009116(String), 72de975121d24cd3bbdfd8324ae36aba(String), 2020-06-16 16:00:44.804(Timestamp), 31011310200312009116(String), 814b3d0aca3642af82ef320f98d4dfba(String), 2020-06-16 16:00:44.804(Timestamp), 31011310200312009116(String), 847bc4b46918417dab4aa917af3355c3(String), 2020-06-16 16:00:44.804(Timestamp), 31011310200312009116(String), 9c830141ce3e4854847cc2b52c46aa60(String), 2020-06-16 16:00:44.804(Timestamp), 31011310200312009116(String), b0789ee1f8404172941794b5431fd75d(String), 2020-06-16 16:00:44.804(Timestamp), 31011310200312009116(String), b46c567e4517456798ca3a5b0f34863d(String), 2020-06-16 16:00:44.804(Timestamp), 31011310200312009116(String), c8e65283e6a243a5a1b89ae2117b6479(String), 2020-06-16 16:00:44.804(Timestamp), 31011310200312009116(String), db6607db218b4182924b980ecb900b19(String), 2020-06-16 16:00:44.804(Timestamp), 31011310200312009116(String), f14d68452e254abd9a4cb294ffda7da8(String), 2020-06-16 16:00:44.804(Timestamp), 31011310200312009116(String), f3e5596b011443049fa85ecee89c330e(String), 2020-06-16 16:00:44.804(Timestamp), 31011310200312009116(String), fd711d1c91624b46b7ecb8bf2aa6efe0(String), 2020-06-16 16:00:44.804(Timestamp) 
2020-06-16 16:00:44.831 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 13 
2020-06-16 16:00:48.508 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-16 16:00:48.509 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 16:00:48.514 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-16 16:00:48.520 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-16 16:00:48.520 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 16:00:48.525 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-16 16:00:48.530 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-16 16:00:48.531 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-16 16:00:48.536 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-16 16:00:48.542 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-16 16:00:48.543 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 16:00:48.548 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-16 16:00:48.553 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t2.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 16:00:48.554 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 16:00:48.560 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 16:00:48.565 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-16 16:00:48.565 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-16 16:00:48.566 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 16:00:48.566 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 16:00:48.570 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-16 16:00:48.574 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 16:00:48.574 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 16:00:48.579 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-16 16:00:48.584 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 16:00:48.584 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 16:00:48.589 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-16 16:00:48.594 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t2.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 16:00:48.595 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 16:00:48.608 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 3 
2020-06-16 16:00:48.613 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-16 16:00:48.613 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 3 
2020-06-16 16:00:48.613 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 16:00:48.614 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 16:00:48.618 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-16 16:00:48.623 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 16:00:48.623 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 16:00:48.627 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-16 16:00:48.632 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 16:00:48.632 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 16:00:48.637 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-16 16:00:48.640 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 16:00:48.641 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190401596084000(String) 
2020-06-16 16:00:48.645 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-16 16:00:48.649 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 16:00:48.650 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190401596084000(String) 
2020-06-16 16:00:48.654 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-16 16:00:48.659 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 16:00:48.659 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 16:00:48.665 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-16 16:00:48.669 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 16:00:48.670 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190408596837900(String) 
2020-06-16 16:00:48.674 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-16 16:00:48.678 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 16:00:48.679 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190408596837900(String) 
2020-06-16 16:00:48.683 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-16 16:00:48.687 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 16:00:48.688 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 16:00:48.692 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-16 16:00:48.696 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-16 16:00:48.697 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 16:00:48.703 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-16 16:00:48.716 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:个人基本信息表既往史建档前与三级医院住院就诊记录诊断逻辑不符（恶性肿瘤） 
2020-06-16 16:00:48.718 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:个人基本信息表既往史建档前与三级医院住院就诊记录诊断逻辑不符（严重精神障碍） 
2020-06-16 16:00:48.718 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:与三级医院住院就诊记录表姓名不一致同时满足以下条件： 1、封面《姓名》不为空值 2、三级医院住院就诊记录表《患者姓名》不为空 3、封面《姓名》与住院就诊记录表中《患者姓名》不相等 
2020-06-16 16:00:48.719 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:与三级医院门诊就诊记录表姓名不一致同时满足以下条件： 1、封面《姓名》不为空值 2、三级医院门诊就诊记录表《患者姓名》不为空 3、封面《姓名》与门诊就诊记录表中《患者姓名》不相等 
2020-06-16 16:00:48.719 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:个人基本信息表既往史建档前与三级医院住院就诊记录诊断逻辑不符（脑卒中） 
2020-06-16 16:00:48.720 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:现住址村（居）委会名称不为汉字村（居）委会名称不为汉字 
2020-06-16 16:00:48.720 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:个人基本信息表既往史建档前与三级医院住院就诊记录诊断逻辑不符（冠心病） 
2020-06-16 16:00:48.721 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:个人基本信息表既往史建档前与三级医院住院就诊记录诊断逻辑不符（慢性阻塞性肺疾病） 
2020-06-16 16:00:48.722 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:个人基本信息表既往史建档前与三级医院住院就诊记录诊断逻辑不符（糖尿病） 
2020-06-16 16:00:48.723 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:联系电话不为纯数字同时满足以下条件： 1、联系电话不为空值 2、联系电话不是纯数字 
2020-06-16 16:00:48.727 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:个人基本信息表既往史建档前与三级医院住院就诊记录诊断逻辑不符（高血压） 
2020-06-16 16:00:48.727 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:个人基本信息表既往史建档前与三级医院住院就诊记录诊断逻辑不符（糖尿病） 
2020-06-16 16:00:48.728 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:92] 符合规则为:个人基本信息表既往史建档前与三级医院住院就诊记录诊断逻辑不符（结核病） 
2020-06-16 16:00:48.728 [INFO ] c.b.r.m.m.service.impl.EhrModelBuildServiceImpl    - [saveResult:158] 规则执行结束结果条数为:13 
2020-06-16 16:00:48.730 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-16 16:00:48.731 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 4148ac732c724fc7b87f96a04079d821(String), 2020-06-16 16:00:48.729(Timestamp), 31011310200312009116(String), 72de975121d24cd3bbdfd8324ae36aba(String), 2020-06-16 16:00:48.729(Timestamp), 31011310200312009116(String), 814b3d0aca3642af82ef320f98d4dfba(String), 2020-06-16 16:00:48.729(Timestamp), 31011310200312009116(String), 847bc4b46918417dab4aa917af3355c3(String), 2020-06-16 16:00:48.729(Timestamp), 31011310200312009116(String), 9c830141ce3e4854847cc2b52c46aa60(String), 2020-06-16 16:00:48.729(Timestamp), 31011310200312009116(String), ac0fdca3fa96484680d8a0871d00eb3b(String), 2020-06-16 16:00:48.729(Timestamp), 31011310200312009116(String), b0789ee1f8404172941794b5431fd75d(String), 2020-06-16 16:00:48.729(Timestamp), 31011310200312009116(String), b46c567e4517456798ca3a5b0f34863d(String), 2020-06-16 16:00:48.729(Timestamp), 31011310200312009116(String), c8e65283e6a243a5a1b89ae2117b6479(String), 2020-06-16 16:00:48.729(Timestamp), 31011310200312009116(String), db6607db218b4182924b980ecb900b19(String), 2020-06-16 16:00:48.729(Timestamp), 31011310200312009116(String), f14d68452e254abd9a4cb294ffda7da8(String), 2020-06-16 16:00:48.729(Timestamp), 31011310200312009116(String), f3e5596b011443049fa85ecee89c330e(String), 2020-06-16 16:00:48.729(Timestamp), 31011310200312009116(String), fd711d1c91624b46b7ecb8bf2aa6efe0(String), 2020-06-16 16:00:48.729(Timestamp) 
2020-06-16 16:00:48.744 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 13 
2020-06-16 16:12:10.268 [INFO ] com.benetech.rules.RulesApplication                - [logStarting:55] Starting RulesApplication v1.0-SNAPSHOT on DESKTOP-EOCO1V0 with PID 12576 (D:\51\python\project\instance\zyjk\EHR\controlRuleNew\config\healthRecordRules.jar started by ZY in D:\51\python\project\instance\zyjk\EHR\controlRuleNew) 
2020-06-16 16:12:10.271 [DEBUG] com.benetech.rules.RulesApplication                - [logStarting:56] Running with Spring Boot v2.2.1.RELEASE, Spring v5.2.1.RELEASE 
2020-06-16 16:12:10.271 [INFO ] com.benetech.rules.RulesApplication                - [logStartupProfileInfo:655] The following profiles are active: test 
2020-06-16 16:12:11.971 [INFO ] o.s.boot.web.embedded.tomcat.TomcatWebServer       - [initialize:92] Tomcat initialized with port(s): 8838 (http) 
2020-06-16 16:12:11.983 [INFO ] org.apache.coyote.http11.Http11NioProtocol         - [log:173] Initializing ProtocolHandler ["http-nio-8838"] 
2020-06-16 16:12:11.984 [INFO ] org.apache.catalina.core.StandardService           - [log:173] Starting service [Tomcat] 
2020-06-16 16:12:11.984 [INFO ] org.apache.catalina.core.StandardEngine            - [log:173] Starting Servlet engine: [Apache Tomcat/9.0.27] 
2020-06-16 16:12:12.054 [INFO ] o.a.c.c.C.[.[localhost].[/healthRecordRules]       - [log:173] Initializing Spring embedded WebApplicationContext 
2020-06-16 16:12:12.054 [INFO ] org.springframework.web.context.ContextLoader      - [prepareWebApplicationContext:284] Root WebApplicationContext: initialization completed in 1699 ms 
2020-06-16 16:12:12.131 [DEBUG] org.apache.ibatis.logging.LogFactory               - [setImplementation:135] Logging initialized using 'class org.apache.ibatis.logging.slf4j.Slf4jImpl' adapter. 
2020-06-16 16:12:12.374 [WARN ] org.mybatis.spring.SqlSessionFactoryBean           - [buildSqlSessionFactory:467] Can't find class in '[com.benetech.rules.*.entity]' package. Please check your configuration. 
2020-06-16 16:12:12.997 [INFO ] com.alibaba.druid.pool.DruidDataSource             - [init:930] {dataSource-1} inited 
2020-06-16 16:12:13.205 [DEBUG] c.b.r.m.e.mapper.RuleEngineMapper.getAllRules      - [debug:159] ==>  Preparing: select a.RuleId as ruleId, a.RuleSql as clazz from HrRule a join HrRuleProps b on a.RuleId = b.RuleId where -- RuleId in ('34278f71cf1d42c88158aaf637fa5203', '8d30baa03bfc4233a8f115c57a0ebf08', '63eb82a44bf64c96a0b9023fa2a3c9d9') a.RuleSql != '' and a.RuleSql is not null and b.Enable = 1  
2020-06-16 16:12:13.223 [DEBUG] c.b.r.m.e.mapper.RuleEngineMapper.getAllRules      - [debug:159] ==> Parameters:  
2020-06-16 16:12:13.306 [DEBUG] c.b.r.m.e.mapper.RuleEngineMapper.getAllRules      - [debug:159] <==      Total: 310 
2020-06-16 16:12:13.522 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [init:68] 加载规则：310 条 
2020-06-16 16:12:13.546 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.getAllCode    - [debug:159] ==>  Preparing: SELECT codeSysType AS type, code AS code, [value] AS value FROM tb_code_value WHERE code != '' AND [value] != ''  
2020-06-16 16:12:13.547 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.getAllCode    - [debug:159] ==> Parameters:  
2020-06-16 16:12:14.045 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.getAllCode    - [debug:159] <==      Total: 44881 
2020-06-16 16:12:14.068 [INFO ] c.b.r.m.m.service.impl.EhrModelBuildServiceImpl    - [init:96] 初始化字典类型: 467 种 
2020-06-16 16:12:14.068 [INFO ] c.b.r.m.m.service.impl.EhrModelBuildServiceImpl    - [init:97] 初始化字典: 44881 条 
2020-06-16 16:12:14.068 [ERROR] c.b.r.m.process.service.impl.QcProcessServiceImpl  - [init:44] 初始化线程池 
2020-06-16 16:12:14.174 [INFO ] o.s.scheduling.concurrent.ThreadPoolTaskExecutor   - [initialize:171] Initializing ExecutorService 'applicationTaskExecutor' 
2020-06-16 16:12:14.432 [INFO ] org.apache.coyote.http11.Http11NioProtocol         - [log:173] Starting ProtocolHandler ["http-nio-8838"] 
2020-06-16 16:12:14.457 [INFO ] o.s.boot.web.embedded.tomcat.TomcatWebServer       - [start:204] Tomcat started on port(s): 8838 (http) with context path '/healthRecordRules' 
2020-06-16 16:12:14.459 [INFO ] com.benetech.rules.RulesApplication                - [logStarted:61] Started RulesApplication in 4.711 seconds (JVM running for 5.159) 
2020-06-16 16:12:14.461 [INFO ] com.benetech.rules.RulesApplication                - [main:20] -------------启动成功------------- 
2020-06-16 16:12:14.589 [INFO ] o.a.c.c.C.[.[localhost].[/healthRecordRules]       - [log:173] Initializing Spring DispatcherServlet 'dispatcherServlet' 
2020-06-16 16:12:14.590 [INFO ] org.springframework.web.servlet.DispatcherServlet  - [initServletBean:525] Initializing Servlet 'dispatcherServlet' 
2020-06-16 16:12:14.596 [INFO ] org.springframework.web.servlet.DispatcherServlet  - [initServletBean:547] Completed initialization in 6 ms 
2020-06-16 16:12:14.632 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-16 16:12:14.643 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 16:12:14.652 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-16 16:12:14.657 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-16 16:12:14.658 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 16:12:14.675 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-16 16:12:14.680 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-16 16:12:14.681 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-16 16:12:14.687 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-16 16:12:14.694 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-16 16:12:14.694 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 16:12:14.701 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-16 16:12:14.706 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 16:12:14.707 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 16:12:14.714 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 16:12:14.719 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-16 16:12:14.719 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-16 16:12:14.720 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 16:12:14.721 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 16:12:14.725 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-16 16:12:14.730 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 16:12:14.730 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 16:12:14.735 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-16 16:12:14.740 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 16:12:14.741 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 16:12:14.745 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-16 16:12:14.750 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 16:12:14.750 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 16:12:14.765 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 3 
2020-06-16 16:12:14.769 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-16 16:12:14.770 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 3 
2020-06-16 16:12:14.770 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 16:12:14.771 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 16:12:14.775 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-16 16:12:14.780 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 16:12:14.781 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 16:12:14.785 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-16 16:12:14.790 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 16:12:14.790 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 16:12:14.796 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-16 16:12:14.800 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 16:12:14.801 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190401596084000(String) 
2020-06-16 16:12:14.805 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-16 16:12:14.811 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 16:12:14.812 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190401596084000(String) 
2020-06-16 16:12:14.817 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-16 16:12:14.823 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 16:12:14.824 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 16:12:14.828 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-16 16:12:14.833 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 16:12:14.834 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190408596837900(String) 
2020-06-16 16:12:14.839 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-16 16:12:14.844 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 16:12:14.845 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190408596837900(String) 
2020-06-16 16:12:14.850 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-16 16:12:14.855 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 16:12:14.855 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 16:12:14.859 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-16 16:12:14.864 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-16 16:12:14.864 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 16:12:14.869 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-16 16:12:14.996 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:姓名未填写姓名为空值 
2020-06-16 16:12:15.038 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1)  
2020-06-16 16:12:15.039 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 63eb82a44bf64c96a0b9023fa2a3c9d9(String), 2020-06-16 16:12:15.016(Timestamp) 
2020-06-16 16:12:15.058 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 1 
2020-06-16 16:14:44.646 [INFO ] com.benetech.rules.RulesApplication                - [logStarting:55] Starting RulesApplication v1.0-SNAPSHOT on DESKTOP-EOCO1V0 with PID 11524 (D:\51\python\project\instance\zyjk\EHR\controlRuleNew\config\healthRecordRules.jar started by ZY in D:\51\python\project\instance\zyjk\EHR\controlRuleNew) 
2020-06-16 16:14:44.650 [DEBUG] com.benetech.rules.RulesApplication                - [logStarting:56] Running with Spring Boot v2.2.1.RELEASE, Spring v5.2.1.RELEASE 
2020-06-16 16:14:44.650 [INFO ] com.benetech.rules.RulesApplication                - [logStartupProfileInfo:655] The following profiles are active: test 
2020-06-16 16:14:46.265 [INFO ] o.s.boot.web.embedded.tomcat.TomcatWebServer       - [initialize:92] Tomcat initialized with port(s): 8838 (http) 
2020-06-16 16:14:46.277 [INFO ] org.apache.coyote.http11.Http11NioProtocol         - [log:173] Initializing ProtocolHandler ["http-nio-8838"] 
2020-06-16 16:14:46.277 [INFO ] org.apache.catalina.core.StandardService           - [log:173] Starting service [Tomcat] 
2020-06-16 16:14:46.278 [INFO ] org.apache.catalina.core.StandardEngine            - [log:173] Starting Servlet engine: [Apache Tomcat/9.0.27] 
2020-06-16 16:14:46.347 [INFO ] o.a.c.c.C.[.[localhost].[/healthRecordRules]       - [log:173] Initializing Spring embedded WebApplicationContext 
2020-06-16 16:14:46.348 [INFO ] org.springframework.web.context.ContextLoader      - [prepareWebApplicationContext:284] Root WebApplicationContext: initialization completed in 1618 ms 
2020-06-16 16:14:46.424 [DEBUG] org.apache.ibatis.logging.LogFactory               - [setImplementation:135] Logging initialized using 'class org.apache.ibatis.logging.slf4j.Slf4jImpl' adapter. 
2020-06-16 16:14:46.707 [WARN ] org.mybatis.spring.SqlSessionFactoryBean           - [buildSqlSessionFactory:467] Can't find class in '[com.benetech.rules.*.entity]' package. Please check your configuration. 
2020-06-16 16:14:47.371 [INFO ] com.alibaba.druid.pool.DruidDataSource             - [init:930] {dataSource-1} inited 
2020-06-16 16:14:47.561 [DEBUG] c.b.r.m.e.mapper.RuleEngineMapper.getAllRules      - [debug:159] ==>  Preparing: select a.RuleId as ruleId, a.RuleSql as clazz from HrRule a join HrRuleProps b on a.RuleId = b.RuleId where -- RuleId in ('34278f71cf1d42c88158aaf637fa5203', '8d30baa03bfc4233a8f115c57a0ebf08', '63eb82a44bf64c96a0b9023fa2a3c9d9') a.RuleSql != '' and a.RuleSql is not null and b.Enable = 1  
2020-06-16 16:14:47.587 [DEBUG] c.b.r.m.e.mapper.RuleEngineMapper.getAllRules      - [debug:159] ==> Parameters:  
2020-06-16 16:14:47.668 [DEBUG] c.b.r.m.e.mapper.RuleEngineMapper.getAllRules      - [debug:159] <==      Total: 310 
2020-06-16 16:14:47.888 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [init:68] 加载规则：310 条 
2020-06-16 16:14:47.907 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.getAllCode    - [debug:159] ==>  Preparing: SELECT codeSysType AS type, code AS code, [value] AS value FROM tb_code_value WHERE code != '' AND [value] != ''  
2020-06-16 16:14:47.908 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.getAllCode    - [debug:159] ==> Parameters:  
2020-06-16 16:14:48.396 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.getAllCode    - [debug:159] <==      Total: 44881 
2020-06-16 16:14:48.418 [INFO ] c.b.r.m.m.service.impl.EhrModelBuildServiceImpl    - [init:96] 初始化字典类型: 467 种 
2020-06-16 16:14:48.419 [INFO ] c.b.r.m.m.service.impl.EhrModelBuildServiceImpl    - [init:97] 初始化字典: 44881 条 
2020-06-16 16:14:48.419 [ERROR] c.b.r.m.process.service.impl.QcProcessServiceImpl  - [init:44] 初始化线程池 
2020-06-16 16:14:48.542 [INFO ] o.s.scheduling.concurrent.ThreadPoolTaskExecutor   - [initialize:171] Initializing ExecutorService 'applicationTaskExecutor' 
2020-06-16 16:14:48.729 [INFO ] org.apache.coyote.http11.Http11NioProtocol         - [log:173] Starting ProtocolHandler ["http-nio-8838"] 
2020-06-16 16:14:48.759 [INFO ] o.s.boot.web.embedded.tomcat.TomcatWebServer       - [start:204] Tomcat started on port(s): 8838 (http) with context path '/healthRecordRules' 
2020-06-16 16:14:48.762 [INFO ] com.benetech.rules.RulesApplication                - [logStarted:61] Started RulesApplication in 4.676 seconds (JVM running for 5.148) 
2020-06-16 16:14:48.764 [INFO ] com.benetech.rules.RulesApplication                - [main:20] -------------启动成功------------- 
2020-06-16 16:14:48.822 [INFO ] o.a.c.c.C.[.[localhost].[/healthRecordRules]       - [log:173] Initializing Spring DispatcherServlet 'dispatcherServlet' 
2020-06-16 16:14:48.822 [INFO ] org.springframework.web.servlet.DispatcherServlet  - [initServletBean:525] Initializing Servlet 'dispatcherServlet' 
2020-06-16 16:14:48.828 [INFO ] org.springframework.web.servlet.DispatcherServlet  - [initServletBean:547] Completed initialization in 5 ms 
2020-06-16 16:14:48.863 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-16 16:14:48.868 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 16:14:48.878 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-16 16:14:48.885 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-16 16:14:48.885 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 16:14:48.896 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-16 16:14:48.904 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-16 16:14:48.905 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-16 16:14:48.913 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-16 16:14:48.920 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-16 16:14:48.921 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 16:14:48.928 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-16 16:14:48.936 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 16:14:48.936 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 16:14:48.945 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 16:14:48.951 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-16 16:14:48.951 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-16 16:14:48.952 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 16:14:48.952 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 16:14:48.959 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-16 16:14:48.967 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 16:14:48.968 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 16:14:48.973 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-16 16:14:48.977 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 16:14:48.978 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 16:14:48.985 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-16 16:14:48.991 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 16:14:48.991 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 16:14:49.008 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 3 
2020-06-16 16:14:49.013 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-16 16:14:49.014 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 3 
2020-06-16 16:14:49.014 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 16:14:49.015 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 16:14:49.021 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-16 16:14:49.029 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 16:14:49.029 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 16:14:49.034 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-16 16:14:49.040 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 16:14:49.041 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 16:14:49.047 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-16 16:14:49.053 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 16:14:49.053 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190401596084000(String) 
2020-06-16 16:14:49.059 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-16 16:14:49.066 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 16:14:49.068 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190401596084000(String) 
2020-06-16 16:14:49.077 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-16 16:14:49.083 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 16:14:49.084 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 16:14:49.089 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-16 16:14:49.095 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 16:14:49.096 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190408596837900(String) 
2020-06-16 16:14:49.101 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-16 16:14:49.107 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 16:14:49.108 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190408596837900(String) 
2020-06-16 16:14:49.113 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-16 16:14:49.119 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 16:14:49.120 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 16:14:49.127 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-16 16:14:49.133 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-16 16:14:49.133 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 16:14:49.143 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-16 16:14:49.259 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:姓名未填写姓名为空值 
2020-06-16 16:14:49.305 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1)  
2020-06-16 16:14:49.306 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 63eb82a44bf64c96a0b9023fa2a3c9d9(String), 2020-06-16 16:14:49.28(Timestamp) 
2020-06-16 16:14:49.360 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 1 
2020-06-16 16:17:32.140 [INFO ] com.benetech.rules.RulesApplication                - [logStarting:55] Starting RulesApplication v1.0-SNAPSHOT on DESKTOP-EOCO1V0 with PID 2852 (D:\51\python\project\instance\zyjk\EHR\controlRuleNew\config\healthRecordRules.jar started by ZY in D:\51\python\project\instance\zyjk\EHR\controlRuleNew) 
2020-06-16 16:17:32.143 [DEBUG] com.benetech.rules.RulesApplication                - [logStarting:56] Running with Spring Boot v2.2.1.RELEASE, Spring v5.2.1.RELEASE 
2020-06-16 16:17:32.144 [INFO ] com.benetech.rules.RulesApplication                - [logStartupProfileInfo:655] The following profiles are active: test 
2020-06-16 16:17:33.617 [INFO ] o.s.boot.web.embedded.tomcat.TomcatWebServer       - [initialize:92] Tomcat initialized with port(s): 8838 (http) 
2020-06-16 16:17:33.627 [INFO ] org.apache.coyote.http11.Http11NioProtocol         - [log:173] Initializing ProtocolHandler ["http-nio-8838"] 
2020-06-16 16:17:33.628 [INFO ] org.apache.catalina.core.StandardService           - [log:173] Starting service [Tomcat] 
2020-06-16 16:17:33.628 [INFO ] org.apache.catalina.core.StandardEngine            - [log:173] Starting Servlet engine: [Apache Tomcat/9.0.27] 
2020-06-16 16:17:33.698 [INFO ] o.a.c.c.C.[.[localhost].[/healthRecordRules]       - [log:173] Initializing Spring embedded WebApplicationContext 
2020-06-16 16:17:33.699 [INFO ] org.springframework.web.context.ContextLoader      - [prepareWebApplicationContext:284] Root WebApplicationContext: initialization completed in 1475 ms 
2020-06-16 16:17:33.786 [DEBUG] org.apache.ibatis.logging.LogFactory               - [setImplementation:135] Logging initialized using 'class org.apache.ibatis.logging.slf4j.Slf4jImpl' adapter. 
2020-06-16 16:17:34.047 [WARN ] org.mybatis.spring.SqlSessionFactoryBean           - [buildSqlSessionFactory:467] Can't find class in '[com.benetech.rules.*.entity]' package. Please check your configuration. 
2020-06-16 16:17:34.631 [INFO ] com.alibaba.druid.pool.DruidDataSource             - [init:930] {dataSource-1} inited 
2020-06-16 16:17:34.840 [DEBUG] c.b.r.m.e.mapper.RuleEngineMapper.getAllRules      - [debug:159] ==>  Preparing: select a.RuleId as ruleId, a.RuleSql as clazz from HrRule a join HrRuleProps b on a.RuleId = b.RuleId where -- RuleId in ('34278f71cf1d42c88158aaf637fa5203', '8d30baa03bfc4233a8f115c57a0ebf08', '63eb82a44bf64c96a0b9023fa2a3c9d9') a.RuleSql != '' and a.RuleSql is not null and b.Enable = 1  
2020-06-16 16:17:34.862 [DEBUG] c.b.r.m.e.mapper.RuleEngineMapper.getAllRules      - [debug:159] ==> Parameters:  
2020-06-16 16:17:34.944 [DEBUG] c.b.r.m.e.mapper.RuleEngineMapper.getAllRules      - [debug:159] <==      Total: 310 
2020-06-16 16:17:35.177 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [init:68] 加载规则：310 条 
2020-06-16 16:17:35.196 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.getAllCode    - [debug:159] ==>  Preparing: SELECT codeSysType AS type, code AS code, [value] AS value FROM tb_code_value WHERE code != '' AND [value] != ''  
2020-06-16 16:17:35.196 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.getAllCode    - [debug:159] ==> Parameters:  
2020-06-16 16:17:35.581 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.getAllCode    - [debug:159] <==      Total: 44881 
2020-06-16 16:17:35.606 [INFO ] c.b.r.m.m.service.impl.EhrModelBuildServiceImpl    - [init:96] 初始化字典类型: 467 种 
2020-06-16 16:17:35.606 [INFO ] c.b.r.m.m.service.impl.EhrModelBuildServiceImpl    - [init:97] 初始化字典: 44881 条 
2020-06-16 16:17:35.607 [ERROR] c.b.r.m.process.service.impl.QcProcessServiceImpl  - [init:44] 初始化线程池 
2020-06-16 16:17:35.724 [INFO ] o.s.scheduling.concurrent.ThreadPoolTaskExecutor   - [initialize:171] Initializing ExecutorService 'applicationTaskExecutor' 
2020-06-16 16:17:35.936 [INFO ] org.apache.coyote.http11.Http11NioProtocol         - [log:173] Starting ProtocolHandler ["http-nio-8838"] 
2020-06-16 16:17:35.960 [INFO ] o.s.boot.web.embedded.tomcat.TomcatWebServer       - [start:204] Tomcat started on port(s): 8838 (http) with context path '/healthRecordRules' 
2020-06-16 16:17:35.963 [INFO ] com.benetech.rules.RulesApplication                - [logStarted:61] Started RulesApplication in 4.363 seconds (JVM running for 4.806) 
2020-06-16 16:17:35.966 [INFO ] com.benetech.rules.RulesApplication                - [main:20] -------------启动成功------------- 
2020-06-16 16:17:36.031 [INFO ] o.a.c.c.C.[.[localhost].[/healthRecordRules]       - [log:173] Initializing Spring DispatcherServlet 'dispatcherServlet' 
2020-06-16 16:17:36.031 [INFO ] org.springframework.web.servlet.DispatcherServlet  - [initServletBean:525] Initializing Servlet 'dispatcherServlet' 
2020-06-16 16:17:36.044 [INFO ] org.springframework.web.servlet.DispatcherServlet  - [initServletBean:547] Completed initialization in 13 ms 
2020-06-16 16:17:36.078 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-16 16:17:36.083 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 16:17:36.093 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-16 16:17:36.098 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-16 16:17:36.099 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 16:17:36.114 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-16 16:17:36.119 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-16 16:17:36.120 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-16 16:17:36.125 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-16 16:17:36.131 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-16 16:17:36.132 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 16:17:36.136 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-16 16:17:36.141 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 16:17:36.142 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 16:17:36.150 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 16:17:36.154 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-16 16:17:36.155 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-16 16:17:36.156 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 16:17:36.156 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 16:17:36.161 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-16 16:17:36.166 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 16:17:36.166 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 16:17:36.171 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-16 16:17:36.177 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 16:17:36.178 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 16:17:36.183 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-16 16:17:36.188 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 16:17:36.188 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 16:17:36.204 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 3 
2020-06-16 16:17:36.209 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-16 16:17:36.210 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 3 
2020-06-16 16:17:36.211 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 16:17:36.212 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 16:17:36.216 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-16 16:17:36.223 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 16:17:36.223 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 16:17:36.227 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-16 16:17:36.232 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 16:17:36.233 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 16:17:36.238 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-16 16:17:36.243 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 16:17:36.244 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190401596084000(String) 
2020-06-16 16:17:36.249 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-16 16:17:36.254 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 16:17:36.256 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190401596084000(String) 
2020-06-16 16:17:36.264 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-16 16:17:36.270 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 16:17:36.271 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 16:17:36.275 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-16 16:17:36.280 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 16:17:36.280 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190408596837900(String) 
2020-06-16 16:17:36.284 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-16 16:17:36.288 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 16:17:36.289 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190408596837900(String) 
2020-06-16 16:17:36.294 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-16 16:17:36.298 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 16:17:36.298 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 16:17:36.303 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-16 16:17:36.308 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-16 16:17:36.309 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 16:17:36.313 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-16 16:17:36.417 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:姓名未填写姓名为空值 
2020-06-16 16:17:36.463 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1)  
2020-06-16 16:17:36.463 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 63eb82a44bf64c96a0b9023fa2a3c9d9(String), 2020-06-16 16:17:36.44(Timestamp) 
2020-06-16 16:17:36.485 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 1 
2020-06-16 16:17:39.759 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-16 16:17:39.760 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 16:17:39.765 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-16 16:17:39.772 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-16 16:17:39.772 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 16:17:39.778 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-16 16:17:39.783 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-16 16:17:39.784 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-16 16:17:39.790 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-16 16:17:39.795 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-16 16:17:39.795 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 16:17:39.800 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-16 16:17:39.804 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 16:17:39.805 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 16:17:39.810 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 16:17:39.815 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-16 16:17:39.815 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-16 16:17:39.816 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 16:17:39.816 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 16:17:39.820 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-16 16:17:39.826 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 16:17:39.827 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 16:17:39.833 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-16 16:17:39.838 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 16:17:39.838 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 16:17:39.843 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-16 16:17:39.848 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 16:17:39.848 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 16:17:39.862 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 3 
2020-06-16 16:17:39.866 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-16 16:17:39.867 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 3 
2020-06-16 16:17:39.867 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 16:17:39.868 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 16:17:39.872 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-16 16:17:39.877 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 16:17:39.877 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 16:17:39.882 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-16 16:17:39.887 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 16:17:39.887 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 16:17:39.892 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-16 16:17:39.898 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 16:17:39.898 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190401596084000(String) 
2020-06-16 16:17:39.903 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-16 16:17:39.907 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 16:17:39.908 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190401596084000(String) 
2020-06-16 16:17:39.913 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-16 16:17:39.918 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 16:17:39.918 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 16:17:39.923 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-16 16:17:39.928 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 16:17:39.928 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190408596837900(String) 
2020-06-16 16:17:39.933 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-16 16:17:39.938 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 16:17:39.938 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190408596837900(String) 
2020-06-16 16:17:39.943 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-16 16:17:39.948 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 16:17:39.948 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 16:17:39.953 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-16 16:17:39.958 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-16 16:17:39.958 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 16:17:39.963 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-16 16:17:40.037 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:姓名填写不规范同时满足以下条件： 1、联系人姓名不为空值 2、联系人姓名为纯数字 
2020-06-16 16:17:40.040 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:与三级医院住院就诊记录表姓名不一致同时满足以下条件： 1、封面《姓名》不为空值 2、三级医院住院就诊记录表《患者姓名》不为空 3、封面《姓名》与住院就诊记录表中《患者姓名》不相等 
2020-06-16 16:17:40.041 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:与三级医院门诊就诊记录表姓名不一致同时满足以下条件： 1、封面《姓名》不为空值 2、三级医院门诊就诊记录表《患者姓名》不为空 3、封面《姓名》与门诊就诊记录表中《患者姓名》不相等 
2020-06-16 16:17:40.050 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-16 16:17:40.051 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 61ed70b670f2460a94ebc183f6b86f5d(String), 2020-06-16 16:17:40.05(Timestamp), 31011310200312009116(String), 814b3d0aca3642af82ef320f98d4dfba(String), 2020-06-16 16:17:40.05(Timestamp), 31011310200312009116(String), 847bc4b46918417dab4aa917af3355c3(String), 2020-06-16 16:17:40.05(Timestamp) 
2020-06-16 16:17:40.068 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 3 
2020-06-16 16:17:43.556 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-16 16:17:43.557 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 16:17:43.562 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-16 16:17:43.569 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-16 16:17:43.569 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 16:17:43.575 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-16 16:17:43.580 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-16 16:17:43.581 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-16 16:17:43.586 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-16 16:17:43.591 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-16 16:17:43.591 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 16:17:43.595 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-16 16:17:43.600 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 16:17:43.601 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 16:17:43.607 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 16:17:43.612 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-16 16:17:43.612 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-16 16:17:43.613 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 16:17:43.613 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 16:17:43.618 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-16 16:17:43.623 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 16:17:43.623 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 16:17:43.627 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-16 16:17:43.632 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 16:17:43.632 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 16:17:43.637 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-16 16:17:43.642 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 16:17:43.643 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 16:17:43.659 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 3 
2020-06-16 16:17:43.664 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-16 16:17:43.665 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 3 
2020-06-16 16:17:43.667 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 16:17:43.667 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 16:17:43.673 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-16 16:17:43.679 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 16:17:43.680 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 16:17:43.685 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-16 16:17:43.691 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 16:17:43.693 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 16:17:43.698 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-16 16:17:43.704 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 16:17:43.705 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190401596084000(String) 
2020-06-16 16:17:43.709 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-16 16:17:43.713 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 16:17:43.714 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190401596084000(String) 
2020-06-16 16:17:43.718 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-16 16:17:43.723 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 16:17:43.724 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 16:17:43.729 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-16 16:17:43.734 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 16:17:43.734 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190408596837900(String) 
2020-06-16 16:17:43.739 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-16 16:17:43.743 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 16:17:43.744 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190408596837900(String) 
2020-06-16 16:17:43.748 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-16 16:17:43.754 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 16:17:43.755 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 16:17:43.760 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-16 16:17:43.765 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-16 16:17:43.766 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 16:17:43.772 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-16 16:17:43.811 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:与三级医院住院就诊记录表姓名不一致同时满足以下条件： 1、封面《姓名》不为空值 2、三级医院住院就诊记录表《患者姓名》不为空 3、封面《姓名》与住院就诊记录表中《患者姓名》不相等 
2020-06-16 16:17:43.812 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:与三级医院门诊就诊记录表姓名不一致同时满足以下条件： 1、封面《姓名》不为空值 2、三级医院门诊就诊记录表《患者姓名》不为空 3、封面《姓名》与门诊就诊记录表中《患者姓名》不相等 
2020-06-16 16:17:43.816 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:姓名长度异常长度>50字符 
2020-06-16 16:17:43.819 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-16 16:17:43.820 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 814b3d0aca3642af82ef320f98d4dfba(String), 2020-06-16 16:17:43.819(Timestamp), 31011310200312009116(String), 847bc4b46918417dab4aa917af3355c3(String), 2020-06-16 16:17:43.819(Timestamp), 31011310200312009116(String), b8eeb38e528544b28133b9ee94c5fbc4(String), 2020-06-16 16:17:43.819(Timestamp) 
2020-06-16 16:17:43.840 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 3 
2020-06-16 16:49:30.851 [INFO ] com.benetech.rules.RulesApplication                - [logStarting:55] Starting RulesApplication v1.0-SNAPSHOT on DESKTOP-EOCO1V0 with PID 4064 (D:\51\python\project\instance\zyjk\EHR\controlRuleNew\config\healthRecordRules.jar started by ZY in D:\51\python\project\instance\zyjk\EHR\controlRuleNew) 
2020-06-16 16:49:30.854 [DEBUG] com.benetech.rules.RulesApplication                - [logStarting:56] Running with Spring Boot v2.2.1.RELEASE, Spring v5.2.1.RELEASE 
2020-06-16 16:49:30.854 [INFO ] com.benetech.rules.RulesApplication                - [logStartupProfileInfo:655] The following profiles are active: test 
2020-06-16 16:49:32.337 [INFO ] o.s.boot.web.embedded.tomcat.TomcatWebServer       - [initialize:92] Tomcat initialized with port(s): 8838 (http) 
2020-06-16 16:49:32.349 [INFO ] org.apache.coyote.http11.Http11NioProtocol         - [log:173] Initializing ProtocolHandler ["http-nio-8838"] 
2020-06-16 16:49:32.350 [INFO ] org.apache.catalina.core.StandardService           - [log:173] Starting service [Tomcat] 
2020-06-16 16:49:32.350 [INFO ] org.apache.catalina.core.StandardEngine            - [log:173] Starting Servlet engine: [Apache Tomcat/9.0.27] 
2020-06-16 16:49:32.442 [INFO ] o.a.c.c.C.[.[localhost].[/healthRecordRules]       - [log:173] Initializing Spring embedded WebApplicationContext 
2020-06-16 16:49:32.442 [INFO ] org.springframework.web.context.ContextLoader      - [prepareWebApplicationContext:284] Root WebApplicationContext: initialization completed in 1494 ms 
2020-06-16 16:49:32.519 [DEBUG] org.apache.ibatis.logging.LogFactory               - [setImplementation:135] Logging initialized using 'class org.apache.ibatis.logging.slf4j.Slf4jImpl' adapter. 
2020-06-16 16:49:32.773 [WARN ] org.mybatis.spring.SqlSessionFactoryBean           - [buildSqlSessionFactory:467] Can't find class in '[com.benetech.rules.*.entity]' package. Please check your configuration. 
2020-06-16 16:49:33.393 [INFO ] com.alibaba.druid.pool.DruidDataSource             - [init:930] {dataSource-1} inited 
2020-06-16 16:49:33.589 [DEBUG] c.b.r.m.e.mapper.RuleEngineMapper.getAllRules      - [debug:159] ==>  Preparing: select a.RuleId as ruleId, a.RuleSql as clazz from HrRule a join HrRuleProps b on a.RuleId = b.RuleId where -- RuleId in ('34278f71cf1d42c88158aaf637fa5203', '8d30baa03bfc4233a8f115c57a0ebf08', '63eb82a44bf64c96a0b9023fa2a3c9d9') a.RuleSql != '' and a.RuleSql is not null and b.Enable = 1  
2020-06-16 16:49:33.612 [DEBUG] c.b.r.m.e.mapper.RuleEngineMapper.getAllRules      - [debug:159] ==> Parameters:  
2020-06-16 16:49:33.696 [DEBUG] c.b.r.m.e.mapper.RuleEngineMapper.getAllRules      - [debug:159] <==      Total: 310 
2020-06-16 16:49:34.001 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [init:68] 加载规则：310 条 
2020-06-16 16:49:34.022 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.getAllCode    - [debug:159] ==>  Preparing: SELECT codeSysType AS type, code AS code, [value] AS value FROM tb_code_value WHERE code != '' AND [value] != ''  
2020-06-16 16:49:34.029 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.getAllCode    - [debug:159] ==> Parameters:  
2020-06-16 16:49:34.600 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.getAllCode    - [debug:159] <==      Total: 44881 
2020-06-16 16:49:34.625 [INFO ] c.b.r.m.m.service.impl.EhrModelBuildServiceImpl    - [init:96] 初始化字典类型: 467 种 
2020-06-16 16:49:34.625 [INFO ] c.b.r.m.m.service.impl.EhrModelBuildServiceImpl    - [init:97] 初始化字典: 44881 条 
2020-06-16 16:49:34.626 [ERROR] c.b.r.m.process.service.impl.QcProcessServiceImpl  - [init:44] 初始化线程池 
2020-06-16 16:49:34.738 [INFO ] o.s.scheduling.concurrent.ThreadPoolTaskExecutor   - [initialize:171] Initializing ExecutorService 'applicationTaskExecutor' 
2020-06-16 16:49:34.960 [INFO ] org.apache.coyote.http11.Http11NioProtocol         - [log:173] Starting ProtocolHandler ["http-nio-8838"] 
2020-06-16 16:49:34.987 [INFO ] o.s.boot.web.embedded.tomcat.TomcatWebServer       - [start:204] Tomcat started on port(s): 8838 (http) with context path '/healthRecordRules' 
2020-06-16 16:49:34.990 [INFO ] com.benetech.rules.RulesApplication                - [logStarted:61] Started RulesApplication in 4.66 seconds (JVM running for 5.136) 
2020-06-16 16:49:34.991 [INFO ] com.benetech.rules.RulesApplication                - [main:20] -------------启动成功------------- 
2020-06-16 16:49:35.159 [INFO ] o.a.c.c.C.[.[localhost].[/healthRecordRules]       - [log:173] Initializing Spring DispatcherServlet 'dispatcherServlet' 
2020-06-16 16:49:35.159 [INFO ] org.springframework.web.servlet.DispatcherServlet  - [initServletBean:525] Initializing Servlet 'dispatcherServlet' 
2020-06-16 16:49:35.171 [INFO ] org.springframework.web.servlet.DispatcherServlet  - [initServletBean:547] Completed initialization in 12 ms 
2020-06-16 16:49:35.209 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-16 16:49:35.214 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 16:49:35.224 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-16 16:49:35.229 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-16 16:49:35.230 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 16:49:35.238 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-16 16:49:35.243 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-16 16:49:35.244 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-16 16:49:35.250 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-16 16:49:35.256 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-16 16:49:35.256 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 16:49:35.261 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-16 16:49:35.266 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 16:49:35.266 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 16:49:35.274 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 16:49:35.278 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-16 16:49:35.278 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-16 16:49:35.279 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 16:49:35.279 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 16:49:35.284 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-16 16:49:35.289 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 16:49:35.289 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 16:49:35.293 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-16 16:49:35.298 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 16:49:35.298 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 16:49:35.303 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-16 16:49:35.307 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 16:49:35.308 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 16:49:35.322 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 3 
2020-06-16 16:49:35.326 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-16 16:49:35.327 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 3 
2020-06-16 16:49:35.327 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 16:49:35.328 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 16:49:35.332 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-16 16:49:35.336 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 16:49:35.337 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 16:49:35.341 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-16 16:49:35.346 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 16:49:35.346 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 16:49:35.351 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-16 16:49:35.356 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 16:49:35.356 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190401596084000(String) 
2020-06-16 16:49:35.360 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-16 16:49:35.366 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 16:49:35.367 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190401596084000(String) 
2020-06-16 16:49:35.372 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-16 16:49:35.378 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 16:49:35.378 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 16:49:35.383 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-16 16:49:35.388 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 16:49:35.388 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190408596837900(String) 
2020-06-16 16:49:35.394 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-16 16:49:35.399 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 16:49:35.400 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190408596837900(String) 
2020-06-16 16:49:35.406 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-16 16:49:35.411 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 16:49:35.412 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 16:49:35.416 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-16 16:49:35.423 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-16 16:49:35.424 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 16:49:35.429 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-16 16:49:35.551 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:姓名未填写姓名为空值 
2020-06-16 16:49:35.613 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1)  
2020-06-16 16:49:35.614 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 63eb82a44bf64c96a0b9023fa2a3c9d9(String), 2020-06-16 16:49:35.587(Timestamp) 
2020-06-16 16:49:35.657 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 1 
2020-06-16 16:49:39.023 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-16 16:49:39.024 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 16:49:39.030 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-16 16:49:39.035 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-16 16:49:39.036 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 16:49:39.041 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-16 16:49:39.047 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-16 16:49:39.047 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-16 16:49:39.053 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-16 16:49:39.057 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-16 16:49:39.058 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 16:49:39.064 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-16 16:49:39.069 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 16:49:39.070 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 16:49:39.076 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 16:49:39.080 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-16 16:49:39.080 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-16 16:49:39.081 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 16:49:39.082 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 16:49:39.086 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-16 16:49:39.091 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 16:49:39.092 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 16:49:39.096 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-16 16:49:39.100 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 16:49:39.101 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 16:49:39.106 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-16 16:49:39.110 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 16:49:39.111 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 16:49:39.125 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 16:49:39.129 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-16 16:49:39.129 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-16 16:49:39.130 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 16:49:39.130 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 16:49:39.135 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-16 16:49:39.141 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 16:49:39.141 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 16:49:39.146 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-16 16:49:39.150 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 16:49:39.151 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 16:49:39.155 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-16 16:49:39.159 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-16 16:49:39.160 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 16:49:39.164 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-16 16:49:39.215 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:姓名填写不规范同时满足以下条件： 1、联系人姓名不为空值 2、联系人姓名为纯数字 
2020-06-16 16:49:39.218 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:与三级医院住院就诊记录表姓名不一致同时满足以下条件： 1、封面《姓名》不为空值 2、三级医院住院就诊记录表《患者姓名》不为空 3、封面《姓名》与住院就诊记录表中《患者姓名》不相等 
2020-06-16 16:49:39.219 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:与三级医院门诊就诊记录表姓名不一致同时满足以下条件： 1、封面《姓名》不为空值 2、三级医院门诊就诊记录表《患者姓名》不为空 3、封面《姓名》与门诊就诊记录表中《患者姓名》不相等 
2020-06-16 16:49:39.230 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-16 16:49:39.231 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 61ed70b670f2460a94ebc183f6b86f5d(String), 2020-06-16 16:49:39.229(Timestamp), 31011310200312009116(String), 814b3d0aca3642af82ef320f98d4dfba(String), 2020-06-16 16:49:39.229(Timestamp), 31011310200312009116(String), 847bc4b46918417dab4aa917af3355c3(String), 2020-06-16 16:49:39.229(Timestamp) 
2020-06-16 16:49:39.248 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 3 
2020-06-16 16:49:42.744 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-16 16:49:42.744 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 16:49:42.749 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-16 16:49:42.754 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-16 16:49:42.754 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 16:49:42.760 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-16 16:49:42.766 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-16 16:49:42.767 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-16 16:49:42.773 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-16 16:49:42.778 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-16 16:49:42.778 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 16:49:42.782 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-16 16:49:42.787 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 16:49:42.787 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 16:49:42.793 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 16:49:42.798 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-16 16:49:42.798 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-16 16:49:42.799 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 16:49:42.799 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 16:49:42.804 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-16 16:49:42.808 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 16:49:42.809 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 16:49:42.813 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-16 16:49:42.818 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 16:49:42.818 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 16:49:42.823 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-16 16:49:42.827 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 16:49:42.828 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 16:49:42.842 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 16:49:42.846 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-16 16:49:42.847 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-16 16:49:42.847 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 16:49:42.848 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 16:49:42.852 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-16 16:49:42.857 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 16:49:42.858 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 16:49:42.864 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-16 16:49:42.868 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 16:49:42.869 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 16:49:42.873 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-16 16:49:42.877 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-16 16:49:42.878 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 16:49:42.882 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-16 16:49:42.906 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:与三级医院住院就诊记录表姓名不一致同时满足以下条件： 1、封面《姓名》不为空值 2、三级医院住院就诊记录表《患者姓名》不为空 3、封面《姓名》与住院就诊记录表中《患者姓名》不相等 
2020-06-16 16:49:42.910 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:与三级医院门诊就诊记录表姓名不一致同时满足以下条件： 1、封面《姓名》不为空值 2、三级医院门诊就诊记录表《患者姓名》不为空 3、封面《姓名》与门诊就诊记录表中《患者姓名》不相等 
2020-06-16 16:49:42.913 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:姓名长度异常长度>50字符 
2020-06-16 16:49:42.916 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-16 16:49:42.917 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 814b3d0aca3642af82ef320f98d4dfba(String), 2020-06-16 16:49:42.915(Timestamp), 31011310200312009116(String), 847bc4b46918417dab4aa917af3355c3(String), 2020-06-16 16:49:42.915(Timestamp), 31011310200312009116(String), b8eeb38e528544b28133b9ee94c5fbc4(String), 2020-06-16 16:49:42.915(Timestamp) 
2020-06-16 16:49:42.939 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 3 
2020-06-16 17:14:19.881 [INFO ] com.benetech.rules.RulesApplication                - [logStarting:55] Starting RulesApplication v1.0-SNAPSHOT on DESKTOP-EOCO1V0 with PID 13844 (D:\51\python\project\instance\zyjk\EHR\controlRuleNew\config\healthRecordRules.jar started by ZY in D:\51\python\project\instance\zyjk\EHR\controlRuleNew) 
2020-06-16 17:14:19.883 [DEBUG] com.benetech.rules.RulesApplication                - [logStarting:56] Running with Spring Boot v2.2.1.RELEASE, Spring v5.2.1.RELEASE 
2020-06-16 17:14:19.884 [INFO ] com.benetech.rules.RulesApplication                - [logStartupProfileInfo:655] The following profiles are active: test 
2020-06-16 17:14:21.322 [INFO ] o.s.boot.web.embedded.tomcat.TomcatWebServer       - [initialize:92] Tomcat initialized with port(s): 8838 (http) 
2020-06-16 17:14:21.335 [INFO ] org.apache.coyote.http11.Http11NioProtocol         - [log:173] Initializing ProtocolHandler ["http-nio-8838"] 
2020-06-16 17:14:21.335 [INFO ] org.apache.catalina.core.StandardService           - [log:173] Starting service [Tomcat] 
2020-06-16 17:14:21.336 [INFO ] org.apache.catalina.core.StandardEngine            - [log:173] Starting Servlet engine: [Apache Tomcat/9.0.27] 
2020-06-16 17:14:21.411 [INFO ] o.a.c.c.C.[.[localhost].[/healthRecordRules]       - [log:173] Initializing Spring embedded WebApplicationContext 
2020-06-16 17:14:21.412 [INFO ] org.springframework.web.context.ContextLoader      - [prepareWebApplicationContext:284] Root WebApplicationContext: initialization completed in 1488 ms 
2020-06-16 17:14:21.501 [DEBUG] org.apache.ibatis.logging.LogFactory               - [setImplementation:135] Logging initialized using 'class org.apache.ibatis.logging.slf4j.Slf4jImpl' adapter. 
2020-06-16 17:14:21.762 [WARN ] org.mybatis.spring.SqlSessionFactoryBean           - [buildSqlSessionFactory:467] Can't find class in '[com.benetech.rules.*.entity]' package. Please check your configuration. 
2020-06-16 17:14:23.606 [INFO ] com.alibaba.druid.pool.DruidDataSource             - [init:930] {dataSource-1} inited 
2020-06-16 17:14:23.829 [DEBUG] c.b.r.m.e.mapper.RuleEngineMapper.getAllRules      - [debug:159] ==>  Preparing: select a.RuleId as ruleId, a.RuleSql as clazz from HrRule a join HrRuleProps b on a.RuleId = b.RuleId where -- RuleId in ('34278f71cf1d42c88158aaf637fa5203', '8d30baa03bfc4233a8f115c57a0ebf08', '63eb82a44bf64c96a0b9023fa2a3c9d9') a.RuleSql != '' and a.RuleSql is not null and b.Enable = 1  
2020-06-16 17:14:23.847 [DEBUG] c.b.r.m.e.mapper.RuleEngineMapper.getAllRules      - [debug:159] ==> Parameters:  
2020-06-16 17:14:24.231 [DEBUG] c.b.r.m.e.mapper.RuleEngineMapper.getAllRules      - [debug:159] <==      Total: 310 
2020-06-16 17:14:24.521 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [init:68] 加载规则：310 条 
2020-06-16 17:14:24.537 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.getAllCode    - [debug:159] ==>  Preparing: SELECT codeSysType AS type, code AS code, [value] AS value FROM tb_code_value WHERE code != '' AND [value] != ''  
2020-06-16 17:14:24.538 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.getAllCode    - [debug:159] ==> Parameters:  
2020-06-16 17:14:25.460 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.getAllCode    - [debug:159] <==      Total: 44881 
2020-06-16 17:14:25.530 [INFO ] c.b.r.m.m.service.impl.EhrModelBuildServiceImpl    - [init:96] 初始化字典类型: 467 种 
2020-06-16 17:14:25.530 [INFO ] c.b.r.m.m.service.impl.EhrModelBuildServiceImpl    - [init:97] 初始化字典: 44881 条 
2020-06-16 17:14:25.531 [ERROR] c.b.r.m.process.service.impl.QcProcessServiceImpl  - [init:44] 初始化线程池 
2020-06-16 17:14:25.650 [INFO ] o.s.scheduling.concurrent.ThreadPoolTaskExecutor   - [initialize:171] Initializing ExecutorService 'applicationTaskExecutor' 
2020-06-16 17:14:25.849 [INFO ] org.apache.coyote.http11.Http11NioProtocol         - [log:173] Starting ProtocolHandler ["http-nio-8838"] 
2020-06-16 17:14:25.874 [INFO ] o.s.boot.web.embedded.tomcat.TomcatWebServer       - [start:204] Tomcat started on port(s): 8838 (http) with context path '/healthRecordRules' 
2020-06-16 17:14:25.877 [INFO ] com.benetech.rules.RulesApplication                - [logStarted:61] Started RulesApplication in 6.599 seconds (JVM running for 7.096) 
2020-06-16 17:14:25.878 [INFO ] com.benetech.rules.RulesApplication                - [main:20] -------------启动成功------------- 
2020-06-16 17:14:28.236 [INFO ] o.a.c.c.C.[.[localhost].[/healthRecordRules]       - [log:173] Initializing Spring DispatcherServlet 'dispatcherServlet' 
2020-06-16 17:14:28.236 [INFO ] org.springframework.web.servlet.DispatcherServlet  - [initServletBean:525] Initializing Servlet 'dispatcherServlet' 
2020-06-16 17:14:28.243 [INFO ] org.springframework.web.servlet.DispatcherServlet  - [initServletBean:547] Completed initialization in 6 ms 
2020-06-16 17:14:28.276 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-16 17:14:28.281 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 17:14:28.299 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-16 17:14:28.308 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-16 17:14:28.309 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 17:14:28.322 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-16 17:14:28.332 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-16 17:14:28.332 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-16 17:14:28.340 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-16 17:14:28.355 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-16 17:14:28.355 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:14:28.368 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-16 17:14:28.383 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 17:14:28.383 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:14:28.394 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 17:14:28.407 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-16 17:14:28.407 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-16 17:14:28.408 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 17:14:28.408 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:14:28.418 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-16 17:14:28.427 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 17:14:28.427 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:14:28.438 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-16 17:14:28.466 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 17:14:28.466 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:14:28.504 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-16 17:14:28.516 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 17:14:28.517 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:14:28.535 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 17:14:28.560 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-16 17:14:28.560 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-16 17:14:28.561 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 17:14:28.561 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:14:28.578 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-16 17:14:28.588 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 17:14:28.588 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:14:28.607 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-16 17:14:28.620 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 17:14:28.621 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:14:28.636 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-16 17:14:28.646 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-16 17:14:28.647 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:14:28.656 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-16 17:14:28.764 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:姓名填写不规范同时满足以下条件： 1、联系人姓名不为空值 2、联系人姓名为纯数字 
2020-06-16 17:14:28.772 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:与三级医院住院就诊记录表姓名不一致同时满足以下条件： 1、封面《姓名》不为空值 2、三级医院住院就诊记录表《患者姓名》不为空 3、封面《姓名》与住院就诊记录表中《患者姓名》不相等 
2020-06-16 17:14:28.775 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:与三级医院门诊就诊记录表姓名不一致同时满足以下条件： 1、封面《姓名》不为空值 2、三级医院门诊就诊记录表《患者姓名》不为空 3、封面《姓名》与门诊就诊记录表中《患者姓名》不相等 
2020-06-16 17:14:28.815 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-16 17:14:28.820 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 61ed70b670f2460a94ebc183f6b86f5d(String), 2020-06-16 17:14:28.79(Timestamp), 31011310200312009116(String), 814b3d0aca3642af82ef320f98d4dfba(String), 2020-06-16 17:14:28.79(Timestamp), 31011310200312009116(String), 847bc4b46918417dab4aa917af3355c3(String), 2020-06-16 17:14:28.79(Timestamp) 
2020-06-16 17:14:28.849 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 3 
2020-06-16 17:18:37.301 [INFO ] com.benetech.rules.RulesApplication                - [logStarting:55] Starting RulesApplication v1.0-SNAPSHOT on DESKTOP-EOCO1V0 with PID 16080 (D:\51\python\project\instance\zyjk\EHR\controlRuleNew\config\healthRecordRules.jar started by ZY in D:\51\python\project\instance\zyjk\EHR\controlRuleNew) 
2020-06-16 17:18:37.307 [DEBUG] com.benetech.rules.RulesApplication                - [logStarting:56] Running with Spring Boot v2.2.1.RELEASE, Spring v5.2.1.RELEASE 
2020-06-16 17:18:37.307 [INFO ] com.benetech.rules.RulesApplication                - [logStartupProfileInfo:655] The following profiles are active: test 
2020-06-16 17:18:38.796 [INFO ] o.s.boot.web.embedded.tomcat.TomcatWebServer       - [initialize:92] Tomcat initialized with port(s): 8838 (http) 
2020-06-16 17:18:38.808 [INFO ] org.apache.coyote.http11.Http11NioProtocol         - [log:173] Initializing ProtocolHandler ["http-nio-8838"] 
2020-06-16 17:18:38.809 [INFO ] org.apache.catalina.core.StandardService           - [log:173] Starting service [Tomcat] 
2020-06-16 17:18:38.809 [INFO ] org.apache.catalina.core.StandardEngine            - [log:173] Starting Servlet engine: [Apache Tomcat/9.0.27] 
2020-06-16 17:18:38.875 [INFO ] o.a.c.c.C.[.[localhost].[/healthRecordRules]       - [log:173] Initializing Spring embedded WebApplicationContext 
2020-06-16 17:18:38.876 [INFO ] org.springframework.web.context.ContextLoader      - [prepareWebApplicationContext:284] Root WebApplicationContext: initialization completed in 1492 ms 
2020-06-16 17:18:38.951 [DEBUG] org.apache.ibatis.logging.LogFactory               - [setImplementation:135] Logging initialized using 'class org.apache.ibatis.logging.slf4j.Slf4jImpl' adapter. 
2020-06-16 17:18:39.201 [WARN ] org.mybatis.spring.SqlSessionFactoryBean           - [buildSqlSessionFactory:467] Can't find class in '[com.benetech.rules.*.entity]' package. Please check your configuration. 
2020-06-16 17:18:39.884 [INFO ] com.alibaba.druid.pool.DruidDataSource             - [init:930] {dataSource-1} inited 
2020-06-16 17:18:40.085 [DEBUG] c.b.r.m.e.mapper.RuleEngineMapper.getAllRules      - [debug:159] ==>  Preparing: select a.RuleId as ruleId, a.RuleSql as clazz from HrRule a join HrRuleProps b on a.RuleId = b.RuleId where -- RuleId in ('34278f71cf1d42c88158aaf637fa5203', '8d30baa03bfc4233a8f115c57a0ebf08', '63eb82a44bf64c96a0b9023fa2a3c9d9') a.RuleSql != '' and a.RuleSql is not null and b.Enable = 1  
2020-06-16 17:18:40.103 [DEBUG] c.b.r.m.e.mapper.RuleEngineMapper.getAllRules      - [debug:159] ==> Parameters:  
2020-06-16 17:18:40.214 [DEBUG] c.b.r.m.e.mapper.RuleEngineMapper.getAllRules      - [debug:159] <==      Total: 310 
2020-06-16 17:18:40.443 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [init:68] 加载规则：310 条 
2020-06-16 17:18:40.461 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.getAllCode    - [debug:159] ==>  Preparing: SELECT codeSysType AS type, code AS code, [value] AS value FROM tb_code_value WHERE code != '' AND [value] != ''  
2020-06-16 17:18:40.464 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.getAllCode    - [debug:159] ==> Parameters:  
2020-06-16 17:18:40.912 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.getAllCode    - [debug:159] <==      Total: 44881 
2020-06-16 17:18:40.937 [INFO ] c.b.r.m.m.service.impl.EhrModelBuildServiceImpl    - [init:96] 初始化字典类型: 467 种 
2020-06-16 17:18:40.937 [INFO ] c.b.r.m.m.service.impl.EhrModelBuildServiceImpl    - [init:97] 初始化字典: 44881 条 
2020-06-16 17:18:40.938 [ERROR] c.b.r.m.process.service.impl.QcProcessServiceImpl  - [init:44] 初始化线程池 
2020-06-16 17:18:41.041 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-16 17:18:41.042 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 17:18:41.051 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-16 17:18:41.058 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-16 17:18:41.059 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 17:18:41.076 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-16 17:18:41.082 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-16 17:18:41.082 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-16 17:18:41.095 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-16 17:18:41.122 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-16 17:18:41.122 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:18:41.129 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-16 17:18:41.135 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 17:18:41.136 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:18:41.145 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 17:18:41.147 [INFO ] o.s.scheduling.concurrent.ThreadPoolTaskExecutor   - [initialize:171] Initializing ExecutorService 'applicationTaskExecutor' 
2020-06-16 17:18:41.152 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-16 17:18:41.152 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-16 17:18:41.153 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 17:18:41.154 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:18:41.161 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-16 17:18:41.165 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 17:18:41.166 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:18:41.174 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-16 17:18:41.184 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 17:18:41.185 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:18:41.192 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-16 17:18:41.197 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 17:18:41.198 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:18:41.215 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 17:18:41.221 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-16 17:18:41.221 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-16 17:18:41.222 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 17:18:41.222 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:18:41.228 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-16 17:18:41.235 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 17:18:41.235 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:18:41.242 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-16 17:18:41.247 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 17:18:41.248 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:18:41.254 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-16 17:18:41.259 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-16 17:18:41.260 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:18:41.267 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-16 17:18:41.329 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:姓名未填写姓名为空值 
2020-06-16 17:18:41.340 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1)  
2020-06-16 17:18:41.341 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 63eb82a44bf64c96a0b9023fa2a3c9d9(String), 2020-06-16 17:18:41.34(Timestamp) 
2020-06-16 17:18:41.358 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 1 
2020-06-16 17:18:41.500 [INFO ] org.apache.coyote.http11.Http11NioProtocol         - [log:173] Starting ProtocolHandler ["http-nio-8838"] 
2020-06-16 17:18:41.511 [INFO ] org.apache.coyote.http11.Http11NioProtocol         - [log:173] Pausing ProtocolHandler ["http-nio-8838"] 
2020-06-16 17:18:41.512 [INFO ] org.apache.catalina.core.StandardService           - [log:173] Stopping service [Tomcat] 
2020-06-16 17:18:41.518 [INFO ] org.apache.coyote.http11.Http11NioProtocol         - [log:173] Stopping ProtocolHandler ["http-nio-8838"] 
2020-06-16 17:18:41.518 [INFO ] org.apache.coyote.http11.Http11NioProtocol         - [log:173] Destroying ProtocolHandler ["http-nio-8838"] 
2020-06-16 17:18:41.524 [INFO ] o.s.b.a.l.ConditionEvaluationReportLoggingListener - [logMessage:136]     Error starting ApplicationContext. To display the conditions report re-run your application with 'debug' enabled. 
2020-06-16 17:18:41.525 [ERROR] o.s.b.diagnostics.LoggingFailureAnalysisReporter   - [report:40]     ***************************  APPLICATION FAILED TO START  ***************************    Description:    Web server failed to start. Port 8838 was already in use.    Action:    Identify and stop the process that's listening on port 8838 or configure this application to listen on another port.   
2020-06-16 17:18:41.527 [INFO ] o.s.scheduling.concurrent.ThreadPoolTaskExecutor   - [shutdown:208] Shutting down ExecutorService 'applicationTaskExecutor' 
2020-06-16 17:18:41.530 [INFO ] com.alibaba.druid.pool.DruidDataSource             - [close:1825] {dataSource-1} closed 
2020-06-16 17:18:44.074 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-16 17:18:44.075 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 17:18:44.080 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-16 17:18:44.086 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-16 17:18:44.087 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 17:18:44.095 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-16 17:18:44.100 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-16 17:18:44.101 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-16 17:18:44.107 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-16 17:18:44.112 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-16 17:18:44.113 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:18:44.120 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-16 17:18:44.124 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 17:18:44.125 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:18:44.139 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 17:18:44.143 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-16 17:18:44.144 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-16 17:18:44.145 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 17:18:44.145 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:18:44.151 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-16 17:18:44.156 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 17:18:44.157 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:18:44.162 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-16 17:18:44.167 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 17:18:44.167 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:18:44.172 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-16 17:18:44.177 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 17:18:44.177 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:18:44.192 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 17:18:44.198 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-16 17:18:44.199 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-16 17:18:44.200 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 17:18:44.202 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:18:44.207 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-16 17:18:44.214 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 17:18:44.215 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:18:44.221 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-16 17:18:44.228 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 17:18:44.229 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:18:44.235 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-16 17:18:44.242 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-16 17:18:44.244 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:18:44.250 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-16 17:18:44.306 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:姓名填写不规范同时满足以下条件： 1、联系人姓名不为空值 2、联系人姓名为纯数字 
2020-06-16 17:18:44.309 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:与三级医院住院就诊记录表姓名不一致同时满足以下条件： 1、封面《姓名》不为空值 2、三级医院住院就诊记录表《患者姓名》不为空 3、封面《姓名》与住院就诊记录表中《患者姓名》不相等 
2020-06-16 17:18:44.310 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:与三级医院门诊就诊记录表姓名不一致同时满足以下条件： 1、封面《姓名》不为空值 2、三级医院门诊就诊记录表《患者姓名》不为空 3、封面《姓名》与门诊就诊记录表中《患者姓名》不相等 
2020-06-16 17:18:44.317 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-16 17:18:44.318 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 61ed70b670f2460a94ebc183f6b86f5d(String), 2020-06-16 17:18:44.316(Timestamp), 31011310200312009116(String), 814b3d0aca3642af82ef320f98d4dfba(String), 2020-06-16 17:18:44.316(Timestamp), 31011310200312009116(String), 847bc4b46918417dab4aa917af3355c3(String), 2020-06-16 17:18:44.316(Timestamp) 
2020-06-16 17:18:44.353 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 3 
2020-06-16 17:19:39.846 [INFO ] com.benetech.rules.RulesApplication                - [logStarting:55] Starting RulesApplication v1.0-SNAPSHOT on DESKTOP-EOCO1V0 with PID 14868 (D:\51\python\project\instance\zyjk\EHR\controlRuleNew\config\healthRecordRules.jar started by ZY in D:\51\python\project\instance\zyjk\EHR\controlRuleNew) 
2020-06-16 17:19:39.849 [DEBUG] com.benetech.rules.RulesApplication                - [logStarting:56] Running with Spring Boot v2.2.1.RELEASE, Spring v5.2.1.RELEASE 
2020-06-16 17:19:39.850 [INFO ] com.benetech.rules.RulesApplication                - [logStartupProfileInfo:655] The following profiles are active: test 
2020-06-16 17:19:41.334 [INFO ] o.s.boot.web.embedded.tomcat.TomcatWebServer       - [initialize:92] Tomcat initialized with port(s): 8838 (http) 
2020-06-16 17:19:41.345 [INFO ] org.apache.coyote.http11.Http11NioProtocol         - [log:173] Initializing ProtocolHandler ["http-nio-8838"] 
2020-06-16 17:19:41.346 [INFO ] org.apache.catalina.core.StandardService           - [log:173] Starting service [Tomcat] 
2020-06-16 17:19:41.346 [INFO ] org.apache.catalina.core.StandardEngine            - [log:173] Starting Servlet engine: [Apache Tomcat/9.0.27] 
2020-06-16 17:19:41.412 [INFO ] o.a.c.c.C.[.[localhost].[/healthRecordRules]       - [log:173] Initializing Spring embedded WebApplicationContext 
2020-06-16 17:19:41.412 [INFO ] org.springframework.web.context.ContextLoader      - [prepareWebApplicationContext:284] Root WebApplicationContext: initialization completed in 1478 ms 
2020-06-16 17:19:41.487 [DEBUG] org.apache.ibatis.logging.LogFactory               - [setImplementation:135] Logging initialized using 'class org.apache.ibatis.logging.slf4j.Slf4jImpl' adapter. 
2020-06-16 17:19:41.746 [WARN ] org.mybatis.spring.SqlSessionFactoryBean           - [buildSqlSessionFactory:467] Can't find class in '[com.benetech.rules.*.entity]' package. Please check your configuration. 
2020-06-16 17:19:42.336 [INFO ] com.alibaba.druid.pool.DruidDataSource             - [init:930] {dataSource-1} inited 
2020-06-16 17:19:42.523 [DEBUG] c.b.r.m.e.mapper.RuleEngineMapper.getAllRules      - [debug:159] ==>  Preparing: select a.RuleId as ruleId, a.RuleSql as clazz from HrRule a join HrRuleProps b on a.RuleId = b.RuleId where -- RuleId in ('34278f71cf1d42c88158aaf637fa5203', '8d30baa03bfc4233a8f115c57a0ebf08', '63eb82a44bf64c96a0b9023fa2a3c9d9') a.RuleSql != '' and a.RuleSql is not null and b.Enable = 1  
2020-06-16 17:19:42.552 [DEBUG] c.b.r.m.e.mapper.RuleEngineMapper.getAllRules      - [debug:159] ==> Parameters:  
2020-06-16 17:19:42.642 [DEBUG] c.b.r.m.e.mapper.RuleEngineMapper.getAllRules      - [debug:159] <==      Total: 310 
2020-06-16 17:19:42.895 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [init:68] 加载规则：310 条 
2020-06-16 17:19:42.911 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.getAllCode    - [debug:159] ==>  Preparing: SELECT codeSysType AS type, code AS code, [value] AS value FROM tb_code_value WHERE code != '' AND [value] != ''  
2020-06-16 17:19:42.912 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.getAllCode    - [debug:159] ==> Parameters:  
2020-06-16 17:19:43.316 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.getAllCode    - [debug:159] <==      Total: 44881 
2020-06-16 17:19:43.342 [INFO ] c.b.r.m.m.service.impl.EhrModelBuildServiceImpl    - [init:96] 初始化字典类型: 467 种 
2020-06-16 17:19:43.342 [INFO ] c.b.r.m.m.service.impl.EhrModelBuildServiceImpl    - [init:97] 初始化字典: 44881 条 
2020-06-16 17:19:43.343 [ERROR] c.b.r.m.process.service.impl.QcProcessServiceImpl  - [init:44] 初始化线程池 
2020-06-16 17:19:43.468 [INFO ] o.s.scheduling.concurrent.ThreadPoolTaskExecutor   - [initialize:171] Initializing ExecutorService 'applicationTaskExecutor' 
2020-06-16 17:19:43.491 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-16 17:19:43.492 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 17:19:43.503 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-16 17:19:43.514 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-16 17:19:43.514 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 17:19:43.532 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-16 17:19:43.546 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-16 17:19:43.547 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-16 17:19:43.554 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-16 17:19:43.562 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-16 17:19:43.563 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:19:43.574 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-16 17:19:43.583 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 17:19:43.584 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:19:43.590 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 17:19:43.593 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-16 17:19:43.594 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-16 17:19:43.594 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 17:19:43.595 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:19:43.600 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-16 17:19:43.609 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 17:19:43.610 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:19:43.614 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-16 17:19:43.618 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 17:19:43.619 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:19:43.623 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-16 17:19:43.628 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 17:19:43.629 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:19:43.643 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 17:19:43.646 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-16 17:19:43.647 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-16 17:19:43.647 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 17:19:43.648 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:19:43.652 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-16 17:19:43.657 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 17:19:43.658 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:19:43.667 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-16 17:19:43.672 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 17:19:43.672 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:19:43.677 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-16 17:19:43.682 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-16 17:19:43.682 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:19:43.687 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-16 17:19:43.742 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:姓名未填写姓名为空值 
2020-06-16 17:19:43.754 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1)  
2020-06-16 17:19:43.755 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 63eb82a44bf64c96a0b9023fa2a3c9d9(String), 2020-06-16 17:19:43.754(Timestamp) 
2020-06-16 17:19:43.786 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 1 
2020-06-16 17:19:43.795 [INFO ] org.apache.coyote.http11.Http11NioProtocol         - [log:173] Starting ProtocolHandler ["http-nio-8838"] 
2020-06-16 17:19:43.820 [INFO ] org.apache.coyote.http11.Http11NioProtocol         - [log:173] Pausing ProtocolHandler ["http-nio-8838"] 
2020-06-16 17:19:43.820 [INFO ] org.apache.catalina.core.StandardService           - [log:173] Stopping service [Tomcat] 
2020-06-16 17:19:43.824 [INFO ] org.apache.coyote.http11.Http11NioProtocol         - [log:173] Stopping ProtocolHandler ["http-nio-8838"] 
2020-06-16 17:19:43.825 [INFO ] org.apache.coyote.http11.Http11NioProtocol         - [log:173] Destroying ProtocolHandler ["http-nio-8838"] 
2020-06-16 17:19:43.827 [INFO ] o.s.b.a.l.ConditionEvaluationReportLoggingListener - [logMessage:136]     Error starting ApplicationContext. To display the conditions report re-run your application with 'debug' enabled. 
2020-06-16 17:19:43.828 [ERROR] o.s.b.diagnostics.LoggingFailureAnalysisReporter   - [report:40]     ***************************  APPLICATION FAILED TO START  ***************************    Description:    Web server failed to start. Port 8838 was already in use.    Action:    Identify and stop the process that's listening on port 8838 or configure this application to listen on another port.   
2020-06-16 17:19:43.830 [INFO ] o.s.scheduling.concurrent.ThreadPoolTaskExecutor   - [shutdown:208] Shutting down ExecutorService 'applicationTaskExecutor' 
2020-06-16 17:19:43.834 [INFO ] com.alibaba.druid.pool.DruidDataSource             - [close:1825] {dataSource-1} closed 
2020-06-16 17:19:47.097 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-16 17:19:47.098 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 17:19:47.104 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-16 17:19:47.110 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-16 17:19:47.111 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 17:19:47.117 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-16 17:19:47.122 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-16 17:19:47.123 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-16 17:19:47.128 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-16 17:19:47.133 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-16 17:19:47.134 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:19:47.139 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-16 17:19:47.144 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 17:19:47.144 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:19:47.150 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 17:19:47.155 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-16 17:19:47.155 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-16 17:19:47.156 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 17:19:47.156 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:19:47.161 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-16 17:19:47.165 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 17:19:47.166 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:19:47.170 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-16 17:19:47.174 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 17:19:47.175 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:19:47.179 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-16 17:19:47.184 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 17:19:47.185 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:19:47.198 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 17:19:47.203 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-16 17:19:47.203 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-16 17:19:47.203 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 17:19:47.204 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:19:47.208 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-16 17:19:47.213 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 17:19:47.213 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:19:47.218 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-16 17:19:47.223 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 17:19:47.223 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:19:47.227 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-16 17:19:47.232 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-16 17:19:47.233 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:19:47.238 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-16 17:19:47.260 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:姓名填写不规范同时满足以下条件： 1、联系人姓名不为空值 2、联系人姓名为纯数字 
2020-06-16 17:19:47.264 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:与三级医院住院就诊记录表姓名不一致同时满足以下条件： 1、封面《姓名》不为空值 2、三级医院住院就诊记录表《患者姓名》不为空 3、封面《姓名》与住院就诊记录表中《患者姓名》不相等 
2020-06-16 17:19:47.265 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:与三级医院门诊就诊记录表姓名不一致同时满足以下条件： 1、封面《姓名》不为空值 2、三级医院门诊就诊记录表《患者姓名》不为空 3、封面《姓名》与门诊就诊记录表中《患者姓名》不相等 
2020-06-16 17:19:47.284 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-16 17:19:47.285 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 61ed70b670f2460a94ebc183f6b86f5d(String), 2020-06-16 17:19:47.283(Timestamp), 31011310200312009116(String), 814b3d0aca3642af82ef320f98d4dfba(String), 2020-06-16 17:19:47.283(Timestamp), 31011310200312009116(String), 847bc4b46918417dab4aa917af3355c3(String), 2020-06-16 17:19:47.283(Timestamp) 
2020-06-16 17:19:47.319 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 3 
2020-06-16 17:24:35.268 [INFO ] com.benetech.rules.RulesApplication                - [logStarting:55] Starting RulesApplication v1.0-SNAPSHOT on DESKTOP-EOCO1V0 with PID 10828 (D:\51\python\project\instance\zyjk\EHR\controlRuleNew\config\healthRecordRules.jar started by ZY in D:\51\python\project\instance\zyjk\EHR\controlRuleNew) 
2020-06-16 17:24:35.272 [DEBUG] com.benetech.rules.RulesApplication                - [logStarting:56] Running with Spring Boot v2.2.1.RELEASE, Spring v5.2.1.RELEASE 
2020-06-16 17:24:35.272 [INFO ] com.benetech.rules.RulesApplication                - [logStartupProfileInfo:655] The following profiles are active: test 
2020-06-16 17:24:36.747 [INFO ] o.s.boot.web.embedded.tomcat.TomcatWebServer       - [initialize:92] Tomcat initialized with port(s): 8838 (http) 
2020-06-16 17:24:36.759 [INFO ] org.apache.coyote.http11.Http11NioProtocol         - [log:173] Initializing ProtocolHandler ["http-nio-8838"] 
2020-06-16 17:24:36.760 [INFO ] org.apache.catalina.core.StandardService           - [log:173] Starting service [Tomcat] 
2020-06-16 17:24:36.760 [INFO ] org.apache.catalina.core.StandardEngine            - [log:173] Starting Servlet engine: [Apache Tomcat/9.0.27] 
2020-06-16 17:24:36.830 [INFO ] o.a.c.c.C.[.[localhost].[/healthRecordRules]       - [log:173] Initializing Spring embedded WebApplicationContext 
2020-06-16 17:24:36.830 [INFO ] org.springframework.web.context.ContextLoader      - [prepareWebApplicationContext:284] Root WebApplicationContext: initialization completed in 1478 ms 
2020-06-16 17:24:36.912 [DEBUG] org.apache.ibatis.logging.LogFactory               - [setImplementation:135] Logging initialized using 'class org.apache.ibatis.logging.slf4j.Slf4jImpl' adapter. 
2020-06-16 17:24:37.163 [WARN ] org.mybatis.spring.SqlSessionFactoryBean           - [buildSqlSessionFactory:467] Can't find class in '[com.benetech.rules.*.entity]' package. Please check your configuration. 
2020-06-16 17:24:37.782 [INFO ] com.alibaba.druid.pool.DruidDataSource             - [init:930] {dataSource-1} inited 
2020-06-16 17:24:37.980 [DEBUG] c.b.r.m.e.mapper.RuleEngineMapper.getAllRules      - [debug:159] ==>  Preparing: select a.RuleId as ruleId, a.RuleSql as clazz from HrRule a join HrRuleProps b on a.RuleId = b.RuleId where -- RuleId in ('34278f71cf1d42c88158aaf637fa5203', '8d30baa03bfc4233a8f115c57a0ebf08', '63eb82a44bf64c96a0b9023fa2a3c9d9') a.RuleSql != '' and a.RuleSql is not null and b.Enable = 1  
2020-06-16 17:24:37.998 [DEBUG] c.b.r.m.e.mapper.RuleEngineMapper.getAllRules      - [debug:159] ==> Parameters:  
2020-06-16 17:24:38.079 [DEBUG] c.b.r.m.e.mapper.RuleEngineMapper.getAllRules      - [debug:159] <==      Total: 310 
2020-06-16 17:24:38.308 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [init:68] 加载规则：310 条 
2020-06-16 17:24:38.325 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.getAllCode    - [debug:159] ==>  Preparing: SELECT codeSysType AS type, code AS code, [value] AS value FROM tb_code_value WHERE code != '' AND [value] != ''  
2020-06-16 17:24:38.325 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.getAllCode    - [debug:159] ==> Parameters:  
2020-06-16 17:24:38.828 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.getAllCode    - [debug:159] <==      Total: 44881 
2020-06-16 17:24:38.854 [INFO ] c.b.r.m.m.service.impl.EhrModelBuildServiceImpl    - [init:96] 初始化字典类型: 467 种 
2020-06-16 17:24:38.855 [INFO ] c.b.r.m.m.service.impl.EhrModelBuildServiceImpl    - [init:97] 初始化字典: 44881 条 
2020-06-16 17:24:38.855 [ERROR] c.b.r.m.process.service.impl.QcProcessServiceImpl  - [init:44] 初始化线程池 
2020-06-16 17:24:38.938 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-16 17:24:38.939 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 17:24:38.949 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-16 17:24:38.955 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-16 17:24:38.956 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 17:24:38.961 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-16 17:24:38.966 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-16 17:24:38.966 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-16 17:24:38.972 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-16 17:24:38.977 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-16 17:24:38.977 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:24:38.981 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-16 17:24:38.985 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 17:24:38.986 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:24:38.987 [INFO ] o.s.scheduling.concurrent.ThreadPoolTaskExecutor   - [initialize:171] Initializing ExecutorService 'applicationTaskExecutor' 
2020-06-16 17:24:38.992 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 17:24:38.998 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-16 17:24:38.998 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-16 17:24:38.999 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 17:24:38.999 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:24:39.004 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-16 17:24:39.008 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 17:24:39.009 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:24:39.015 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-16 17:24:39.019 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 17:24:39.021 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:24:39.026 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-16 17:24:39.031 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 17:24:39.032 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:24:39.047 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 17:24:39.051 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-16 17:24:39.052 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-16 17:24:39.052 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 17:24:39.053 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:24:39.058 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-16 17:24:39.063 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 17:24:39.064 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:24:39.071 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-16 17:24:39.075 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 17:24:39.076 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:24:39.081 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-16 17:24:39.086 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-16 17:24:39.087 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:24:39.091 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-16 17:24:39.113 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:姓名未填写姓名为空值 
2020-06-16 17:24:39.126 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1)  
2020-06-16 17:24:39.126 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 63eb82a44bf64c96a0b9023fa2a3c9d9(String), 2020-06-16 17:24:39.125(Timestamp) 
2020-06-16 17:24:39.143 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 1 
2020-06-16 17:24:39.263 [INFO ] org.apache.coyote.http11.Http11NioProtocol         - [log:173] Starting ProtocolHandler ["http-nio-8838"] 
2020-06-16 17:24:39.276 [INFO ] org.apache.coyote.http11.Http11NioProtocol         - [log:173] Pausing ProtocolHandler ["http-nio-8838"] 
2020-06-16 17:24:39.277 [INFO ] org.apache.catalina.core.StandardService           - [log:173] Stopping service [Tomcat] 
2020-06-16 17:24:39.281 [INFO ] org.apache.coyote.http11.Http11NioProtocol         - [log:173] Stopping ProtocolHandler ["http-nio-8838"] 
2020-06-16 17:24:39.281 [INFO ] org.apache.coyote.http11.Http11NioProtocol         - [log:173] Destroying ProtocolHandler ["http-nio-8838"] 
2020-06-16 17:24:39.283 [INFO ] o.s.b.a.l.ConditionEvaluationReportLoggingListener - [logMessage:136]     Error starting ApplicationContext. To display the conditions report re-run your application with 'debug' enabled. 
2020-06-16 17:24:39.284 [ERROR] o.s.b.diagnostics.LoggingFailureAnalysisReporter   - [report:40]     ***************************  APPLICATION FAILED TO START  ***************************    Description:    Web server failed to start. Port 8838 was already in use.    Action:    Identify and stop the process that's listening on port 8838 or configure this application to listen on another port.   
2020-06-16 17:24:39.288 [INFO ] o.s.scheduling.concurrent.ThreadPoolTaskExecutor   - [shutdown:208] Shutting down ExecutorService 'applicationTaskExecutor' 
2020-06-16 17:24:39.298 [INFO ] com.alibaba.druid.pool.DruidDataSource             - [close:1825] {dataSource-1} closed 
2020-06-16 17:25:22.527 [INFO ] com.benetech.rules.RulesApplication                - [logStarting:55] Starting RulesApplication v1.0-SNAPSHOT on DESKTOP-EOCO1V0 with PID 5800 (D:\51\python\project\instance\zyjk\EHR\controlRuleNew\config\healthRecordRules.jar started by ZY in D:\51\python\project\instance\zyjk\EHR\controlRuleNew) 
2020-06-16 17:25:22.530 [DEBUG] com.benetech.rules.RulesApplication                - [logStarting:56] Running with Spring Boot v2.2.1.RELEASE, Spring v5.2.1.RELEASE 
2020-06-16 17:25:22.530 [INFO ] com.benetech.rules.RulesApplication                - [logStartupProfileInfo:655] The following profiles are active: test 
2020-06-16 17:25:23.998 [INFO ] o.s.boot.web.embedded.tomcat.TomcatWebServer       - [initialize:92] Tomcat initialized with port(s): 8838 (http) 
2020-06-16 17:25:24.009 [INFO ] org.apache.coyote.http11.Http11NioProtocol         - [log:173] Initializing ProtocolHandler ["http-nio-8838"] 
2020-06-16 17:25:24.009 [INFO ] org.apache.catalina.core.StandardService           - [log:173] Starting service [Tomcat] 
2020-06-16 17:25:24.010 [INFO ] org.apache.catalina.core.StandardEngine            - [log:173] Starting Servlet engine: [Apache Tomcat/9.0.27] 
2020-06-16 17:25:24.078 [INFO ] o.a.c.c.C.[.[localhost].[/healthRecordRules]       - [log:173] Initializing Spring embedded WebApplicationContext 
2020-06-16 17:25:24.078 [INFO ] org.springframework.web.context.ContextLoader      - [prepareWebApplicationContext:284] Root WebApplicationContext: initialization completed in 1462 ms 
2020-06-16 17:25:24.158 [DEBUG] org.apache.ibatis.logging.LogFactory               - [setImplementation:135] Logging initialized using 'class org.apache.ibatis.logging.slf4j.Slf4jImpl' adapter. 
2020-06-16 17:25:24.404 [WARN ] org.mybatis.spring.SqlSessionFactoryBean           - [buildSqlSessionFactory:467] Can't find class in '[com.benetech.rules.*.entity]' package. Please check your configuration. 
2020-06-16 17:25:25.017 [INFO ] com.alibaba.druid.pool.DruidDataSource             - [init:930] {dataSource-1} inited 
2020-06-16 17:25:25.229 [DEBUG] c.b.r.m.e.mapper.RuleEngineMapper.getAllRules      - [debug:159] ==>  Preparing: select a.RuleId as ruleId, a.RuleSql as clazz from HrRule a join HrRuleProps b on a.RuleId = b.RuleId where -- RuleId in ('34278f71cf1d42c88158aaf637fa5203', '8d30baa03bfc4233a8f115c57a0ebf08', '63eb82a44bf64c96a0b9023fa2a3c9d9') a.RuleSql != '' and a.RuleSql is not null and b.Enable = 1  
2020-06-16 17:25:25.248 [DEBUG] c.b.r.m.e.mapper.RuleEngineMapper.getAllRules      - [debug:159] ==> Parameters:  
2020-06-16 17:25:25.324 [DEBUG] c.b.r.m.e.mapper.RuleEngineMapper.getAllRules      - [debug:159] <==      Total: 310 
2020-06-16 17:25:25.553 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [init:68] 加载规则：310 条 
2020-06-16 17:25:25.568 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.getAllCode    - [debug:159] ==>  Preparing: SELECT codeSysType AS type, code AS code, [value] AS value FROM tb_code_value WHERE code != '' AND [value] != ''  
2020-06-16 17:25:25.568 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.getAllCode    - [debug:159] ==> Parameters:  
2020-06-16 17:25:26.065 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.getAllCode    - [debug:159] <==      Total: 44881 
2020-06-16 17:25:26.088 [INFO ] c.b.r.m.m.service.impl.EhrModelBuildServiceImpl    - [init:96] 初始化字典类型: 467 种 
2020-06-16 17:25:26.089 [INFO ] c.b.r.m.m.service.impl.EhrModelBuildServiceImpl    - [init:97] 初始化字典: 44881 条 
2020-06-16 17:25:26.089 [ERROR] c.b.r.m.process.service.impl.QcProcessServiceImpl  - [init:44] 初始化线程池 
2020-06-16 17:25:26.244 [INFO ] o.s.scheduling.concurrent.ThreadPoolTaskExecutor   - [initialize:171] Initializing ExecutorService 'applicationTaskExecutor' 
2020-06-16 17:25:26.262 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-16 17:25:26.262 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 17:25:26.268 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-16 17:25:26.276 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-16 17:25:26.277 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 17:25:26.282 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-16 17:25:26.289 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-16 17:25:26.290 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-16 17:25:26.298 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-16 17:25:26.303 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-16 17:25:26.303 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:25:26.308 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-16 17:25:26.312 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 17:25:26.312 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:25:26.318 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 17:25:26.322 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-16 17:25:26.322 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-16 17:25:26.323 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 17:25:26.323 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:25:26.328 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-16 17:25:26.333 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 17:25:26.333 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:25:26.339 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-16 17:25:26.343 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 17:25:26.343 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:25:26.348 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-16 17:25:26.352 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 17:25:26.353 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:25:26.366 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 17:25:26.370 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-16 17:25:26.371 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-16 17:25:26.371 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 17:25:26.372 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:25:26.376 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-16 17:25:26.380 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 17:25:26.381 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:25:26.385 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-16 17:25:26.390 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 17:25:26.390 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:25:26.397 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-16 17:25:26.402 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-16 17:25:26.402 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:25:26.407 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-16 17:25:26.422 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:姓名未填写姓名为空值 
2020-06-16 17:25:26.429 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1)  
2020-06-16 17:25:26.430 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 63eb82a44bf64c96a0b9023fa2a3c9d9(String), 2020-06-16 17:25:26.429(Timestamp) 
2020-06-16 17:25:26.452 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 1 
2020-06-16 17:25:26.525 [INFO ] org.apache.coyote.http11.Http11NioProtocol         - [log:173] Starting ProtocolHandler ["http-nio-8838"] 
2020-06-16 17:25:26.538 [INFO ] org.apache.coyote.http11.Http11NioProtocol         - [log:173] Pausing ProtocolHandler ["http-nio-8838"] 
2020-06-16 17:25:26.538 [INFO ] org.apache.catalina.core.StandardService           - [log:173] Stopping service [Tomcat] 
2020-06-16 17:25:26.544 [INFO ] org.apache.coyote.http11.Http11NioProtocol         - [log:173] Stopping ProtocolHandler ["http-nio-8838"] 
2020-06-16 17:25:26.545 [INFO ] org.apache.coyote.http11.Http11NioProtocol         - [log:173] Destroying ProtocolHandler ["http-nio-8838"] 
2020-06-16 17:25:26.547 [INFO ] o.s.b.a.l.ConditionEvaluationReportLoggingListener - [logMessage:136]     Error starting ApplicationContext. To display the conditions report re-run your application with 'debug' enabled. 
2020-06-16 17:25:26.553 [ERROR] o.s.b.diagnostics.LoggingFailureAnalysisReporter   - [report:40]     ***************************  APPLICATION FAILED TO START  ***************************    Description:    Web server failed to start. Port 8838 was already in use.    Action:    Identify and stop the process that's listening on port 8838 or configure this application to listen on another port.   
2020-06-16 17:25:26.556 [INFO ] o.s.scheduling.concurrent.ThreadPoolTaskExecutor   - [shutdown:208] Shutting down ExecutorService 'applicationTaskExecutor' 
2020-06-16 17:25:26.560 [INFO ] com.alibaba.druid.pool.DruidDataSource             - [close:1825] {dataSource-1} closed 
2020-06-16 17:25:30.016 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-16 17:25:30.017 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 17:25:30.023 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-16 17:25:30.028 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-16 17:25:30.028 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 17:25:30.033 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-16 17:25:30.037 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-16 17:25:30.038 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-16 17:25:30.043 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-16 17:25:30.048 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-16 17:25:30.049 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:25:30.054 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-16 17:25:30.058 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 17:25:30.059 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:25:30.065 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 17:25:30.070 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-16 17:25:30.071 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-16 17:25:30.071 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 17:25:30.072 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:25:30.077 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-16 17:25:30.083 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 17:25:30.084 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:25:30.089 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-16 17:25:30.095 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 17:25:30.096 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:25:30.101 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-16 17:25:30.107 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 17:25:30.108 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:25:30.122 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 17:25:30.127 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-16 17:25:30.128 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-16 17:25:30.129 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 17:25:30.129 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:25:30.134 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-16 17:25:30.139 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 17:25:30.140 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:25:30.145 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-16 17:25:30.151 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 17:25:30.152 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:25:30.157 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-16 17:25:30.163 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-16 17:25:30.164 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:25:30.169 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-16 17:25:30.196 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:姓名填写不规范同时满足以下条件： 1、联系人姓名不为空值 2、联系人姓名为纯数字 
2020-06-16 17:25:30.200 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:与三级医院住院就诊记录表姓名不一致同时满足以下条件： 1、封面《姓名》不为空值 2、三级医院住院就诊记录表《患者姓名》不为空 3、封面《姓名》与住院就诊记录表中《患者姓名》不相等 
2020-06-16 17:25:30.201 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:与三级医院门诊就诊记录表姓名不一致同时满足以下条件： 1、封面《姓名》不为空值 2、三级医院门诊就诊记录表《患者姓名》不为空 3、封面《姓名》与门诊就诊记录表中《患者姓名》不相等 
2020-06-16 17:25:30.211 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-16 17:25:30.212 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 61ed70b670f2460a94ebc183f6b86f5d(String), 2020-06-16 17:25:30.21(Timestamp), 31011310200312009116(String), 814b3d0aca3642af82ef320f98d4dfba(String), 2020-06-16 17:25:30.21(Timestamp), 31011310200312009116(String), 847bc4b46918417dab4aa917af3355c3(String), 2020-06-16 17:25:30.21(Timestamp) 
2020-06-16 17:25:30.234 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 3 
2020-06-16 17:25:33.704 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-16 17:25:33.705 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 17:25:33.711 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-16 17:25:33.717 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-16 17:25:33.717 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 17:25:33.723 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-16 17:25:33.730 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-16 17:25:33.731 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-16 17:25:33.736 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-16 17:25:33.741 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-16 17:25:33.742 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:25:33.746 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-16 17:25:33.752 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 17:25:33.753 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:25:33.759 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 17:25:33.764 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-16 17:25:33.764 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-16 17:25:33.765 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 17:25:33.766 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:25:33.771 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-16 17:25:33.776 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 17:25:33.777 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:25:33.782 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-16 17:25:33.786 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 17:25:33.786 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:25:33.791 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-16 17:25:33.796 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 17:25:33.796 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:25:33.809 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 17:25:33.813 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-16 17:25:33.814 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-16 17:25:33.814 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 17:25:33.815 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:25:33.819 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-16 17:25:33.824 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 17:25:33.824 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:25:33.828 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-16 17:25:33.833 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 17:25:33.833 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:25:33.838 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-16 17:25:33.842 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-16 17:25:33.843 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:25:33.847 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-16 17:25:33.861 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:与三级医院住院就诊记录表姓名不一致同时满足以下条件： 1、封面《姓名》不为空值 2、三级医院住院就诊记录表《患者姓名》不为空 3、封面《姓名》与住院就诊记录表中《患者姓名》不相等 
2020-06-16 17:25:33.862 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:与三级医院门诊就诊记录表姓名不一致同时满足以下条件： 1、封面《姓名》不为空值 2、三级医院门诊就诊记录表《患者姓名》不为空 3、封面《姓名》与门诊就诊记录表中《患者姓名》不相等 
2020-06-16 17:25:33.864 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:姓名长度异常长度>50字符 
2020-06-16 17:25:33.866 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-16 17:25:33.867 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 814b3d0aca3642af82ef320f98d4dfba(String), 2020-06-16 17:25:33.866(Timestamp), 31011310200312009116(String), 847bc4b46918417dab4aa917af3355c3(String), 2020-06-16 17:25:33.866(Timestamp), 31011310200312009116(String), b8eeb38e528544b28133b9ee94c5fbc4(String), 2020-06-16 17:25:33.866(Timestamp) 
2020-06-16 17:25:33.901 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 3 
2020-06-16 17:25:46.871 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-16 17:25:46.872 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 17:25:46.877 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-16 17:25:46.882 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-16 17:25:46.883 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 17:25:46.888 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-16 17:25:46.893 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-16 17:25:46.894 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-16 17:25:46.899 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-16 17:25:46.904 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-16 17:25:46.905 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:25:46.910 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-16 17:25:46.915 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 17:25:46.916 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:25:46.923 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 17:25:46.927 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-16 17:25:46.928 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-16 17:25:46.929 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 17:25:46.929 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:25:46.934 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-16 17:25:46.942 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 17:25:46.942 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:25:46.947 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-16 17:25:46.952 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 17:25:46.952 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:25:46.957 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-16 17:25:46.962 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 17:25:46.963 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:25:46.977 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 17:25:46.982 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-16 17:25:46.983 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-16 17:25:46.983 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 17:25:46.984 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:25:46.989 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-16 17:25:46.993 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 17:25:46.994 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:25:46.999 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-16 17:25:47.003 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 17:25:47.004 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:25:47.009 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-16 17:25:47.013 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-16 17:25:47.014 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:25:47.018 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-16 17:25:47.034 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:现住址未填写同时满足以下条件： 1、现住址中的省、市、区都为空值 2、现住址中的详细地址为空值 
2020-06-16 17:25:47.038 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1)  
2020-06-16 17:25:47.038 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), b3bb8566dc154106b6a400f40a0fe914(String), 2020-06-16 17:25:47.038(Timestamp) 
2020-06-16 17:25:47.057 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 1 
2020-06-16 17:25:50.906 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-16 17:25:50.907 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 17:25:50.912 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-16 17:25:50.915 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-16 17:25:50.916 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 17:25:50.920 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-16 17:25:50.925 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-16 17:25:50.925 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-16 17:25:50.930 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-16 17:25:50.934 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-16 17:25:50.934 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:25:50.938 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-16 17:25:50.944 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 17:25:50.945 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:25:50.950 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 17:25:50.954 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-16 17:25:50.954 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-16 17:25:50.954 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 17:25:50.955 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:25:50.960 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-16 17:25:50.965 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 17:25:50.965 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:25:50.969 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-16 17:25:50.974 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 17:25:50.974 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:25:50.979 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-16 17:25:50.983 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 17:25:50.983 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:25:50.996 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 17:25:51.000 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-16 17:25:51.000 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-16 17:25:51.000 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 17:25:51.001 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:25:51.005 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-16 17:25:51.011 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 17:25:51.012 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:25:51.016 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-16 17:25:51.020 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 17:25:51.021 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:25:51.025 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-16 17:25:51.029 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-16 17:25:51.029 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:25:51.034 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-16 17:25:51.050 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:现住址长度异常长度>100字符（包含省市区、乡镇街道名称（如有）、村居委会名称（如有）、详细地址） 
2020-06-16 17:25:51.053 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1)  
2020-06-16 17:25:51.054 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 91665e0b2efa4f86aea807ec9f4883c3(String), 2020-06-16 17:25:51.053(Timestamp) 
2020-06-16 17:25:51.064 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 1 
2020-06-16 17:29:20.065 [INFO ] com.benetech.rules.RulesApplication                - [logStarting:55] Starting RulesApplication v1.0-SNAPSHOT on DESKTOP-EOCO1V0 with PID 15960 (D:\51\python\project\instance\zyjk\EHR\controlRuleNew\config\healthRecordRules.jar started by ZY in D:\51\python\project\instance\zyjk\EHR\controlRuleNew) 
2020-06-16 17:29:20.068 [DEBUG] com.benetech.rules.RulesApplication                - [logStarting:56] Running with Spring Boot v2.2.1.RELEASE, Spring v5.2.1.RELEASE 
2020-06-16 17:29:20.068 [INFO ] com.benetech.rules.RulesApplication                - [logStartupProfileInfo:655] The following profiles are active: test 
2020-06-16 17:29:21.537 [INFO ] o.s.boot.web.embedded.tomcat.TomcatWebServer       - [initialize:92] Tomcat initialized with port(s): 8838 (http) 
2020-06-16 17:29:21.548 [INFO ] org.apache.coyote.http11.Http11NioProtocol         - [log:173] Initializing ProtocolHandler ["http-nio-8838"] 
2020-06-16 17:29:21.549 [INFO ] org.apache.catalina.core.StandardService           - [log:173] Starting service [Tomcat] 
2020-06-16 17:29:21.549 [INFO ] org.apache.catalina.core.StandardEngine            - [log:173] Starting Servlet engine: [Apache Tomcat/9.0.27] 
2020-06-16 17:29:21.616 [INFO ] o.a.c.c.C.[.[localhost].[/healthRecordRules]       - [log:173] Initializing Spring embedded WebApplicationContext 
2020-06-16 17:29:21.616 [INFO ] org.springframework.web.context.ContextLoader      - [prepareWebApplicationContext:284] Root WebApplicationContext: initialization completed in 1470 ms 
2020-06-16 17:29:21.697 [DEBUG] org.apache.ibatis.logging.LogFactory               - [setImplementation:135] Logging initialized using 'class org.apache.ibatis.logging.slf4j.Slf4jImpl' adapter. 
2020-06-16 17:29:21.948 [WARN ] org.mybatis.spring.SqlSessionFactoryBean           - [buildSqlSessionFactory:467] Can't find class in '[com.benetech.rules.*.entity]' package. Please check your configuration. 
2020-06-16 17:29:22.568 [INFO ] com.alibaba.druid.pool.DruidDataSource             - [init:930] {dataSource-1} inited 
2020-06-16 17:29:22.761 [DEBUG] c.b.r.m.e.mapper.RuleEngineMapper.getAllRules      - [debug:159] ==>  Preparing: select a.RuleId as ruleId, a.RuleSql as clazz from HrRule a join HrRuleProps b on a.RuleId = b.RuleId where -- RuleId in ('34278f71cf1d42c88158aaf637fa5203', '8d30baa03bfc4233a8f115c57a0ebf08', '63eb82a44bf64c96a0b9023fa2a3c9d9') a.RuleSql != '' and a.RuleSql is not null and b.Enable = 1  
2020-06-16 17:29:22.787 [DEBUG] c.b.r.m.e.mapper.RuleEngineMapper.getAllRules      - [debug:159] ==> Parameters:  
2020-06-16 17:29:22.865 [DEBUG] c.b.r.m.e.mapper.RuleEngineMapper.getAllRules      - [debug:159] <==      Total: 310 
2020-06-16 17:29:23.123 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [init:68] 加载规则：310 条 
2020-06-16 17:29:23.142 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.getAllCode    - [debug:159] ==>  Preparing: SELECT codeSysType AS type, code AS code, [value] AS value FROM tb_code_value WHERE code != '' AND [value] != ''  
2020-06-16 17:29:23.143 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.getAllCode    - [debug:159] ==> Parameters:  
2020-06-16 17:29:23.623 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.getAllCode    - [debug:159] <==      Total: 44881 
2020-06-16 17:29:23.648 [INFO ] c.b.r.m.m.service.impl.EhrModelBuildServiceImpl    - [init:96] 初始化字典类型: 467 种 
2020-06-16 17:29:23.648 [INFO ] c.b.r.m.m.service.impl.EhrModelBuildServiceImpl    - [init:97] 初始化字典: 44881 条 
2020-06-16 17:29:23.649 [ERROR] c.b.r.m.process.service.impl.QcProcessServiceImpl  - [init:44] 初始化线程池 
2020-06-16 17:29:23.661 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-16 17:29:23.662 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 17:29:23.667 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-16 17:29:23.671 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-16 17:29:23.672 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 17:29:23.676 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-16 17:29:23.681 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-16 17:29:23.681 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-16 17:29:23.686 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-16 17:29:23.690 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-16 17:29:23.691 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:29:23.695 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-16 17:29:23.699 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 17:29:23.700 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:29:23.705 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 17:29:23.709 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-16 17:29:23.709 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-16 17:29:23.710 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 17:29:23.710 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:29:23.714 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-16 17:29:23.718 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 17:29:23.718 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:29:23.723 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-16 17:29:23.727 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 17:29:23.728 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:29:23.732 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-16 17:29:23.737 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 17:29:23.737 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:29:23.750 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 17:29:23.754 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-16 17:29:23.755 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-16 17:29:23.755 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 17:29:23.756 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:29:23.763 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-16 17:29:23.767 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 17:29:23.768 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:29:23.771 [INFO ] o.s.scheduling.concurrent.ThreadPoolTaskExecutor   - [initialize:171] Initializing ExecutorService 'applicationTaskExecutor' 
2020-06-16 17:29:23.772 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-16 17:29:23.777 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 17:29:23.777 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:29:23.781 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-16 17:29:23.786 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-16 17:29:23.786 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:29:23.791 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-16 17:29:23.805 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:姓名未填写姓名为空值 
2020-06-16 17:29:23.810 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1)  
2020-06-16 17:29:23.810 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 63eb82a44bf64c96a0b9023fa2a3c9d9(String), 2020-06-16 17:29:23.809(Timestamp) 
2020-06-16 17:29:23.841 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 1 
2020-06-16 17:29:24.026 [INFO ] org.apache.coyote.http11.Http11NioProtocol         - [log:173] Starting ProtocolHandler ["http-nio-8838"] 
2020-06-16 17:29:24.038 [INFO ] org.apache.coyote.http11.Http11NioProtocol         - [log:173] Pausing ProtocolHandler ["http-nio-8838"] 
2020-06-16 17:29:24.038 [INFO ] org.apache.catalina.core.StandardService           - [log:173] Stopping service [Tomcat] 
2020-06-16 17:29:24.043 [INFO ] org.apache.coyote.http11.Http11NioProtocol         - [log:173] Stopping ProtocolHandler ["http-nio-8838"] 
2020-06-16 17:29:24.043 [INFO ] org.apache.coyote.http11.Http11NioProtocol         - [log:173] Destroying ProtocolHandler ["http-nio-8838"] 
2020-06-16 17:29:24.045 [INFO ] o.s.b.a.l.ConditionEvaluationReportLoggingListener - [logMessage:136]     Error starting ApplicationContext. To display the conditions report re-run your application with 'debug' enabled. 
2020-06-16 17:29:24.046 [ERROR] o.s.b.diagnostics.LoggingFailureAnalysisReporter   - [report:40]     ***************************  APPLICATION FAILED TO START  ***************************    Description:    Web server failed to start. Port 8838 was already in use.    Action:    Identify and stop the process that's listening on port 8838 or configure this application to listen on another port.   
2020-06-16 17:29:24.049 [INFO ] o.s.scheduling.concurrent.ThreadPoolTaskExecutor   - [shutdown:208] Shutting down ExecutorService 'applicationTaskExecutor' 
2020-06-16 17:29:24.057 [INFO ] com.alibaba.druid.pool.DruidDataSource             - [close:1825] {dataSource-1} closed 
2020-06-16 17:29:27.302 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-16 17:29:27.303 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 17:29:27.310 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-16 17:29:27.318 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-16 17:29:27.319 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 17:29:27.326 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-16 17:29:27.334 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-16 17:29:27.335 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-16 17:29:27.342 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-16 17:29:27.349 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-16 17:29:27.350 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:29:27.357 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-16 17:29:27.365 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 17:29:27.365 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:29:27.373 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 17:29:27.380 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-16 17:29:27.381 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-16 17:29:27.381 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 17:29:27.381 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:29:27.388 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-16 17:29:27.396 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 17:29:27.397 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:29:27.404 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-16 17:29:27.412 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 17:29:27.412 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:29:27.420 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-16 17:29:27.428 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 17:29:27.428 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:29:27.444 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 17:29:27.451 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-16 17:29:27.452 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-16 17:29:27.452 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 17:29:27.453 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:29:27.458 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-16 17:29:27.466 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 17:29:27.467 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:29:27.474 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-16 17:29:27.483 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 17:29:27.483 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:29:27.490 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-16 17:29:27.498 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-16 17:29:27.498 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:29:27.506 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-16 17:29:27.534 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:姓名填写不规范同时满足以下条件： 1、联系人姓名不为空值 2、联系人姓名为纯数字 
2020-06-16 17:29:27.536 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:与三级医院住院就诊记录表姓名不一致同时满足以下条件： 1、封面《姓名》不为空值 2、三级医院住院就诊记录表《患者姓名》不为空 3、封面《姓名》与住院就诊记录表中《患者姓名》不相等 
2020-06-16 17:29:27.536 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:与三级医院门诊就诊记录表姓名不一致同时满足以下条件： 1、封面《姓名》不为空值 2、三级医院门诊就诊记录表《患者姓名》不为空 3、封面《姓名》与门诊就诊记录表中《患者姓名》不相等 
2020-06-16 17:29:27.540 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-16 17:29:27.540 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 61ed70b670f2460a94ebc183f6b86f5d(String), 2020-06-16 17:29:27.539(Timestamp), 31011310200312009116(String), 814b3d0aca3642af82ef320f98d4dfba(String), 2020-06-16 17:29:27.539(Timestamp), 31011310200312009116(String), 847bc4b46918417dab4aa917af3355c3(String), 2020-06-16 17:29:27.539(Timestamp) 
2020-06-16 17:29:27.564 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 3 
2020-06-16 17:29:31.038 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-16 17:29:31.038 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 17:29:31.045 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-16 17:29:31.053 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-16 17:29:31.053 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 17:29:31.065 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-16 17:29:31.073 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-16 17:29:31.073 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-16 17:29:31.080 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-16 17:29:31.084 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-16 17:29:31.085 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:29:31.092 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-16 17:29:31.099 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 17:29:31.100 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:29:31.108 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 17:29:31.115 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-16 17:29:31.116 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-16 17:29:31.116 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 17:29:31.117 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:29:31.123 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-16 17:29:31.131 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 17:29:31.131 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:29:31.139 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-16 17:29:31.147 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 17:29:31.147 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:29:31.155 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-16 17:29:31.163 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 17:29:31.163 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:29:31.179 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 17:29:31.185 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-16 17:29:31.186 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-16 17:29:31.186 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 17:29:31.187 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:29:31.192 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-16 17:29:31.198 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 17:29:31.199 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:29:31.205 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-16 17:29:31.213 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 17:29:31.213 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:29:31.221 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-16 17:29:31.229 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-16 17:29:31.229 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:29:31.236 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-16 17:29:31.258 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:与三级医院住院就诊记录表姓名不一致同时满足以下条件： 1、封面《姓名》不为空值 2、三级医院住院就诊记录表《患者姓名》不为空 3、封面《姓名》与住院就诊记录表中《患者姓名》不相等 
2020-06-16 17:29:31.259 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:与三级医院门诊就诊记录表姓名不一致同时满足以下条件： 1、封面《姓名》不为空值 2、三级医院门诊就诊记录表《患者姓名》不为空 3、封面《姓名》与门诊就诊记录表中《患者姓名》不相等 
2020-06-16 17:29:31.261 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:姓名长度异常长度>50字符 
2020-06-16 17:29:31.264 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-16 17:29:31.265 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 814b3d0aca3642af82ef320f98d4dfba(String), 2020-06-16 17:29:31.264(Timestamp), 31011310200312009116(String), 847bc4b46918417dab4aa917af3355c3(String), 2020-06-16 17:29:31.264(Timestamp), 31011310200312009116(String), b8eeb38e528544b28133b9ee94c5fbc4(String), 2020-06-16 17:29:31.264(Timestamp) 
2020-06-16 17:29:31.299 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 3 
2020-06-16 17:29:44.423 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-16 17:29:44.424 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 17:29:44.429 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-16 17:29:44.434 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-16 17:29:44.434 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 17:29:44.439 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-16 17:29:44.444 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-16 17:29:44.445 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-16 17:29:44.454 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-16 17:29:44.460 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-16 17:29:44.461 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:29:44.465 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-16 17:29:44.470 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 17:29:44.470 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:29:44.476 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 17:29:44.480 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-16 17:29:44.481 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-16 17:29:44.481 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 17:29:44.481 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:29:44.486 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-16 17:29:44.491 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 17:29:44.492 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:29:44.498 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-16 17:29:44.503 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 17:29:44.504 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:29:44.510 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-16 17:29:44.516 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 17:29:44.517 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:29:44.534 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 17:29:44.539 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-16 17:29:44.540 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-16 17:29:44.542 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 17:29:44.543 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:29:44.548 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-16 17:29:44.555 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 17:29:44.556 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:29:44.561 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-16 17:29:44.567 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 17:29:44.568 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:29:44.572 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-16 17:29:44.579 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-16 17:29:44.580 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:29:44.585 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-16 17:29:44.613 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:现住址未填写同时满足以下条件： 1、现住址中的省、市、区都为空值 2、现住址中的详细地址为空值 
2020-06-16 17:29:44.617 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1)  
2020-06-16 17:29:44.617 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), b3bb8566dc154106b6a400f40a0fe914(String), 2020-06-16 17:29:44.616(Timestamp) 
2020-06-16 17:29:44.638 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 1 
2020-06-16 17:29:48.564 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-16 17:29:48.565 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 17:29:48.575 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-16 17:29:48.580 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-16 17:29:48.580 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 17:29:48.588 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-16 17:29:48.594 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-16 17:29:48.594 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-16 17:29:48.599 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-16 17:29:48.605 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-16 17:29:48.605 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:29:48.611 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-16 17:29:48.617 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 17:29:48.618 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:29:48.626 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 17:29:48.630 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-16 17:29:48.631 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-16 17:29:48.631 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 17:29:48.632 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:29:48.636 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-16 17:29:48.641 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 17:29:48.641 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:29:48.649 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-16 17:29:48.656 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 17:29:48.656 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:29:48.662 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-16 17:29:48.668 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 17:29:48.668 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:29:48.685 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 17:29:48.691 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-16 17:29:48.692 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-16 17:29:48.692 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 17:29:48.692 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:29:48.699 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-16 17:29:48.706 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 17:29:48.707 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:29:48.712 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-16 17:29:48.719 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 17:29:48.720 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:29:48.726 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-16 17:29:48.730 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-16 17:29:48.731 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:29:48.738 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-16 17:29:48.778 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:现住址长度异常长度>100字符（包含省市区、乡镇街道名称（如有）、村居委会名称（如有）、详细地址） 
2020-06-16 17:29:48.798 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1)  
2020-06-16 17:29:48.799 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 91665e0b2efa4f86aea807ec9f4883c3(String), 2020-06-16 17:29:48.797(Timestamp) 
2020-06-16 17:29:48.821 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 1 
2020-06-16 17:29:53.862 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-16 17:29:53.863 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 17:29:53.870 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-16 17:29:53.878 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-16 17:29:53.879 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 17:29:53.886 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-16 17:29:53.891 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-16 17:29:53.892 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-16 17:29:53.899 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-16 17:29:53.907 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-16 17:29:53.908 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:29:53.914 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-16 17:29:53.923 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 17:29:53.923 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:29:53.931 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 17:29:53.937 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-16 17:29:53.938 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-16 17:29:53.939 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 17:29:53.939 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:29:53.946 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-16 17:29:53.950 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 17:29:53.951 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:29:53.957 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-16 17:29:53.965 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 17:29:53.966 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:29:53.974 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-16 17:29:53.981 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 17:29:53.981 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:29:53.999 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 17:29:54.003 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-16 17:29:54.003 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-16 17:29:54.004 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 17:29:54.004 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:29:54.014 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-16 17:29:54.019 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 17:29:54.019 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:29:54.023 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-16 17:29:54.028 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 17:29:54.029 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:29:54.034 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-16 17:29:54.038 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-16 17:29:54.039 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:29:54.049 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-16 17:29:54.065 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:户籍地址未填写同时满足以下条件： 1、户籍地址中的省、市、区都为空值 2、户籍地址中的详细地址为空值 
2020-06-16 17:29:54.074 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1)  
2020-06-16 17:29:54.075 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 297847a88755417b8f62ce2d680ffb75(String), 2020-06-16 17:29:54.074(Timestamp) 
2020-06-16 17:29:54.110 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 1 
2020-06-16 17:29:58.019 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-16 17:29:58.019 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 17:29:58.029 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-16 17:29:58.036 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-16 17:29:58.036 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 17:29:58.043 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-16 17:29:58.047 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-16 17:29:58.048 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-16 17:29:58.064 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-16 17:29:58.071 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-16 17:29:58.072 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:29:58.076 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-16 17:29:58.083 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 17:29:58.083 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:29:58.092 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 17:29:58.098 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-16 17:29:58.098 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-16 17:29:58.099 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 17:29:58.099 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:29:58.106 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-16 17:29:58.111 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 17:29:58.112 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:29:58.118 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-16 17:29:58.125 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 17:29:58.126 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:29:58.131 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-16 17:29:58.138 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 17:29:58.138 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:29:58.154 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 17:29:58.161 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-16 17:29:58.161 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-16 17:29:58.161 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 17:29:58.162 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:29:58.166 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-16 17:29:58.172 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 17:29:58.173 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:29:58.180 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-16 17:29:58.189 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 17:29:58.189 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:29:58.196 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-16 17:29:58.201 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-16 17:29:58.202 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:29:58.208 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-16 17:29:58.226 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:户籍地址长度异常长度>100字符（包含省市区、乡镇街道名称（如有）、村居委会名称（如有）、详细地址） 
2020-06-16 17:29:58.233 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1)  
2020-06-16 17:29:58.234 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 329b69c7855544e986fc0073b77fe9be(String), 2020-06-16 17:29:58.232(Timestamp) 
2020-06-16 17:29:58.270 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 1 
2020-06-16 17:30:01.893 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-16 17:30:01.894 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 17:30:01.899 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-16 17:30:01.903 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-16 17:30:01.904 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 17:30:01.908 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-16 17:30:01.913 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-16 17:30:01.914 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-16 17:30:01.920 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-16 17:30:01.925 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-16 17:30:01.925 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:30:01.930 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-16 17:30:01.935 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 17:30:01.935 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:30:01.940 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 17:30:01.944 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-16 17:30:01.945 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-16 17:30:01.945 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 17:30:01.946 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:30:01.950 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-16 17:30:01.955 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 17:30:01.956 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:30:01.963 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-16 17:30:01.969 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 17:30:01.970 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:30:01.974 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-16 17:30:01.980 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 17:30:01.980 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:30:01.994 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 17:30:01.999 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-16 17:30:01.999 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-16 17:30:02.000 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 17:30:02.000 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:30:02.005 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-16 17:30:02.011 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 17:30:02.011 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:30:02.016 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-16 17:30:02.020 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 17:30:02.021 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:30:02.025 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-16 17:30:02.030 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-16 17:30:02.030 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:30:02.036 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-16 17:30:02.054 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:联系电话未填写联系电话为空值 
2020-06-16 17:30:02.064 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1)  
2020-06-16 17:30:02.065 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 8c22db3c92bb445b9712ca61107e8312(String), 2020-06-16 17:30:02.063(Timestamp) 
2020-06-16 17:30:02.102 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 1 
2020-06-16 17:30:05.526 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-16 17:30:05.527 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 17:30:05.533 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-16 17:30:05.541 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-16 17:30:05.542 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 17:30:05.554 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-16 17:30:05.560 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-16 17:30:05.561 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-16 17:30:05.569 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-16 17:30:05.574 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-16 17:30:05.575 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:30:05.580 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-16 17:30:05.585 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 17:30:05.586 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:30:05.592 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 17:30:05.599 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-16 17:30:05.600 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-16 17:30:05.600 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 17:30:05.601 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:30:05.606 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-16 17:30:05.612 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 17:30:05.613 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:30:05.619 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-16 17:30:05.625 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 17:30:05.626 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:30:05.635 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-16 17:30:05.643 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 17:30:05.643 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:30:05.657 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 17:30:05.665 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-16 17:30:05.666 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-16 17:30:05.666 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 17:30:05.667 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:30:05.674 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-16 17:30:05.679 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 17:30:05.680 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:30:05.685 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-16 17:30:05.690 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 17:30:05.691 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:30:05.696 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-16 17:30:05.701 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-16 17:30:05.702 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:30:05.709 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-16 17:30:05.735 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:联系电话手机号码长度异常同时满足以下条件： 1、联系电话不为空值 2、联系电话为手机号码（是1开头判断为手机号） 3、号码长度小于11位或大于11位 
2020-06-16 17:30:05.737 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1)  
2020-06-16 17:30:05.738 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), d07ab42169144816afe341ba43d0b68c(String), 2020-06-16 17:30:05.737(Timestamp) 
2020-06-16 17:30:05.794 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 1 
2020-06-16 17:30:09.252 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-16 17:30:09.253 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 17:30:09.258 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-16 17:30:09.264 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-16 17:30:09.265 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 17:30:09.271 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-16 17:30:09.276 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-16 17:30:09.278 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-16 17:30:09.285 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-16 17:30:09.292 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-16 17:30:09.293 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:30:09.298 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-16 17:30:09.304 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 17:30:09.306 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:30:09.313 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 17:30:09.319 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-16 17:30:09.320 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-16 17:30:09.321 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 17:30:09.322 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:30:09.328 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-16 17:30:09.338 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 17:30:09.339 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:30:09.346 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-16 17:30:09.353 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 17:30:09.354 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:30:09.360 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-16 17:30:09.365 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 17:30:09.366 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:30:09.381 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 17:30:09.386 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-16 17:30:09.387 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-16 17:30:09.387 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 17:30:09.388 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:30:09.393 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-16 17:30:09.398 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 17:30:09.399 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:30:09.406 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-16 17:30:09.411 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 17:30:09.412 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:30:09.419 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-16 17:30:09.425 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-16 17:30:09.426 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:30:09.431 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-16 17:30:09.451 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:手机号码校验失败同时满足以下条件： 1、联系电话不为空值 2、联系电话为手机号码（是1开头判断为手机号） 3、号码长度为11位，但是不存在这个号段（进行号段校验） 
2020-06-16 17:30:09.458 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1)  
2020-06-16 17:30:09.458 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 18c8a8a81e25426f8a7958b46716c295(String), 2020-06-16 17:30:09.457(Timestamp) 
2020-06-16 17:30:09.484 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 1 
2020-06-16 17:30:13.008 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-16 17:30:13.008 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 17:30:13.015 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-16 17:30:13.019 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-16 17:30:13.020 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 17:30:13.030 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-16 17:30:13.037 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-16 17:30:13.038 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-16 17:30:13.043 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-16 17:30:13.049 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-16 17:30:13.050 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:30:13.055 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-16 17:30:13.061 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 17:30:13.063 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:30:13.069 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 17:30:13.076 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-16 17:30:13.077 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-16 17:30:13.078 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 17:30:13.079 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:30:13.088 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-16 17:30:13.096 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 17:30:13.097 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:30:13.105 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-16 17:30:13.112 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 17:30:13.113 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:30:13.120 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-16 17:30:13.126 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 17:30:13.127 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:30:13.145 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 17:30:13.151 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-16 17:30:13.151 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-16 17:30:13.152 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 17:30:13.152 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:30:13.159 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-16 17:30:13.164 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 17:30:13.165 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:30:13.169 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-16 17:30:13.174 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 17:30:13.175 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:30:13.182 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-16 17:30:13.186 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-16 17:30:13.187 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:30:13.194 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-16 17:30:13.214 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:固定电话长度异常（含区号）同时满足以下条件： 1、联系电话不为空值 2、联系电话为固定电话（是0开头判断为固定电话） 3、号码长度小于11位或大于12位 
2020-06-16 17:30:13.228 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1)  
2020-06-16 17:30:13.229 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 605d17cf2e38410da56726f765f8c34c(String), 2020-06-16 17:30:13.228(Timestamp) 
2020-06-16 17:30:13.259 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 1 
2020-06-16 17:30:16.832 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-16 17:30:16.834 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 17:30:16.840 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-16 17:30:16.846 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-16 17:30:16.847 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 17:30:16.855 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-16 17:30:16.861 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-16 17:30:16.862 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-16 17:30:16.868 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-16 17:30:16.874 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-16 17:30:16.875 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:30:16.880 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-16 17:30:16.886 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 17:30:16.887 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:30:16.894 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 17:30:16.900 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-16 17:30:16.900 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-16 17:30:16.901 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 17:30:16.902 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:30:16.907 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-16 17:30:16.913 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 17:30:16.914 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:30:16.919 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-16 17:30:16.925 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 17:30:16.926 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:30:16.931 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-16 17:30:16.941 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 17:30:16.942 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:30:16.958 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 17:30:16.963 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-16 17:30:16.964 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-16 17:30:16.965 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 17:30:16.966 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:30:16.971 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-16 17:30:16.979 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 17:30:16.981 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:30:16.986 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-16 17:30:16.994 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 17:30:16.996 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:30:17.003 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-16 17:30:17.008 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-16 17:30:17.010 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:30:17.018 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-16 17:30:17.054 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:固定电话长度异常（不含区号）同时满足以下条件： 1、联系电话不为空值 2、联系电话为固定电话（不是1和0开头判断为固定电话） 3、号码长度小于7位或大于8位 
2020-06-16 17:30:17.060 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1)  
2020-06-16 17:30:17.061 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), b0d2d6a11e4b476b813f99750cb00786(String), 2020-06-16 17:30:17.059(Timestamp) 
2020-06-16 17:30:17.098 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 1 
2020-06-16 17:30:20.567 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-16 17:30:20.567 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 17:30:20.572 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-16 17:30:20.578 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-16 17:30:20.578 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 17:30:20.583 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-16 17:30:20.588 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-16 17:30:20.588 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-16 17:30:20.595 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-16 17:30:20.601 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-16 17:30:20.601 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:30:20.608 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-16 17:30:20.616 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 17:30:20.617 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:30:20.622 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 17:30:20.628 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-16 17:30:20.629 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-16 17:30:20.629 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 17:30:20.629 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:30:20.635 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-16 17:30:20.639 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 17:30:20.641 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:30:20.646 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-16 17:30:20.656 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 17:30:20.658 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:30:20.663 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-16 17:30:20.672 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 17:30:20.673 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:30:20.689 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 17:30:20.698 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-16 17:30:20.699 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-16 17:30:20.700 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 17:30:20.701 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:30:20.710 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-16 17:30:20.718 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 17:30:20.720 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:30:20.726 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-16 17:30:20.732 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 17:30:20.733 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:30:20.742 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-16 17:30:20.749 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-16 17:30:20.750 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:30:20.757 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-16 17:30:20.794 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:联系电话不为纯数字同时满足以下条件： 1、联系电话不为空值 2、联系电话不是纯数字 
2020-06-16 17:30:20.796 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1)  
2020-06-16 17:30:20.797 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), db6607db218b4182924b980ecb900b19(String), 2020-06-16 17:30:20.796(Timestamp) 
2020-06-16 17:30:20.831 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 1 
2020-06-16 17:30:24.226 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-16 17:30:24.226 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 17:30:24.232 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-16 17:30:24.236 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-16 17:30:24.237 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 17:30:24.242 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-16 17:30:24.248 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-16 17:30:24.248 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-16 17:30:24.252 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-16 17:30:24.257 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-16 17:30:24.258 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:30:24.264 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-16 17:30:24.269 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 17:30:24.269 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:30:24.274 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 17:30:24.280 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-16 17:30:24.280 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-16 17:30:24.281 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 17:30:24.281 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:30:24.286 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-16 17:30:24.290 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 17:30:24.291 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:30:24.298 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-16 17:30:24.303 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 17:30:24.304 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:30:24.308 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-16 17:30:24.313 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 17:30:24.314 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:30:24.327 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 17:30:24.332 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-16 17:30:24.332 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-16 17:30:24.332 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 17:30:24.332 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:30:24.337 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-16 17:30:24.342 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 17:30:24.343 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:30:24.347 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-16 17:30:24.352 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 17:30:24.352 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:30:24.357 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-16 17:30:24.361 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-16 17:30:24.361 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:30:24.366 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-16 17:30:24.377 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:联系电话不为纯数字同时满足以下条件： 1、联系电话不为空值 2、联系电话数字只包含一个数字，如99999999 
2020-06-16 17:30:24.380 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:固定电话长度异常（不含区号）同时满足以下条件： 1、联系电话不为空值 2、联系电话为固定电话（不是1和0开头判断为固定电话） 3、号码长度小于7位或大于8位 
2020-06-16 17:30:24.383 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-16 17:30:24.383 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 2be6482767e14818889eee74b5263746(String), 2020-06-16 17:30:24.382(Timestamp), 31011310200312009116(String), b0d2d6a11e4b476b813f99750cb00786(String), 2020-06-16 17:30:24.382(Timestamp) 
2020-06-16 17:30:24.402 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 2 
2020-06-16 17:30:29.374 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-16 17:30:29.375 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 17:30:29.379 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-16 17:30:29.385 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-16 17:30:29.385 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 17:30:29.392 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-16 17:30:29.398 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-16 17:30:29.399 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-16 17:30:29.404 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-16 17:30:29.410 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-16 17:30:29.412 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:30:29.417 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-16 17:30:29.423 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 17:30:29.424 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:30:29.430 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 17:30:29.435 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-16 17:30:29.436 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-16 17:30:29.437 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 17:30:29.438 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:30:29.444 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-16 17:30:29.450 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 17:30:29.451 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:30:29.456 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-16 17:30:29.463 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 17:30:29.464 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:30:29.470 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-16 17:30:29.477 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 17:30:29.478 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:30:29.493 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 17:30:29.498 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-16 17:30:29.499 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-16 17:30:29.501 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 17:30:29.502 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:30:29.509 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-16 17:30:29.515 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 17:30:29.516 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:30:29.522 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-16 17:30:29.527 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 17:30:29.528 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:30:29.533 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-16 17:30:29.539 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-16 17:30:29.541 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:30:29.546 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-16 17:30:29.577 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:现住址市乡镇（街道）名称未填写乡镇（街道）名称为空值 
2020-06-16 17:30:29.585 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1)  
2020-06-16 17:30:29.585 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 5989fb6d82aa4e618e2e5cdc2c36e01f(String), 2020-06-16 17:30:29.584(Timestamp) 
2020-06-16 17:30:29.627 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 1 
2020-06-16 17:30:33.053 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-16 17:30:33.053 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 17:30:33.059 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-16 17:30:33.064 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-16 17:30:33.065 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 17:30:33.069 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-16 17:30:33.074 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-16 17:30:33.075 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-16 17:30:33.080 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-16 17:30:33.084 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-16 17:30:33.085 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:30:33.089 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-16 17:30:33.097 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 17:30:33.098 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:30:33.104 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 17:30:33.109 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-16 17:30:33.109 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-16 17:30:33.110 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 17:30:33.110 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:30:33.116 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-16 17:30:33.120 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 17:30:33.120 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:30:33.124 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-16 17:30:33.128 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 17:30:33.129 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:30:33.134 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-16 17:30:33.138 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 17:30:33.139 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:30:33.152 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 17:30:33.157 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-16 17:30:33.157 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-16 17:30:33.158 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 17:30:33.158 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:30:33.163 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-16 17:30:33.167 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 17:30:33.168 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:30:33.172 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-16 17:30:33.177 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 17:30:33.177 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:30:33.181 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-16 17:30:33.186 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-16 17:30:33.186 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:30:33.191 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-16 17:30:33.203 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:现住址乡镇（街道）名称不为汉字乡镇（街道）名称不为汉字 
2020-06-16 17:30:33.209 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1)  
2020-06-16 17:30:33.210 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 2519a198f15a41ea970cf518d3c4bd89(String), 2020-06-16 17:30:33.209(Timestamp) 
2020-06-16 17:30:33.228 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 1 
2020-06-16 17:30:37.267 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-16 17:30:37.268 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 17:30:37.273 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-16 17:30:37.276 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-16 17:30:37.277 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 17:30:37.281 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-16 17:30:37.286 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-16 17:30:37.287 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-16 17:30:37.291 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-16 17:30:37.295 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-16 17:30:37.296 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:30:37.300 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-16 17:30:37.305 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 17:30:37.305 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:30:37.311 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 17:30:37.315 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-16 17:30:37.316 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-16 17:30:37.316 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 17:30:37.316 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:30:37.324 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-16 17:30:37.330 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 17:30:37.331 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:30:37.335 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-16 17:30:37.340 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 17:30:37.340 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:30:37.345 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-16 17:30:37.348 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 17:30:37.349 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:30:37.361 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 17:30:37.366 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-16 17:30:37.366 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-16 17:30:37.367 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 17:30:37.367 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:30:37.374 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-16 17:30:37.380 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 17:30:37.381 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:30:37.385 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-16 17:30:37.389 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 17:30:37.389 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:30:37.393 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-16 17:30:37.398 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-16 17:30:37.399 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:30:37.403 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-16 17:30:37.415 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:现住址乡镇（街道）名称长度异常长度>100字符 
2020-06-16 17:30:37.417 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:现住址长度异常长度>100字符（包含省市区、乡镇街道名称（如有）、村居委会名称（如有）、详细地址） 
2020-06-16 17:30:37.421 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-16 17:30:37.422 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 40c92f3721704bb7a6eb42a8ca1976b6(String), 2020-06-16 17:30:37.421(Timestamp), 31011310200312009116(String), 91665e0b2efa4f86aea807ec9f4883c3(String), 2020-06-16 17:30:37.421(Timestamp) 
2020-06-16 17:30:37.436 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 2 
2020-06-16 17:30:40.910 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-16 17:30:40.910 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 17:30:40.915 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-16 17:30:40.919 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-16 17:30:40.920 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 17:30:40.924 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-16 17:30:40.929 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-16 17:30:40.929 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-16 17:30:40.933 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-16 17:30:40.938 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-16 17:30:40.938 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:30:40.950 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-16 17:30:40.956 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 17:30:40.956 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:30:40.964 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 17:30:40.969 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-16 17:30:40.969 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-16 17:30:40.970 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 17:30:40.971 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:30:40.975 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-16 17:30:40.981 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 17:30:40.981 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:30:40.987 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-16 17:30:40.992 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 17:30:40.993 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:30:40.998 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-16 17:30:41.003 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 17:30:41.003 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:30:41.018 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 17:30:41.022 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-16 17:30:41.023 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-16 17:30:41.024 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 17:30:41.024 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:30:41.029 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-16 17:30:41.035 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 17:30:41.035 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:30:41.040 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-16 17:30:41.044 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 17:30:41.044 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:30:41.051 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-16 17:30:41.055 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-16 17:30:41.056 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:30:41.061 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-16 17:30:41.077 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:现住址村（居）委会名称未填写村（居）委会名称为空值 
2020-06-16 17:30:41.082 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1)  
2020-06-16 17:30:41.082 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 647ba5f94d274d04955478e4c7e9a593(String), 2020-06-16 17:30:41.081(Timestamp) 
2020-06-16 17:30:41.094 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 1 
2020-06-16 17:30:44.981 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-16 17:30:44.981 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 17:30:44.989 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-16 17:30:44.995 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-16 17:30:44.995 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 17:30:45.000 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-16 17:30:45.004 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-16 17:30:45.005 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-16 17:30:45.010 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-16 17:30:45.015 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-16 17:30:45.017 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:30:45.021 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-16 17:30:45.027 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 17:30:45.028 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:30:45.036 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 17:30:45.045 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-16 17:30:45.046 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-16 17:30:45.047 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 17:30:45.048 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:30:45.053 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-16 17:30:45.058 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 17:30:45.059 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:30:45.063 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-16 17:30:45.068 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 17:30:45.069 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:30:45.078 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-16 17:30:45.082 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 17:30:45.083 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:30:45.097 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 17:30:45.104 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-16 17:30:45.105 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-16 17:30:45.106 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 17:30:45.108 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:30:45.113 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-16 17:30:45.119 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 17:30:45.121 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:30:45.128 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-16 17:30:45.133 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 17:30:45.134 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:30:45.140 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-16 17:30:45.146 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-16 17:30:45.147 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:30:45.153 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-16 17:30:45.185 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:现住址村（居）委会名称不为汉字村（居）委会名称不为汉字 
2020-06-16 17:30:45.189 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1)  
2020-06-16 17:30:45.190 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), ac0fdca3fa96484680d8a0871d00eb3b(String), 2020-06-16 17:30:45.189(Timestamp) 
2020-06-16 17:30:45.201 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 1 
2020-06-16 17:30:48.614 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-16 17:30:48.615 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 17:30:48.621 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-16 17:30:48.625 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-16 17:30:48.626 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 17:30:48.631 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-16 17:30:48.634 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-16 17:30:48.634 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-16 17:30:48.639 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-16 17:30:48.644 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-16 17:30:48.644 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:30:48.649 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-16 17:30:48.653 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 17:30:48.654 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:30:48.659 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 17:30:48.663 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-16 17:30:48.664 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-16 17:30:48.664 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 17:30:48.665 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:30:48.669 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-16 17:30:48.674 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 17:30:48.675 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:30:48.679 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-16 17:30:48.684 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 17:30:48.685 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:30:48.689 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-16 17:30:48.695 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 17:30:48.696 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:30:48.711 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 17:30:48.716 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-16 17:30:48.716 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-16 17:30:48.717 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 17:30:48.718 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:30:48.723 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-16 17:30:48.728 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 17:30:48.728 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:30:48.733 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-16 17:30:48.739 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 17:30:48.739 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:30:48.744 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-16 17:30:48.749 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-16 17:30:48.749 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:30:48.756 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-16 17:30:48.781 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:现住址长度异常长度>100字符（包含省市区、乡镇街道名称（如有）、村居委会名称（如有）、详细地址） 
2020-06-16 17:30:48.782 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:现住址村（居）委会名称长度异常长度>100字符 
2020-06-16 17:30:48.784 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-16 17:30:48.785 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 91665e0b2efa4f86aea807ec9f4883c3(String), 2020-06-16 17:30:48.784(Timestamp), 31011310200312009116(String), 9df07515be3d4c2887e947c6ce5adace(String), 2020-06-16 17:30:48.784(Timestamp) 
2020-06-16 17:30:48.810 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 2 
2020-06-16 17:30:52.264 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-16 17:30:52.264 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 17:30:52.273 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-16 17:30:52.278 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-16 17:30:52.279 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 17:30:52.285 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-16 17:30:52.290 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-16 17:30:52.290 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-16 17:30:52.307 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-16 17:30:52.318 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-16 17:30:52.319 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:30:52.326 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-16 17:30:52.332 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 17:30:52.333 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:30:52.340 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 17:30:52.344 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-16 17:30:52.345 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-16 17:30:52.346 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 17:30:52.347 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:30:52.353 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-16 17:30:52.359 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 17:30:52.360 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:30:52.365 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-16 17:30:52.371 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 17:30:52.372 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:30:52.378 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-16 17:30:52.384 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 17:30:52.385 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:30:52.400 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 17:30:52.406 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-16 17:30:52.407 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-16 17:30:52.408 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 17:30:52.409 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:30:52.414 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-16 17:30:52.420 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 17:30:52.421 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:30:52.426 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-16 17:30:52.432 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 17:30:52.433 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:30:52.438 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-16 17:30:52.444 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-16 17:30:52.445 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:30:52.453 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-16 17:30:52.508 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:建档单位未填写建档单位为空值 
2020-06-16 17:30:52.511 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1)  
2020-06-16 17:30:52.512 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), c2d756b07b7540e79209ad532c666dfc(String), 2020-06-16 17:30:52.51(Timestamp) 
2020-06-16 17:30:52.531 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 1 
2020-06-16 17:30:55.966 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-16 17:30:55.966 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 17:30:55.971 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-16 17:30:55.975 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-16 17:30:55.975 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 17:30:55.980 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-16 17:30:55.984 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-16 17:30:55.985 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-16 17:30:55.989 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-16 17:30:55.994 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-16 17:30:55.994 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:30:55.999 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-16 17:30:56.005 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 17:30:56.005 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:30:56.011 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 17:30:56.017 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-16 17:30:56.017 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-16 17:30:56.019 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 17:30:56.020 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:30:56.025 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-16 17:30:56.031 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 17:30:56.032 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:30:56.037 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-16 17:30:56.043 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 17:30:56.045 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:30:56.050 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-16 17:30:56.056 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 17:30:56.057 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:30:56.072 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 17:30:56.077 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-16 17:30:56.078 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-16 17:30:56.079 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 17:30:56.080 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:30:56.086 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-16 17:30:56.091 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 17:30:56.093 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:30:56.100 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-16 17:30:56.106 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 17:30:56.107 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:30:56.114 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-16 17:30:56.120 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-16 17:30:56.122 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:30:56.127 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-16 17:30:56.158 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:建档单位长度异常长度>100字符 
2020-06-16 17:30:56.169 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1)  
2020-06-16 17:30:56.169 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 403a97f9ec40406b9723b3c6845a6cee(String), 2020-06-16 17:30:56.168(Timestamp) 
2020-06-16 17:30:56.183 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 1 
2020-06-16 17:30:59.572 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-16 17:30:59.573 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 17:30:59.577 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-16 17:30:59.581 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-16 17:30:59.582 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 17:30:59.588 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-16 17:30:59.592 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-16 17:30:59.593 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-16 17:30:59.598 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-16 17:30:59.603 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-16 17:30:59.603 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:30:59.607 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-16 17:30:59.612 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 17:30:59.612 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:30:59.618 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 17:30:59.621 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-16 17:30:59.622 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-16 17:30:59.622 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 17:30:59.623 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:30:59.626 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-16 17:30:59.632 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 17:30:59.632 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:30:59.640 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-16 17:30:59.645 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 17:30:59.645 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:30:59.649 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-16 17:30:59.654 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 17:30:59.654 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:30:59.668 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 17:30:59.672 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-16 17:30:59.672 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-16 17:30:59.672 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 17:30:59.673 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:30:59.678 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-16 17:30:59.681 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 17:30:59.682 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:30:59.685 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-16 17:30:59.689 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 17:30:59.690 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:30:59.695 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-16 17:30:59.699 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-16 17:30:59.700 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:30:59.704 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-16 17:30:59.718 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:建档人未填写建档人为空值 
2020-06-16 17:30:59.721 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1)  
2020-06-16 17:30:59.721 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), b36febf99ee24323a59f6e04c22ce60d(String), 2020-06-16 17:30:59.72(Timestamp) 
2020-06-16 17:30:59.739 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 1 
2020-06-16 17:31:03.162 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-16 17:31:03.163 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 17:31:03.168 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-16 17:31:03.172 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-16 17:31:03.172 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 17:31:03.177 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-16 17:31:03.181 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-16 17:31:03.182 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-16 17:31:03.186 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-16 17:31:03.190 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-16 17:31:03.190 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:31:03.195 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-16 17:31:03.199 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 17:31:03.200 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:31:03.207 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 17:31:03.211 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-16 17:31:03.211 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-16 17:31:03.211 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 17:31:03.212 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:31:03.216 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-16 17:31:03.220 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 17:31:03.220 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:31:03.223 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-16 17:31:03.227 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 17:31:03.228 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:31:03.232 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-16 17:31:03.237 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 17:31:03.237 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:31:03.251 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 17:31:03.256 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-16 17:31:03.257 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-16 17:31:03.258 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 17:31:03.258 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:31:03.264 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-16 17:31:03.269 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 17:31:03.270 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:31:03.274 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-16 17:31:03.279 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 17:31:03.280 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:31:03.285 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-16 17:31:03.290 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-16 17:31:03.291 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:31:03.296 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-16 17:31:04.021 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-16 17:31:04.021 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 17:31:04.026 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-16 17:31:04.031 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-16 17:31:04.032 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 17:31:04.037 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-16 17:31:04.041 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-16 17:31:04.042 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-16 17:31:04.046 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-16 17:31:04.050 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-16 17:31:04.051 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:31:04.055 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-16 17:31:04.059 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 17:31:04.059 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:31:04.064 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 17:31:04.068 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-16 17:31:04.068 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-16 17:31:04.069 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 17:31:04.069 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:31:04.074 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-16 17:31:04.078 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 17:31:04.078 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:31:04.084 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-16 17:31:04.088 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 17:31:04.089 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:31:04.093 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-16 17:31:04.098 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 17:31:04.098 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:31:04.111 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 17:31:04.116 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-16 17:31:04.116 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-16 17:31:04.116 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 17:31:04.117 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:31:04.124 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-16 17:31:04.131 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 17:31:04.132 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:31:04.136 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-16 17:31:04.141 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 17:31:04.141 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:31:04.145 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-16 17:31:04.149 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-16 17:31:04.150 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:31:04.154 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-16 17:31:04.168 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:责任医生未填写责任医生为空值 
2020-06-16 17:31:04.171 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1)  
2020-06-16 17:31:04.172 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 79a8c8c64d3b49bf99e573cacf2d5cfc(String), 2020-06-16 17:31:04.171(Timestamp) 
2020-06-16 17:31:04.189 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 1 
2020-06-16 17:31:07.603 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-16 17:31:07.604 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 17:31:07.611 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-16 17:31:07.614 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-16 17:31:07.614 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 17:31:07.619 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-16 17:31:07.623 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-16 17:31:07.624 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-16 17:31:07.631 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-16 17:31:07.635 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-16 17:31:07.636 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:31:07.640 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-16 17:31:07.646 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 17:31:07.646 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:31:07.652 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 17:31:07.658 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-16 17:31:07.658 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-16 17:31:07.659 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 17:31:07.660 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:31:07.667 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-16 17:31:07.674 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 17:31:07.675 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:31:07.684 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-16 17:31:07.690 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 17:31:07.691 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:31:07.698 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-16 17:31:07.705 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 17:31:07.706 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:31:07.720 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 17:31:07.724 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-16 17:31:07.725 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-16 17:31:07.725 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 17:31:07.726 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:31:07.732 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-16 17:31:07.738 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 17:31:07.739 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:31:07.743 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-16 17:31:07.750 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 17:31:07.751 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:31:07.758 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-16 17:31:07.764 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-16 17:31:07.765 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:31:07.770 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-16 17:31:07.790 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:责任医生长度异常长度>50字符 
2020-06-16 17:31:07.795 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1)  
2020-06-16 17:31:07.796 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 9042bba97fb74b558de96e35ab2ffdc2(String), 2020-06-16 17:31:07.794(Timestamp) 
2020-06-16 17:31:07.813 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 1 
2020-06-16 17:31:11.234 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-16 17:31:11.234 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 17:31:11.240 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-16 17:31:11.245 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-16 17:31:11.245 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 17:31:11.251 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-16 17:31:11.256 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-16 17:31:11.257 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-16 17:31:11.263 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-16 17:31:11.270 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-16 17:31:11.271 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:31:11.278 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-16 17:31:11.284 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 17:31:11.284 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:31:11.289 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 17:31:11.294 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-16 17:31:11.294 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-16 17:31:11.294 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 17:31:11.295 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:31:11.300 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-16 17:31:11.310 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 17:31:11.311 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:31:11.322 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-16 17:31:11.327 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 17:31:11.328 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:31:11.332 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-16 17:31:11.337 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 17:31:11.338 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:31:11.353 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 17:31:11.357 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-16 17:31:11.358 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-16 17:31:11.358 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 17:31:11.359 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:31:11.363 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-16 17:31:11.368 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 17:31:11.369 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:31:11.373 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-16 17:31:11.379 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 17:31:11.380 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:31:11.386 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-16 17:31:11.392 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-16 17:31:11.393 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:31:11.399 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-16 17:31:11.421 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:建档日期未填写建档日期为空值 
2020-06-16 17:31:11.430 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1)  
2020-06-16 17:31:11.430 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 354eecdb40b24830ade601d368aa8e01(String), 2020-06-16 17:31:11.429(Timestamp) 
2020-06-16 17:31:11.448 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 1 
2020-06-16 17:31:15.246 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-16 17:31:15.246 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 17:31:15.251 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-16 17:31:15.255 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-16 17:31:15.256 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 17:31:15.261 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-16 17:31:15.265 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-16 17:31:15.266 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-16 17:31:15.270 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-16 17:31:15.276 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-16 17:31:15.276 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:31:15.282 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-16 17:31:15.287 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 17:31:15.288 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:31:15.294 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 17:31:15.300 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-16 17:31:15.300 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-16 17:31:15.300 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 17:31:15.301 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:31:15.305 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-16 17:31:15.310 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 17:31:15.310 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:31:15.316 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-16 17:31:15.320 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 17:31:15.320 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:31:15.324 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-16 17:31:15.329 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 17:31:15.330 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:31:15.342 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 17:31:15.347 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-16 17:31:15.347 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-16 17:31:15.347 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 17:31:15.348 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:31:15.352 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-16 17:31:15.356 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 17:31:15.357 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:31:15.361 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-16 17:31:15.365 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 17:31:15.365 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:31:15.370 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-16 17:31:15.374 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-16 17:31:15.375 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:31:15.379 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-16 17:31:15.396 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:个人基本信息表性别性别为空值 
2020-06-16 17:31:15.398 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1)  
2020-06-16 17:31:15.398 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), f43cf10e3bcf44078cabcd8d790c8ea2(String), 2020-06-16 17:31:15.397(Timestamp) 
2020-06-16 17:31:15.412 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 1 
2020-06-16 17:31:18.816 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-16 17:31:18.817 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 17:31:18.824 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-16 17:31:18.829 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-16 17:31:18.829 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 17:31:18.834 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-16 17:31:18.838 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-16 17:31:18.839 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-16 17:31:18.843 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-16 17:31:18.850 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-16 17:31:18.850 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:31:18.856 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-16 17:31:18.861 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 17:31:18.862 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:31:18.866 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 17:31:18.871 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-16 17:31:18.871 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-16 17:31:18.871 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 17:31:18.872 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:31:18.876 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-16 17:31:18.880 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 17:31:18.881 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:31:18.885 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-16 17:31:18.889 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 17:31:18.889 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:31:18.894 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-16 17:31:18.898 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 17:31:18.898 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:31:18.912 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 17:31:18.916 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-16 17:31:18.916 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-16 17:31:18.917 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 17:31:18.917 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:31:18.921 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-16 17:31:18.925 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 17:31:18.925 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:31:18.929 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-16 17:31:18.933 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 17:31:18.933 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:31:18.937 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-16 17:31:18.942 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-16 17:31:18.942 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:31:18.948 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-16 17:31:18.960 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:个人基本信息表性别不属于性别字典范围（1 男 2 女 9 未说明的性别 0 未知的性别） 
2020-06-16 17:31:18.962 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:个人基本信息表性别性别与身份证号不一致 
2020-06-16 17:31:18.965 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-16 17:31:18.965 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 34278f71cf1d42c88158aaf637fa5203(String), 2020-06-16 17:31:18.964(Timestamp), 31011310200312009116(String), 8d30baa03bfc4233a8f115c57a0ebf08(String), 2020-06-16 17:31:18.964(Timestamp) 
2020-06-16 17:31:18.986 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 2 
2020-06-16 17:31:22.402 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-16 17:31:22.402 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 17:31:22.407 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-16 17:31:22.412 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-16 17:31:22.413 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 17:31:22.418 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-16 17:31:22.422 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-16 17:31:22.423 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-16 17:31:22.429 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-16 17:31:22.435 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-16 17:31:22.435 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:31:22.440 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-16 17:31:22.445 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 17:31:22.446 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:31:22.454 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 17:31:22.459 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-16 17:31:22.459 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-16 17:31:22.460 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 17:31:22.461 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:31:22.466 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-16 17:31:22.471 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 17:31:22.472 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:31:22.477 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-16 17:31:22.482 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 17:31:22.483 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:31:22.488 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-16 17:31:22.493 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 17:31:22.494 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:31:22.508 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 17:31:22.513 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-16 17:31:22.514 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-16 17:31:22.514 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 17:31:22.515 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:31:22.520 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-16 17:31:22.526 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 17:31:22.526 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:31:22.531 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-16 17:31:22.537 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 17:31:22.537 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:31:22.542 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-16 17:31:22.547 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-16 17:31:22.548 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:31:22.553 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-16 17:31:22.579 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:个人基本信息表性别性别与身份证号不一致 
2020-06-16 17:31:22.587 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1)  
2020-06-16 17:31:22.588 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 8d30baa03bfc4233a8f115c57a0ebf08(String), 2020-06-16 17:31:22.586(Timestamp) 
2020-06-16 17:31:22.604 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 1 
2020-06-16 17:31:27.153 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-16 17:31:27.154 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 17:31:27.164 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-16 17:31:27.172 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-16 17:31:27.172 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 17:31:27.176 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-16 17:31:27.180 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-16 17:31:27.180 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-16 17:31:27.187 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-16 17:31:27.190 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-16 17:31:27.191 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:31:27.200 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-16 17:31:27.204 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 17:31:27.205 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:31:27.210 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 17:31:27.214 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-16 17:31:27.214 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-16 17:31:27.214 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 17:31:27.215 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:31:27.219 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-16 17:31:27.223 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 17:31:27.224 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:31:27.228 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-16 17:31:27.233 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 17:31:27.233 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:31:27.238 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-16 17:31:27.243 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 17:31:27.243 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:31:27.257 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 17:31:27.261 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-16 17:31:27.261 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-16 17:31:27.261 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 17:31:27.262 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:31:27.266 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-16 17:31:27.270 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 17:31:27.271 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:31:27.276 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-16 17:31:27.280 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 17:31:27.280 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:31:27.285 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-16 17:31:27.290 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-16 17:31:27.290 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:31:27.295 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-16 17:31:27.308 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:个人基本信息表出生日期出生日期填写不规范 
2020-06-16 17:31:27.308 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:个人基本信息表出生日期出生日期未填写 
2020-06-16 17:31:27.311 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-16 17:31:27.311 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 7ed2379800b4474fbf8c6d433cb7daa7(String), 2020-06-16 17:31:27.311(Timestamp), 31011310200312009116(String), 8c2d9c298aea47f1925532283c3ce5f9(String), 2020-06-16 17:31:27.311(Timestamp) 
2020-06-16 17:31:27.328 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 2 
2020-06-16 17:31:31.129 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-16 17:31:31.130 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 17:31:31.135 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-16 17:31:31.139 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-16 17:31:31.139 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 17:31:31.146 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-16 17:31:31.150 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-16 17:31:31.150 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-16 17:31:31.160 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-16 17:31:31.165 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-16 17:31:31.165 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:31:31.169 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-16 17:31:31.174 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 17:31:31.174 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:31:31.179 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 17:31:31.183 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-16 17:31:31.184 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-16 17:31:31.184 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 17:31:31.184 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:31:31.189 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-16 17:31:31.193 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 17:31:31.193 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:31:31.197 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-16 17:31:31.202 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 17:31:31.202 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:31:31.206 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-16 17:31:31.210 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 17:31:31.211 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:31:31.224 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 17:31:31.229 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-16 17:31:31.229 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-16 17:31:31.229 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 17:31:31.229 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:31:31.234 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-16 17:31:31.237 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 17:31:31.238 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:31:31.242 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-16 17:31:31.246 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 17:31:31.246 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:31:31.250 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-16 17:31:31.254 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-16 17:31:31.255 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:31:31.259 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-16 17:31:31.270 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:个人基本信息表出生日期出生日期大于建档日期 
2020-06-16 17:31:31.274 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:既往史手术时间小于出生日期既往史外伤时间<出生日期 
2020-06-16 17:31:31.274 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:个人基本信息表出生日期出生日期与身份证号不一致 
2020-06-16 17:31:31.276 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:个人基本信息表既往史既往史疾病确诊时间小于出生日期 
2020-06-16 17:31:31.277 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-16 17:31:31.278 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 0d4385ad8bcd4988894ef7621bb776f8(String), 2020-06-16 17:31:31.277(Timestamp), 31011310200312009116(String), b27399b0c58241ebbcb8a00353d41d7d(String), 2020-06-16 17:31:31.277(Timestamp), 31011310200312009116(String), b2dce4796dfd4c438e3577283a7d7950(String), 2020-06-16 17:31:31.277(Timestamp), 31011310200312009116(String), ec2b097f882c469a92ccd0dc37088dc6(String), 2020-06-16 17:31:31.277(Timestamp) 
2020-06-16 17:31:31.301 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 4 
2020-06-16 17:31:34.740 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-16 17:31:34.741 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 17:31:34.747 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-16 17:31:34.753 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-16 17:31:34.754 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 17:31:34.759 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-16 17:31:34.764 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-16 17:31:34.764 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-16 17:31:34.769 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-16 17:31:34.774 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-16 17:31:34.774 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:31:34.779 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-16 17:31:34.784 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 17:31:34.784 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:31:34.790 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 17:31:34.794 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-16 17:31:34.794 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-16 17:31:34.795 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 17:31:34.795 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:31:34.800 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-16 17:31:34.804 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 17:31:34.805 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:31:34.809 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-16 17:31:34.813 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 17:31:34.814 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:31:34.819 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-16 17:31:34.824 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 17:31:34.824 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:31:34.838 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 17:31:34.843 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-16 17:31:34.843 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-16 17:31:34.844 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 17:31:34.844 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:31:34.848 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-16 17:31:34.853 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 17:31:34.853 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:31:34.858 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-16 17:31:34.862 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 17:31:34.863 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:31:34.867 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-16 17:31:34.871 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-16 17:31:34.872 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:31:34.876 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-16 17:31:34.894 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:个人基本信息表出生日期出生日期与身份证号不一致 
2020-06-16 17:31:34.897 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1)  
2020-06-16 17:31:34.897 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), b2dce4796dfd4c438e3577283a7d7950(String), 2020-06-16 17:31:34.896(Timestamp) 
2020-06-16 17:31:34.919 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 1 
2020-06-16 17:31:39.459 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-16 17:31:39.460 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 17:31:39.468 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-16 17:31:39.473 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-16 17:31:39.474 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 17:31:39.478 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-16 17:31:39.482 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-16 17:31:39.483 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-16 17:31:39.488 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-16 17:31:39.493 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-16 17:31:39.494 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: null 
2020-06-16 17:31:39.502 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 0 
2020-06-16 17:31:39.508 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 17:31:39.509 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: null 
2020-06-16 17:31:39.527 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 0 
2020-06-16 17:31:39.532 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-16 17:31:39.532 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 0 
2020-06-16 17:31:39.532 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 17:31:39.533 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: null 
2020-06-16 17:31:39.551 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 0 
2020-06-16 17:31:39.560 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-16 17:31:39.560 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 0 
2020-06-16 17:31:39.561 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-16 17:31:39.561 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: null 
2020-06-16 17:31:39.568 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-16 17:31:39.580 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:个人基本信息表身份证号为空值 
2020-06-16 17:31:39.589 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1)  
2020-06-16 17:31:39.589 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 17945c1124044e7098f14634c6091077(String), 2020-06-16 17:31:39.588(Timestamp) 
2020-06-16 17:31:39.608 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 1 
2020-06-16 17:31:43.306 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-16 17:31:43.307 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 17:31:43.312 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-16 17:31:43.317 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-16 17:31:43.317 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 17:31:43.324 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-16 17:31:43.328 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-16 17:31:43.329 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-16 17:31:43.333 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-16 17:31:43.338 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-16 17:31:43.339 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 4115261995052754137(String) 
2020-06-16 17:31:43.342 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 0 
2020-06-16 17:31:43.347 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 17:31:43.348 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 4115261995052754137(String) 
2020-06-16 17:31:43.353 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 0 
2020-06-16 17:31:43.356 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-16 17:31:43.356 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 0 
2020-06-16 17:31:43.357 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 17:31:43.357 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 4115261995052754137(String) 
2020-06-16 17:31:43.363 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 0 
2020-06-16 17:31:43.368 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-16 17:31:43.368 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 0 
2020-06-16 17:31:43.368 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-16 17:31:43.369 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 4115261995052754137(String) 
2020-06-16 17:31:43.373 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-16 17:31:43.385 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:个人基本信息表身份证号身份证号长度异常 
2020-06-16 17:31:43.395 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1)  
2020-06-16 17:31:43.395 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 0d7eebffe3a94841b55df249cd50918c(String), 2020-06-16 17:31:43.394(Timestamp) 
2020-06-16 17:31:43.409 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 1 
2020-06-16 17:31:47.242 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-16 17:31:47.242 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 17:31:47.248 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-16 17:31:47.253 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-16 17:31:47.253 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 17:31:47.258 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-16 17:31:47.262 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-16 17:31:47.263 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-16 17:31:47.268 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-16 17:31:47.273 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-16 17:31:47.274 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 632123821927051(String) 
2020-06-16 17:31:47.280 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 0 
2020-06-16 17:31:47.284 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 17:31:47.285 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 632123821927051(String) 
2020-06-16 17:31:47.289 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 0 
2020-06-16 17:31:47.293 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-16 17:31:47.293 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 0 
2020-06-16 17:31:47.294 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 17:31:47.294 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 632123821927051(String) 
2020-06-16 17:31:47.299 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 0 
2020-06-16 17:31:47.304 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-16 17:31:47.304 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 0 
2020-06-16 17:31:47.304 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-16 17:31:47.304 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 632123821927051(String) 
2020-06-16 17:31:47.309 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-16 17:31:47.321 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:个人基本信息表身份证号身份证号不合法 
2020-06-16 17:31:47.325 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1)  
2020-06-16 17:31:47.325 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 4108f6f0aabe44ad92dd57ae3abe8ebe(String), 2020-06-16 17:31:47.325(Timestamp) 
2020-06-16 17:31:47.342 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 1 
2020-06-16 17:31:51.006 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-16 17:31:51.006 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 17:31:51.012 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-16 17:31:51.016 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-16 17:31:51.016 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 17:31:51.020 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-16 17:31:51.024 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-16 17:31:51.025 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-16 17:31:51.029 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-16 17:31:51.034 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-16 17:31:51.034 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 411526199515275413(String) 
2020-06-16 17:31:51.039 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 0 
2020-06-16 17:31:51.042 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 17:31:51.042 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 411526199515275413(String) 
2020-06-16 17:31:51.047 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 0 
2020-06-16 17:31:51.051 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-16 17:31:51.051 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 0 
2020-06-16 17:31:51.051 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 17:31:51.051 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 411526199515275413(String) 
2020-06-16 17:31:51.057 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 0 
2020-06-16 17:31:51.061 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-16 17:31:51.061 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 0 
2020-06-16 17:31:51.062 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-16 17:31:51.063 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 411526199515275413(String) 
2020-06-16 17:31:51.068 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-16 17:31:51.080 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:个人基本信息表身份证号身份证号不合法 
2020-06-16 17:31:51.084 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1)  
2020-06-16 17:31:51.084 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 36d70cac4ba44075bf370a9ab795d25d(String), 2020-06-16 17:31:51.083(Timestamp) 
2020-06-16 17:31:51.099 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 1 
2020-06-16 17:31:54.634 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-16 17:31:54.634 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 17:31:54.639 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-16 17:31:54.644 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-16 17:31:54.644 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 17:31:54.648 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-16 17:31:54.653 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-16 17:31:54.654 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-16 17:31:54.658 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-16 17:31:54.662 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-16 17:31:54.663 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:31:54.668 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-16 17:31:54.673 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 17:31:54.674 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:31:54.680 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 17:31:54.684 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-16 17:31:54.684 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-16 17:31:54.685 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 17:31:54.685 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:31:54.690 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-16 17:31:54.694 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 17:31:54.694 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:31:54.698 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-16 17:31:54.702 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 17:31:54.703 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:31:54.709 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-16 17:31:54.713 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 17:31:54.713 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:31:54.727 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 17:31:54.731 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-16 17:31:54.731 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-16 17:31:54.731 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 17:31:54.732 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:31:54.736 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-16 17:31:54.740 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 17:31:54.740 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:31:54.744 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-16 17:31:54.748 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 17:31:54.749 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:31:54.753 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-16 17:31:54.758 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-16 17:31:54.758 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:31:54.762 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-16 17:31:54.777 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:个人基本信息表工作单位工作单位未填写 
2020-06-16 17:31:54.780 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1)  
2020-06-16 17:31:54.781 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 85f9e772245549a2b39c8212e08908cc(String), 2020-06-16 17:31:54.78(Timestamp) 
2020-06-16 17:31:54.791 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 1 
2020-06-16 17:31:58.303 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-16 17:31:58.303 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 17:31:58.308 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-16 17:31:58.313 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-16 17:31:58.314 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 17:31:58.318 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-16 17:31:58.323 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-16 17:31:58.323 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-16 17:31:58.328 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-16 17:31:58.332 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-16 17:31:58.333 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:31:58.339 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-16 17:31:58.344 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 17:31:58.344 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:31:58.351 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 17:31:58.355 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-16 17:31:58.355 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-16 17:31:58.356 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 17:31:58.356 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:31:58.361 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-16 17:31:58.364 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 17:31:58.365 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:31:58.369 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-16 17:31:58.373 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 17:31:58.374 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:31:58.378 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-16 17:31:58.382 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 17:31:58.383 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:31:58.396 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 17:31:58.400 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-16 17:31:58.400 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-16 17:31:58.401 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 17:31:58.401 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:31:58.406 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-16 17:31:58.410 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 17:31:58.410 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:31:58.414 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-16 17:31:58.418 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 17:31:58.419 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:31:58.423 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-16 17:31:58.427 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-16 17:31:58.428 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:31:58.432 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-16 17:31:58.445 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:个人基本信息表工作单位工作单位不为汉字 
2020-06-16 17:31:58.450 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1)  
2020-06-16 17:31:58.450 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 4ad5f41e777d499894964fe735a4ed46(String), 2020-06-16 17:31:58.45(Timestamp) 
2020-06-16 17:31:58.463 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 1 
2020-06-16 17:32:02.913 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-16 17:32:02.913 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 17:32:02.917 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-16 17:32:02.921 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-16 17:32:02.922 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 17:32:02.928 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-16 17:32:02.932 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-16 17:32:02.933 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-16 17:32:02.937 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-16 17:32:02.941 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-16 17:32:02.942 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:32:02.951 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-16 17:32:02.955 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 17:32:02.955 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:32:02.961 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 17:32:02.965 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-16 17:32:02.965 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-16 17:32:02.965 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 17:32:02.966 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:32:02.970 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-16 17:32:02.974 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 17:32:02.975 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:32:02.979 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-16 17:32:02.984 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 17:32:02.984 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:32:02.989 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-16 17:32:02.993 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 17:32:02.993 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:32:03.007 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 17:32:03.009 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-16 17:32:03.010 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-16 17:32:03.010 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 17:32:03.010 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:32:03.016 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-16 17:32:03.020 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 17:32:03.021 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:32:03.025 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-16 17:32:03.029 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 17:32:03.030 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:32:03.034 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-16 17:32:03.038 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-16 17:32:03.038 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:32:03.043 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-16 17:32:03.062 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:个人基本信息表本人电话本人电话未填写 
2020-06-16 17:32:03.065 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1)  
2020-06-16 17:32:03.066 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 7838cdc133cb43e1be4828444054e220(String), 2020-06-16 17:32:03.065(Timestamp) 
2020-06-16 17:32:03.078 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 1 
2020-06-16 17:32:06.605 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-16 17:32:06.606 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 17:32:06.611 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-16 17:32:06.617 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-16 17:32:06.617 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 17:32:06.622 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-16 17:32:06.627 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-16 17:32:06.627 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-16 17:32:06.632 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-16 17:32:06.636 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-16 17:32:06.637 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:32:06.642 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-16 17:32:06.646 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 17:32:06.646 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:32:06.652 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 17:32:06.656 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-16 17:32:06.657 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-16 17:32:06.657 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 17:32:06.658 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:32:06.662 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-16 17:32:06.667 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 17:32:06.668 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:32:06.673 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-16 17:32:06.678 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 17:32:06.678 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:32:06.682 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-16 17:32:06.688 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 17:32:06.688 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:32:06.702 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 17:32:06.706 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-16 17:32:06.707 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-16 17:32:06.707 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 17:32:06.708 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:32:06.712 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-16 17:32:06.716 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 17:32:06.717 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:32:06.721 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-16 17:32:06.726 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 17:32:06.727 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:32:06.732 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-16 17:32:06.736 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-16 17:32:06.736 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:32:06.741 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-16 17:32:06.765 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:个人基本信息表本人电话手机号码长度异常 
2020-06-16 17:32:06.767 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1)  
2020-06-16 17:32:06.767 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), e4e48ae4f913467ca0fd86dae3ce568d(String), 2020-06-16 17:32:06.766(Timestamp) 
2020-06-16 17:32:06.781 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 1 
2020-06-16 17:32:10.127 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-16 17:32:10.127 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 17:32:10.132 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-16 17:32:10.136 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-16 17:32:10.137 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 17:32:10.141 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-16 17:32:10.145 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-16 17:32:10.146 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-16 17:32:10.150 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-16 17:32:10.155 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-16 17:32:10.155 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:32:10.160 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-16 17:32:10.165 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 17:32:10.165 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:32:10.171 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 17:32:10.175 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-16 17:32:10.175 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-16 17:32:10.176 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 17:32:10.176 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:32:10.181 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-16 17:32:10.185 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 17:32:10.186 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:32:10.190 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-16 17:32:10.194 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 17:32:10.194 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:32:10.201 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-16 17:32:10.205 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 17:32:10.205 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:32:10.219 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 17:32:10.223 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-16 17:32:10.224 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-16 17:32:10.224 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 17:32:10.224 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:32:10.229 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-16 17:32:10.233 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 17:32:10.234 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:32:10.239 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-16 17:32:10.243 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 17:32:10.243 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:32:10.247 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-16 17:32:10.252 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-16 17:32:10.252 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:32:10.257 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-16 17:32:10.272 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:个人基本信息表本人电话手机号码校验失败 
2020-06-16 17:32:10.273 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1)  
2020-06-16 17:32:10.273 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), f87a9c2f676841839db93c9e730dad76(String), 2020-06-16 17:32:10.272(Timestamp) 
2020-06-16 17:32:10.289 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 1 
2020-06-16 17:32:13.899 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-16 17:32:13.900 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 17:32:13.909 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-16 17:32:13.913 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-16 17:32:13.914 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 17:32:13.920 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-16 17:32:13.924 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-16 17:32:13.925 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-16 17:32:13.930 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-16 17:32:13.934 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-16 17:32:13.935 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:32:13.940 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-16 17:32:13.944 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 17:32:13.944 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:32:13.950 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 17:32:13.955 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-16 17:32:13.955 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-16 17:32:13.956 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 17:32:13.956 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:32:13.961 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-16 17:32:13.966 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 17:32:13.967 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:32:13.971 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-16 17:32:13.976 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 17:32:13.977 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:32:13.982 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-16 17:32:13.987 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 17:32:13.987 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:32:14.002 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 17:32:14.007 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-16 17:32:14.007 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-16 17:32:14.008 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 17:32:14.008 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:32:14.013 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-16 17:32:14.018 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 17:32:14.019 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:32:14.024 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-16 17:32:14.029 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 17:32:14.029 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:32:14.037 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-16 17:32:14.042 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-16 17:32:14.043 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:32:14.048 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-16 17:32:14.072 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:个人基本信息表本人电话固定电话长度异常（含区号） 
2020-06-16 17:32:14.074 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1)  
2020-06-16 17:32:14.075 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), ca55e89173e84859877ee564ba43b7ef(String), 2020-06-16 17:32:14.074(Timestamp) 
2020-06-16 17:32:14.088 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 1 
2020-06-16 17:32:17.542 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-16 17:32:17.542 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 17:32:17.548 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-16 17:32:17.552 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-16 17:32:17.553 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 17:32:17.557 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-16 17:32:17.561 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-16 17:32:17.562 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-16 17:32:17.566 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-16 17:32:17.570 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-16 17:32:17.570 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:32:17.575 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-16 17:32:17.579 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 17:32:17.580 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:32:17.585 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 17:32:17.589 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-16 17:32:17.589 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-16 17:32:17.590 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 17:32:17.590 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:32:17.597 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-16 17:32:17.602 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 17:32:17.602 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:32:17.607 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-16 17:32:17.611 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 17:32:17.611 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:32:17.616 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-16 17:32:17.620 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 17:32:17.621 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:32:17.634 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 17:32:17.639 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-16 17:32:17.640 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-16 17:32:17.640 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 17:32:17.640 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:32:17.645 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-16 17:32:17.649 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 17:32:17.649 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:32:17.654 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-16 17:32:17.658 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 17:32:17.658 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:32:17.663 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-16 17:32:17.667 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-16 17:32:17.668 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:32:17.672 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-16 17:32:17.684 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:个人基本信息表本人电话固定电话长度异常（不含区号） 
2020-06-16 17:32:17.688 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1)  
2020-06-16 17:32:17.688 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 5f7ecb11a3894e1d83e68322c3e3071d(String), 2020-06-16 17:32:17.688(Timestamp) 
2020-06-16 17:32:17.702 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 1 
2020-06-16 17:32:21.156 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-16 17:32:21.156 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 17:32:21.161 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-16 17:32:21.166 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-16 17:32:21.166 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 17:32:21.172 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-16 17:32:21.177 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-16 17:32:21.178 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-16 17:32:21.184 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-16 17:32:21.191 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-16 17:32:21.192 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:32:21.196 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-16 17:32:21.200 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 17:32:21.201 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:32:21.207 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 17:32:21.212 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-16 17:32:21.212 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-16 17:32:21.213 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 17:32:21.213 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:32:21.218 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-16 17:32:21.223 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 17:32:21.223 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:32:21.229 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-16 17:32:21.234 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 17:32:21.235 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:32:21.239 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-16 17:32:21.244 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 17:32:21.244 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:32:21.258 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 17:32:21.263 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-16 17:32:21.263 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-16 17:32:21.264 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 17:32:21.264 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:32:21.270 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-16 17:32:21.276 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 17:32:21.277 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:32:21.282 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-16 17:32:21.291 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 17:32:21.292 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:32:21.297 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-16 17:32:21.306 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-16 17:32:21.307 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:32:21.312 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-16 17:32:21.336 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:个人基本信息表本人电话本人电话不为纯数字 
2020-06-16 17:32:21.338 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:个人基本信息表本人电话手机号码长度异常 
2020-06-16 17:32:21.340 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-16 17:32:21.341 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), bfd7b3c3376e4254889ed061d3e17e0b(String), 2020-06-16 17:32:21.339(Timestamp), 31011310200312009116(String), e4e48ae4f913467ca0fd86dae3ce568d(String), 2020-06-16 17:32:21.339(Timestamp) 
2020-06-16 17:32:21.385 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 2 
2020-06-16 17:32:24.825 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-16 17:32:24.825 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 17:32:24.830 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-16 17:32:24.834 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-16 17:32:24.834 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 17:32:24.838 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-16 17:32:24.843 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-16 17:32:24.843 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-16 17:32:24.848 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-16 17:32:24.853 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-16 17:32:24.853 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:32:24.858 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-16 17:32:24.861 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 17:32:24.862 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:32:24.869 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 17:32:24.873 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-16 17:32:24.873 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-16 17:32:24.873 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 17:32:24.874 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:32:24.878 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-16 17:32:24.883 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 17:32:24.883 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:32:24.888 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-16 17:32:24.893 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 17:32:24.893 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:32:24.899 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-16 17:32:24.906 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 17:32:24.906 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:32:24.923 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 17:32:24.928 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-16 17:32:24.928 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-16 17:32:24.928 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 17:32:24.929 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:32:24.933 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-16 17:32:24.938 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 17:32:24.939 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:32:24.948 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-16 17:32:24.953 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 17:32:24.954 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:32:24.959 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-16 17:32:24.964 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-16 17:32:24.965 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:32:24.970 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-16 17:32:24.996 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:个人基本信息表本人电话固定电话长度异常（不含区号） 
2020-06-16 17:32:25.002 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:个人基本信息表本人电话本人电话为同一个数字 
2020-06-16 17:32:25.006 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-16 17:32:25.007 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 5f7ecb11a3894e1d83e68322c3e3071d(String), 2020-06-16 17:32:25.006(Timestamp), 31011310200312009116(String), b9365945d8e542db9c8243c240695e67(String), 2020-06-16 17:32:25.006(Timestamp) 
2020-06-16 17:32:25.030 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 2 
2020-06-16 17:32:28.539 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-16 17:32:28.539 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 17:32:28.544 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-16 17:32:28.551 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-16 17:32:28.552 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 17:32:28.557 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-16 17:32:28.562 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-16 17:32:28.563 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-16 17:32:28.569 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-16 17:32:28.574 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-16 17:32:28.575 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:32:28.580 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-16 17:32:28.588 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 17:32:28.589 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:32:28.595 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 17:32:28.602 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-16 17:32:28.603 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-16 17:32:28.604 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 17:32:28.605 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:32:28.610 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-16 17:32:28.616 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 17:32:28.617 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:32:28.622 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-16 17:32:28.628 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 17:32:28.629 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:32:28.634 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-16 17:32:28.641 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 17:32:28.642 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:32:28.656 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 17:32:28.661 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-16 17:32:28.662 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-16 17:32:28.663 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 17:32:28.664 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:32:28.669 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-16 17:32:28.675 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 17:32:28.676 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:32:28.682 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-16 17:32:28.687 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 17:32:28.688 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:32:28.694 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-16 17:32:28.699 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-16 17:32:28.700 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:32:28.707 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-16 17:32:28.729 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:个人基本信息表联系人姓名联系人姓名未填写 
2020-06-16 17:32:28.732 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1)  
2020-06-16 17:32:28.733 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), d0d444ce2a444fe6811ea43a137cc432(String), 2020-06-16 17:32:28.732(Timestamp) 
2020-06-16 17:32:28.780 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 1 
2020-06-16 17:32:32.197 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-16 17:32:32.198 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 17:32:32.203 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-16 17:32:32.207 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-16 17:32:32.207 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 17:32:32.212 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-16 17:32:32.216 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-16 17:32:32.217 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-16 17:32:32.222 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-16 17:32:32.228 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-16 17:32:32.229 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:32:32.234 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-16 17:32:32.238 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 17:32:32.239 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:32:32.244 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 17:32:32.249 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-16 17:32:32.249 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-16 17:32:32.250 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 17:32:32.250 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:32:32.254 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-16 17:32:32.259 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 17:32:32.260 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:32:32.265 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-16 17:32:32.269 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 17:32:32.270 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:32:32.275 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-16 17:32:32.280 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 17:32:32.280 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:32:32.294 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 17:32:32.298 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-16 17:32:32.299 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-16 17:32:32.299 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 17:32:32.300 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:32:32.305 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-16 17:32:32.309 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 17:32:32.310 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:32:32.314 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-16 17:32:32.319 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 17:32:32.319 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:32:32.324 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-16 17:32:32.329 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-16 17:32:32.330 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:32:32.335 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-16 17:32:32.356 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:个人基本信息表联系人姓名联系人姓名长度异常 
2020-06-16 17:32:32.358 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1)  
2020-06-16 17:32:32.359 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), e585471016994d99a353a7cc79be1235(String), 2020-06-16 17:32:32.358(Timestamp) 
2020-06-16 17:32:32.383 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 1 
2020-06-16 17:32:35.817 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-16 17:32:35.817 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 17:32:35.821 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-16 17:32:35.826 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-16 17:32:35.826 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 17:32:35.831 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-16 17:32:35.835 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-16 17:32:35.835 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-16 17:32:35.840 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-16 17:32:35.844 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-16 17:32:35.844 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:32:35.849 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-16 17:32:35.853 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 17:32:35.854 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:32:35.860 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 17:32:35.865 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-16 17:32:35.865 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-16 17:32:35.866 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 17:32:35.867 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:32:35.872 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-16 17:32:35.877 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 17:32:35.878 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:32:35.886 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-16 17:32:35.891 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 17:32:35.891 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:32:35.896 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-16 17:32:35.901 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 17:32:35.901 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:32:35.914 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 17:32:35.919 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-16 17:32:35.920 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-16 17:32:35.920 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 17:32:35.921 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:32:35.926 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-16 17:32:35.931 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 17:32:35.931 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:32:35.935 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-16 17:32:35.942 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 17:32:35.942 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:32:35.948 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-16 17:32:35.954 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-16 17:32:35.954 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:32:35.959 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-16 17:32:35.979 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:联系人姓名填写为数字同时满足以下条件： 1、联系人姓名不为空值 2、联系人姓名为纯数字 
2020-06-16 17:32:35.987 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1)  
2020-06-16 17:32:35.987 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 1a7e1f2e0bce421585a1fad889411dd4(String), 2020-06-16 17:32:35.986(Timestamp) 
2020-06-16 17:32:36.003 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 1 
2020-06-16 17:32:39.409 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-16 17:32:39.410 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 17:32:39.417 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-16 17:32:39.421 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-16 17:32:39.422 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 17:32:39.426 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-16 17:32:39.431 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-16 17:32:39.432 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-16 17:32:39.436 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-16 17:32:39.441 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-16 17:32:39.442 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:32:39.446 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-16 17:32:39.451 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 17:32:39.452 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:32:39.458 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 17:32:39.464 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-16 17:32:39.465 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-16 17:32:39.466 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 17:32:39.467 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:32:39.473 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-16 17:32:39.478 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 17:32:39.479 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:32:39.484 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-16 17:32:39.489 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 17:32:39.490 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:32:39.496 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-16 17:32:39.501 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 17:32:39.502 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:32:39.517 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 17:32:39.522 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-16 17:32:39.523 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-16 17:32:39.524 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 17:32:39.525 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:32:39.530 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-16 17:32:39.536 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 17:32:39.537 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:32:39.542 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-16 17:32:39.548 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 17:32:39.549 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:32:39.554 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-16 17:32:39.560 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-16 17:32:39.561 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:32:39.566 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-16 17:32:40.250 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-16 17:32:40.251 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 17:32:40.256 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-16 17:32:40.260 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-16 17:32:40.261 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 17:32:40.265 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-16 17:32:40.269 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-16 17:32:40.269 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-16 17:32:40.274 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-16 17:32:40.277 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-16 17:32:40.278 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:32:40.282 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-16 17:32:40.288 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 17:32:40.289 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:32:40.294 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 17:32:40.298 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-16 17:32:40.298 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-16 17:32:40.299 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 17:32:40.299 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:32:40.303 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-16 17:32:40.307 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 17:32:40.307 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:32:40.312 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-16 17:32:40.316 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 17:32:40.317 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:32:40.321 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-16 17:32:40.325 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 17:32:40.326 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:32:40.339 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 17:32:40.344 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-16 17:32:40.344 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-16 17:32:40.344 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 17:32:40.344 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:32:40.349 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-16 17:32:40.354 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 17:32:40.354 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:32:40.358 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-16 17:32:40.362 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 17:32:40.363 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:32:40.367 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-16 17:32:40.371 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-16 17:32:40.372 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:32:40.376 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-16 17:32:40.391 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:个人基本信息表联系人电话联系人电话未填写 
2020-06-16 17:32:40.392 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1)  
2020-06-16 17:32:40.393 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), ec56f4e1864e4a5bb0ad8ce1e94aa382(String), 2020-06-16 17:32:40.392(Timestamp) 
2020-06-16 17:32:40.415 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 1 
2020-06-16 17:32:43.843 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-16 17:32:43.843 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 17:32:43.848 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-16 17:32:43.854 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-16 17:32:43.855 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 17:32:43.860 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-16 17:32:43.866 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-16 17:32:43.867 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-16 17:32:43.872 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-16 17:32:43.878 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-16 17:32:43.879 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:32:43.884 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-16 17:32:43.889 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 17:32:43.890 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:32:43.896 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 17:32:43.901 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-16 17:32:43.902 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-16 17:32:43.902 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 17:32:43.903 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:32:43.909 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-16 17:32:43.914 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 17:32:43.915 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:32:43.920 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-16 17:32:43.926 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 17:32:43.927 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:32:43.933 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-16 17:32:43.938 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 17:32:43.939 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:32:43.954 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 17:32:43.960 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-16 17:32:43.961 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-16 17:32:43.962 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 17:32:43.963 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:32:43.970 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-16 17:32:43.975 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 17:32:43.976 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:32:43.981 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-16 17:32:43.987 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 17:32:43.988 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:32:43.993 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-16 17:32:43.999 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-16 17:32:44.000 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:32:44.006 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-16 17:32:44.032 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:手机号码长度异常同时满足以下条件： 1、联系人电话不为空值 2、联系人电话为手机号码（是1开头判断为手机号） 3、号码长度小于11位或大于11位 
2020-06-16 17:32:44.042 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:手机号码校验失败1、联系人电话不为空值 2、联系人电话为手机号码（是1开头判断为手机号） 3、号码长度为11位，但是不存在这个号段（进行号段校验） 
2020-06-16 17:32:44.045 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-16 17:32:44.046 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 00081d1c0cce49fd88ac68b7627d6e1c(String), 2020-06-16 17:32:44.044(Timestamp), 31011310200312009116(String), be536190ff164df18656c4aca5fc7504(String), 2020-06-16 17:32:44.044(Timestamp) 
2020-06-16 17:32:44.061 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 2 
2020-06-16 17:32:47.519 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-16 17:32:47.519 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 17:32:47.524 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-16 17:32:47.528 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-16 17:32:47.529 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 17:32:47.533 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-16 17:32:47.537 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-16 17:32:47.537 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-16 17:32:47.543 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-16 17:32:47.548 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-16 17:32:47.548 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:32:47.552 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-16 17:32:47.556 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 17:32:47.557 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:32:47.562 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 17:32:47.571 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-16 17:32:47.572 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-16 17:32:47.572 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 17:32:47.572 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:32:47.577 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-16 17:32:47.585 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 17:32:47.585 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:32:47.590 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-16 17:32:47.594 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 17:32:47.595 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:32:47.600 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-16 17:32:47.604 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 17:32:47.604 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:32:47.618 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 17:32:47.622 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-16 17:32:47.623 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-16 17:32:47.623 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 17:32:47.623 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:32:47.627 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-16 17:32:47.632 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 17:32:47.632 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:32:47.637 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-16 17:32:47.641 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 17:32:47.641 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:32:47.646 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-16 17:32:47.650 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-16 17:32:47.650 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:32:47.654 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-16 17:32:47.669 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:手机号码校验失败1、联系人电话不为空值 2、联系人电话为手机号码（是1开头判断为手机号） 3、号码长度为11位，但是不存在这个号段（进行号段校验） 
2020-06-16 17:32:47.672 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1)  
2020-06-16 17:32:47.672 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), be536190ff164df18656c4aca5fc7504(String), 2020-06-16 17:32:47.671(Timestamp) 
2020-06-16 17:32:47.702 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 1 
2020-06-16 17:32:51.108 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-16 17:32:51.109 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 17:32:51.114 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-16 17:32:51.118 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-16 17:32:51.119 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 17:32:51.124 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-16 17:32:51.128 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-16 17:32:51.129 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-16 17:32:51.135 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-16 17:32:51.140 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-16 17:32:51.142 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:32:51.146 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-16 17:32:51.153 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 17:32:51.155 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:32:51.161 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 17:32:51.166 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-16 17:32:51.167 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-16 17:32:51.168 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 17:32:51.169 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:32:51.174 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-16 17:32:51.180 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 17:32:51.181 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:32:51.186 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-16 17:32:51.192 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 17:32:51.193 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:32:51.199 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-16 17:32:51.205 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 17:32:51.206 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:32:51.220 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 17:32:51.226 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-16 17:32:51.227 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-16 17:32:51.228 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 17:32:51.229 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:32:51.234 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-16 17:32:51.239 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 17:32:51.240 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:32:51.245 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-16 17:32:51.249 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 17:32:51.250 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:32:51.255 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-16 17:32:51.260 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-16 17:32:51.261 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:32:51.266 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-16 17:32:51.295 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:固定电话长度异常（含区号）1同时满足以下条件： 1、联系电话不为空值 2、联系电话为固定电话（是0开头判断为固定电话） 3、号码长度小于11位或大于12位 
2020-06-16 17:32:51.297 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1)  
2020-06-16 17:32:51.297 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), ea35b1d533784b8696401a09cae12f3d(String), 2020-06-16 17:32:51.296(Timestamp) 
2020-06-16 17:32:51.326 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 1 
2020-06-16 17:32:54.809 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-16 17:32:54.809 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 17:32:54.815 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-16 17:32:54.820 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-16 17:32:54.821 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 17:32:54.826 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-16 17:32:54.831 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-16 17:32:54.832 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-16 17:32:54.837 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-16 17:32:54.842 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-16 17:32:54.842 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:32:54.846 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-16 17:32:54.852 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 17:32:54.852 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:32:54.857 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 17:32:54.861 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-16 17:32:54.861 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-16 17:32:54.862 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 17:32:54.862 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:32:54.868 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-16 17:32:54.872 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 17:32:54.872 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:32:54.877 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-16 17:32:54.881 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 17:32:54.882 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:32:54.886 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-16 17:32:54.891 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 17:32:54.892 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:32:54.905 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 17:32:54.910 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-16 17:32:54.910 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-16 17:32:54.911 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 17:32:54.911 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:32:54.916 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-16 17:32:54.920 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 17:32:54.921 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:32:54.925 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-16 17:32:54.929 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 17:32:54.930 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:32:54.935 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-16 17:32:54.940 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-16 17:32:54.940 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:32:54.945 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-16 17:32:54.958 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:固定电话长度异常（不含区号）同时满足以下条件： 1、联系人电话不为空值 2、联系人电话为固定电话（不是1和0开头判断为固定电话） 3、号码长度小于7位或大于8位 
2020-06-16 17:32:54.961 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1)  
2020-06-16 17:32:54.962 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 8282714ec36c405cbf094755098177e9(String), 2020-06-16 17:32:54.961(Timestamp) 
2020-06-16 17:32:54.989 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 1 
2020-06-16 17:32:58.445 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-16 17:32:58.446 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 17:32:58.451 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-16 17:32:58.457 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-16 17:32:58.457 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 17:32:58.464 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-16 17:32:58.468 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-16 17:32:58.469 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-16 17:32:58.473 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-16 17:32:58.478 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-16 17:32:58.478 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:32:58.483 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-16 17:32:58.487 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 17:32:58.488 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:32:58.495 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 17:32:58.499 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-16 17:32:58.499 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-16 17:32:58.500 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 17:32:58.500 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:32:58.505 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-16 17:32:58.510 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 17:32:58.511 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:32:58.515 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-16 17:32:58.520 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 17:32:58.521 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:32:58.525 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-16 17:32:58.529 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 17:32:58.530 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:32:58.544 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 17:32:58.549 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-16 17:32:58.549 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-16 17:32:58.550 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 17:32:58.550 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:32:58.555 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-16 17:32:58.560 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 17:32:58.560 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:32:58.566 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-16 17:32:58.569 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 17:32:58.570 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:32:58.575 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-16 17:32:58.579 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-16 17:32:58.581 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:32:58.585 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-16 17:32:58.611 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:固定电话长度异常（不含区号）同时满足以下条件： 1、联系人电话不为空值 2、联系人电话为固定电话（不是1和0开头判断为固定电话） 3、号码长度小于7位或大于8位 
2020-06-16 17:32:58.613 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:联系人电话不为纯数字同时满足以下条件： 1、联系人电话不为空值 2、联系人电话不是纯数字 
2020-06-16 17:32:58.615 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-16 17:32:58.616 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 8282714ec36c405cbf094755098177e9(String), 2020-06-16 17:32:58.615(Timestamp), 31011310200312009116(String), c80e1cf922fe4adf834f308a97853a34(String), 2020-06-16 17:32:58.615(Timestamp) 
2020-06-16 17:32:58.642 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 2 
2020-06-16 17:33:02.086 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-16 17:33:02.087 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 17:33:02.093 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-16 17:33:02.098 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-16 17:33:02.098 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 17:33:02.103 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-16 17:33:02.106 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-16 17:33:02.107 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-16 17:33:02.112 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-16 17:33:02.117 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-16 17:33:02.118 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:33:02.122 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-16 17:33:02.131 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 17:33:02.132 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:33:02.137 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 17:33:02.142 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-16 17:33:02.143 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-16 17:33:02.143 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 17:33:02.143 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:33:02.147 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-16 17:33:02.151 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 17:33:02.152 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:33:02.156 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-16 17:33:02.161 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 17:33:02.161 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:33:02.166 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-16 17:33:02.170 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 17:33:02.171 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:33:02.186 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 17:33:02.191 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-16 17:33:02.191 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-16 17:33:02.192 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 17:33:02.192 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:33:02.196 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-16 17:33:02.200 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 17:33:02.201 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:33:02.205 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-16 17:33:02.210 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 17:33:02.210 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:33:02.214 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-16 17:33:02.220 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-16 17:33:02.220 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:33:02.224 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-16 17:33:02.238 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:联系人电话为同一个数字同时满足以下条件： 1、联系电话不为空值 2、联系电话数字只包含一个数字，如99999999 
2020-06-16 17:33:02.241 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1)  
2020-06-16 17:33:02.242 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 73bde7f20d744d2382f82ea8fc476901(String), 2020-06-16 17:33:02.241(Timestamp) 
2020-06-16 17:33:02.267 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 1 
2020-06-16 17:33:05.986 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-16 17:33:05.987 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 17:33:05.993 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-16 17:33:05.998 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-16 17:33:05.998 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 17:33:06.002 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-16 17:33:06.007 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-16 17:33:06.007 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-16 17:33:06.012 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-16 17:33:06.016 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-16 17:33:06.017 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:33:06.021 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-16 17:33:06.026 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 17:33:06.026 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:33:06.031 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 17:33:06.036 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-16 17:33:06.036 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-16 17:33:06.036 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 17:33:06.037 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:33:06.043 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-16 17:33:06.048 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 17:33:06.048 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:33:06.053 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-16 17:33:06.057 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 17:33:06.058 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:33:06.062 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-16 17:33:06.067 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 17:33:06.067 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:33:06.082 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 17:33:06.086 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-16 17:33:06.087 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-16 17:33:06.087 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 17:33:06.087 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:33:06.092 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-16 17:33:06.096 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 17:33:06.097 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:33:06.101 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-16 17:33:06.106 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 17:33:06.106 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:33:06.111 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-16 17:33:06.116 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-16 17:33:06.116 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:33:06.121 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-16 17:33:06.140 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:常住类型未填写常住类型为空值 
2020-06-16 17:33:06.142 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1)  
2020-06-16 17:33:06.142 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), e39a29409dc844aab30fd036ed574c11(String), 2020-06-16 17:33:06.142(Timestamp) 
2020-06-16 17:33:06.183 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 1 
2020-06-16 17:33:09.777 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-16 17:33:09.778 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 17:33:09.783 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-16 17:33:09.788 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-16 17:33:09.788 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 17:33:09.794 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-16 17:33:09.799 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-16 17:33:09.799 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-16 17:33:09.805 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-16 17:33:09.810 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-16 17:33:09.811 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:33:09.816 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-16 17:33:09.820 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 17:33:09.821 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:33:09.827 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 17:33:09.832 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-16 17:33:09.832 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-16 17:33:09.833 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 17:33:09.834 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:33:09.838 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-16 17:33:09.843 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 17:33:09.844 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:33:09.848 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-16 17:33:09.853 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 17:33:09.853 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:33:09.858 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-16 17:33:09.863 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 17:33:09.864 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:33:09.878 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 17:33:09.882 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-16 17:33:09.882 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-16 17:33:09.882 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 17:33:09.883 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:33:09.886 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-16 17:33:09.891 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 17:33:09.891 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:33:09.896 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-16 17:33:09.900 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 17:33:09.900 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:33:09.904 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-16 17:33:09.909 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-16 17:33:09.910 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:33:09.914 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-16 17:33:10.599 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-16 17:33:10.600 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 17:33:10.606 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-16 17:33:10.610 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-16 17:33:10.610 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 17:33:10.615 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-16 17:33:10.620 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-16 17:33:10.620 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-16 17:33:10.625 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-16 17:33:10.629 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-16 17:33:10.630 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:33:10.634 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-16 17:33:10.639 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 17:33:10.639 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:33:10.646 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 17:33:10.650 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-16 17:33:10.650 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-16 17:33:10.651 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 17:33:10.651 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:33:10.655 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-16 17:33:10.659 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 17:33:10.660 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:33:10.664 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-16 17:33:10.668 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 17:33:10.668 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:33:10.673 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-16 17:33:10.677 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 17:33:10.678 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:33:10.691 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 17:33:10.697 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-16 17:33:10.697 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-16 17:33:10.698 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 17:33:10.699 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:33:10.704 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-16 17:33:10.709 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 17:33:10.710 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:33:10.715 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-16 17:33:10.720 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 17:33:10.721 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:33:10.726 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-16 17:33:10.732 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-16 17:33:10.733 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:33:10.739 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-16 17:33:10.766 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:与户籍地址逻辑不符同时满足以下条件： 1、封面《户籍地址》为“上海市”， 2、个人基本信息表《常住类型》填写“非户籍” 
2020-06-16 17:33:10.776 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1)  
2020-06-16 17:33:10.776 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 194d73527efd48088d9b42ee63f64b69(String), 2020-06-16 17:33:10.775(Timestamp) 
2020-06-16 17:33:10.808 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 1 
2020-06-16 17:33:14.416 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-16 17:33:14.416 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 17:33:14.421 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-16 17:33:14.427 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-16 17:33:14.427 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 17:33:14.431 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-16 17:33:14.436 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-16 17:33:14.436 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-16 17:33:14.441 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-16 17:33:14.446 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-16 17:33:14.446 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:33:14.451 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-16 17:33:14.455 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 17:33:14.456 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:33:14.461 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 17:33:14.465 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-16 17:33:14.466 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-16 17:33:14.466 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 17:33:14.466 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:33:14.471 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-16 17:33:14.475 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 17:33:14.476 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:33:14.481 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-16 17:33:14.485 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 17:33:14.486 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:33:14.491 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-16 17:33:14.495 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 17:33:14.496 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:33:14.511 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 17:33:14.514 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-16 17:33:14.514 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-16 17:33:14.515 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 17:33:14.515 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:33:14.519 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-16 17:33:14.524 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 17:33:14.524 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:33:14.530 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-16 17:33:14.534 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 17:33:14.535 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:33:14.539 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-16 17:33:14.544 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-16 17:33:14.544 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:33:14.549 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-16 17:33:14.563 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:民族未填写民族为空值 
2020-06-16 17:33:14.568 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1)  
2020-06-16 17:33:14.568 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 4868217488744fed817fee47873d8ae0(String), 2020-06-16 17:33:14.568(Timestamp) 
2020-06-16 17:33:14.585 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 1 
2020-06-16 17:33:18.535 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-16 17:33:18.536 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 17:33:18.541 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-16 17:33:18.546 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-16 17:33:18.547 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 17:33:18.556 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-16 17:33:18.562 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-16 17:33:18.563 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-16 17:33:18.570 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-16 17:33:18.575 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-16 17:33:18.576 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:33:18.580 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-16 17:33:18.584 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 17:33:18.585 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:33:18.590 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 17:33:18.594 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-16 17:33:18.594 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-16 17:33:18.595 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 17:33:18.595 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:33:18.600 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-16 17:33:18.604 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 17:33:18.604 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:33:18.609 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-16 17:33:18.613 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 17:33:18.613 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:33:18.617 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-16 17:33:18.622 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 17:33:18.622 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:33:18.635 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 17:33:18.638 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-16 17:33:18.639 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-16 17:33:18.639 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 17:33:18.639 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:33:18.643 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-16 17:33:18.647 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 17:33:18.647 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:33:18.651 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-16 17:33:18.656 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 17:33:18.657 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:33:18.662 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-16 17:33:18.665 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-16 17:33:18.665 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:33:18.670 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-16 17:33:18.684 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:民族填写错误同时满足以下条件： 1、民族不为空值 2、与56个名族的名称不符合 
2020-06-16 17:33:18.685 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:民族超出字典范围同时满足以下条件： 1、民族不为空值 2、民族不在字典范围内（民族字典按GB/T3304） 
2020-06-16 17:33:18.687 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-16 17:33:18.687 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), a96f5e6051f541159fca9dec2d47050e(String), 2020-06-16 17:33:18.687(Timestamp), 31011310200312009116(String), cac20bf188fd4f7296a3678a1604b001(String), 2020-06-16 17:33:18.687(Timestamp) 
2020-06-16 17:33:18.707 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 2 
2020-06-16 17:33:23.407 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-16 17:33:23.408 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 17:33:23.413 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-16 17:33:23.417 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-16 17:33:23.418 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 17:33:23.422 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-16 17:33:23.426 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-16 17:33:23.427 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-16 17:33:23.431 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-16 17:33:23.435 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-16 17:33:23.435 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:33:23.440 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-16 17:33:23.446 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 17:33:23.446 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:33:23.452 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 17:33:23.456 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-16 17:33:23.456 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-16 17:33:23.457 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 17:33:23.457 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:33:23.461 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-16 17:33:23.467 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 17:33:23.468 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:33:23.473 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-16 17:33:23.481 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 17:33:23.482 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:33:23.487 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-16 17:33:23.491 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 17:33:23.492 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:33:23.506 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 17:33:23.511 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-16 17:33:23.511 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-16 17:33:23.512 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 17:33:23.512 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:33:23.516 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-16 17:33:23.521 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 17:33:23.521 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:33:23.526 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-16 17:33:23.531 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 17:33:23.531 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:33:23.536 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-16 17:33:23.541 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-16 17:33:23.541 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:33:23.546 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-16 17:33:23.560 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:血型未填写血型为空值 
2020-06-16 17:33:23.565 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1)  
2020-06-16 17:33:23.566 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 5d67b4b3f4c34563a644fe8c9b883884(String), 2020-06-16 17:33:23.565(Timestamp) 
2020-06-16 17:33:23.598 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 1 
2020-06-16 17:33:28.447 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-16 17:33:28.447 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 17:33:28.452 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-16 17:33:28.457 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-16 17:33:28.457 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 17:33:28.462 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-16 17:33:28.466 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-16 17:33:28.466 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-16 17:33:28.471 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-16 17:33:28.476 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-16 17:33:28.477 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:33:28.482 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-16 17:33:28.487 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 17:33:28.488 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:33:28.495 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 17:33:28.500 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-16 17:33:28.500 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-16 17:33:28.501 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 17:33:28.501 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:33:28.506 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-16 17:33:28.511 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 17:33:28.512 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:33:28.517 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-16 17:33:28.522 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 17:33:28.523 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:33:28.528 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-16 17:33:28.533 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 17:33:28.534 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:33:28.548 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 17:33:28.553 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-16 17:33:28.553 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-16 17:33:28.554 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 17:33:28.554 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:33:28.559 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-16 17:33:28.564 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 17:33:28.565 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:33:28.570 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-16 17:33:28.574 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 17:33:28.575 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:33:28.580 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-16 17:33:28.585 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-16 17:33:28.586 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:33:28.591 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-16 17:33:28.614 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:血型与RH血型逻辑不符同时满足以下条件： 1、个人基本信息表《血型》填写为“不详” 2、个人基本信息表《RH血型》填写为“阴性”或“阳性” 
2020-06-16 17:33:28.619 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1)  
2020-06-16 17:33:28.620 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), a58b2894635045b18a63c250d46ce8a8(String), 2020-06-16 17:33:28.618(Timestamp) 
2020-06-16 17:33:28.639 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 1 
2020-06-16 17:33:32.081 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-16 17:33:32.081 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 17:33:32.087 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-16 17:33:32.092 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-16 17:33:32.093 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 17:33:32.099 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-16 17:33:32.106 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-16 17:33:32.107 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-16 17:33:32.113 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-16 17:33:32.118 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-16 17:33:32.118 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:33:32.122 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-16 17:33:32.127 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 17:33:32.128 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:33:32.133 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 17:33:32.137 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-16 17:33:32.138 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-16 17:33:32.139 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 17:33:32.139 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:33:32.143 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-16 17:33:32.148 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 17:33:32.149 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:33:32.154 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-16 17:33:32.158 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 17:33:32.159 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:33:32.164 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-16 17:33:32.169 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 17:33:32.169 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:33:32.183 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 17:33:32.187 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-16 17:33:32.188 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-16 17:33:32.188 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 17:33:32.189 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:33:32.195 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-16 17:33:32.200 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 17:33:32.200 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:33:32.205 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-16 17:33:32.209 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 17:33:32.210 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:33:32.214 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-16 17:33:32.219 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-16 17:33:32.220 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:33:32.225 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-16 17:33:32.247 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:RH血型未填写RH血型为空值 
2020-06-16 17:33:32.250 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1)  
2020-06-16 17:33:32.251 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), b9590438ed5d4bdb89f89c686856cdce(String), 2020-06-16 17:33:32.25(Timestamp) 
2020-06-16 17:33:32.265 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 1 
2020-06-16 17:33:35.845 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-16 17:33:35.845 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 17:33:35.852 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-16 17:33:35.857 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-16 17:33:35.858 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 17:33:35.863 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-16 17:33:35.867 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-16 17:33:35.867 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-16 17:33:35.872 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-16 17:33:35.877 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-16 17:33:35.877 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:33:35.884 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-16 17:33:35.889 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 17:33:35.889 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:33:35.896 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 17:33:35.900 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-16 17:33:35.900 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-16 17:33:35.901 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 17:33:35.902 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:33:35.906 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-16 17:33:35.910 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 17:33:35.911 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:33:35.916 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-16 17:33:35.920 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 17:33:35.921 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:33:35.925 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-16 17:33:35.930 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 17:33:35.930 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:33:35.944 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 17:33:35.948 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-16 17:33:35.948 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-16 17:33:35.949 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 17:33:35.949 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:33:35.953 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-16 17:33:35.957 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 17:33:35.957 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:33:35.961 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-16 17:33:35.965 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 17:33:35.966 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:33:35.970 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-16 17:33:35.974 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-16 17:33:35.975 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:33:35.979 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-16 17:33:35.996 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:RH超出字典范围RH不在字典范围内（1 阴性 2 阳性 3 不详 ） 
2020-06-16 17:33:35.999 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1)  
2020-06-16 17:33:35.999 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 92dc5e8124ba4c5396a3fa7c3d1dd8db(String), 2020-06-16 17:33:35.998(Timestamp) 
2020-06-16 17:33:36.015 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 1 
2020-06-16 17:33:40.715 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-16 17:33:40.715 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 17:33:40.726 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-16 17:33:40.730 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-16 17:33:40.730 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 17:33:40.736 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-16 17:33:40.740 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-16 17:33:40.741 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-16 17:33:40.746 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-16 17:33:40.752 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-16 17:33:40.752 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:33:40.756 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-16 17:33:40.761 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 17:33:40.761 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:33:40.766 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 17:33:40.770 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-16 17:33:40.770 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-16 17:33:40.770 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 17:33:40.771 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:33:40.775 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-16 17:33:40.779 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 17:33:40.779 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:33:40.783 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-16 17:33:40.787 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 17:33:40.787 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:33:40.791 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-16 17:33:40.795 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 17:33:40.795 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:33:40.809 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 17:33:40.813 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-16 17:33:40.813 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-16 17:33:40.814 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 17:33:40.814 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:33:40.818 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-16 17:33:40.823 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 17:33:40.823 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:33:40.827 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-16 17:33:40.831 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 17:33:40.832 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:33:40.839 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-16 17:33:40.844 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-16 17:33:40.845 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:33:40.860 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-16 17:33:40.898 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:RH超出字典范围RH不在字典范围内（1 阴性 2 阳性 3 不详 ） 
2020-06-16 17:33:40.901 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:文化程度未填写文化程度为空值 
2020-06-16 17:33:40.906 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-16 17:33:40.907 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 92dc5e8124ba4c5396a3fa7c3d1dd8db(String), 2020-06-16 17:33:40.905(Timestamp), 31011310200312009116(String), b7530f3af05f46b2b8fdccab8369f0f1(String), 2020-06-16 17:33:40.905(Timestamp) 
2020-06-16 17:33:40.939 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 2 
2020-06-16 17:33:45.252 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-16 17:33:45.253 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 17:33:45.259 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-16 17:33:45.267 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-16 17:33:45.268 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 17:33:45.273 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-16 17:33:45.280 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-16 17:33:45.281 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-16 17:33:45.288 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-16 17:33:45.293 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-16 17:33:45.293 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:33:45.298 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-16 17:33:45.305 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 17:33:45.306 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:33:45.314 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 17:33:45.325 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-16 17:33:45.326 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-16 17:33:45.326 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 17:33:45.327 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:33:45.334 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-16 17:33:45.340 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 17:33:45.341 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:33:45.347 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-16 17:33:45.352 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 17:33:45.353 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:33:45.373 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-16 17:33:45.395 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 17:33:45.396 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:33:45.419 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 17:33:45.437 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-16 17:33:45.438 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-16 17:33:45.439 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 17:33:45.440 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:33:45.455 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-16 17:33:45.471 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 17:33:45.472 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:33:45.486 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-16 17:33:45.505 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 17:33:45.506 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:33:45.527 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-16 17:33:45.545 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-16 17:33:45.546 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:33:45.556 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-16 17:33:45.592 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:文化程度超出字典范围文化程度不在字典范围内（1 研究生 2 大学本科 3 大学专科和专科学校 4 中等专业学校 5 技工学校 6 高中 7 初中 8小学9文盲或半文盲10不详 ） 
2020-06-16 17:33:45.597 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:RH超出字典范围RH不在字典范围内（1 阴性 2 阳性 3 不详 ） 
2020-06-16 17:33:45.603 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-16 17:33:45.603 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 59d8e69348314e3ca04bb4f0f94bd54e(String), 2020-06-16 17:33:45.602(Timestamp), 31011310200312009116(String), 92dc5e8124ba4c5396a3fa7c3d1dd8db(String), 2020-06-16 17:33:45.602(Timestamp) 
2020-06-16 17:33:45.658 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 2 
2020-06-16 17:33:50.824 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-16 17:33:50.824 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 17:33:50.830 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-16 17:33:50.835 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-16 17:33:50.836 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 17:33:50.842 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-16 17:33:50.850 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-16 17:33:50.850 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-16 17:33:50.856 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-16 17:33:50.860 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-16 17:33:50.861 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:33:50.866 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-16 17:33:50.869 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 17:33:50.870 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:33:50.876 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 17:33:50.881 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-16 17:33:50.882 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-16 17:33:50.882 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 17:33:50.883 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:33:50.887 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-16 17:33:50.892 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 17:33:50.893 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:33:50.898 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-16 17:33:50.903 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 17:33:50.903 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:33:50.908 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-16 17:33:50.913 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 17:33:50.914 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:33:50.927 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 17:33:50.932 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-16 17:33:50.933 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-16 17:33:50.934 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 17:33:50.934 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:33:50.940 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-16 17:33:50.945 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 17:33:50.946 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:33:50.952 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-16 17:33:50.958 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 17:33:50.959 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:33:50.964 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-16 17:33:50.968 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-16 17:33:50.969 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:33:50.975 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-16 17:33:50.998 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:RH超出字典范围RH不在字典范围内（1 阴性 2 阳性 3 不详 ） 
2020-06-16 17:33:50.999 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:职业未填写职业为空值 
2020-06-16 17:33:51.002 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-16 17:33:51.003 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 92dc5e8124ba4c5396a3fa7c3d1dd8db(String), 2020-06-16 17:33:51.002(Timestamp), 31011310200312009116(String), 9f7d738548c24c6bbedb92e0e0f1cc30(String), 2020-06-16 17:33:51.002(Timestamp) 
2020-06-16 17:33:51.027 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 2 
2020-06-16 17:33:56.976 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-16 17:33:56.977 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 17:33:56.983 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-16 17:33:56.988 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-16 17:33:56.988 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 17:33:56.997 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-16 17:33:57.001 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-16 17:33:57.002 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-16 17:33:57.008 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-16 17:33:57.012 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-16 17:33:57.012 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:33:57.019 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-16 17:33:57.027 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 17:33:57.027 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:33:57.032 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 17:33:57.037 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-16 17:33:57.037 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-16 17:33:57.037 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 17:33:57.038 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:33:57.042 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-16 17:33:57.047 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 17:33:57.048 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:33:57.056 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-16 17:33:57.063 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 17:33:57.063 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:33:57.067 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-16 17:33:57.073 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 17:33:57.074 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:33:57.088 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 17:33:57.092 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-16 17:33:57.093 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-16 17:33:57.093 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 17:33:57.093 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:33:57.104 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-16 17:33:57.109 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 17:33:57.110 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:33:57.118 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-16 17:33:57.127 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 17:33:57.127 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:33:57.135 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-16 17:33:57.140 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-16 17:33:57.141 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:33:57.147 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-16 17:33:57.170 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:RH超出字典范围RH不在字典范围内（1 阴性 2 阳性 3 不详 ） 
2020-06-16 17:33:57.172 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:婚姻状况未填写婚姻状况为空值 
2020-06-16 17:33:57.174 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-16 17:33:57.174 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 92dc5e8124ba4c5396a3fa7c3d1dd8db(String), 2020-06-16 17:33:57.174(Timestamp), 31011310200312009116(String), bfbe9eef04fa4ad9a1bad60b9dd74c13(String), 2020-06-16 17:33:57.174(Timestamp) 
2020-06-16 17:33:57.217 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 2 
2020-06-16 17:34:02.478 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-16 17:34:02.478 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 17:34:02.494 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-16 17:34:02.508 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-16 17:34:02.510 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 17:34:02.520 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-16 17:34:02.528 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-16 17:34:02.529 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-16 17:34:02.540 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-16 17:34:02.553 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-16 17:34:02.553 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:34:02.563 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-16 17:34:02.575 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 17:34:02.575 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:34:02.588 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 17:34:02.600 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-16 17:34:02.601 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-16 17:34:02.602 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 17:34:02.604 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:34:02.619 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-16 17:34:02.633 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 17:34:02.634 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:34:02.645 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-16 17:34:02.659 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 17:34:02.661 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:34:02.675 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-16 17:34:02.688 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 17:34:02.689 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:34:02.716 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 17:34:02.732 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-16 17:34:02.733 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-16 17:34:02.734 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 17:34:02.735 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:34:02.751 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-16 17:34:02.771 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 17:34:02.772 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:34:02.804 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-16 17:34:02.836 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 17:34:02.836 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:34:02.889 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-16 17:34:02.958 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-16 17:34:02.959 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:34:03.062 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-16 17:34:03.269 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:RH超出字典范围RH不在字典范围内（1 阴性 2 阳性 3 不详 ） 
2020-06-16 17:34:03.273 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1)  
2020-06-16 17:34:03.274 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 92dc5e8124ba4c5396a3fa7c3d1dd8db(String), 2020-06-16 17:34:03.273(Timestamp) 
2020-06-16 17:34:03.483 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 1 
2020-06-16 17:34:10.835 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-16 17:34:10.836 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 17:34:10.852 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-16 17:34:10.862 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-16 17:34:10.864 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 17:34:10.877 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-16 17:34:10.891 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-16 17:34:10.892 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-16 17:34:10.914 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 13 
2020-06-16 17:34:10.937 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-16 17:34:10.938 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:34:10.969 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-16 17:34:11.022 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 17:34:11.023 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:34:11.116 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 17:34:11.226 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-16 17:34:11.226 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-16 17:34:11.227 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 17:34:11.227 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:34:11.390 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-16 17:34:11.551 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 17:34:11.552 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:34:11.721 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-16 17:34:11.913 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 17:34:11.914 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:34:12.072 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-16 17:34:12.159 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 17:34:12.161 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:34:12.216 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 17:34:12.237 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-16 17:34:12.238 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-16 17:34:12.239 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 17:34:12.240 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:34:12.252 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-16 17:34:12.259 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 17:34:12.260 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:34:12.268 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-16 17:34:12.276 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 17:34:12.277 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:34:12.285 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-16 17:34:12.292 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-16 17:34:12.294 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:34:12.304 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-16 17:34:12.326 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:医疗费用支付方式未填写医疗费用支付方式为空值 
2020-06-16 17:34:12.326 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:RH超出字典范围RH不在字典范围内（1 阴性 2 阳性 3 不详 ） 
2020-06-16 17:34:12.330 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-16 17:34:12.331 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 87e0e78866e8446a8bf91c5fd7880ddb(String), 2020-06-16 17:34:12.33(Timestamp), 31011310200312009116(String), 92dc5e8124ba4c5396a3fa7c3d1dd8db(String), 2020-06-16 17:34:12.33(Timestamp) 
2020-06-16 17:34:12.352 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 2 
2020-06-16 17:59:13.987 [INFO ] com.benetech.rules.RulesApplication                - [logStarting:55] Starting RulesApplication v1.0-SNAPSHOT on DESKTOP-EOCO1V0 with PID 8920 (D:\51\python\project\instance\zyjk\EHR\controlRuleNew\config\healthRecordRules.jar started by ZY in D:\51\python\project\instance\zyjk\EHR\controlRuleNew) 
2020-06-16 17:59:13.991 [DEBUG] com.benetech.rules.RulesApplication                - [logStarting:56] Running with Spring Boot v2.2.1.RELEASE, Spring v5.2.1.RELEASE 
2020-06-16 17:59:13.991 [INFO ] com.benetech.rules.RulesApplication                - [logStartupProfileInfo:655] The following profiles are active: test 
2020-06-16 17:59:15.570 [INFO ] o.s.boot.web.embedded.tomcat.TomcatWebServer       - [initialize:92] Tomcat initialized with port(s): 8838 (http) 
2020-06-16 17:59:15.583 [INFO ] org.apache.coyote.http11.Http11NioProtocol         - [log:173] Initializing ProtocolHandler ["http-nio-8838"] 
2020-06-16 17:59:15.583 [INFO ] org.apache.catalina.core.StandardService           - [log:173] Starting service [Tomcat] 
2020-06-16 17:59:15.583 [INFO ] org.apache.catalina.core.StandardEngine            - [log:173] Starting Servlet engine: [Apache Tomcat/9.0.27] 
2020-06-16 17:59:15.652 [INFO ] o.a.c.c.C.[.[localhost].[/healthRecordRules]       - [log:173] Initializing Spring embedded WebApplicationContext 
2020-06-16 17:59:15.652 [INFO ] org.springframework.web.context.ContextLoader      - [prepareWebApplicationContext:284] Root WebApplicationContext: initialization completed in 1572 ms 
2020-06-16 17:59:15.777 [DEBUG] org.apache.ibatis.logging.LogFactory               - [setImplementation:135] Logging initialized using 'class org.apache.ibatis.logging.slf4j.Slf4jImpl' adapter. 
2020-06-16 17:59:16.226 [WARN ] org.mybatis.spring.SqlSessionFactoryBean           - [buildSqlSessionFactory:467] Can't find class in '[com.benetech.rules.*.entity]' package. Please check your configuration. 
2020-06-16 17:59:16.889 [INFO ] com.alibaba.druid.pool.DruidDataSource             - [init:930] {dataSource-1} inited 
2020-06-16 17:59:17.086 [DEBUG] c.b.r.m.e.mapper.RuleEngineMapper.getAllRules      - [debug:159] ==>  Preparing: select a.RuleId as ruleId, a.RuleSql as clazz from HrRule a join HrRuleProps b on a.RuleId = b.RuleId where -- RuleId in ('34278f71cf1d42c88158aaf637fa5203', '8d30baa03bfc4233a8f115c57a0ebf08', '63eb82a44bf64c96a0b9023fa2a3c9d9') a.RuleSql != '' and a.RuleSql is not null and b.Enable = 1  
2020-06-16 17:59:17.105 [DEBUG] c.b.r.m.e.mapper.RuleEngineMapper.getAllRules      - [debug:159] ==> Parameters:  
2020-06-16 17:59:17.189 [DEBUG] c.b.r.m.e.mapper.RuleEngineMapper.getAllRules      - [debug:159] <==      Total: 310 
2020-06-16 17:59:17.447 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [init:68] 加载规则：310 条 
2020-06-16 17:59:17.463 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.getAllCode    - [debug:159] ==>  Preparing: SELECT codeSysType AS type, code AS code, [value] AS value FROM tb_code_value WHERE code != '' AND [value] != ''  
2020-06-16 17:59:17.463 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.getAllCode    - [debug:159] ==> Parameters:  
2020-06-16 17:59:17.588 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-16 17:59:17.588 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 17:59:17.593 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-16 17:59:17.597 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-16 17:59:17.598 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 17:59:17.606 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-16 17:59:17.609 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-16 17:59:17.610 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-16 17:59:17.617 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 13 
2020-06-16 17:59:17.620 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-16 17:59:17.621 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:59:17.628 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-16 17:59:17.632 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 17:59:17.632 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:59:17.637 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 17:59:17.643 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-16 17:59:17.643 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-16 17:59:17.644 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 17:59:17.644 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:59:17.650 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-16 17:59:17.653 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 17:59:17.654 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:59:17.657 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-16 17:59:17.663 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 17:59:17.663 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:59:17.667 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-16 17:59:17.671 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 17:59:17.672 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:59:17.687 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 17:59:17.691 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-16 17:59:17.691 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-16 17:59:17.691 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 17:59:17.692 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:59:17.696 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-16 17:59:17.702 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 17:59:17.702 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:59:17.709 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-16 17:59:17.713 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 17:59:17.713 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:59:17.716 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-16 17:59:17.721 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-16 17:59:17.722 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:59:17.728 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-16 17:59:17.742 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:姓名未填写姓名为空值 
2020-06-16 17:59:17.743 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:医疗费用支付方式未填写医疗费用支付方式为空值 
2020-06-16 17:59:17.744 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:RH超出字典范围RH不在字典范围内（1 阴性 2 阳性 3 不详 ） 
2020-06-16 17:59:17.747 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-16 17:59:17.747 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 63eb82a44bf64c96a0b9023fa2a3c9d9(String), 2020-06-16 17:59:17.746(Timestamp), 31011310200312009116(String), 87e0e78866e8446a8bf91c5fd7880ddb(String), 2020-06-16 17:59:17.746(Timestamp), 31011310200312009116(String), 92dc5e8124ba4c5396a3fa7c3d1dd8db(String), 2020-06-16 17:59:17.746(Timestamp) 
2020-06-16 17:59:17.761 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 3 
2020-06-16 17:59:18.041 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.getAllCode    - [debug:159] <==      Total: 44881 
2020-06-16 17:59:18.073 [INFO ] c.b.r.m.m.service.impl.EhrModelBuildServiceImpl    - [init:96] 初始化字典类型: 467 种 
2020-06-16 17:59:18.073 [INFO ] c.b.r.m.m.service.impl.EhrModelBuildServiceImpl    - [init:97] 初始化字典: 44881 条 
2020-06-16 17:59:18.073 [ERROR] c.b.r.m.process.service.impl.QcProcessServiceImpl  - [init:44] 初始化线程池 
2020-06-16 17:59:18.200 [INFO ] o.s.scheduling.concurrent.ThreadPoolTaskExecutor   - [initialize:171] Initializing ExecutorService 'applicationTaskExecutor' 
2020-06-16 17:59:18.438 [INFO ] org.apache.coyote.http11.Http11NioProtocol         - [log:173] Starting ProtocolHandler ["http-nio-8838"] 
2020-06-16 17:59:18.451 [INFO ] org.apache.coyote.http11.Http11NioProtocol         - [log:173] Pausing ProtocolHandler ["http-nio-8838"] 
2020-06-16 17:59:18.451 [INFO ] org.apache.catalina.core.StandardService           - [log:173] Stopping service [Tomcat] 
2020-06-16 17:59:18.462 [INFO ] org.apache.coyote.http11.Http11NioProtocol         - [log:173] Stopping ProtocolHandler ["http-nio-8838"] 
2020-06-16 17:59:18.463 [INFO ] org.apache.coyote.http11.Http11NioProtocol         - [log:173] Destroying ProtocolHandler ["http-nio-8838"] 
2020-06-16 17:59:18.466 [INFO ] o.s.b.a.l.ConditionEvaluationReportLoggingListener - [logMessage:136]     Error starting ApplicationContext. To display the conditions report re-run your application with 'debug' enabled. 
2020-06-16 17:59:18.468 [ERROR] o.s.b.diagnostics.LoggingFailureAnalysisReporter   - [report:40]     ***************************  APPLICATION FAILED TO START  ***************************    Description:    Web server failed to start. Port 8838 was already in use.    Action:    Identify and stop the process that's listening on port 8838 or configure this application to listen on another port.   
2020-06-16 17:59:18.471 [INFO ] o.s.scheduling.concurrent.ThreadPoolTaskExecutor   - [shutdown:208] Shutting down ExecutorService 'applicationTaskExecutor' 
2020-06-16 17:59:18.474 [INFO ] com.alibaba.druid.pool.DruidDataSource             - [close:1825] {dataSource-1} closed 
2020-06-16 17:59:21.328 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-16 17:59:21.328 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 17:59:21.334 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-16 17:59:21.338 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-16 17:59:21.338 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 17:59:21.350 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-16 17:59:21.355 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-16 17:59:21.355 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-16 17:59:21.363 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 13 
2020-06-16 17:59:21.368 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-16 17:59:21.369 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:59:21.376 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-16 17:59:21.383 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 17:59:21.383 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:59:21.390 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 17:59:21.395 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-16 17:59:21.396 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-16 17:59:21.397 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 17:59:21.398 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:59:21.404 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-16 17:59:21.410 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 17:59:21.411 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:59:21.418 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-16 17:59:21.423 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 17:59:21.424 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:59:21.429 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-16 17:59:21.435 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 17:59:21.436 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:59:21.452 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 17:59:21.458 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-16 17:59:21.459 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-16 17:59:21.459 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 17:59:21.460 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:59:21.465 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-16 17:59:21.471 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 17:59:21.472 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:59:21.479 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-16 17:59:21.485 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 17:59:21.486 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:59:21.491 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-16 17:59:21.497 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-16 17:59:21.498 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:59:21.509 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-16 17:59:21.542 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:姓名填写不规范同时满足以下条件： 1、联系人姓名不为空值 2、联系人姓名为纯数字 
2020-06-16 17:59:21.544 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:与三级医院住院就诊记录表姓名不一致同时满足以下条件： 1、封面《姓名》不为空值 2、三级医院住院就诊记录表《患者姓名》不为空 3、封面《姓名》与住院就诊记录表中《患者姓名》不相等 
2020-06-16 17:59:21.545 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:与三级医院门诊就诊记录表姓名不一致同时满足以下条件： 1、封面《姓名》不为空值 2、三级医院门诊就诊记录表《患者姓名》不为空 3、封面《姓名》与门诊就诊记录表中《患者姓名》不相等 
2020-06-16 17:59:21.545 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:医疗费用支付方式未填写医疗费用支付方式为空值 
2020-06-16 17:59:21.546 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:RH超出字典范围RH不在字典范围内（1 阴性 2 阳性 3 不详 ） 
2020-06-16 17:59:21.551 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-16 17:59:21.552 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 61ed70b670f2460a94ebc183f6b86f5d(String), 2020-06-16 17:59:21.55(Timestamp), 31011310200312009116(String), 814b3d0aca3642af82ef320f98d4dfba(String), 2020-06-16 17:59:21.55(Timestamp), 31011310200312009116(String), 847bc4b46918417dab4aa917af3355c3(String), 2020-06-16 17:59:21.55(Timestamp), 31011310200312009116(String), 87e0e78866e8446a8bf91c5fd7880ddb(String), 2020-06-16 17:59:21.55(Timestamp), 31011310200312009116(String), 92dc5e8124ba4c5396a3fa7c3d1dd8db(String), 2020-06-16 17:59:21.55(Timestamp) 
2020-06-16 17:59:21.585 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 5 
2020-06-16 17:59:25.075 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-16 17:59:25.075 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 17:59:25.082 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-16 17:59:25.087 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-16 17:59:25.088 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 17:59:25.096 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-16 17:59:25.101 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-16 17:59:25.102 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-16 17:59:25.106 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 13 
2020-06-16 17:59:25.111 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-16 17:59:25.112 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:59:25.117 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-16 17:59:25.123 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 17:59:25.124 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:59:25.135 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 17:59:25.140 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-16 17:59:25.141 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-16 17:59:25.142 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 17:59:25.142 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:59:25.148 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-16 17:59:25.153 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 17:59:25.155 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:59:25.160 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-16 17:59:25.165 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 17:59:25.166 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:59:25.172 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-16 17:59:25.177 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 17:59:25.178 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:59:25.192 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 17:59:25.196 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-16 17:59:25.196 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-16 17:59:25.197 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 17:59:25.197 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:59:25.204 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-16 17:59:25.208 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 17:59:25.209 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:59:25.213 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-16 17:59:25.218 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 17:59:25.219 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:59:25.224 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-16 17:59:25.229 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-16 17:59:25.230 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:59:25.234 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-16 17:59:25.265 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:与三级医院住院就诊记录表姓名不一致同时满足以下条件： 1、封面《姓名》不为空值 2、三级医院住院就诊记录表《患者姓名》不为空 3、封面《姓名》与住院就诊记录表中《患者姓名》不相等 
2020-06-16 17:59:25.266 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:与三级医院门诊就诊记录表姓名不一致同时满足以下条件： 1、封面《姓名》不为空值 2、三级医院门诊就诊记录表《患者姓名》不为空 3、封面《姓名》与门诊就诊记录表中《患者姓名》不相等 
2020-06-16 17:59:25.266 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:医疗费用支付方式未填写医疗费用支付方式为空值 
2020-06-16 17:59:25.267 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:RH超出字典范围RH不在字典范围内（1 阴性 2 阳性 3 不详 ） 
2020-06-16 17:59:25.269 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:姓名长度异常长度>50字符 
2020-06-16 17:59:25.274 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-16 17:59:25.275 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 814b3d0aca3642af82ef320f98d4dfba(String), 2020-06-16 17:59:25.273(Timestamp), 31011310200312009116(String), 847bc4b46918417dab4aa917af3355c3(String), 2020-06-16 17:59:25.273(Timestamp), 31011310200312009116(String), 87e0e78866e8446a8bf91c5fd7880ddb(String), 2020-06-16 17:59:25.273(Timestamp), 31011310200312009116(String), 92dc5e8124ba4c5396a3fa7c3d1dd8db(String), 2020-06-16 17:59:25.273(Timestamp), 31011310200312009116(String), b8eeb38e528544b28133b9ee94c5fbc4(String), 2020-06-16 17:59:25.273(Timestamp) 
2020-06-16 17:59:25.288 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 5 
2020-06-16 17:59:38.255 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-16 17:59:38.256 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 17:59:38.261 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-16 17:59:38.266 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-16 17:59:38.267 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 17:59:38.272 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-16 17:59:38.276 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-16 17:59:38.277 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-16 17:59:38.282 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 13 
2020-06-16 17:59:38.286 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-16 17:59:38.286 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:59:38.290 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-16 17:59:38.293 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 17:59:38.294 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:59:38.299 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 17:59:38.302 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-16 17:59:38.303 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-16 17:59:38.303 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 17:59:38.303 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:59:38.308 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-16 17:59:38.313 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 17:59:38.314 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:59:38.318 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-16 17:59:38.322 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 17:59:38.322 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:59:38.326 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-16 17:59:38.330 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 17:59:38.330 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:59:38.345 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 17:59:38.349 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-16 17:59:38.349 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-16 17:59:38.350 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 17:59:38.350 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:59:38.354 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-16 17:59:38.361 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 17:59:38.361 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:59:38.365 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-16 17:59:38.370 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 17:59:38.370 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:59:38.375 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-16 17:59:38.379 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-16 17:59:38.380 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:59:38.391 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-16 17:59:38.405 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:医疗费用支付方式未填写医疗费用支付方式为空值 
2020-06-16 17:59:38.405 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:RH超出字典范围RH不在字典范围内（1 阴性 2 阳性 3 不详 ） 
2020-06-16 17:59:38.406 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:现住址未填写同时满足以下条件： 1、现住址中的省、市、区都为空值 2、现住址中的详细地址为空值 
2020-06-16 17:59:38.409 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-16 17:59:38.409 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 87e0e78866e8446a8bf91c5fd7880ddb(String), 2020-06-16 17:59:38.408(Timestamp), 31011310200312009116(String), 92dc5e8124ba4c5396a3fa7c3d1dd8db(String), 2020-06-16 17:59:38.408(Timestamp), 31011310200312009116(String), b3bb8566dc154106b6a400f40a0fe914(String), 2020-06-16 17:59:38.408(Timestamp) 
2020-06-16 17:59:38.427 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 3 
2020-06-16 17:59:42.435 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-16 17:59:42.436 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 17:59:42.445 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-16 17:59:42.449 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-16 17:59:42.450 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 17:59:42.454 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-16 17:59:42.459 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-16 17:59:42.459 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-16 17:59:42.463 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 13 
2020-06-16 17:59:42.468 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-16 17:59:42.468 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:59:42.473 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-16 17:59:42.477 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 17:59:42.477 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:59:42.482 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 17:59:42.485 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-16 17:59:42.486 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-16 17:59:42.486 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 17:59:42.486 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:59:42.491 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-16 17:59:42.496 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 17:59:42.496 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:59:42.500 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-16 17:59:42.504 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 17:59:42.504 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:59:42.508 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-16 17:59:42.513 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 17:59:42.514 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:59:42.527 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 17:59:42.531 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-16 17:59:42.531 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-16 17:59:42.532 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 17:59:42.532 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:59:42.536 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-16 17:59:42.540 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 17:59:42.540 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:59:42.544 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-16 17:59:42.548 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 17:59:42.548 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:59:42.552 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-16 17:59:42.556 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-16 17:59:42.556 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:59:42.561 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-16 17:59:42.575 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:医疗费用支付方式未填写医疗费用支付方式为空值 
2020-06-16 17:59:42.575 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:现住址长度异常长度>100字符（包含省市区、乡镇街道名称（如有）、村居委会名称（如有）、详细地址） 
2020-06-16 17:59:42.575 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:RH超出字典范围RH不在字典范围内（1 阴性 2 阳性 3 不详 ） 
2020-06-16 17:59:42.578 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-16 17:59:42.578 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 87e0e78866e8446a8bf91c5fd7880ddb(String), 2020-06-16 17:59:42.577(Timestamp), 31011310200312009116(String), 91665e0b2efa4f86aea807ec9f4883c3(String), 2020-06-16 17:59:42.577(Timestamp), 31011310200312009116(String), 92dc5e8124ba4c5396a3fa7c3d1dd8db(String), 2020-06-16 17:59:42.577(Timestamp) 
2020-06-16 17:59:42.593 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 3 
2020-06-16 17:59:47.772 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-16 17:59:47.773 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 17:59:47.778 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-16 17:59:47.784 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-16 17:59:47.785 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 17:59:47.789 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-16 17:59:47.794 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-16 17:59:47.794 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-16 17:59:47.800 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 13 
2020-06-16 17:59:47.805 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-16 17:59:47.806 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:59:47.812 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-16 17:59:47.816 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 17:59:47.817 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:59:47.825 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 17:59:47.830 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-16 17:59:47.830 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-16 17:59:47.831 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 17:59:47.831 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:59:47.840 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-16 17:59:47.846 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 17:59:47.847 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:59:47.851 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-16 17:59:47.856 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 17:59:47.856 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:59:47.863 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-16 17:59:47.875 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 17:59:47.876 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:59:47.891 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 17:59:47.898 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-16 17:59:47.899 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-16 17:59:47.900 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 17:59:47.900 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:59:47.905 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-16 17:59:47.910 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 17:59:47.911 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:59:47.917 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-16 17:59:47.921 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 17:59:47.922 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:59:47.929 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-16 17:59:47.934 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-16 17:59:47.935 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:59:47.940 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-16 17:59:47.959 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:户籍地址未填写同时满足以下条件： 1、户籍地址中的省、市、区都为空值 2、户籍地址中的详细地址为空值 
2020-06-16 17:59:47.963 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:医疗费用支付方式未填写医疗费用支付方式为空值 
2020-06-16 17:59:47.964 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:RH超出字典范围RH不在字典范围内（1 阴性 2 阳性 3 不详 ） 
2020-06-16 17:59:47.968 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-16 17:59:47.969 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 297847a88755417b8f62ce2d680ffb75(String), 2020-06-16 17:59:47.967(Timestamp), 31011310200312009116(String), 87e0e78866e8446a8bf91c5fd7880ddb(String), 2020-06-16 17:59:47.967(Timestamp), 31011310200312009116(String), 92dc5e8124ba4c5396a3fa7c3d1dd8db(String), 2020-06-16 17:59:47.967(Timestamp) 
2020-06-16 17:59:47.985 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 3 
2020-06-16 17:59:52.023 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-16 17:59:52.023 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 17:59:52.036 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-16 17:59:52.043 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-16 17:59:52.044 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 17:59:52.051 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-16 17:59:52.055 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-16 17:59:52.056 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-16 17:59:52.065 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 13 
2020-06-16 17:59:52.075 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-16 17:59:52.075 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:59:52.079 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-16 17:59:52.088 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 17:59:52.088 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:59:52.102 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 17:59:52.107 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-16 17:59:52.108 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-16 17:59:52.108 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 17:59:52.108 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:59:52.112 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-16 17:59:52.117 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 17:59:52.118 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:59:52.123 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-16 17:59:52.127 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 17:59:52.127 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:59:52.132 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-16 17:59:52.136 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 17:59:52.136 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:59:52.149 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 17:59:52.154 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-16 17:59:52.154 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-16 17:59:52.154 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 17:59:52.154 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:59:52.160 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-16 17:59:52.165 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 17:59:52.166 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:59:52.171 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-16 17:59:52.176 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 17:59:52.176 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:59:52.180 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-16 17:59:52.184 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-16 17:59:52.185 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:59:52.189 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-16 17:59:52.200 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:户籍地址长度异常长度>100字符（包含省市区、乡镇街道名称（如有）、村居委会名称（如有）、详细地址） 
2020-06-16 17:59:52.202 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:医疗费用支付方式未填写医疗费用支付方式为空值 
2020-06-16 17:59:52.203 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:RH超出字典范围RH不在字典范围内（1 阴性 2 阳性 3 不详 ） 
2020-06-16 17:59:52.205 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-16 17:59:52.206 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 329b69c7855544e986fc0073b77fe9be(String), 2020-06-16 17:59:52.205(Timestamp), 31011310200312009116(String), 87e0e78866e8446a8bf91c5fd7880ddb(String), 2020-06-16 17:59:52.205(Timestamp), 31011310200312009116(String), 92dc5e8124ba4c5396a3fa7c3d1dd8db(String), 2020-06-16 17:59:52.205(Timestamp) 
2020-06-16 17:59:52.234 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 3 
2020-06-16 17:59:55.777 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-16 17:59:55.778 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 17:59:55.786 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-16 17:59:55.794 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-16 17:59:55.794 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 17:59:55.802 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-16 17:59:55.810 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-16 17:59:55.810 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-16 17:59:55.817 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 13 
2020-06-16 17:59:55.825 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-16 17:59:55.826 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:59:55.833 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-16 17:59:55.841 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 17:59:55.842 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:59:55.849 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 17:59:55.856 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-16 17:59:55.857 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-16 17:59:55.857 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 17:59:55.858 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:59:55.870 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-16 17:59:55.876 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 17:59:55.877 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:59:55.884 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-16 17:59:55.891 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 17:59:55.892 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:59:55.900 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-16 17:59:55.907 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 17:59:55.908 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:59:55.924 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 17:59:55.931 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-16 17:59:55.931 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-16 17:59:55.932 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 17:59:55.932 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:59:55.942 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-16 17:59:55.950 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 17:59:55.950 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:59:55.958 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-16 17:59:55.966 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 17:59:55.966 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:59:55.974 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-16 17:59:55.981 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-16 17:59:55.982 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:59:55.989 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-16 17:59:56.011 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:医疗费用支付方式未填写医疗费用支付方式为空值 
2020-06-16 17:59:56.011 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:联系电话未填写联系电话为空值 
2020-06-16 17:59:56.012 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:RH超出字典范围RH不在字典范围内（1 阴性 2 阳性 3 不详 ） 
2020-06-16 17:59:56.025 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-16 17:59:56.026 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 87e0e78866e8446a8bf91c5fd7880ddb(String), 2020-06-16 17:59:56.024(Timestamp), 31011310200312009116(String), 8c22db3c92bb445b9712ca61107e8312(String), 2020-06-16 17:59:56.024(Timestamp), 31011310200312009116(String), 92dc5e8124ba4c5396a3fa7c3d1dd8db(String), 2020-06-16 17:59:56.024(Timestamp) 
2020-06-16 17:59:56.043 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 3 
2020-06-16 17:59:59.557 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-16 17:59:59.558 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 17:59:59.564 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-16 17:59:59.568 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-16 17:59:59.569 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 17:59:59.575 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-16 17:59:59.583 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-16 17:59:59.584 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-16 17:59:59.591 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 13 
2020-06-16 17:59:59.596 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-16 17:59:59.596 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:59:59.603 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-16 17:59:59.611 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 17:59:59.612 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:59:59.619 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 17:59:59.626 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-16 17:59:59.626 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-16 17:59:59.627 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 17:59:59.627 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:59:59.632 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-16 17:59:59.638 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 17:59:59.639 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:59:59.643 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-16 17:59:59.650 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 17:59:59.651 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:59:59.657 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-16 17:59:59.666 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 17:59:59.667 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:59:59.683 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 17:59:59.688 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-16 17:59:59.689 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-16 17:59:59.690 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 17:59:59.691 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:59:59.697 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-16 17:59:59.703 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 17:59:59.704 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 17:59:59.709 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-16 17:59:59.716 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 17:59:59.717 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:59:59.724 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-16 17:59:59.730 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-16 17:59:59.731 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 17:59:59.736 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-16 17:59:59.765 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:医疗费用支付方式未填写医疗费用支付方式为空值 
2020-06-16 17:59:59.766 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:RH超出字典范围RH不在字典范围内（1 阴性 2 阳性 3 不详 ） 
2020-06-16 17:59:59.769 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:联系电话手机号码长度异常同时满足以下条件： 1、联系电话不为空值 2、联系电话为手机号码（是1开头判断为手机号） 3、号码长度小于11位或大于11位 
2020-06-16 17:59:59.772 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-16 17:59:59.773 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 87e0e78866e8446a8bf91c5fd7880ddb(String), 2020-06-16 17:59:59.771(Timestamp), 31011310200312009116(String), 92dc5e8124ba4c5396a3fa7c3d1dd8db(String), 2020-06-16 17:59:59.771(Timestamp), 31011310200312009116(String), d07ab42169144816afe341ba43d0b68c(String), 2020-06-16 17:59:59.771(Timestamp) 
2020-06-16 17:59:59.788 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 3 
2020-06-16 18:00:03.260 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-16 18:00:03.260 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 18:00:03.265 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-16 18:00:03.270 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-16 18:00:03.271 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 18:00:03.278 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-16 18:00:03.283 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-16 18:00:03.283 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-16 18:00:03.288 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 13 
2020-06-16 18:00:03.293 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-16 18:00:03.293 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:00:03.298 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-16 18:00:03.302 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 18:00:03.303 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:00:03.309 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 18:00:03.312 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-16 18:00:03.313 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-16 18:00:03.313 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 18:00:03.313 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 18:00:03.318 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-16 18:00:03.322 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 18:00:03.322 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 18:00:03.326 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-16 18:00:03.331 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 18:00:03.331 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:00:03.336 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-16 18:00:03.340 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 18:00:03.341 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:00:03.356 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 18:00:03.360 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-16 18:00:03.360 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-16 18:00:03.361 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 18:00:03.361 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 18:00:03.366 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-16 18:00:03.371 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 18:00:03.371 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 18:00:03.376 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-16 18:00:03.381 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 18:00:03.381 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:00:03.385 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-16 18:00:03.390 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-16 18:00:03.390 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:00:03.394 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-16 18:00:03.409 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:手机号码校验失败同时满足以下条件： 1、联系电话不为空值 2、联系电话为手机号码（是1开头判断为手机号） 3、号码长度为11位，但是不存在这个号段（进行号段校验） 
2020-06-16 18:00:03.413 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:医疗费用支付方式未填写医疗费用支付方式为空值 
2020-06-16 18:00:03.413 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:RH超出字典范围RH不在字典范围内（1 阴性 2 阳性 3 不详 ） 
2020-06-16 18:00:03.417 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-16 18:00:03.418 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 18c8a8a81e25426f8a7958b46716c295(String), 2020-06-16 18:00:03.417(Timestamp), 31011310200312009116(String), 87e0e78866e8446a8bf91c5fd7880ddb(String), 2020-06-16 18:00:03.417(Timestamp), 31011310200312009116(String), 92dc5e8124ba4c5396a3fa7c3d1dd8db(String), 2020-06-16 18:00:03.417(Timestamp) 
2020-06-16 18:00:03.440 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 3 
2020-06-16 18:00:06.969 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-16 18:00:06.969 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 18:00:06.975 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-16 18:00:06.979 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-16 18:00:06.980 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 18:00:06.984 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-16 18:00:06.989 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-16 18:00:06.989 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-16 18:00:06.994 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 13 
2020-06-16 18:00:07.000 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-16 18:00:07.000 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:00:07.005 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-16 18:00:07.009 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 18:00:07.009 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:00:07.015 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 18:00:07.019 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-16 18:00:07.020 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-16 18:00:07.020 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 18:00:07.020 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 18:00:07.025 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-16 18:00:07.030 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 18:00:07.030 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 18:00:07.035 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-16 18:00:07.039 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 18:00:07.040 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:00:07.044 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-16 18:00:07.051 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 18:00:07.051 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:00:07.066 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 18:00:07.070 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-16 18:00:07.070 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-16 18:00:07.071 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 18:00:07.071 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 18:00:07.075 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-16 18:00:07.080 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 18:00:07.080 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 18:00:07.084 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-16 18:00:07.089 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 18:00:07.089 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:00:07.094 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-16 18:00:07.099 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-16 18:00:07.099 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:00:07.104 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-16 18:00:07.119 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:固定电话长度异常（含区号）同时满足以下条件： 1、联系电话不为空值 2、联系电话为固定电话（是0开头判断为固定电话） 3、号码长度小于11位或大于12位 
2020-06-16 18:00:07.121 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:医疗费用支付方式未填写医疗费用支付方式为空值 
2020-06-16 18:00:07.121 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:RH超出字典范围RH不在字典范围内（1 阴性 2 阳性 3 不详 ） 
2020-06-16 18:00:07.123 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-16 18:00:07.124 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 605d17cf2e38410da56726f765f8c34c(String), 2020-06-16 18:00:07.123(Timestamp), 31011310200312009116(String), 87e0e78866e8446a8bf91c5fd7880ddb(String), 2020-06-16 18:00:07.123(Timestamp), 31011310200312009116(String), 92dc5e8124ba4c5396a3fa7c3d1dd8db(String), 2020-06-16 18:00:07.123(Timestamp) 
2020-06-16 18:00:07.157 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 3 
2020-06-16 18:00:10.785 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-16 18:00:10.785 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 18:00:10.809 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-16 18:00:10.827 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-16 18:00:10.827 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 18:00:10.854 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-16 18:00:10.868 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-16 18:00:10.868 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-16 18:00:10.900 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 13 
2020-06-16 18:00:10.904 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-16 18:00:10.905 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:00:10.909 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-16 18:00:10.914 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 18:00:10.914 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:00:10.919 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 18:00:10.923 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-16 18:00:10.924 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-16 18:00:10.924 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 18:00:10.924 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 18:00:10.929 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-16 18:00:10.933 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 18:00:10.933 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 18:00:10.937 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-16 18:00:10.942 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 18:00:10.942 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:00:10.947 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-16 18:00:10.951 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 18:00:10.951 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:00:10.965 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 18:00:10.969 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-16 18:00:10.970 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-16 18:00:10.970 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 18:00:10.970 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 18:00:10.974 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-16 18:00:10.979 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 18:00:10.979 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 18:00:10.986 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-16 18:00:10.991 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 18:00:10.991 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:00:10.998 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-16 18:00:11.002 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-16 18:00:11.002 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:00:11.010 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-16 18:00:11.023 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:医疗费用支付方式未填写医疗费用支付方式为空值 
2020-06-16 18:00:11.024 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:RH超出字典范围RH不在字典范围内（1 阴性 2 阳性 3 不详 ） 
2020-06-16 18:00:11.025 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:固定电话长度异常（不含区号）同时满足以下条件： 1、联系电话不为空值 2、联系电话为固定电话（不是1和0开头判断为固定电话） 3、号码长度小于7位或大于8位 
2020-06-16 18:00:11.026 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-16 18:00:11.027 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 87e0e78866e8446a8bf91c5fd7880ddb(String), 2020-06-16 18:00:11.026(Timestamp), 31011310200312009116(String), 92dc5e8124ba4c5396a3fa7c3d1dd8db(String), 2020-06-16 18:00:11.026(Timestamp), 31011310200312009116(String), b0d2d6a11e4b476b813f99750cb00786(String), 2020-06-16 18:00:11.026(Timestamp) 
2020-06-16 18:00:11.183 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 3 
2020-06-16 18:00:14.802 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-16 18:00:14.803 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 18:00:14.809 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-16 18:00:14.814 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-16 18:00:14.814 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 18:00:14.819 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-16 18:00:14.825 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-16 18:00:14.826 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-16 18:00:14.833 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 13 
2020-06-16 18:00:14.838 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-16 18:00:14.839 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:00:14.845 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-16 18:00:14.849 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 18:00:14.850 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:00:14.855 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 18:00:14.860 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-16 18:00:14.860 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-16 18:00:14.861 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 18:00:14.861 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 18:00:14.865 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-16 18:00:14.870 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 18:00:14.871 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 18:00:14.875 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-16 18:00:14.879 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 18:00:14.880 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:00:14.884 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-16 18:00:14.888 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 18:00:14.888 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:00:14.903 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 18:00:14.906 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-16 18:00:14.907 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-16 18:00:14.907 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 18:00:14.907 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 18:00:14.911 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-16 18:00:14.915 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 18:00:14.916 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 18:00:14.921 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-16 18:00:14.925 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 18:00:14.925 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:00:14.929 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-16 18:00:14.935 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-16 18:00:14.936 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:00:14.941 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-16 18:00:14.958 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:医疗费用支付方式未填写医疗费用支付方式为空值 
2020-06-16 18:00:14.959 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:RH超出字典范围RH不在字典范围内（1 阴性 2 阳性 3 不详 ） 
2020-06-16 18:00:14.961 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:联系电话不为纯数字同时满足以下条件： 1、联系电话不为空值 2、联系电话不是纯数字 
2020-06-16 18:00:14.963 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-16 18:00:14.964 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 87e0e78866e8446a8bf91c5fd7880ddb(String), 2020-06-16 18:00:14.963(Timestamp), 31011310200312009116(String), 92dc5e8124ba4c5396a3fa7c3d1dd8db(String), 2020-06-16 18:00:14.963(Timestamp), 31011310200312009116(String), db6607db218b4182924b980ecb900b19(String), 2020-06-16 18:00:14.963(Timestamp) 
2020-06-16 18:00:14.990 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 3 
2020-06-16 18:00:18.429 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-16 18:00:18.429 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 18:00:18.434 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-16 18:00:18.438 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-16 18:00:18.438 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 18:00:18.443 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-16 18:00:18.447 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-16 18:00:18.448 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-16 18:00:18.452 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 13 
2020-06-16 18:00:18.457 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-16 18:00:18.457 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:00:18.462 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-16 18:00:18.466 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 18:00:18.467 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:00:18.474 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 18:00:18.478 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-16 18:00:18.479 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-16 18:00:18.479 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 18:00:18.479 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 18:00:18.487 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-16 18:00:18.492 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 18:00:18.492 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 18:00:18.496 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-16 18:00:18.501 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 18:00:18.501 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:00:18.506 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-16 18:00:18.510 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 18:00:18.511 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:00:18.524 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 18:00:18.529 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-16 18:00:18.530 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-16 18:00:18.530 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 18:00:18.530 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 18:00:18.535 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-16 18:00:18.541 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 18:00:18.542 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 18:00:18.546 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-16 18:00:18.552 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 18:00:18.552 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:00:18.559 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-16 18:00:18.565 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-16 18:00:18.566 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:00:18.572 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-16 18:00:18.588 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:联系电话不为纯数字同时满足以下条件： 1、联系电话不为空值 2、联系电话数字只包含一个数字，如99999999 
2020-06-16 18:00:18.590 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:医疗费用支付方式未填写医疗费用支付方式为空值 
2020-06-16 18:00:18.591 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:RH超出字典范围RH不在字典范围内（1 阴性 2 阳性 3 不详 ） 
2020-06-16 18:00:18.591 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:固定电话长度异常（不含区号）同时满足以下条件： 1、联系电话不为空值 2、联系电话为固定电话（不是1和0开头判断为固定电话） 3、号码长度小于7位或大于8位 
2020-06-16 18:00:18.594 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-16 18:00:18.594 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 2be6482767e14818889eee74b5263746(String), 2020-06-16 18:00:18.593(Timestamp), 31011310200312009116(String), 87e0e78866e8446a8bf91c5fd7880ddb(String), 2020-06-16 18:00:18.593(Timestamp), 31011310200312009116(String), 92dc5e8124ba4c5396a3fa7c3d1dd8db(String), 2020-06-16 18:00:18.593(Timestamp), 31011310200312009116(String), b0d2d6a11e4b476b813f99750cb00786(String), 2020-06-16 18:00:18.593(Timestamp) 
2020-06-16 18:00:18.623 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 4 
2020-06-16 18:00:23.704 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-16 18:00:23.704 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 18:00:23.709 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-16 18:00:23.716 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-16 18:00:23.716 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 18:00:23.721 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-16 18:00:23.725 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-16 18:00:23.725 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-16 18:00:23.730 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 13 
2020-06-16 18:00:23.734 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-16 18:00:23.735 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:00:23.740 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-16 18:00:23.744 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 18:00:23.744 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:00:23.751 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 18:00:23.755 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-16 18:00:23.756 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-16 18:00:23.756 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 18:00:23.757 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 18:00:23.763 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-16 18:00:23.768 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 18:00:23.769 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 18:00:23.773 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-16 18:00:23.777 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 18:00:23.778 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:00:23.782 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-16 18:00:23.787 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 18:00:23.787 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:00:23.802 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 18:00:23.806 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-16 18:00:23.806 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-16 18:00:23.807 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 18:00:23.807 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 18:00:23.812 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-16 18:00:23.816 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 18:00:23.817 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 18:00:23.821 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-16 18:00:23.824 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 18:00:23.825 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:00:23.829 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-16 18:00:23.833 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-16 18:00:23.834 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:00:23.838 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-16 18:00:23.851 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:现住址市乡镇（街道）名称未填写乡镇（街道）名称为空值 
2020-06-16 18:00:23.852 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:医疗费用支付方式未填写医疗费用支付方式为空值 
2020-06-16 18:00:23.853 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:RH超出字典范围RH不在字典范围内（1 阴性 2 阳性 3 不详 ） 
2020-06-16 18:00:23.856 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-16 18:00:23.856 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 5989fb6d82aa4e618e2e5cdc2c36e01f(String), 2020-06-16 18:00:23.855(Timestamp), 31011310200312009116(String), 87e0e78866e8446a8bf91c5fd7880ddb(String), 2020-06-16 18:00:23.855(Timestamp), 31011310200312009116(String), 92dc5e8124ba4c5396a3fa7c3d1dd8db(String), 2020-06-16 18:00:23.855(Timestamp) 
2020-06-16 18:00:23.880 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 3 
2020-06-16 18:00:27.329 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-16 18:00:27.330 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 18:00:27.335 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-16 18:00:27.339 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-16 18:00:27.340 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 18:00:27.344 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-16 18:00:27.348 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-16 18:00:27.348 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-16 18:00:27.352 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 13 
2020-06-16 18:00:27.358 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-16 18:00:27.359 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:00:27.363 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-16 18:00:27.366 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 18:00:27.367 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:00:27.371 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 18:00:27.375 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-16 18:00:27.375 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-16 18:00:27.376 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 18:00:27.376 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 18:00:27.380 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-16 18:00:27.385 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 18:00:27.385 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 18:00:27.389 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-16 18:00:27.394 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 18:00:27.394 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:00:27.400 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-16 18:00:27.404 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 18:00:27.405 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:00:27.419 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 18:00:27.423 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-16 18:00:27.423 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-16 18:00:27.424 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 18:00:27.425 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 18:00:27.429 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-16 18:00:27.433 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 18:00:27.434 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 18:00:27.438 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-16 18:00:27.442 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 18:00:27.442 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:00:27.446 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-16 18:00:27.450 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-16 18:00:27.451 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:00:27.455 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-16 18:00:27.468 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:现住址乡镇（街道）名称不为汉字乡镇（街道）名称不为汉字 
2020-06-16 18:00:27.471 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:医疗费用支付方式未填写医疗费用支付方式为空值 
2020-06-16 18:00:27.472 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:RH超出字典范围RH不在字典范围内（1 阴性 2 阳性 3 不详 ） 
2020-06-16 18:00:27.476 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-16 18:00:27.476 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 2519a198f15a41ea970cf518d3c4bd89(String), 2020-06-16 18:00:27.475(Timestamp), 31011310200312009116(String), 87e0e78866e8446a8bf91c5fd7880ddb(String), 2020-06-16 18:00:27.475(Timestamp), 31011310200312009116(String), 92dc5e8124ba4c5396a3fa7c3d1dd8db(String), 2020-06-16 18:00:27.475(Timestamp) 
2020-06-16 18:00:27.521 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 3 
2020-06-16 18:00:31.367 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-16 18:00:31.368 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 18:00:31.374 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-16 18:00:31.378 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-16 18:00:31.379 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 18:00:31.384 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-16 18:00:31.390 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-16 18:00:31.391 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-16 18:00:31.396 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 13 
2020-06-16 18:00:31.402 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-16 18:00:31.403 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:00:31.408 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-16 18:00:31.413 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 18:00:31.414 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:00:31.421 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 18:00:31.426 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-16 18:00:31.427 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-16 18:00:31.428 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 18:00:31.428 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 18:00:31.433 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-16 18:00:31.438 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 18:00:31.439 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 18:00:31.446 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-16 18:00:31.452 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 18:00:31.453 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:00:31.457 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-16 18:00:31.462 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 18:00:31.463 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:00:31.478 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 18:00:31.482 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-16 18:00:31.483 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-16 18:00:31.484 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 18:00:31.485 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 18:00:31.490 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-16 18:00:31.496 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 18:00:31.497 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 18:00:31.504 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-16 18:00:31.508 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 18:00:31.509 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:00:31.513 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-16 18:00:31.518 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-16 18:00:31.519 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:00:31.524 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-16 18:00:31.544 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:现住址乡镇（街道）名称长度异常长度>100字符 
2020-06-16 18:00:31.548 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:医疗费用支付方式未填写医疗费用支付方式为空值 
2020-06-16 18:00:31.549 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:现住址长度异常长度>100字符（包含省市区、乡镇街道名称（如有）、村居委会名称（如有）、详细地址） 
2020-06-16 18:00:31.549 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:RH超出字典范围RH不在字典范围内（1 阴性 2 阳性 3 不详 ） 
2020-06-16 18:00:31.555 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-16 18:00:31.555 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 40c92f3721704bb7a6eb42a8ca1976b6(String), 2020-06-16 18:00:31.554(Timestamp), 31011310200312009116(String), 87e0e78866e8446a8bf91c5fd7880ddb(String), 2020-06-16 18:00:31.554(Timestamp), 31011310200312009116(String), 91665e0b2efa4f86aea807ec9f4883c3(String), 2020-06-16 18:00:31.554(Timestamp), 31011310200312009116(String), 92dc5e8124ba4c5396a3fa7c3d1dd8db(String), 2020-06-16 18:00:31.554(Timestamp) 
2020-06-16 18:00:31.588 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 4 
2020-06-16 18:00:35.144 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-16 18:00:35.144 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 18:00:35.151 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-16 18:00:35.155 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-16 18:00:35.156 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 18:00:35.160 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-16 18:00:35.165 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-16 18:00:35.166 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-16 18:00:35.170 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 13 
2020-06-16 18:00:35.176 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-16 18:00:35.177 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:00:35.181 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-16 18:00:35.185 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 18:00:35.186 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:00:35.192 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 18:00:35.196 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-16 18:00:35.197 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-16 18:00:35.198 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 18:00:35.199 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 18:00:35.204 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-16 18:00:35.209 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 18:00:35.210 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 18:00:35.217 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-16 18:00:35.222 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 18:00:35.222 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:00:35.228 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-16 18:00:35.233 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 18:00:35.234 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:00:35.248 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 18:00:35.253 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-16 18:00:35.254 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-16 18:00:35.255 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 18:00:35.256 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 18:00:35.260 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-16 18:00:35.265 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 18:00:35.266 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 18:00:35.271 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-16 18:00:35.276 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 18:00:35.277 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:00:35.283 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-16 18:00:35.288 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-16 18:00:35.289 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:00:35.295 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-16 18:00:35.322 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:现住址村（居）委会名称未填写村（居）委会名称为空值 
2020-06-16 18:00:35.325 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:医疗费用支付方式未填写医疗费用支付方式为空值 
2020-06-16 18:00:35.326 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:RH超出字典范围RH不在字典范围内（1 阴性 2 阳性 3 不详 ） 
2020-06-16 18:00:35.333 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-16 18:00:35.334 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 647ba5f94d274d04955478e4c7e9a593(String), 2020-06-16 18:00:35.332(Timestamp), 31011310200312009116(String), 87e0e78866e8446a8bf91c5fd7880ddb(String), 2020-06-16 18:00:35.332(Timestamp), 31011310200312009116(String), 92dc5e8124ba4c5396a3fa7c3d1dd8db(String), 2020-06-16 18:00:35.332(Timestamp) 
2020-06-16 18:00:35.361 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 3 
2020-06-16 18:00:39.279 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-16 18:00:39.279 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 18:00:39.297 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-16 18:00:39.301 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-16 18:00:39.302 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 18:00:39.306 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-16 18:00:39.311 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-16 18:00:39.311 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-16 18:00:39.316 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 13 
2020-06-16 18:00:39.321 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-16 18:00:39.322 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:00:39.327 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-16 18:00:39.334 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 18:00:39.336 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:00:39.342 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 18:00:39.346 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-16 18:00:39.346 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-16 18:00:39.347 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 18:00:39.348 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 18:00:39.352 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-16 18:00:39.356 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 18:00:39.357 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 18:00:39.364 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-16 18:00:39.376 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 18:00:39.377 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:00:39.384 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-16 18:00:39.388 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 18:00:39.389 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:00:39.403 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 18:00:39.409 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-16 18:00:39.409 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-16 18:00:39.409 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 18:00:39.410 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 18:00:39.413 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-16 18:00:39.418 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 18:00:39.418 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 18:00:39.423 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-16 18:00:39.426 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 18:00:39.427 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:00:39.431 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-16 18:00:39.436 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-16 18:00:39.436 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:00:39.441 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-16 18:00:39.459 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:医疗费用支付方式未填写医疗费用支付方式为空值 
2020-06-16 18:00:39.460 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:RH超出字典范围RH不在字典范围内（1 阴性 2 阳性 3 不详 ） 
2020-06-16 18:00:39.461 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:现住址村（居）委会名称不为汉字村（居）委会名称不为汉字 
2020-06-16 18:00:39.464 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-16 18:00:39.464 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 87e0e78866e8446a8bf91c5fd7880ddb(String), 2020-06-16 18:00:39.463(Timestamp), 31011310200312009116(String), 92dc5e8124ba4c5396a3fa7c3d1dd8db(String), 2020-06-16 18:00:39.463(Timestamp), 31011310200312009116(String), ac0fdca3fa96484680d8a0871d00eb3b(String), 2020-06-16 18:00:39.463(Timestamp) 
2020-06-16 18:00:39.479 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 3 
2020-06-16 18:00:42.990 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-16 18:00:42.990 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 18:00:42.995 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-16 18:00:42.999 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-16 18:00:42.999 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 18:00:43.005 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-16 18:00:43.010 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-16 18:00:43.011 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-16 18:00:43.015 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 13 
2020-06-16 18:00:43.020 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-16 18:00:43.021 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:00:43.025 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-16 18:00:43.030 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 18:00:43.030 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:00:43.036 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 18:00:43.041 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-16 18:00:43.041 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-16 18:00:43.042 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 18:00:43.042 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 18:00:43.046 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-16 18:00:43.051 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 18:00:43.051 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 18:00:43.055 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-16 18:00:43.059 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 18:00:43.060 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:00:43.064 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-16 18:00:43.069 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 18:00:43.069 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:00:43.082 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 18:00:43.087 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-16 18:00:43.087 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-16 18:00:43.088 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 18:00:43.088 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 18:00:43.092 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-16 18:00:43.097 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 18:00:43.097 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 18:00:43.101 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-16 18:00:43.105 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 18:00:43.106 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:00:43.110 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-16 18:00:43.114 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-16 18:00:43.114 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:00:43.118 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-16 18:00:43.132 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:医疗费用支付方式未填写医疗费用支付方式为空值 
2020-06-16 18:00:43.133 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:现住址长度异常长度>100字符（包含省市区、乡镇街道名称（如有）、村居委会名称（如有）、详细地址） 
2020-06-16 18:00:43.133 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:RH超出字典范围RH不在字典范围内（1 阴性 2 阳性 3 不详 ） 
2020-06-16 18:00:43.133 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:现住址村（居）委会名称长度异常长度>100字符 
2020-06-16 18:00:43.136 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-16 18:00:43.136 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 87e0e78866e8446a8bf91c5fd7880ddb(String), 2020-06-16 18:00:43.135(Timestamp), 31011310200312009116(String), 91665e0b2efa4f86aea807ec9f4883c3(String), 2020-06-16 18:00:43.135(Timestamp), 31011310200312009116(String), 92dc5e8124ba4c5396a3fa7c3d1dd8db(String), 2020-06-16 18:00:43.135(Timestamp), 31011310200312009116(String), 9df07515be3d4c2887e947c6ce5adace(String), 2020-06-16 18:00:43.135(Timestamp) 
2020-06-16 18:00:43.152 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 4 
2020-06-16 18:00:46.696 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-16 18:00:46.696 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 18:00:46.701 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-16 18:00:46.705 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-16 18:00:46.705 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 18:00:46.711 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-16 18:00:46.714 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-16 18:00:46.715 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-16 18:00:46.719 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 13 
2020-06-16 18:00:46.723 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-16 18:00:46.724 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:00:46.727 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-16 18:00:46.732 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 18:00:46.732 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:00:46.737 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 18:00:46.741 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-16 18:00:46.742 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-16 18:00:46.742 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 18:00:46.742 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 18:00:46.745 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-16 18:00:46.750 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 18:00:46.751 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 18:00:46.754 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-16 18:00:46.759 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 18:00:46.760 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:00:46.764 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-16 18:00:46.768 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 18:00:46.769 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:00:46.782 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 18:00:46.787 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-16 18:00:46.787 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-16 18:00:46.787 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 18:00:46.787 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 18:00:46.792 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-16 18:00:46.796 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 18:00:46.797 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 18:00:46.801 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-16 18:00:46.804 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 18:00:46.805 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:00:46.810 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-16 18:00:46.814 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-16 18:00:46.814 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:00:46.818 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-16 18:00:46.833 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:医疗费用支付方式未填写医疗费用支付方式为空值 
2020-06-16 18:00:46.833 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:RH超出字典范围RH不在字典范围内（1 阴性 2 阳性 3 不详 ） 
2020-06-16 18:00:46.834 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:建档单位未填写建档单位为空值 
2020-06-16 18:00:46.836 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-16 18:00:46.836 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 87e0e78866e8446a8bf91c5fd7880ddb(String), 2020-06-16 18:00:46.835(Timestamp), 31011310200312009116(String), 92dc5e8124ba4c5396a3fa7c3d1dd8db(String), 2020-06-16 18:00:46.835(Timestamp), 31011310200312009116(String), c2d756b07b7540e79209ad532c666dfc(String), 2020-06-16 18:00:46.835(Timestamp) 
2020-06-16 18:00:46.853 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 3 
2020-06-16 18:00:50.627 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-16 18:00:50.627 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 18:00:50.642 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-16 18:00:50.646 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-16 18:00:50.646 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 18:00:50.650 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-16 18:00:50.654 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-16 18:00:50.654 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-16 18:00:50.659 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 13 
2020-06-16 18:00:50.663 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-16 18:00:50.663 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:00:50.668 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-16 18:00:50.672 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 18:00:50.672 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:00:50.678 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 18:00:50.685 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-16 18:00:50.685 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-16 18:00:50.685 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 18:00:50.686 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 18:00:50.690 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-16 18:00:50.694 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 18:00:50.694 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 18:00:50.698 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-16 18:00:50.703 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 18:00:50.703 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:00:50.707 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-16 18:00:50.712 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 18:00:50.712 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:00:50.725 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 18:00:50.729 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-16 18:00:50.730 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-16 18:00:50.730 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 18:00:50.730 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 18:00:50.734 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-16 18:00:50.739 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 18:00:50.739 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 18:00:50.743 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-16 18:00:50.748 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 18:00:50.748 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:00:50.754 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-16 18:00:50.758 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-16 18:00:50.758 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:00:50.762 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-16 18:00:50.775 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:建档单位长度异常长度>100字符 
2020-06-16 18:00:50.777 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:医疗费用支付方式未填写医疗费用支付方式为空值 
2020-06-16 18:00:50.777 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:RH超出字典范围RH不在字典范围内（1 阴性 2 阳性 3 不详 ） 
2020-06-16 18:00:50.781 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-16 18:00:50.781 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 403a97f9ec40406b9723b3c6845a6cee(String), 2020-06-16 18:00:50.78(Timestamp), 31011310200312009116(String), 87e0e78866e8446a8bf91c5fd7880ddb(String), 2020-06-16 18:00:50.78(Timestamp), 31011310200312009116(String), 92dc5e8124ba4c5396a3fa7c3d1dd8db(String), 2020-06-16 18:00:50.78(Timestamp) 
2020-06-16 18:00:50.799 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 3 
2020-06-16 18:00:54.413 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-16 18:00:54.413 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 18:00:54.418 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-16 18:00:54.422 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-16 18:00:54.423 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 18:00:54.427 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-16 18:00:54.434 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-16 18:00:54.435 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-16 18:00:54.439 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 13 
2020-06-16 18:00:54.443 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-16 18:00:54.443 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:00:54.447 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-16 18:00:54.451 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 18:00:54.452 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:00:54.457 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 18:00:54.462 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-16 18:00:54.462 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-16 18:00:54.462 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 18:00:54.463 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 18:00:54.467 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-16 18:00:54.472 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 18:00:54.472 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 18:00:54.477 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-16 18:00:54.481 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 18:00:54.482 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:00:54.487 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-16 18:00:54.491 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 18:00:54.492 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:00:54.505 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 18:00:54.509 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-16 18:00:54.509 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-16 18:00:54.509 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 18:00:54.509 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 18:00:54.513 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-16 18:00:54.517 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 18:00:54.517 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 18:00:54.522 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-16 18:00:54.526 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 18:00:54.527 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:00:54.532 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-16 18:00:54.537 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-16 18:00:54.538 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:00:54.542 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-16 18:00:54.557 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:医疗费用支付方式未填写医疗费用支付方式为空值 
2020-06-16 18:00:54.557 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:RH超出字典范围RH不在字典范围内（1 阴性 2 阳性 3 不详 ） 
2020-06-16 18:00:54.558 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:建档人未填写建档人为空值 
2020-06-16 18:00:54.560 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-16 18:00:54.561 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 87e0e78866e8446a8bf91c5fd7880ddb(String), 2020-06-16 18:00:54.56(Timestamp), 31011310200312009116(String), 92dc5e8124ba4c5396a3fa7c3d1dd8db(String), 2020-06-16 18:00:54.56(Timestamp), 31011310200312009116(String), b36febf99ee24323a59f6e04c22ce60d(String), 2020-06-16 18:00:54.56(Timestamp) 
2020-06-16 18:00:54.582 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 3 
2020-06-16 18:00:58.264 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-16 18:00:58.264 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 18:00:58.269 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-16 18:00:58.273 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-16 18:00:58.274 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 18:00:58.279 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-16 18:00:58.283 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-16 18:00:58.284 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-16 18:00:58.289 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 13 
2020-06-16 18:00:58.292 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-16 18:00:58.293 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:00:58.297 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-16 18:00:58.301 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 18:00:58.302 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:00:58.308 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 18:00:58.312 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-16 18:00:58.312 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-16 18:00:58.313 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 18:00:58.313 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 18:00:58.317 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-16 18:00:58.321 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 18:00:58.322 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 18:00:58.326 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-16 18:00:58.330 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 18:00:58.331 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:00:58.335 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-16 18:00:58.338 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 18:00:58.339 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:00:58.352 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 18:00:58.357 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-16 18:00:58.357 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-16 18:00:58.358 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 18:00:58.358 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 18:00:58.363 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-16 18:00:58.368 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 18:00:58.368 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 18:00:58.377 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-16 18:00:58.384 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 18:00:58.385 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:00:58.389 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-16 18:00:58.394 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-16 18:00:58.395 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:00:58.400 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-16 18:00:58.416 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:医疗费用支付方式未填写医疗费用支付方式为空值 
2020-06-16 18:00:58.417 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:RH超出字典范围RH不在字典范围内（1 阴性 2 阳性 3 不详 ） 
2020-06-16 18:00:58.420 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-16 18:00:58.420 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 87e0e78866e8446a8bf91c5fd7880ddb(String), 2020-06-16 18:00:58.42(Timestamp), 31011310200312009116(String), 92dc5e8124ba4c5396a3fa7c3d1dd8db(String), 2020-06-16 18:00:58.42(Timestamp) 
2020-06-16 18:00:58.457 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 2 
2020-06-16 18:01:02.062 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-16 18:01:02.063 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 18:01:02.067 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-16 18:01:02.071 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-16 18:01:02.072 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 18:01:02.078 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-16 18:01:02.084 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-16 18:01:02.084 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-16 18:01:02.090 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 13 
2020-06-16 18:01:02.094 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-16 18:01:02.095 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:01:02.100 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-16 18:01:02.104 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 18:01:02.104 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:01:02.111 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 18:01:02.115 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-16 18:01:02.115 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-16 18:01:02.116 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 18:01:02.116 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 18:01:02.120 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-16 18:01:02.124 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 18:01:02.124 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 18:01:02.128 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-16 18:01:02.133 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 18:01:02.133 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:01:02.137 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-16 18:01:02.141 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 18:01:02.142 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:01:02.155 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 18:01:02.161 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-16 18:01:02.161 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-16 18:01:02.161 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 18:01:02.161 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 18:01:02.166 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-16 18:01:02.170 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 18:01:02.170 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 18:01:02.175 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-16 18:01:02.179 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 18:01:02.179 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:01:02.184 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-16 18:01:02.188 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-16 18:01:02.188 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:01:02.193 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-16 18:01:02.210 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:责任医生未填写责任医生为空值 
2020-06-16 18:01:02.210 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:医疗费用支付方式未填写医疗费用支付方式为空值 
2020-06-16 18:01:02.211 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:RH超出字典范围RH不在字典范围内（1 阴性 2 阳性 3 不详 ） 
2020-06-16 18:01:02.214 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-16 18:01:02.214 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 79a8c8c64d3b49bf99e573cacf2d5cfc(String), 2020-06-16 18:01:02.213(Timestamp), 31011310200312009116(String), 87e0e78866e8446a8bf91c5fd7880ddb(String), 2020-06-16 18:01:02.213(Timestamp), 31011310200312009116(String), 92dc5e8124ba4c5396a3fa7c3d1dd8db(String), 2020-06-16 18:01:02.213(Timestamp) 
2020-06-16 18:01:02.224 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 3 
2020-06-16 18:01:05.845 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-16 18:01:05.846 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 18:01:05.851 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-16 18:01:05.854 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-16 18:01:05.855 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 18:01:05.858 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-16 18:01:05.863 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-16 18:01:05.864 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-16 18:01:05.868 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 13 
2020-06-16 18:01:05.872 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-16 18:01:05.872 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:01:05.878 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-16 18:01:05.882 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 18:01:05.882 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:01:05.887 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 18:01:05.892 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-16 18:01:05.892 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-16 18:01:05.893 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 18:01:05.893 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 18:01:05.899 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-16 18:01:05.903 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 18:01:05.903 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 18:01:05.907 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-16 18:01:05.911 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 18:01:05.912 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:01:05.916 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-16 18:01:05.920 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 18:01:05.920 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:01:05.935 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 18:01:05.939 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-16 18:01:05.939 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-16 18:01:05.939 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 18:01:05.940 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 18:01:05.945 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-16 18:01:05.950 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 18:01:05.950 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 18:01:05.956 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-16 18:01:05.960 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 18:01:05.960 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:01:05.965 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-16 18:01:05.969 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-16 18:01:05.969 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:01:05.975 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-16 18:01:05.990 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:医疗费用支付方式未填写医疗费用支付方式为空值 
2020-06-16 18:01:05.990 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:责任医生长度异常长度>50字符 
2020-06-16 18:01:05.994 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:RH超出字典范围RH不在字典范围内（1 阴性 2 阳性 3 不详 ） 
2020-06-16 18:01:05.996 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-16 18:01:05.997 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 87e0e78866e8446a8bf91c5fd7880ddb(String), 2020-06-16 18:01:05.996(Timestamp), 31011310200312009116(String), 9042bba97fb74b558de96e35ab2ffdc2(String), 2020-06-16 18:01:05.996(Timestamp), 31011310200312009116(String), 92dc5e8124ba4c5396a3fa7c3d1dd8db(String), 2020-06-16 18:01:05.996(Timestamp) 
2020-06-16 18:01:06.022 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 3 
2020-06-16 18:01:09.811 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-16 18:01:09.812 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 18:01:09.817 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-16 18:01:09.823 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-16 18:01:09.824 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 18:01:09.831 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-16 18:01:09.835 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-16 18:01:09.835 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-16 18:01:09.839 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 13 
2020-06-16 18:01:09.843 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-16 18:01:09.844 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:01:09.847 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-16 18:01:09.851 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 18:01:09.851 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:01:09.856 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 18:01:09.860 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-16 18:01:09.861 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-16 18:01:09.861 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 18:01:09.861 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 18:01:09.865 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-16 18:01:09.869 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 18:01:09.869 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 18:01:09.873 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-16 18:01:09.877 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 18:01:09.878 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:01:09.882 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-16 18:01:09.886 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 18:01:09.886 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:01:09.900 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 18:01:09.904 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-16 18:01:09.904 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-16 18:01:09.904 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 18:01:09.905 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 18:01:09.909 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-16 18:01:09.913 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 18:01:09.913 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 18:01:09.917 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-16 18:01:09.921 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 18:01:09.921 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:01:09.926 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-16 18:01:09.930 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-16 18:01:09.932 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:01:09.938 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-16 18:01:09.949 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:建档日期未填写建档日期为空值 
2020-06-16 18:01:09.951 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:医疗费用支付方式未填写医疗费用支付方式为空值 
2020-06-16 18:01:09.951 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:RH超出字典范围RH不在字典范围内（1 阴性 2 阳性 3 不详 ） 
2020-06-16 18:01:09.953 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-16 18:01:09.954 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 354eecdb40b24830ade601d368aa8e01(String), 2020-06-16 18:01:09.953(Timestamp), 31011310200312009116(String), 87e0e78866e8446a8bf91c5fd7880ddb(String), 2020-06-16 18:01:09.953(Timestamp), 31011310200312009116(String), 92dc5e8124ba4c5396a3fa7c3d1dd8db(String), 2020-06-16 18:01:09.953(Timestamp) 
2020-06-16 18:01:10.005 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 3 
2020-06-16 18:01:13.987 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-16 18:01:13.987 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 18:01:13.992 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-16 18:01:13.996 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-16 18:01:13.996 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 18:01:14.001 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-16 18:01:14.006 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-16 18:01:14.009 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-16 18:01:14.020 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 13 
2020-06-16 18:01:14.023 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-16 18:01:14.024 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:01:14.029 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-16 18:01:14.035 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 18:01:14.035 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:01:14.040 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 18:01:14.043 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-16 18:01:14.044 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-16 18:01:14.044 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 18:01:14.044 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 18:01:14.048 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-16 18:01:14.052 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 18:01:14.053 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 18:01:14.060 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-16 18:01:14.064 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 18:01:14.065 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:01:14.069 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-16 18:01:14.073 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 18:01:14.074 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:01:14.087 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 18:01:14.091 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-16 18:01:14.091 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-16 18:01:14.092 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 18:01:14.092 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 18:01:14.098 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-16 18:01:14.103 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 18:01:14.104 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 18:01:14.109 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-16 18:01:14.113 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 18:01:14.114 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:01:14.118 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-16 18:01:14.123 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-16 18:01:14.123 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:01:14.128 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-16 18:01:14.142 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:医疗费用支付方式未填写医疗费用支付方式为空值 
2020-06-16 18:01:14.143 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:RH超出字典范围RH不在字典范围内（1 阴性 2 阳性 3 不详 ） 
2020-06-16 18:01:14.145 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:个人基本信息表性别性别为空值 
2020-06-16 18:01:14.146 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-16 18:01:14.147 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 87e0e78866e8446a8bf91c5fd7880ddb(String), 2020-06-16 18:01:14.146(Timestamp), 31011310200312009116(String), 92dc5e8124ba4c5396a3fa7c3d1dd8db(String), 2020-06-16 18:01:14.146(Timestamp), 31011310200312009116(String), f43cf10e3bcf44078cabcd8d790c8ea2(String), 2020-06-16 18:01:14.146(Timestamp) 
2020-06-16 18:01:14.171 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 3 
2020-06-16 18:01:18.013 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-16 18:01:18.013 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 18:01:18.025 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-16 18:01:18.029 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-16 18:01:18.030 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 18:01:18.035 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-16 18:01:18.039 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-16 18:01:18.040 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-16 18:01:18.044 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 13 
2020-06-16 18:01:18.048 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-16 18:01:18.049 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:01:18.052 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-16 18:01:18.056 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 18:01:18.057 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:01:18.062 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 18:01:18.066 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-16 18:01:18.066 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-16 18:01:18.066 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 18:01:18.067 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 18:01:18.072 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-16 18:01:18.076 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 18:01:18.077 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 18:01:18.081 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-16 18:01:18.085 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 18:01:18.086 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:01:18.090 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-16 18:01:18.094 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 18:01:18.095 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:01:18.108 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 18:01:18.111 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-16 18:01:18.112 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-16 18:01:18.112 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 18:01:18.113 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 18:01:18.117 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-16 18:01:18.122 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 18:01:18.122 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 18:01:18.127 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-16 18:01:18.132 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 18:01:18.132 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:01:18.137 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-16 18:01:18.141 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-16 18:01:18.142 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:01:18.147 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-16 18:01:18.160 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:个人基本信息表性别不属于性别字典范围（1 男 2 女 9 未说明的性别 0 未知的性别） 
2020-06-16 18:01:18.162 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:医疗费用支付方式未填写医疗费用支付方式为空值 
2020-06-16 18:01:18.162 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:个人基本信息表性别性别与身份证号不一致 
2020-06-16 18:01:18.162 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:RH超出字典范围RH不在字典范围内（1 阴性 2 阳性 3 不详 ） 
2020-06-16 18:01:18.165 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-16 18:01:18.165 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 34278f71cf1d42c88158aaf637fa5203(String), 2020-06-16 18:01:18.165(Timestamp), 31011310200312009116(String), 87e0e78866e8446a8bf91c5fd7880ddb(String), 2020-06-16 18:01:18.165(Timestamp), 31011310200312009116(String), 8d30baa03bfc4233a8f115c57a0ebf08(String), 2020-06-16 18:01:18.165(Timestamp), 31011310200312009116(String), 92dc5e8124ba4c5396a3fa7c3d1dd8db(String), 2020-06-16 18:01:18.165(Timestamp) 
2020-06-16 18:01:18.188 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 4 
2020-06-16 18:01:21.770 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-16 18:01:21.770 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 18:01:21.777 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-16 18:01:21.782 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-16 18:01:21.782 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 18:01:21.788 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-16 18:01:21.792 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-16 18:01:21.792 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-16 18:01:21.796 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 13 
2020-06-16 18:01:21.801 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-16 18:01:21.801 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:01:21.805 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-16 18:01:21.809 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 18:01:21.810 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:01:21.815 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 18:01:21.820 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-16 18:01:21.820 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-16 18:01:21.820 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 18:01:21.820 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 18:01:21.825 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-16 18:01:21.829 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 18:01:21.829 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 18:01:21.834 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-16 18:01:21.838 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 18:01:21.839 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:01:21.843 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-16 18:01:21.847 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 18:01:21.848 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:01:21.862 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 18:01:21.866 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-16 18:01:21.866 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-16 18:01:21.866 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 18:01:21.867 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 18:01:21.872 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-16 18:01:21.876 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 18:01:21.877 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 18:01:21.881 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-16 18:01:21.885 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 18:01:21.886 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:01:21.890 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-16 18:01:21.895 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-16 18:01:21.895 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:01:21.899 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-16 18:01:21.913 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:医疗费用支付方式未填写医疗费用支付方式为空值 
2020-06-16 18:01:21.913 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:个人基本信息表性别性别与身份证号不一致 
2020-06-16 18:01:21.914 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:RH超出字典范围RH不在字典范围内（1 阴性 2 阳性 3 不详 ） 
2020-06-16 18:01:21.916 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-16 18:01:21.916 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 87e0e78866e8446a8bf91c5fd7880ddb(String), 2020-06-16 18:01:21.916(Timestamp), 31011310200312009116(String), 8d30baa03bfc4233a8f115c57a0ebf08(String), 2020-06-16 18:01:21.916(Timestamp), 31011310200312009116(String), 92dc5e8124ba4c5396a3fa7c3d1dd8db(String), 2020-06-16 18:01:21.916(Timestamp) 
2020-06-16 18:01:21.937 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 3 
2020-06-16 18:01:26.484 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-16 18:01:26.485 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 18:01:26.490 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-16 18:01:26.494 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-16 18:01:26.495 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 18:01:26.499 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-16 18:01:26.503 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-16 18:01:26.504 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-16 18:01:26.508 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 13 
2020-06-16 18:01:26.513 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-16 18:01:26.514 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:01:26.518 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-16 18:01:26.523 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 18:01:26.524 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:01:26.529 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 18:01:26.536 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-16 18:01:26.537 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-16 18:01:26.537 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 18:01:26.538 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 18:01:26.543 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-16 18:01:26.547 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 18:01:26.548 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 18:01:26.552 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-16 18:01:26.557 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 18:01:26.558 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:01:26.563 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-16 18:01:26.567 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 18:01:26.568 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:01:26.581 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 18:01:26.586 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-16 18:01:26.587 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-16 18:01:26.587 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 18:01:26.588 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 18:01:26.593 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-16 18:01:26.598 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 18:01:26.599 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 18:01:26.603 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-16 18:01:26.609 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 18:01:26.610 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:01:26.614 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-16 18:01:26.621 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-16 18:01:26.621 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:01:26.628 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-16 18:01:26.647 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:个人基本信息表出生日期出生日期填写不规范 
2020-06-16 18:01:26.648 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:医疗费用支付方式未填写医疗费用支付方式为空值 
2020-06-16 18:01:26.649 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:个人基本信息表出生日期出生日期未填写 
2020-06-16 18:01:26.649 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:RH超出字典范围RH不在字典范围内（1 阴性 2 阳性 3 不详 ） 
2020-06-16 18:01:26.653 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-16 18:01:26.654 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 7ed2379800b4474fbf8c6d433cb7daa7(String), 2020-06-16 18:01:26.653(Timestamp), 31011310200312009116(String), 87e0e78866e8446a8bf91c5fd7880ddb(String), 2020-06-16 18:01:26.653(Timestamp), 31011310200312009116(String), 8c2d9c298aea47f1925532283c3ce5f9(String), 2020-06-16 18:01:26.653(Timestamp), 31011310200312009116(String), 92dc5e8124ba4c5396a3fa7c3d1dd8db(String), 2020-06-16 18:01:26.653(Timestamp) 
2020-06-16 18:01:26.675 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 4 
2020-06-16 18:01:30.539 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-16 18:01:30.539 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 18:01:30.544 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-16 18:01:30.548 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-16 18:01:30.549 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 18:01:30.554 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-16 18:01:30.558 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-16 18:01:30.559 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-16 18:01:30.563 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 13 
2020-06-16 18:01:30.568 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-16 18:01:30.568 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:01:30.573 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-16 18:01:30.578 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 18:01:30.578 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:01:30.584 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 18:01:30.589 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-16 18:01:30.590 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-16 18:01:30.590 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 18:01:30.591 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 18:01:30.595 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-16 18:01:30.600 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 18:01:30.600 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 18:01:30.605 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-16 18:01:30.609 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 18:01:30.610 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:01:30.614 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-16 18:01:30.618 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 18:01:30.618 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:01:30.632 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 18:01:30.641 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-16 18:01:30.641 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-16 18:01:30.642 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 18:01:30.642 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 18:01:30.650 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-16 18:01:30.657 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 18:01:30.657 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 18:01:30.664 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-16 18:01:30.668 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 18:01:30.669 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:01:30.673 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-16 18:01:30.677 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-16 18:01:30.678 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:01:30.683 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-16 18:01:30.697 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:个人基本信息表出生日期出生日期大于建档日期 
2020-06-16 18:01:30.702 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:医疗费用支付方式未填写医疗费用支付方式为空值 
2020-06-16 18:01:30.703 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:RH超出字典范围RH不在字典范围内（1 阴性 2 阳性 3 不详 ） 
2020-06-16 18:01:30.705 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:既往史手术时间小于出生日期既往史外伤时间<出生日期 
2020-06-16 18:01:30.706 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:个人基本信息表出生日期出生日期与身份证号不一致 
2020-06-16 18:01:30.708 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:个人基本信息表既往史既往史疾病确诊时间小于出生日期 
2020-06-16 18:01:30.710 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-16 18:01:30.710 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 0d4385ad8bcd4988894ef7621bb776f8(String), 2020-06-16 18:01:30.709(Timestamp), 31011310200312009116(String), 87e0e78866e8446a8bf91c5fd7880ddb(String), 2020-06-16 18:01:30.709(Timestamp), 31011310200312009116(String), 92dc5e8124ba4c5396a3fa7c3d1dd8db(String), 2020-06-16 18:01:30.709(Timestamp), 31011310200312009116(String), b27399b0c58241ebbcb8a00353d41d7d(String), 2020-06-16 18:01:30.709(Timestamp), 31011310200312009116(String), b2dce4796dfd4c438e3577283a7d7950(String), 2020-06-16 18:01:30.709(Timestamp), 31011310200312009116(String), ec2b097f882c469a92ccd0dc37088dc6(String), 2020-06-16 18:01:30.709(Timestamp) 
2020-06-16 18:01:30.724 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 6 
2020-06-16 18:01:34.310 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-16 18:01:34.310 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 18:01:34.315 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-16 18:01:34.319 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-16 18:01:34.320 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 18:01:34.324 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-16 18:01:34.328 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-16 18:01:34.329 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-16 18:01:34.332 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 13 
2020-06-16 18:01:34.336 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-16 18:01:34.336 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:01:34.339 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-16 18:01:34.344 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 18:01:34.345 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:01:34.349 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 18:01:34.353 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-16 18:01:34.353 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-16 18:01:34.354 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 18:01:34.354 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 18:01:34.358 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-16 18:01:34.362 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 18:01:34.363 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 18:01:34.367 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-16 18:01:34.371 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 18:01:34.371 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:01:34.375 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-16 18:01:34.379 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 18:01:34.380 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:01:34.393 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 18:01:34.396 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-16 18:01:34.397 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-16 18:01:34.397 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 18:01:34.397 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 18:01:34.401 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-16 18:01:34.405 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 18:01:34.405 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 18:01:34.409 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-16 18:01:34.414 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 18:01:34.414 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:01:34.420 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-16 18:01:34.425 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-16 18:01:34.425 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:01:34.429 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-16 18:01:34.445 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:医疗费用支付方式未填写医疗费用支付方式为空值 
2020-06-16 18:01:34.445 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:RH超出字典范围RH不在字典范围内（1 阴性 2 阳性 3 不详 ） 
2020-06-16 18:01:34.446 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:个人基本信息表出生日期出生日期与身份证号不一致 
2020-06-16 18:01:34.449 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-16 18:01:34.450 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 87e0e78866e8446a8bf91c5fd7880ddb(String), 2020-06-16 18:01:34.448(Timestamp), 31011310200312009116(String), 92dc5e8124ba4c5396a3fa7c3d1dd8db(String), 2020-06-16 18:01:34.448(Timestamp), 31011310200312009116(String), b2dce4796dfd4c438e3577283a7d7950(String), 2020-06-16 18:01:34.448(Timestamp) 
2020-06-16 18:01:34.459 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 3 
2020-06-16 18:01:39.448 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-16 18:01:39.449 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 18:01:39.456 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-16 18:01:39.460 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-16 18:01:39.460 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 18:01:39.467 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-16 18:01:39.471 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-16 18:01:39.472 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-16 18:01:39.476 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 13 
2020-06-16 18:01:39.480 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-16 18:01:39.480 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: null 
2020-06-16 18:01:39.484 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 0 
2020-06-16 18:01:39.490 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 18:01:39.490 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: null 
2020-06-16 18:01:39.498 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 0 
2020-06-16 18:01:39.502 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-16 18:01:39.502 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 0 
2020-06-16 18:01:39.502 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 18:01:39.503 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: null 
2020-06-16 18:01:39.510 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 0 
2020-06-16 18:01:39.514 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-16 18:01:39.514 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 0 
2020-06-16 18:01:39.514 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-16 18:01:39.515 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: null 
2020-06-16 18:01:39.519 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-16 18:01:39.535 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:个人基本信息表身份证号为空值 
2020-06-16 18:01:39.538 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:医疗费用支付方式未填写医疗费用支付方式为空值 
2020-06-16 18:01:39.539 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:RH超出字典范围RH不在字典范围内（1 阴性 2 阳性 3 不详 ） 
2020-06-16 18:01:39.541 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-16 18:01:39.542 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 17945c1124044e7098f14634c6091077(String), 2020-06-16 18:01:39.541(Timestamp), 31011310200312009116(String), 87e0e78866e8446a8bf91c5fd7880ddb(String), 2020-06-16 18:01:39.541(Timestamp), 31011310200312009116(String), 92dc5e8124ba4c5396a3fa7c3d1dd8db(String), 2020-06-16 18:01:39.541(Timestamp) 
2020-06-16 18:01:39.576 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 3 
2020-06-16 18:01:43.321 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-16 18:01:43.322 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 18:01:43.327 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-16 18:01:43.331 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-16 18:01:43.331 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 18:01:43.336 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-16 18:01:43.340 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-16 18:01:43.341 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-16 18:01:43.345 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 13 
2020-06-16 18:01:43.349 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-16 18:01:43.350 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 4115261995052754137(String) 
2020-06-16 18:01:43.354 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 0 
2020-06-16 18:01:43.358 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 18:01:43.359 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 4115261995052754137(String) 
2020-06-16 18:01:43.363 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 0 
2020-06-16 18:01:43.368 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-16 18:01:43.368 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 0 
2020-06-16 18:01:43.368 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 18:01:43.369 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 4115261995052754137(String) 
2020-06-16 18:01:43.373 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 0 
2020-06-16 18:01:43.378 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-16 18:01:43.378 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 0 
2020-06-16 18:01:43.378 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-16 18:01:43.379 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 4115261995052754137(String) 
2020-06-16 18:01:43.383 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-16 18:01:43.395 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:个人基本信息表身份证号身份证号长度异常 
2020-06-16 18:01:43.398 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:医疗费用支付方式未填写医疗费用支付方式为空值 
2020-06-16 18:01:43.398 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:RH超出字典范围RH不在字典范围内（1 阴性 2 阳性 3 不详 ） 
2020-06-16 18:01:43.401 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-16 18:01:43.401 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 0d7eebffe3a94841b55df249cd50918c(String), 2020-06-16 18:01:43.401(Timestamp), 31011310200312009116(String), 87e0e78866e8446a8bf91c5fd7880ddb(String), 2020-06-16 18:01:43.401(Timestamp), 31011310200312009116(String), 92dc5e8124ba4c5396a3fa7c3d1dd8db(String), 2020-06-16 18:01:43.401(Timestamp) 
2020-06-16 18:01:43.414 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 3 
2020-06-16 18:01:47.040 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-16 18:01:47.040 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 18:01:47.046 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-16 18:01:47.054 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-16 18:01:47.054 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 18:01:47.059 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-16 18:01:47.065 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-16 18:01:47.065 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-16 18:01:47.070 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 13 
2020-06-16 18:01:47.074 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-16 18:01:47.075 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 632123821927051(String) 
2020-06-16 18:01:47.079 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 0 
2020-06-16 18:01:47.084 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 18:01:47.086 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 632123821927051(String) 
2020-06-16 18:01:47.091 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 0 
2020-06-16 18:01:47.096 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-16 18:01:47.097 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 0 
2020-06-16 18:01:47.098 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 18:01:47.098 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 632123821927051(String) 
2020-06-16 18:01:47.108 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 0 
2020-06-16 18:01:47.113 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-16 18:01:47.113 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 0 
2020-06-16 18:01:47.114 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-16 18:01:47.114 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 632123821927051(String) 
2020-06-16 18:01:47.119 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-16 18:01:47.138 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:个人基本信息表身份证号身份证号不合法 
2020-06-16 18:01:47.142 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:医疗费用支付方式未填写医疗费用支付方式为空值 
2020-06-16 18:01:47.143 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:RH超出字典范围RH不在字典范围内（1 阴性 2 阳性 3 不详 ） 
2020-06-16 18:01:47.148 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-16 18:01:47.149 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 4108f6f0aabe44ad92dd57ae3abe8ebe(String), 2020-06-16 18:01:47.148(Timestamp), 31011310200312009116(String), 87e0e78866e8446a8bf91c5fd7880ddb(String), 2020-06-16 18:01:47.148(Timestamp), 31011310200312009116(String), 92dc5e8124ba4c5396a3fa7c3d1dd8db(String), 2020-06-16 18:01:47.148(Timestamp) 
2020-06-16 18:01:47.183 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 3 
2020-06-16 18:01:50.896 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-16 18:01:50.897 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 18:01:50.903 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-16 18:01:50.907 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-16 18:01:50.907 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 18:01:50.911 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-16 18:01:50.917 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-16 18:01:50.917 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-16 18:01:50.921 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 13 
2020-06-16 18:01:50.926 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-16 18:01:50.926 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 411526199515275413(String) 
2020-06-16 18:01:50.930 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 0 
2020-06-16 18:01:50.934 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 18:01:50.935 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 411526199515275413(String) 
2020-06-16 18:01:50.940 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 0 
2020-06-16 18:01:50.944 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-16 18:01:50.945 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 0 
2020-06-16 18:01:50.945 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 18:01:50.945 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 411526199515275413(String) 
2020-06-16 18:01:50.951 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 0 
2020-06-16 18:01:50.956 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-16 18:01:50.956 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 0 
2020-06-16 18:01:50.956 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-16 18:01:50.957 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 411526199515275413(String) 
2020-06-16 18:01:50.961 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-16 18:01:50.973 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:个人基本信息表身份证号身份证号不合法 
2020-06-16 18:01:50.976 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:医疗费用支付方式未填写医疗费用支付方式为空值 
2020-06-16 18:01:50.976 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:RH超出字典范围RH不在字典范围内（1 阴性 2 阳性 3 不详 ） 
2020-06-16 18:01:50.979 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-16 18:01:50.979 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 36d70cac4ba44075bf370a9ab795d25d(String), 2020-06-16 18:01:50.978(Timestamp), 31011310200312009116(String), 87e0e78866e8446a8bf91c5fd7880ddb(String), 2020-06-16 18:01:50.978(Timestamp), 31011310200312009116(String), 92dc5e8124ba4c5396a3fa7c3d1dd8db(String), 2020-06-16 18:01:50.978(Timestamp) 
2020-06-16 18:01:50.992 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 3 
2020-06-16 18:01:54.652 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-16 18:01:54.653 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 18:01:54.658 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-16 18:01:54.662 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-16 18:01:54.663 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 18:01:54.666 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-16 18:01:54.670 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-16 18:01:54.671 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-16 18:01:54.675 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 13 
2020-06-16 18:01:54.680 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-16 18:01:54.680 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:01:54.685 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-16 18:01:54.690 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 18:01:54.690 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:01:54.696 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 18:01:54.700 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-16 18:01:54.700 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-16 18:01:54.700 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 18:01:54.700 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 18:01:54.704 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-16 18:01:54.709 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 18:01:54.709 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 18:01:54.715 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-16 18:01:54.719 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 18:01:54.719 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:01:54.725 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-16 18:01:54.729 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 18:01:54.730 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:01:54.746 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 18:01:54.750 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-16 18:01:54.750 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-16 18:01:54.751 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 18:01:54.751 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 18:01:54.755 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-16 18:01:54.758 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 18:01:54.759 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 18:01:54.764 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-16 18:01:54.769 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 18:01:54.769 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:01:54.774 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-16 18:01:54.779 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-16 18:01:54.779 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:01:54.783 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-16 18:01:54.798 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:个人基本信息表工作单位工作单位未填写 
2020-06-16 18:01:54.798 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:医疗费用支付方式未填写医疗费用支付方式为空值 
2020-06-16 18:01:54.799 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:RH超出字典范围RH不在字典范围内（1 阴性 2 阳性 3 不详 ） 
2020-06-16 18:01:54.802 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-16 18:01:54.802 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 85f9e772245549a2b39c8212e08908cc(String), 2020-06-16 18:01:54.802(Timestamp), 31011310200312009116(String), 87e0e78866e8446a8bf91c5fd7880ddb(String), 2020-06-16 18:01:54.802(Timestamp), 31011310200312009116(String), 92dc5e8124ba4c5396a3fa7c3d1dd8db(String), 2020-06-16 18:01:54.802(Timestamp) 
2020-06-16 18:01:54.815 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 3 
2020-06-16 18:01:58.578 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-16 18:01:58.579 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 18:01:58.586 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-16 18:01:58.590 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-16 18:01:58.590 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 18:01:58.595 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-16 18:01:58.599 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-16 18:01:58.600 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-16 18:01:58.605 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 13 
2020-06-16 18:01:58.609 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-16 18:01:58.609 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:01:58.615 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-16 18:01:58.619 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 18:01:58.620 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:01:58.627 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 18:01:58.631 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-16 18:01:58.632 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-16 18:01:58.632 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 18:01:58.633 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 18:01:58.637 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-16 18:01:58.642 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 18:01:58.643 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 18:01:58.647 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-16 18:01:58.651 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 18:01:58.652 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:01:58.657 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-16 18:01:58.661 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 18:01:58.662 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:01:58.677 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 18:01:58.681 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-16 18:01:58.681 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-16 18:01:58.682 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 18:01:58.682 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 18:01:58.686 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-16 18:01:58.690 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 18:01:58.691 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 18:01:58.695 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-16 18:01:58.699 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 18:01:58.700 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:01:58.704 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-16 18:01:58.708 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-16 18:01:58.708 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:01:58.713 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-16 18:01:58.726 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:个人基本信息表工作单位工作单位不为汉字 
2020-06-16 18:01:58.728 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:医疗费用支付方式未填写医疗费用支付方式为空值 
2020-06-16 18:01:58.728 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:RH超出字典范围RH不在字典范围内（1 阴性 2 阳性 3 不详 ） 
2020-06-16 18:01:58.731 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-16 18:01:58.732 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 4ad5f41e777d499894964fe735a4ed46(String), 2020-06-16 18:01:58.731(Timestamp), 31011310200312009116(String), 87e0e78866e8446a8bf91c5fd7880ddb(String), 2020-06-16 18:01:58.731(Timestamp), 31011310200312009116(String), 92dc5e8124ba4c5396a3fa7c3d1dd8db(String), 2020-06-16 18:01:58.731(Timestamp) 
2020-06-16 18:01:58.753 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 3 
2020-06-16 18:02:03.313 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-16 18:02:03.314 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 18:02:03.320 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-16 18:02:03.325 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-16 18:02:03.326 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 18:02:03.330 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-16 18:02:03.334 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-16 18:02:03.335 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-16 18:02:03.339 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 13 
2020-06-16 18:02:03.345 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-16 18:02:03.345 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:02:03.349 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-16 18:02:03.353 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 18:02:03.354 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:02:03.361 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 18:02:03.365 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-16 18:02:03.366 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-16 18:02:03.366 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 18:02:03.366 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 18:02:03.373 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-16 18:02:03.376 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 18:02:03.377 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 18:02:03.381 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-16 18:02:03.385 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 18:02:03.386 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:02:03.390 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-16 18:02:03.395 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 18:02:03.395 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:02:03.408 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 18:02:03.412 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-16 18:02:03.412 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-16 18:02:03.412 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 18:02:03.413 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 18:02:03.417 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-16 18:02:03.421 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 18:02:03.421 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 18:02:03.427 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-16 18:02:03.431 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 18:02:03.431 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:02:03.438 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-16 18:02:03.442 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-16 18:02:03.443 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:02:03.449 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-16 18:02:03.463 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:个人基本信息表本人电话本人电话未填写 
2020-06-16 18:02:03.464 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:医疗费用支付方式未填写医疗费用支付方式为空值 
2020-06-16 18:02:03.464 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:RH超出字典范围RH不在字典范围内（1 阴性 2 阳性 3 不详 ） 
2020-06-16 18:02:03.467 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-16 18:02:03.467 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 7838cdc133cb43e1be4828444054e220(String), 2020-06-16 18:02:03.467(Timestamp), 31011310200312009116(String), 87e0e78866e8446a8bf91c5fd7880ddb(String), 2020-06-16 18:02:03.467(Timestamp), 31011310200312009116(String), 92dc5e8124ba4c5396a3fa7c3d1dd8db(String), 2020-06-16 18:02:03.467(Timestamp) 
2020-06-16 18:02:03.491 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 3 
2020-06-16 18:02:07.237 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-16 18:02:07.238 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 18:02:07.243 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-16 18:02:07.252 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-16 18:02:07.253 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 18:02:07.259 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-16 18:02:07.264 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-16 18:02:07.264 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-16 18:02:07.269 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 13 
2020-06-16 18:02:07.274 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-16 18:02:07.274 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:02:07.277 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-16 18:02:07.282 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 18:02:07.283 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:02:07.287 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 18:02:07.293 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-16 18:02:07.293 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-16 18:02:07.294 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 18:02:07.295 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 18:02:07.300 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-16 18:02:07.306 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 18:02:07.307 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 18:02:07.312 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-16 18:02:07.318 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 18:02:07.319 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:02:07.325 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-16 18:02:07.332 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 18:02:07.333 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:02:07.348 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 18:02:07.354 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-16 18:02:07.354 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-16 18:02:07.355 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 18:02:07.356 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 18:02:07.361 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-16 18:02:07.368 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 18:02:07.369 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 18:02:07.374 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-16 18:02:07.379 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 18:02:07.381 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:02:07.386 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-16 18:02:07.392 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-16 18:02:07.394 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:02:07.399 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-16 18:02:07.439 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:医疗费用支付方式未填写医疗费用支付方式为空值 
2020-06-16 18:02:07.440 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:RH超出字典范围RH不在字典范围内（1 阴性 2 阳性 3 不详 ） 
2020-06-16 18:02:07.443 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:个人基本信息表本人电话手机号码长度异常 
2020-06-16 18:02:07.445 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-16 18:02:07.446 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 87e0e78866e8446a8bf91c5fd7880ddb(String), 2020-06-16 18:02:07.445(Timestamp), 31011310200312009116(String), 92dc5e8124ba4c5396a3fa7c3d1dd8db(String), 2020-06-16 18:02:07.445(Timestamp), 31011310200312009116(String), e4e48ae4f913467ca0fd86dae3ce568d(String), 2020-06-16 18:02:07.445(Timestamp) 
2020-06-16 18:02:07.472 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 3 
2020-06-16 18:02:11.344 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-16 18:02:11.344 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 18:02:11.349 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-16 18:02:11.353 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-16 18:02:11.354 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 18:02:11.359 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-16 18:02:11.365 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-16 18:02:11.365 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-16 18:02:11.370 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 13 
2020-06-16 18:02:11.374 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-16 18:02:11.375 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:02:11.381 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-16 18:02:11.385 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 18:02:11.386 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:02:11.391 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 18:02:11.396 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-16 18:02:11.396 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-16 18:02:11.396 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 18:02:11.397 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 18:02:11.402 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-16 18:02:11.408 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 18:02:11.409 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 18:02:11.414 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-16 18:02:11.417 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 18:02:11.418 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:02:11.422 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-16 18:02:11.428 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 18:02:11.428 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:02:11.442 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 18:02:11.445 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-16 18:02:11.446 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-16 18:02:11.446 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 18:02:11.446 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 18:02:11.450 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-16 18:02:11.456 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 18:02:11.457 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 18:02:11.462 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-16 18:02:11.466 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 18:02:11.466 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:02:11.470 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-16 18:02:11.475 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-16 18:02:11.475 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:02:11.480 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-16 18:02:11.493 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:医疗费用支付方式未填写医疗费用支付方式为空值 
2020-06-16 18:02:11.494 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:RH超出字典范围RH不在字典范围内（1 阴性 2 阳性 3 不详 ） 
2020-06-16 18:02:11.496 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:个人基本信息表本人电话手机号码校验失败 
2020-06-16 18:02:11.497 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-16 18:02:11.497 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 87e0e78866e8446a8bf91c5fd7880ddb(String), 2020-06-16 18:02:11.496(Timestamp), 31011310200312009116(String), 92dc5e8124ba4c5396a3fa7c3d1dd8db(String), 2020-06-16 18:02:11.496(Timestamp), 31011310200312009116(String), f87a9c2f676841839db93c9e730dad76(String), 2020-06-16 18:02:11.496(Timestamp) 
2020-06-16 18:02:11.505 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 3 
2020-06-16 18:02:15.130 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-16 18:02:15.130 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 18:02:15.135 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-16 18:02:15.140 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-16 18:02:15.140 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 18:02:15.145 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-16 18:02:15.149 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-16 18:02:15.150 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-16 18:02:15.156 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 13 
2020-06-16 18:02:15.160 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-16 18:02:15.161 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:02:15.165 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-16 18:02:15.170 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 18:02:15.171 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:02:15.176 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 18:02:15.181 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-16 18:02:15.181 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-16 18:02:15.181 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 18:02:15.181 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 18:02:15.185 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-16 18:02:15.189 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 18:02:15.190 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 18:02:15.197 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-16 18:02:15.201 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 18:02:15.201 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:02:15.206 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-16 18:02:15.210 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 18:02:15.210 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:02:15.224 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 18:02:15.228 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-16 18:02:15.228 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-16 18:02:15.229 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 18:02:15.229 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 18:02:15.233 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-16 18:02:15.238 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 18:02:15.238 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 18:02:15.242 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-16 18:02:15.246 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 18:02:15.247 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:02:15.252 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-16 18:02:15.256 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-16 18:02:15.256 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:02:15.261 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-16 18:02:15.275 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:医疗费用支付方式未填写医疗费用支付方式为空值 
2020-06-16 18:02:15.275 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:RH超出字典范围RH不在字典范围内（1 阴性 2 阳性 3 不详 ） 
2020-06-16 18:02:15.277 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:个人基本信息表本人电话固定电话长度异常（含区号） 
2020-06-16 18:02:15.278 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-16 18:02:15.278 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 87e0e78866e8446a8bf91c5fd7880ddb(String), 2020-06-16 18:02:15.278(Timestamp), 31011310200312009116(String), 92dc5e8124ba4c5396a3fa7c3d1dd8db(String), 2020-06-16 18:02:15.278(Timestamp), 31011310200312009116(String), ca55e89173e84859877ee564ba43b7ef(String), 2020-06-16 18:02:15.278(Timestamp) 
2020-06-16 18:02:15.304 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 3 
2020-06-16 18:02:19.118 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-16 18:02:19.119 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 18:02:19.124 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-16 18:02:19.128 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-16 18:02:19.129 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 18:02:19.133 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-16 18:02:19.138 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-16 18:02:19.139 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-16 18:02:19.143 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 13 
2020-06-16 18:02:19.147 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-16 18:02:19.148 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:02:19.152 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-16 18:02:19.156 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 18:02:19.156 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:02:19.161 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 18:02:19.165 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-16 18:02:19.166 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-16 18:02:19.166 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 18:02:19.166 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 18:02:19.170 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-16 18:02:19.174 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 18:02:19.175 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 18:02:19.179 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-16 18:02:19.183 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 18:02:19.183 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:02:19.188 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-16 18:02:19.192 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 18:02:19.193 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:02:19.206 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 18:02:19.210 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-16 18:02:19.210 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-16 18:02:19.211 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 18:02:19.211 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 18:02:19.215 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-16 18:02:19.220 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 18:02:19.221 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 18:02:19.225 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-16 18:02:19.229 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 18:02:19.229 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:02:19.234 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-16 18:02:19.238 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-16 18:02:19.239 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:02:19.243 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-16 18:02:19.256 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:个人基本信息表本人电话固定电话长度异常（不含区号） 
2020-06-16 18:02:19.258 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:医疗费用支付方式未填写医疗费用支付方式为空值 
2020-06-16 18:02:19.258 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:RH超出字典范围RH不在字典范围内（1 阴性 2 阳性 3 不详 ） 
2020-06-16 18:02:19.261 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-16 18:02:19.261 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 5f7ecb11a3894e1d83e68322c3e3071d(String), 2020-06-16 18:02:19.261(Timestamp), 31011310200312009116(String), 87e0e78866e8446a8bf91c5fd7880ddb(String), 2020-06-16 18:02:19.261(Timestamp), 31011310200312009116(String), 92dc5e8124ba4c5396a3fa7c3d1dd8db(String), 2020-06-16 18:02:19.261(Timestamp) 
2020-06-16 18:02:19.279 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 3 
2020-06-16 18:02:22.948 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-16 18:02:22.948 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 18:02:22.953 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-16 18:02:22.957 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-16 18:02:22.958 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 18:02:22.962 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-16 18:02:22.968 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-16 18:02:22.969 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-16 18:02:22.973 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 13 
2020-06-16 18:02:22.978 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-16 18:02:22.978 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:02:22.982 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-16 18:02:22.987 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 18:02:22.987 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:02:22.993 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 18:02:22.997 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-16 18:02:22.997 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-16 18:02:22.997 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 18:02:22.998 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 18:02:23.002 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-16 18:02:23.006 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 18:02:23.006 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 18:02:23.011 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-16 18:02:23.015 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 18:02:23.016 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:02:23.021 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-16 18:02:23.026 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 18:02:23.026 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:02:23.039 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 18:02:23.044 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-16 18:02:23.044 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-16 18:02:23.044 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 18:02:23.044 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 18:02:23.049 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-16 18:02:23.053 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 18:02:23.054 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 18:02:23.058 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-16 18:02:23.062 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 18:02:23.063 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:02:23.067 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-16 18:02:23.071 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-16 18:02:23.071 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:02:23.076 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-16 18:02:23.092 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:医疗费用支付方式未填写医疗费用支付方式为空值 
2020-06-16 18:02:23.093 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:RH超出字典范围RH不在字典范围内（1 阴性 2 阳性 3 不详 ） 
2020-06-16 18:02:23.094 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:个人基本信息表本人电话本人电话不为纯数字 
2020-06-16 18:02:23.095 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:个人基本信息表本人电话手机号码长度异常 
2020-06-16 18:02:23.097 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-16 18:02:23.097 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 87e0e78866e8446a8bf91c5fd7880ddb(String), 2020-06-16 18:02:23.096(Timestamp), 31011310200312009116(String), 92dc5e8124ba4c5396a3fa7c3d1dd8db(String), 2020-06-16 18:02:23.096(Timestamp), 31011310200312009116(String), bfd7b3c3376e4254889ed061d3e17e0b(String), 2020-06-16 18:02:23.096(Timestamp), 31011310200312009116(String), e4e48ae4f913467ca0fd86dae3ce568d(String), 2020-06-16 18:02:23.096(Timestamp) 
2020-06-16 18:02:23.112 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 4 
2020-06-16 18:02:26.710 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-16 18:02:26.710 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 18:02:26.715 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-16 18:02:26.720 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-16 18:02:26.720 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 18:02:26.725 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-16 18:02:26.729 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-16 18:02:26.730 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-16 18:02:26.734 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 13 
2020-06-16 18:02:26.739 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-16 18:02:26.739 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:02:26.743 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-16 18:02:26.749 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 18:02:26.749 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:02:26.755 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 18:02:26.759 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-16 18:02:26.759 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-16 18:02:26.759 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 18:02:26.760 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 18:02:26.764 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-16 18:02:26.768 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 18:02:26.769 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 18:02:26.773 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-16 18:02:26.778 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 18:02:26.778 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:02:26.782 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-16 18:02:26.787 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 18:02:26.788 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:02:26.800 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 18:02:26.805 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-16 18:02:26.805 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-16 18:02:26.805 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 18:02:26.805 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 18:02:26.809 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-16 18:02:26.814 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 18:02:26.814 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 18:02:26.819 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-16 18:02:26.823 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 18:02:26.823 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:02:26.827 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-16 18:02:26.831 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-16 18:02:26.832 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:02:26.837 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-16 18:02:26.850 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:个人基本信息表本人电话固定电话长度异常（不含区号） 
2020-06-16 18:02:26.852 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:医疗费用支付方式未填写医疗费用支付方式为空值 
2020-06-16 18:02:26.852 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:RH超出字典范围RH不在字典范围内（1 阴性 2 阳性 3 不详 ） 
2020-06-16 18:02:26.853 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:个人基本信息表本人电话本人电话为同一个数字 
2020-06-16 18:02:26.855 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-16 18:02:26.856 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 5f7ecb11a3894e1d83e68322c3e3071d(String), 2020-06-16 18:02:26.855(Timestamp), 31011310200312009116(String), 87e0e78866e8446a8bf91c5fd7880ddb(String), 2020-06-16 18:02:26.855(Timestamp), 31011310200312009116(String), 92dc5e8124ba4c5396a3fa7c3d1dd8db(String), 2020-06-16 18:02:26.855(Timestamp), 31011310200312009116(String), b9365945d8e542db9c8243c240695e67(String), 2020-06-16 18:02:26.855(Timestamp) 
2020-06-16 18:02:26.869 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 4 
2020-06-16 18:02:30.578 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-16 18:02:30.578 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 18:02:30.583 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-16 18:02:30.588 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-16 18:02:30.588 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 18:02:30.593 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-16 18:02:30.597 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-16 18:02:30.597 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-16 18:02:30.602 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 13 
2020-06-16 18:02:30.606 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-16 18:02:30.607 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:02:30.611 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-16 18:02:30.615 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 18:02:30.615 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:02:30.621 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 18:02:30.626 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-16 18:02:30.626 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-16 18:02:30.626 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 18:02:30.626 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 18:02:30.631 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-16 18:02:30.635 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 18:02:30.636 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 18:02:30.642 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-16 18:02:30.646 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 18:02:30.647 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:02:30.651 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-16 18:02:30.656 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 18:02:30.656 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:02:30.670 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 18:02:30.674 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-16 18:02:30.674 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-16 18:02:30.675 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 18:02:30.675 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 18:02:30.679 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-16 18:02:30.683 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 18:02:30.683 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 18:02:30.689 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-16 18:02:30.693 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 18:02:30.694 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:02:30.698 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-16 18:02:30.703 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-16 18:02:30.704 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:02:30.709 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-16 18:02:30.725 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:医疗费用支付方式未填写医疗费用支付方式为空值 
2020-06-16 18:02:30.726 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:RH超出字典范围RH不在字典范围内（1 阴性 2 阳性 3 不详 ） 
2020-06-16 18:02:30.727 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:个人基本信息表联系人姓名联系人姓名未填写 
2020-06-16 18:02:30.729 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-16 18:02:30.729 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 87e0e78866e8446a8bf91c5fd7880ddb(String), 2020-06-16 18:02:30.728(Timestamp), 31011310200312009116(String), 92dc5e8124ba4c5396a3fa7c3d1dd8db(String), 2020-06-16 18:02:30.728(Timestamp), 31011310200312009116(String), d0d444ce2a444fe6811ea43a137cc432(String), 2020-06-16 18:02:30.728(Timestamp) 
2020-06-16 18:02:30.752 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 3 
2020-06-16 18:02:34.384 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-16 18:02:34.384 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 18:02:34.390 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-16 18:02:34.396 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-16 18:02:34.396 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 18:02:34.401 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-16 18:02:34.405 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-16 18:02:34.405 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-16 18:02:34.409 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 13 
2020-06-16 18:02:34.413 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-16 18:02:34.414 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:02:34.418 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-16 18:02:34.423 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 18:02:34.423 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:02:34.428 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 18:02:34.432 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-16 18:02:34.433 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-16 18:02:34.433 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 18:02:34.434 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 18:02:34.438 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-16 18:02:34.443 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 18:02:34.443 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 18:02:34.448 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-16 18:02:34.453 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 18:02:34.453 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:02:34.458 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-16 18:02:34.462 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 18:02:34.462 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:02:34.478 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 18:02:34.482 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-16 18:02:34.482 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-16 18:02:34.483 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 18:02:34.483 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 18:02:34.488 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-16 18:02:34.492 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 18:02:34.493 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 18:02:34.497 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-16 18:02:34.502 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 18:02:34.502 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:02:34.506 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-16 18:02:34.511 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-16 18:02:34.511 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:02:34.516 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-16 18:02:34.529 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:医疗费用支付方式未填写医疗费用支付方式为空值 
2020-06-16 18:02:34.530 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:RH超出字典范围RH不在字典范围内（1 阴性 2 阳性 3 不详 ） 
2020-06-16 18:02:34.533 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:个人基本信息表联系人姓名联系人姓名长度异常 
2020-06-16 18:02:34.534 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-16 18:02:34.535 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 87e0e78866e8446a8bf91c5fd7880ddb(String), 2020-06-16 18:02:34.534(Timestamp), 31011310200312009116(String), 92dc5e8124ba4c5396a3fa7c3d1dd8db(String), 2020-06-16 18:02:34.534(Timestamp), 31011310200312009116(String), e585471016994d99a353a7cc79be1235(String), 2020-06-16 18:02:34.534(Timestamp) 
2020-06-16 18:02:34.551 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 3 
2020-06-16 18:02:38.267 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-16 18:02:38.268 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 18:02:38.273 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-16 18:02:38.277 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-16 18:02:38.277 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 18:02:38.282 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-16 18:02:38.286 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-16 18:02:38.286 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-16 18:02:38.291 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 13 
2020-06-16 18:02:38.295 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-16 18:02:38.295 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:02:38.299 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-16 18:02:38.304 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 18:02:38.305 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:02:38.309 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 18:02:38.313 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-16 18:02:38.314 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-16 18:02:38.314 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 18:02:38.315 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 18:02:38.319 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-16 18:02:38.328 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 18:02:38.329 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 18:02:38.333 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-16 18:02:38.337 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 18:02:38.338 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:02:38.342 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-16 18:02:38.346 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 18:02:38.346 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:02:38.360 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 18:02:38.364 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-16 18:02:38.364 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-16 18:02:38.364 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 18:02:38.365 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 18:02:38.369 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-16 18:02:38.373 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 18:02:38.373 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 18:02:38.380 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-16 18:02:38.384 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 18:02:38.384 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:02:38.389 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-16 18:02:38.394 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-16 18:02:38.395 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:02:38.399 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-16 18:02:38.411 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:联系人姓名填写为数字同时满足以下条件： 1、联系人姓名不为空值 2、联系人姓名为纯数字 
2020-06-16 18:02:38.413 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:医疗费用支付方式未填写医疗费用支付方式为空值 
2020-06-16 18:02:38.414 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:RH超出字典范围RH不在字典范围内（1 阴性 2 阳性 3 不详 ） 
2020-06-16 18:02:38.417 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-16 18:02:38.418 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 1a7e1f2e0bce421585a1fad889411dd4(String), 2020-06-16 18:02:38.417(Timestamp), 31011310200312009116(String), 87e0e78866e8446a8bf91c5fd7880ddb(String), 2020-06-16 18:02:38.417(Timestamp), 31011310200312009116(String), 92dc5e8124ba4c5396a3fa7c3d1dd8db(String), 2020-06-16 18:02:38.417(Timestamp) 
2020-06-16 18:02:38.434 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 3 
2020-06-16 18:02:42.095 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-16 18:02:42.096 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 18:02:42.101 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-16 18:02:42.105 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-16 18:02:42.105 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 18:02:42.109 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-16 18:02:42.113 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-16 18:02:42.114 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-16 18:02:42.119 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 13 
2020-06-16 18:02:42.124 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-16 18:02:42.124 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:02:42.129 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-16 18:02:42.132 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 18:02:42.133 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:02:42.138 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 18:02:42.142 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-16 18:02:42.143 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-16 18:02:42.143 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 18:02:42.144 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 18:02:42.147 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-16 18:02:42.152 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 18:02:42.152 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 18:02:42.158 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-16 18:02:42.162 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 18:02:42.163 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:02:42.166 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-16 18:02:42.171 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 18:02:42.171 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:02:42.185 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 18:02:42.188 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-16 18:02:42.189 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-16 18:02:42.190 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 18:02:42.190 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 18:02:42.194 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-16 18:02:42.198 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 18:02:42.199 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 18:02:42.204 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-16 18:02:42.207 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 18:02:42.208 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:02:42.212 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-16 18:02:42.216 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-16 18:02:42.217 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:02:42.221 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-16 18:02:42.236 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:医疗费用支付方式未填写医疗费用支付方式为空值 
2020-06-16 18:02:42.236 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:RH超出字典范围RH不在字典范围内（1 阴性 2 阳性 3 不详 ） 
2020-06-16 18:02:42.239 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-16 18:02:42.239 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 87e0e78866e8446a8bf91c5fd7880ddb(String), 2020-06-16 18:02:42.239(Timestamp), 31011310200312009116(String), 92dc5e8124ba4c5396a3fa7c3d1dd8db(String), 2020-06-16 18:02:42.239(Timestamp) 
2020-06-16 18:02:42.258 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 2 
2020-06-16 18:02:45.881 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-16 18:02:45.881 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 18:02:45.886 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-16 18:02:45.890 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-16 18:02:45.890 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 18:02:45.895 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-16 18:02:45.899 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-16 18:02:45.899 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-16 18:02:45.904 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 13 
2020-06-16 18:02:45.908 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-16 18:02:45.909 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:02:45.913 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-16 18:02:45.917 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 18:02:45.917 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:02:45.923 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 18:02:45.927 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-16 18:02:45.927 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-16 18:02:45.927 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 18:02:45.927 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 18:02:45.931 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-16 18:02:45.934 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 18:02:45.935 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 18:02:45.940 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-16 18:02:45.945 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 18:02:45.945 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:02:45.949 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-16 18:02:45.953 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 18:02:45.954 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:02:45.967 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 18:02:45.972 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-16 18:02:45.972 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-16 18:02:45.973 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 18:02:45.973 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 18:02:45.977 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-16 18:02:45.981 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 18:02:45.981 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 18:02:45.986 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-16 18:02:45.990 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 18:02:45.991 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:02:45.995 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-16 18:02:45.999 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-16 18:02:45.999 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:02:46.004 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-16 18:02:46.019 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:医疗费用支付方式未填写医疗费用支付方式为空值 
2020-06-16 18:02:46.019 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:RH超出字典范围RH不在字典范围内（1 阴性 2 阳性 3 不详 ） 
2020-06-16 18:02:46.021 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:个人基本信息表联系人电话联系人电话未填写 
2020-06-16 18:02:46.022 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-16 18:02:46.022 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 87e0e78866e8446a8bf91c5fd7880ddb(String), 2020-06-16 18:02:46.021(Timestamp), 31011310200312009116(String), 92dc5e8124ba4c5396a3fa7c3d1dd8db(String), 2020-06-16 18:02:46.021(Timestamp), 31011310200312009116(String), ec56f4e1864e4a5bb0ad8ce1e94aa382(String), 2020-06-16 18:02:46.021(Timestamp) 
2020-06-16 18:02:46.033 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 3 
2020-06-16 18:02:49.683 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-16 18:02:49.684 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 18:02:49.689 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-16 18:02:49.694 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-16 18:02:49.694 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 18:02:49.699 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-16 18:02:49.703 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-16 18:02:49.703 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-16 18:02:49.708 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 13 
2020-06-16 18:02:49.713 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-16 18:02:49.713 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:02:49.718 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-16 18:02:49.722 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 18:02:49.722 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:02:49.728 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 18:02:49.732 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-16 18:02:49.732 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-16 18:02:49.732 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 18:02:49.733 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 18:02:49.738 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-16 18:02:49.743 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 18:02:49.743 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 18:02:49.748 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-16 18:02:49.752 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 18:02:49.753 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:02:49.757 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-16 18:02:49.761 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 18:02:49.762 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:02:49.775 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 18:02:49.779 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-16 18:02:49.779 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-16 18:02:49.780 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 18:02:49.780 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 18:02:49.784 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-16 18:02:49.788 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 18:02:49.789 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 18:02:49.793 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-16 18:02:49.797 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 18:02:49.798 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:02:49.803 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-16 18:02:49.807 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-16 18:02:49.807 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:02:49.812 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-16 18:02:49.825 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:手机号码长度异常同时满足以下条件： 1、联系人电话不为空值 2、联系人电话为手机号码（是1开头判断为手机号） 3、号码长度小于11位或大于11位 
2020-06-16 18:02:49.828 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:医疗费用支付方式未填写医疗费用支付方式为空值 
2020-06-16 18:02:49.828 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:RH超出字典范围RH不在字典范围内（1 阴性 2 阳性 3 不详 ） 
2020-06-16 18:02:49.829 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:手机号码校验失败1、联系人电话不为空值 2、联系人电话为手机号码（是1开头判断为手机号） 3、号码长度为11位，但是不存在这个号段（进行号段校验） 
2020-06-16 18:02:49.831 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-16 18:02:49.832 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 00081d1c0cce49fd88ac68b7627d6e1c(String), 2020-06-16 18:02:49.831(Timestamp), 31011310200312009116(String), 87e0e78866e8446a8bf91c5fd7880ddb(String), 2020-06-16 18:02:49.831(Timestamp), 31011310200312009116(String), 92dc5e8124ba4c5396a3fa7c3d1dd8db(String), 2020-06-16 18:02:49.831(Timestamp), 31011310200312009116(String), be536190ff164df18656c4aca5fc7504(String), 2020-06-16 18:02:49.831(Timestamp) 
2020-06-16 18:02:49.852 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 4 
2020-06-16 18:02:53.625 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-16 18:02:53.625 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 18:02:53.630 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-16 18:02:53.636 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-16 18:02:53.637 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 18:02:53.643 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-16 18:02:53.648 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-16 18:02:53.649 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-16 18:02:53.653 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 13 
2020-06-16 18:02:53.657 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-16 18:02:53.658 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:02:53.662 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-16 18:02:53.666 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 18:02:53.667 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:02:53.673 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 18:02:53.677 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-16 18:02:53.677 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-16 18:02:53.677 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 18:02:53.677 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 18:02:53.682 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-16 18:02:53.687 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 18:02:53.688 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 18:02:53.692 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-16 18:02:53.696 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 18:02:53.696 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:02:53.701 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-16 18:02:53.707 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 18:02:53.707 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:02:53.720 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 18:02:53.726 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-16 18:02:53.726 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-16 18:02:53.726 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 18:02:53.726 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 18:02:53.732 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-16 18:02:53.736 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 18:02:53.737 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 18:02:53.742 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-16 18:02:53.746 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 18:02:53.747 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:02:53.751 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-16 18:02:53.756 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-16 18:02:53.756 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:02:53.760 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-16 18:02:53.776 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:医疗费用支付方式未填写医疗费用支付方式为空值 
2020-06-16 18:02:53.776 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:RH超出字典范围RH不在字典范围内（1 阴性 2 阳性 3 不详 ） 
2020-06-16 18:02:53.777 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:手机号码校验失败1、联系人电话不为空值 2、联系人电话为手机号码（是1开头判断为手机号） 3、号码长度为11位，但是不存在这个号段（进行号段校验） 
2020-06-16 18:02:53.780 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-16 18:02:53.780 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 87e0e78866e8446a8bf91c5fd7880ddb(String), 2020-06-16 18:02:53.779(Timestamp), 31011310200312009116(String), 92dc5e8124ba4c5396a3fa7c3d1dd8db(String), 2020-06-16 18:02:53.779(Timestamp), 31011310200312009116(String), be536190ff164df18656c4aca5fc7504(String), 2020-06-16 18:02:53.779(Timestamp) 
2020-06-16 18:02:53.815 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 3 
2020-06-16 18:02:57.379 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-16 18:02:57.379 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 18:02:57.384 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-16 18:02:57.389 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-16 18:02:57.390 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 18:02:57.395 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-16 18:02:57.400 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-16 18:02:57.400 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-16 18:02:57.405 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 13 
2020-06-16 18:02:57.410 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-16 18:02:57.410 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:02:57.416 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-16 18:02:57.421 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 18:02:57.422 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:02:57.427 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 18:02:57.432 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-16 18:02:57.433 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-16 18:02:57.433 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 18:02:57.434 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 18:02:57.439 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-16 18:02:57.444 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 18:02:57.445 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 18:02:57.450 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-16 18:02:57.455 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 18:02:57.456 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:02:57.460 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-16 18:02:57.466 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 18:02:57.467 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:02:57.481 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 18:02:57.485 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-16 18:02:57.486 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-16 18:02:57.486 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 18:02:57.487 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 18:02:57.492 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-16 18:02:57.497 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 18:02:57.498 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 18:02:57.503 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-16 18:02:57.507 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 18:02:57.508 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:02:57.513 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-16 18:02:57.518 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-16 18:02:57.519 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:02:57.524 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-16 18:02:57.545 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:医疗费用支付方式未填写医疗费用支付方式为空值 
2020-06-16 18:02:57.546 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:RH超出字典范围RH不在字典范围内（1 阴性 2 阳性 3 不详 ） 
2020-06-16 18:02:57.548 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:固定电话长度异常（含区号）1同时满足以下条件： 1、联系电话不为空值 2、联系电话为固定电话（是0开头判断为固定电话） 3、号码长度小于11位或大于12位 
2020-06-16 18:02:57.550 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-16 18:02:57.551 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 87e0e78866e8446a8bf91c5fd7880ddb(String), 2020-06-16 18:02:57.55(Timestamp), 31011310200312009116(String), 92dc5e8124ba4c5396a3fa7c3d1dd8db(String), 2020-06-16 18:02:57.55(Timestamp), 31011310200312009116(String), ea35b1d533784b8696401a09cae12f3d(String), 2020-06-16 18:02:57.55(Timestamp) 
2020-06-16 18:02:57.581 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 3 
2020-06-16 18:03:01.364 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-16 18:03:01.364 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 18:03:01.369 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-16 18:03:01.374 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-16 18:03:01.375 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 18:03:01.380 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-16 18:03:01.385 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-16 18:03:01.386 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-16 18:03:01.391 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 13 
2020-06-16 18:03:01.395 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-16 18:03:01.396 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:03:01.407 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-16 18:03:01.415 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 18:03:01.415 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:03:01.421 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 18:03:01.426 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-16 18:03:01.427 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-16 18:03:01.427 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 18:03:01.428 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 18:03:01.433 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-16 18:03:01.437 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 18:03:01.438 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 18:03:01.443 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-16 18:03:01.447 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 18:03:01.448 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:03:01.453 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-16 18:03:01.457 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 18:03:01.458 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:03:01.474 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 18:03:01.478 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-16 18:03:01.479 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-16 18:03:01.479 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 18:03:01.479 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 18:03:01.486 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-16 18:03:01.492 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 18:03:01.492 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 18:03:01.497 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-16 18:03:01.502 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 18:03:01.502 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:03:01.508 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-16 18:03:01.512 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-16 18:03:01.513 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:03:01.517 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-16 18:03:01.535 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:固定电话长度异常（不含区号）同时满足以下条件： 1、联系人电话不为空值 2、联系人电话为固定电话（不是1和0开头判断为固定电话） 3、号码长度小于7位或大于8位 
2020-06-16 18:03:01.536 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:医疗费用支付方式未填写医疗费用支付方式为空值 
2020-06-16 18:03:01.537 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:RH超出字典范围RH不在字典范围内（1 阴性 2 阳性 3 不详 ） 
2020-06-16 18:03:01.540 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-16 18:03:01.541 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 8282714ec36c405cbf094755098177e9(String), 2020-06-16 18:03:01.54(Timestamp), 31011310200312009116(String), 87e0e78866e8446a8bf91c5fd7880ddb(String), 2020-06-16 18:03:01.54(Timestamp), 31011310200312009116(String), 92dc5e8124ba4c5396a3fa7c3d1dd8db(String), 2020-06-16 18:03:01.54(Timestamp) 
2020-06-16 18:03:01.558 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 3 
2020-06-16 18:03:05.405 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-16 18:03:05.406 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 18:03:05.419 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-16 18:03:05.446 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-16 18:03:05.447 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 18:03:05.472 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-16 18:03:05.480 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-16 18:03:05.481 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-16 18:03:05.519 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 13 
2020-06-16 18:03:05.540 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-16 18:03:05.541 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:03:05.554 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-16 18:03:05.559 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 18:03:05.559 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:03:05.567 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 18:03:05.587 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-16 18:03:05.587 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-16 18:03:05.588 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 18:03:05.588 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 18:03:05.608 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-16 18:03:05.625 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 18:03:05.625 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 18:03:05.676 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-16 18:03:05.724 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 18:03:05.724 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:03:05.733 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-16 18:03:05.737 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 18:03:05.738 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:03:05.754 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 18:03:05.775 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-16 18:03:05.775 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-16 18:03:05.775 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 18:03:05.775 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 18:03:05.781 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-16 18:03:05.785 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 18:03:05.786 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 18:03:05.790 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-16 18:03:05.794 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 18:03:05.794 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:03:05.798 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-16 18:03:05.803 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-16 18:03:05.804 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:03:05.810 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-16 18:03:05.824 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:固定电话长度异常（不含区号）同时满足以下条件： 1、联系人电话不为空值 2、联系人电话为固定电话（不是1和0开头判断为固定电话） 3、号码长度小于7位或大于8位 
2020-06-16 18:03:05.825 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:医疗费用支付方式未填写医疗费用支付方式为空值 
2020-06-16 18:03:05.825 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:RH超出字典范围RH不在字典范围内（1 阴性 2 阳性 3 不详 ） 
2020-06-16 18:03:05.826 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:联系人电话不为纯数字同时满足以下条件： 1、联系人电话不为空值 2、联系人电话不是纯数字 
2020-06-16 18:03:05.828 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-16 18:03:05.829 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 8282714ec36c405cbf094755098177e9(String), 2020-06-16 18:03:05.828(Timestamp), 31011310200312009116(String), 87e0e78866e8446a8bf91c5fd7880ddb(String), 2020-06-16 18:03:05.828(Timestamp), 31011310200312009116(String), 92dc5e8124ba4c5396a3fa7c3d1dd8db(String), 2020-06-16 18:03:05.828(Timestamp), 31011310200312009116(String), c80e1cf922fe4adf834f308a97853a34(String), 2020-06-16 18:03:05.828(Timestamp) 
2020-06-16 18:03:05.884 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 4 
2020-06-16 18:03:09.727 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-16 18:03:09.728 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 18:03:09.733 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-16 18:03:09.738 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-16 18:03:09.739 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 18:03:09.752 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-16 18:03:09.756 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-16 18:03:09.757 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-16 18:03:09.761 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 13 
2020-06-16 18:03:09.766 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-16 18:03:09.766 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:03:09.770 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-16 18:03:09.775 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 18:03:09.776 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:03:09.780 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 18:03:09.784 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-16 18:03:09.785 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-16 18:03:09.785 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 18:03:09.785 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 18:03:09.790 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-16 18:03:09.795 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 18:03:09.795 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 18:03:09.799 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-16 18:03:09.803 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 18:03:09.804 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:03:09.808 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-16 18:03:09.813 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 18:03:09.814 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:03:09.827 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 18:03:09.832 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-16 18:03:09.832 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-16 18:03:09.833 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 18:03:09.833 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 18:03:09.837 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-16 18:03:09.841 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 18:03:09.841 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 18:03:09.846 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-16 18:03:09.851 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 18:03:09.851 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:03:09.856 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-16 18:03:09.860 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-16 18:03:09.861 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:03:09.865 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-16 18:03:09.879 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:联系人电话为同一个数字同时满足以下条件： 1、联系电话不为空值 2、联系电话数字只包含一个数字，如99999999 
2020-06-16 18:03:09.880 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:医疗费用支付方式未填写医疗费用支付方式为空值 
2020-06-16 18:03:09.880 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:RH超出字典范围RH不在字典范围内（1 阴性 2 阳性 3 不详 ） 
2020-06-16 18:03:09.883 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-16 18:03:09.883 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 73bde7f20d744d2382f82ea8fc476901(String), 2020-06-16 18:03:09.882(Timestamp), 31011310200312009116(String), 87e0e78866e8446a8bf91c5fd7880ddb(String), 2020-06-16 18:03:09.882(Timestamp), 31011310200312009116(String), 92dc5e8124ba4c5396a3fa7c3d1dd8db(String), 2020-06-16 18:03:09.882(Timestamp) 
2020-06-16 18:03:09.904 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 3 
2020-06-16 18:03:13.444 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-16 18:03:13.445 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 18:03:13.449 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-16 18:03:13.453 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-16 18:03:13.454 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 18:03:13.459 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-16 18:03:13.465 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-16 18:03:13.466 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-16 18:03:13.470 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 13 
2020-06-16 18:03:13.476 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-16 18:03:13.477 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:03:13.483 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-16 18:03:13.489 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 18:03:13.489 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:03:13.500 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 18:03:13.504 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-16 18:03:13.505 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-16 18:03:13.505 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 18:03:13.506 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 18:03:13.510 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-16 18:03:13.517 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 18:03:13.517 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 18:03:13.522 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-16 18:03:13.528 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 18:03:13.528 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:03:13.535 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-16 18:03:13.540 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 18:03:13.541 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:03:13.555 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 18:03:13.560 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-16 18:03:13.561 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-16 18:03:13.561 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 18:03:13.562 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 18:03:13.566 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-16 18:03:13.570 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 18:03:13.571 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 18:03:13.575 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-16 18:03:13.580 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 18:03:13.581 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:03:13.585 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-16 18:03:13.591 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-16 18:03:13.591 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:03:13.597 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-16 18:03:13.615 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:医疗费用支付方式未填写医疗费用支付方式为空值 
2020-06-16 18:03:13.616 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:RH超出字典范围RH不在字典范围内（1 阴性 2 阳性 3 不详 ） 
2020-06-16 18:03:13.618 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:常住类型未填写常住类型为空值 
2020-06-16 18:03:13.620 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-16 18:03:13.620 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 87e0e78866e8446a8bf91c5fd7880ddb(String), 2020-06-16 18:03:13.619(Timestamp), 31011310200312009116(String), 92dc5e8124ba4c5396a3fa7c3d1dd8db(String), 2020-06-16 18:03:13.619(Timestamp), 31011310200312009116(String), e39a29409dc844aab30fd036ed574c11(String), 2020-06-16 18:03:13.619(Timestamp) 
2020-06-16 18:03:13.638 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 3 
2020-06-16 18:03:17.282 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-16 18:03:17.283 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 18:03:17.289 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-16 18:03:17.293 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-16 18:03:17.294 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 18:03:17.299 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-16 18:03:17.302 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-16 18:03:17.303 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-16 18:03:17.308 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 13 
2020-06-16 18:03:17.312 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-16 18:03:17.312 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:03:17.316 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-16 18:03:17.322 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 18:03:17.323 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:03:17.329 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 18:03:17.334 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-16 18:03:17.335 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-16 18:03:17.335 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 18:03:17.335 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 18:03:17.339 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-16 18:03:17.348 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 18:03:17.348 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 18:03:17.353 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-16 18:03:17.358 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 18:03:17.359 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:03:17.363 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-16 18:03:17.370 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 18:03:17.371 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:03:17.385 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 18:03:17.389 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-16 18:03:17.390 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-16 18:03:17.390 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 18:03:17.390 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 18:03:17.395 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-16 18:03:17.399 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 18:03:17.400 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 18:03:17.404 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-16 18:03:17.410 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 18:03:17.411 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:03:17.416 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-16 18:03:17.424 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-16 18:03:17.425 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:03:17.429 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-16 18:03:17.446 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:医疗费用支付方式未填写医疗费用支付方式为空值 
2020-06-16 18:03:17.447 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:RH超出字典范围RH不在字典范围内（1 阴性 2 阳性 3 不详 ） 
2020-06-16 18:03:17.450 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-16 18:03:17.451 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 87e0e78866e8446a8bf91c5fd7880ddb(String), 2020-06-16 18:03:17.45(Timestamp), 31011310200312009116(String), 92dc5e8124ba4c5396a3fa7c3d1dd8db(String), 2020-06-16 18:03:17.45(Timestamp) 
2020-06-16 18:03:17.470 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 2 
2020-06-16 18:03:21.210 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-16 18:03:21.211 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 18:03:21.218 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-16 18:03:21.222 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-16 18:03:21.223 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 18:03:21.229 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-16 18:03:21.234 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-16 18:03:21.234 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-16 18:03:21.239 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 13 
2020-06-16 18:03:21.244 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-16 18:03:21.245 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:03:21.250 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-16 18:03:21.254 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 18:03:21.255 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:03:21.260 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 18:03:21.264 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-16 18:03:21.264 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-16 18:03:21.265 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 18:03:21.265 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 18:03:21.270 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-16 18:03:21.277 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 18:03:21.277 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 18:03:21.283 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-16 18:03:21.288 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 18:03:21.288 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:03:21.292 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-16 18:03:21.297 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 18:03:21.298 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:03:21.311 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 18:03:21.316 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-16 18:03:21.316 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-16 18:03:21.316 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 18:03:21.316 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 18:03:21.321 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-16 18:03:21.325 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 18:03:21.325 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 18:03:21.331 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-16 18:03:21.336 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 18:03:21.337 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:03:21.341 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-16 18:03:21.345 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-16 18:03:21.345 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:03:21.350 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-16 18:03:21.362 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:与户籍地址逻辑不符同时满足以下条件： 1、封面《户籍地址》为“上海市”， 2、个人基本信息表《常住类型》填写“非户籍” 
2020-06-16 18:03:21.365 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:医疗费用支付方式未填写医疗费用支付方式为空值 
2020-06-16 18:03:21.365 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:RH超出字典范围RH不在字典范围内（1 阴性 2 阳性 3 不详 ） 
2020-06-16 18:03:21.367 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-16 18:03:21.368 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 194d73527efd48088d9b42ee63f64b69(String), 2020-06-16 18:03:21.367(Timestamp), 31011310200312009116(String), 87e0e78866e8446a8bf91c5fd7880ddb(String), 2020-06-16 18:03:21.367(Timestamp), 31011310200312009116(String), 92dc5e8124ba4c5396a3fa7c3d1dd8db(String), 2020-06-16 18:03:21.367(Timestamp) 
2020-06-16 18:03:21.379 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 3 
2020-06-16 18:03:25.428 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-16 18:03:25.428 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 18:03:25.438 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-16 18:03:25.442 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-16 18:03:25.443 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 18:03:25.450 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-16 18:03:25.454 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-16 18:03:25.455 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-16 18:03:25.459 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 13 
2020-06-16 18:03:25.464 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-16 18:03:25.464 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:03:25.467 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-16 18:03:25.471 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 18:03:25.471 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:03:25.477 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 18:03:25.482 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-16 18:03:25.482 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-16 18:03:25.482 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 18:03:25.483 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 18:03:25.487 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-16 18:03:25.491 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 18:03:25.492 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 18:03:25.496 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-16 18:03:25.501 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 18:03:25.501 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:03:25.506 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-16 18:03:25.510 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 18:03:25.510 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:03:25.524 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 18:03:25.529 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-16 18:03:25.530 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-16 18:03:25.530 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 18:03:25.530 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 18:03:25.535 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-16 18:03:25.541 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 18:03:25.542 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 18:03:25.546 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-16 18:03:25.551 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 18:03:25.551 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:03:25.555 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-16 18:03:25.560 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-16 18:03:25.560 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:03:25.565 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-16 18:03:25.577 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:民族未填写民族为空值 
2020-06-16 18:03:25.580 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:医疗费用支付方式未填写医疗费用支付方式为空值 
2020-06-16 18:03:25.580 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:RH超出字典范围RH不在字典范围内（1 阴性 2 阳性 3 不详 ） 
2020-06-16 18:03:25.582 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-16 18:03:25.583 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 4868217488744fed817fee47873d8ae0(String), 2020-06-16 18:03:25.582(Timestamp), 31011310200312009116(String), 87e0e78866e8446a8bf91c5fd7880ddb(String), 2020-06-16 18:03:25.582(Timestamp), 31011310200312009116(String), 92dc5e8124ba4c5396a3fa7c3d1dd8db(String), 2020-06-16 18:03:25.582(Timestamp) 
2020-06-16 18:03:25.594 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 3 
2020-06-16 18:03:29.609 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-16 18:03:29.609 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 18:03:29.616 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-16 18:03:29.621 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-16 18:03:29.621 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 18:03:29.626 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-16 18:03:29.630 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-16 18:03:29.630 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-16 18:03:29.639 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 13 
2020-06-16 18:03:29.643 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-16 18:03:29.644 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:03:29.648 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-16 18:03:29.653 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 18:03:29.653 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:03:29.658 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 18:03:29.663 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-16 18:03:29.663 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-16 18:03:29.664 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 18:03:29.664 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 18:03:29.668 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-16 18:03:29.673 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 18:03:29.674 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 18:03:29.678 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-16 18:03:29.682 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 18:03:29.683 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:03:29.688 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-16 18:03:29.692 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 18:03:29.692 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:03:29.707 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 18:03:29.711 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-16 18:03:29.711 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-16 18:03:29.712 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 18:03:29.712 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 18:03:29.716 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-16 18:03:29.720 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 18:03:29.721 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 18:03:29.725 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-16 18:03:29.728 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 18:03:29.729 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:03:29.733 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-16 18:03:29.738 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-16 18:03:29.738 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:03:29.744 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-16 18:03:29.760 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:医疗费用支付方式未填写医疗费用支付方式为空值 
2020-06-16 18:03:29.761 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:RH超出字典范围RH不在字典范围内（1 阴性 2 阳性 3 不详 ） 
2020-06-16 18:03:29.761 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:民族填写错误同时满足以下条件： 1、民族不为空值 2、与56个名族的名称不符合 
2020-06-16 18:03:29.762 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:民族超出字典范围同时满足以下条件： 1、民族不为空值 2、民族不在字典范围内（民族字典按GB/T3304） 
2020-06-16 18:03:29.764 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-16 18:03:29.764 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 87e0e78866e8446a8bf91c5fd7880ddb(String), 2020-06-16 18:03:29.763(Timestamp), 31011310200312009116(String), 92dc5e8124ba4c5396a3fa7c3d1dd8db(String), 2020-06-16 18:03:29.763(Timestamp), 31011310200312009116(String), a96f5e6051f541159fca9dec2d47050e(String), 2020-06-16 18:03:29.763(Timestamp), 31011310200312009116(String), cac20bf188fd4f7296a3678a1604b001(String), 2020-06-16 18:03:29.763(Timestamp) 
2020-06-16 18:03:29.777 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 4 
2020-06-16 18:03:34.526 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-16 18:03:34.526 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 18:03:34.530 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-16 18:03:34.534 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-16 18:03:34.535 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 18:03:34.539 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-16 18:03:34.542 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-16 18:03:34.543 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-16 18:03:34.548 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 13 
2020-06-16 18:03:34.552 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-16 18:03:34.553 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:03:34.557 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-16 18:03:34.561 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 18:03:34.562 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:03:34.567 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 18:03:34.571 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-16 18:03:34.572 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-16 18:03:34.572 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 18:03:34.572 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 18:03:34.576 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-16 18:03:34.582 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 18:03:34.582 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 18:03:34.586 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-16 18:03:34.590 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 18:03:34.590 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:03:34.595 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-16 18:03:34.600 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 18:03:34.601 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:03:34.614 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 18:03:34.618 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-16 18:03:34.618 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-16 18:03:34.618 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 18:03:34.619 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 18:03:34.623 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-16 18:03:34.628 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 18:03:34.628 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 18:03:34.632 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-16 18:03:34.638 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 18:03:34.638 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:03:34.643 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-16 18:03:34.648 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-16 18:03:34.648 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:03:34.653 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-16 18:03:34.666 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:血型未填写血型为空值 
2020-06-16 18:03:34.667 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:医疗费用支付方式未填写医疗费用支付方式为空值 
2020-06-16 18:03:34.667 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:RH超出字典范围RH不在字典范围内（1 阴性 2 阳性 3 不详 ） 
2020-06-16 18:03:34.670 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-16 18:03:34.670 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 5d67b4b3f4c34563a644fe8c9b883884(String), 2020-06-16 18:03:34.669(Timestamp), 31011310200312009116(String), 87e0e78866e8446a8bf91c5fd7880ddb(String), 2020-06-16 18:03:34.669(Timestamp), 31011310200312009116(String), 92dc5e8124ba4c5396a3fa7c3d1dd8db(String), 2020-06-16 18:03:34.669(Timestamp) 
2020-06-16 18:03:34.685 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 3 
2020-06-16 18:03:40.057 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-16 18:03:40.057 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 18:03:40.063 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-16 18:03:40.067 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-16 18:03:40.068 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 18:03:40.073 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-16 18:03:40.077 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-16 18:03:40.077 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-16 18:03:40.082 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 13 
2020-06-16 18:03:40.088 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-16 18:03:40.089 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:03:40.093 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-16 18:03:40.097 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 18:03:40.098 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:03:40.103 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 18:03:40.107 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-16 18:03:40.107 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-16 18:03:40.108 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 18:03:40.108 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 18:03:40.113 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-16 18:03:40.117 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 18:03:40.118 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 18:03:40.122 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-16 18:03:40.128 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 18:03:40.129 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:03:40.134 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-16 18:03:40.139 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 18:03:40.140 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:03:40.153 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 18:03:40.157 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-16 18:03:40.157 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-16 18:03:40.158 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 18:03:40.158 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 18:03:40.163 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-16 18:03:40.168 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 18:03:40.168 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 18:03:40.173 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-16 18:03:40.178 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 18:03:40.178 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:03:40.182 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-16 18:03:40.187 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-16 18:03:40.187 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:03:40.191 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-16 18:03:40.205 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:医疗费用支付方式未填写医疗费用支付方式为空值 
2020-06-16 18:03:40.206 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:RH超出字典范围RH不在字典范围内（1 阴性 2 阳性 3 不详 ） 
2020-06-16 18:03:40.209 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-16 18:03:40.210 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 87e0e78866e8446a8bf91c5fd7880ddb(String), 2020-06-16 18:03:40.209(Timestamp), 31011310200312009116(String), 92dc5e8124ba4c5396a3fa7c3d1dd8db(String), 2020-06-16 18:03:40.209(Timestamp) 
2020-06-16 18:03:40.233 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 2 
2020-06-16 18:03:43.866 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-16 18:03:43.867 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 18:03:43.872 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-16 18:03:43.877 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-16 18:03:43.878 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 18:03:43.884 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-16 18:03:43.888 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-16 18:03:43.889 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-16 18:03:43.894 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 13 
2020-06-16 18:03:43.898 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-16 18:03:43.898 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:03:43.904 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-16 18:03:43.908 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 18:03:43.908 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:03:43.913 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 18:03:43.919 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-16 18:03:43.919 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-16 18:03:43.919 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 18:03:43.920 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 18:03:43.925 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-16 18:03:43.929 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 18:03:43.929 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 18:03:43.934 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-16 18:03:43.938 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 18:03:43.939 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:03:43.945 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-16 18:03:43.949 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 18:03:43.950 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:03:43.963 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 18:03:43.967 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-16 18:03:43.967 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-16 18:03:43.967 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 18:03:43.968 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 18:03:43.971 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-16 18:03:43.976 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 18:03:43.976 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 18:03:43.982 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-16 18:03:43.989 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 18:03:43.990 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:03:43.995 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-16 18:03:43.999 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-16 18:03:43.999 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:03:44.004 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-16 18:03:44.019 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:医疗费用支付方式未填写医疗费用支付方式为空值 
2020-06-16 18:03:44.020 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:RH血型未填写RH血型为空值 
2020-06-16 18:03:44.023 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-16 18:03:44.024 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 87e0e78866e8446a8bf91c5fd7880ddb(String), 2020-06-16 18:03:44.023(Timestamp), 31011310200312009116(String), b9590438ed5d4bdb89f89c686856cdce(String), 2020-06-16 18:03:44.023(Timestamp) 
2020-06-16 18:03:44.050 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 2 
2020-06-16 18:03:47.916 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-16 18:03:47.917 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 18:03:47.921 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-16 18:03:47.926 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-16 18:03:47.926 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 18:03:47.933 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-16 18:03:47.937 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-16 18:03:47.938 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-16 18:03:47.943 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 13 
2020-06-16 18:03:47.947 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-16 18:03:47.947 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:03:47.951 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-16 18:03:47.956 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 18:03:47.956 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:03:47.961 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 18:03:47.965 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-16 18:03:47.966 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-16 18:03:47.966 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 18:03:47.967 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 18:03:47.971 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-16 18:03:47.976 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 18:03:47.976 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 18:03:47.984 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-16 18:03:47.988 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 18:03:47.988 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:03:47.993 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-16 18:03:47.997 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 18:03:47.998 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:03:48.014 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 18:03:48.019 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-16 18:03:48.019 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-16 18:03:48.019 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 18:03:48.019 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 18:03:48.023 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-16 18:03:48.028 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 18:03:48.028 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 18:03:48.032 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-16 18:03:48.036 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 18:03:48.037 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:03:48.041 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-16 18:03:48.045 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-16 18:03:48.045 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:03:48.050 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-16 18:03:48.063 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:医疗费用支付方式未填写医疗费用支付方式为空值 
2020-06-16 18:03:48.064 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:RH超出字典范围RH不在字典范围内（1 阴性 2 阳性 3 不详 ） 
2020-06-16 18:03:48.066 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-16 18:03:48.066 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 87e0e78866e8446a8bf91c5fd7880ddb(String), 2020-06-16 18:03:48.066(Timestamp), 31011310200312009116(String), 92dc5e8124ba4c5396a3fa7c3d1dd8db(String), 2020-06-16 18:03:48.066(Timestamp) 
2020-06-16 18:03:48.091 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 2 
2020-06-16 18:03:52.867 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-16 18:03:52.867 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 18:03:52.872 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-16 18:03:52.878 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-16 18:03:52.879 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 18:03:52.883 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-16 18:03:52.888 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-16 18:03:52.888 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-16 18:03:52.893 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 13 
2020-06-16 18:03:52.897 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-16 18:03:52.897 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:03:52.901 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-16 18:03:52.905 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 18:03:52.905 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:03:52.911 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 18:03:52.915 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-16 18:03:52.916 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-16 18:03:52.916 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 18:03:52.916 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 18:03:52.921 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-16 18:03:52.925 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 18:03:52.926 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 18:03:52.930 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-16 18:03:52.934 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 18:03:52.935 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:03:52.939 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-16 18:03:52.943 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 18:03:52.944 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:03:52.957 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 18:03:52.961 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-16 18:03:52.961 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-16 18:03:52.961 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 18:03:52.962 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 18:03:52.966 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-16 18:03:52.970 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 18:03:52.970 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 18:03:52.974 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-16 18:03:52.979 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 18:03:52.979 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:03:52.983 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-16 18:03:52.988 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-16 18:03:52.988 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:03:52.992 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-16 18:03:53.006 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:医疗费用支付方式未填写医疗费用支付方式为空值 
2020-06-16 18:03:53.007 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:RH超出字典范围RH不在字典范围内（1 阴性 2 阳性 3 不详 ） 
2020-06-16 18:03:53.008 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:文化程度未填写文化程度为空值 
2020-06-16 18:03:53.010 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-16 18:03:53.010 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 87e0e78866e8446a8bf91c5fd7880ddb(String), 2020-06-16 18:03:53.01(Timestamp), 31011310200312009116(String), 92dc5e8124ba4c5396a3fa7c3d1dd8db(String), 2020-06-16 18:03:53.01(Timestamp), 31011310200312009116(String), b7530f3af05f46b2b8fdccab8369f0f1(String), 2020-06-16 18:03:53.01(Timestamp) 
2020-06-16 18:03:53.024 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 3 
2020-06-16 18:03:56.595 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-16 18:03:56.595 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 18:03:56.600 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-16 18:03:56.607 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-16 18:03:56.607 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 18:03:56.614 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-16 18:03:56.619 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-16 18:03:56.620 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-16 18:03:56.624 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 13 
2020-06-16 18:03:56.629 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-16 18:03:56.630 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:03:56.638 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-16 18:03:56.642 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 18:03:56.643 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:03:56.650 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 18:03:56.654 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-16 18:03:56.654 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-16 18:03:56.655 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 18:03:56.655 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 18:03:56.661 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-16 18:03:56.666 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 18:03:56.667 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 18:03:56.672 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-16 18:03:56.677 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 18:03:56.677 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:03:56.682 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-16 18:03:56.686 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 18:03:56.687 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:03:56.710 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 18:03:56.714 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-16 18:03:56.715 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-16 18:03:56.715 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 18:03:56.716 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 18:03:56.722 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-16 18:03:56.727 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 18:03:56.727 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 18:03:56.744 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-16 18:03:56.748 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 18:03:56.749 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:03:56.754 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-16 18:03:56.758 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-16 18:03:56.759 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:03:56.764 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-16 18:03:56.783 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:文化程度超出字典范围文化程度不在字典范围内（1 研究生 2 大学本科 3 大学专科和专科学校 4 中等专业学校 5 技工学校 6 高中 7 初中 8小学9文盲或半文盲10不详 ） 
2020-06-16 18:03:56.785 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:医疗费用支付方式未填写医疗费用支付方式为空值 
2020-06-16 18:03:56.786 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:RH超出字典范围RH不在字典范围内（1 阴性 2 阳性 3 不详 ） 
2020-06-16 18:03:56.791 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-16 18:03:56.791 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 59d8e69348314e3ca04bb4f0f94bd54e(String), 2020-06-16 18:03:56.79(Timestamp), 31011310200312009116(String), 87e0e78866e8446a8bf91c5fd7880ddb(String), 2020-06-16 18:03:56.79(Timestamp), 31011310200312009116(String), 92dc5e8124ba4c5396a3fa7c3d1dd8db(String), 2020-06-16 18:03:56.79(Timestamp) 
2020-06-16 18:03:56.817 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 3 
2020-06-16 18:04:00.538 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-16 18:04:00.538 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 18:04:00.546 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-16 18:04:00.551 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-16 18:04:00.551 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 18:04:00.556 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-16 18:04:00.560 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-16 18:04:00.561 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-16 18:04:00.566 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 13 
2020-06-16 18:04:00.570 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-16 18:04:00.570 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:04:00.575 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-16 18:04:00.579 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 18:04:00.579 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:04:00.585 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 18:04:00.590 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-16 18:04:00.590 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-16 18:04:00.590 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 18:04:00.591 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 18:04:00.595 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-16 18:04:00.601 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 18:04:00.601 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 18:04:00.606 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-16 18:04:00.610 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 18:04:00.611 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:04:00.615 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-16 18:04:00.620 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 18:04:00.620 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:04:00.634 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 18:04:00.639 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-16 18:04:00.639 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-16 18:04:00.639 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 18:04:00.640 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 18:04:00.644 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-16 18:04:00.648 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 18:04:00.649 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 18:04:00.653 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-16 18:04:00.659 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 18:04:00.659 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:04:00.663 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-16 18:04:00.667 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-16 18:04:00.667 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:04:00.672 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-16 18:04:00.688 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:医疗费用支付方式未填写医疗费用支付方式为空值 
2020-06-16 18:04:00.688 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:RH超出字典范围RH不在字典范围内（1 阴性 2 阳性 3 不详 ） 
2020-06-16 18:04:00.689 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:职业未填写职业为空值 
2020-06-16 18:04:00.691 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-16 18:04:00.691 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 87e0e78866e8446a8bf91c5fd7880ddb(String), 2020-06-16 18:04:00.691(Timestamp), 31011310200312009116(String), 92dc5e8124ba4c5396a3fa7c3d1dd8db(String), 2020-06-16 18:04:00.691(Timestamp), 31011310200312009116(String), 9f7d738548c24c6bbedb92e0e0f1cc30(String), 2020-06-16 18:04:00.691(Timestamp) 
2020-06-16 18:04:00.706 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 3 
2020-06-16 18:04:06.096 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-16 18:04:06.097 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 18:04:06.112 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-16 18:04:06.116 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-16 18:04:06.117 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 18:04:06.121 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-16 18:04:06.126 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-16 18:04:06.127 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-16 18:04:06.131 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 13 
2020-06-16 18:04:06.136 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-16 18:04:06.137 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:04:06.141 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-16 18:04:06.146 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 18:04:06.147 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:04:06.153 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 18:04:06.157 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-16 18:04:06.158 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-16 18:04:06.158 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 18:04:06.159 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 18:04:06.164 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-16 18:04:06.168 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 18:04:06.169 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 18:04:06.173 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-16 18:04:06.178 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 18:04:06.178 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:04:06.183 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-16 18:04:06.187 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 18:04:06.188 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:04:06.201 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 18:04:06.206 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-16 18:04:06.207 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-16 18:04:06.207 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 18:04:06.208 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 18:04:06.212 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-16 18:04:06.216 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 18:04:06.217 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 18:04:06.221 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-16 18:04:06.226 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 18:04:06.226 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:04:06.231 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-16 18:04:06.236 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-16 18:04:06.236 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:04:06.241 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-16 18:04:06.261 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:医疗费用支付方式未填写医疗费用支付方式为空值 
2020-06-16 18:04:06.262 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:RH超出字典范围RH不在字典范围内（1 阴性 2 阳性 3 不详 ） 
2020-06-16 18:04:06.264 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:婚姻状况未填写婚姻状况为空值 
2020-06-16 18:04:06.267 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-16 18:04:06.267 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 87e0e78866e8446a8bf91c5fd7880ddb(String), 2020-06-16 18:04:06.266(Timestamp), 31011310200312009116(String), 92dc5e8124ba4c5396a3fa7c3d1dd8db(String), 2020-06-16 18:04:06.266(Timestamp), 31011310200312009116(String), bfbe9eef04fa4ad9a1bad60b9dd74c13(String), 2020-06-16 18:04:06.266(Timestamp) 
2020-06-16 18:04:06.298 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 3 
2020-06-16 18:04:09.962 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-16 18:04:09.962 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 18:04:09.967 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-16 18:04:09.971 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-16 18:04:09.972 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 18:04:09.976 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-16 18:04:09.980 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-16 18:04:09.980 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-16 18:04:09.985 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 13 
2020-06-16 18:04:09.990 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-16 18:04:09.990 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:04:09.993 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-16 18:04:09.997 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 18:04:09.997 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:04:10.002 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 18:04:10.005 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-16 18:04:10.006 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-16 18:04:10.006 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 18:04:10.006 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 18:04:10.010 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-16 18:04:10.016 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 18:04:10.016 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 18:04:10.019 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-16 18:04:10.024 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 18:04:10.024 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:04:10.029 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-16 18:04:10.033 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 18:04:10.033 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:04:10.046 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 18:04:10.052 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-16 18:04:10.052 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-16 18:04:10.052 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 18:04:10.053 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 18:04:10.057 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-16 18:04:10.061 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 18:04:10.062 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 18:04:10.066 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-16 18:04:10.070 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 18:04:10.070 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:04:10.075 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-16 18:04:10.079 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-16 18:04:10.080 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:04:10.085 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-16 18:04:10.099 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:医疗费用支付方式未填写医疗费用支付方式为空值 
2020-06-16 18:04:10.100 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:RH超出字典范围RH不在字典范围内（1 阴性 2 阳性 3 不详 ） 
2020-06-16 18:04:10.102 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-16 18:04:10.103 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 87e0e78866e8446a8bf91c5fd7880ddb(String), 2020-06-16 18:04:10.102(Timestamp), 31011310200312009116(String), 92dc5e8124ba4c5396a3fa7c3d1dd8db(String), 2020-06-16 18:04:10.102(Timestamp) 
2020-06-16 18:04:10.121 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 2 
2020-06-16 18:04:16.357 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-16 18:04:16.358 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 18:04:16.363 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-16 18:04:16.368 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-16 18:04:16.369 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 18:04:16.376 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-16 18:04:16.380 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-16 18:04:16.381 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-16 18:04:16.385 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 13 
2020-06-16 18:04:16.389 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-16 18:04:16.390 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:04:16.394 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-16 18:04:16.399 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 18:04:16.399 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:04:16.404 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 18:04:16.408 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-16 18:04:16.408 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-16 18:04:16.408 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 18:04:16.409 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 18:04:16.413 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-16 18:04:16.417 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 18:04:16.418 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 18:04:16.422 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-16 18:04:16.425 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 18:04:16.426 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:04:16.430 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-16 18:04:16.435 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 18:04:16.435 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:04:16.449 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 18:04:16.455 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-16 18:04:16.455 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-16 18:04:16.455 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 18:04:16.456 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 18:04:16.460 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-16 18:04:16.464 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 18:04:16.465 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 18:04:16.471 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-16 18:04:16.475 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 18:04:16.476 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:04:16.480 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-16 18:04:16.484 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-16 18:04:16.485 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:04:16.490 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-16 18:04:16.505 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:医疗费用支付方式未填写医疗费用支付方式为空值 
2020-06-16 18:04:16.505 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:RH超出字典范围RH不在字典范围内（1 阴性 2 阳性 3 不详 ） 
2020-06-16 18:04:16.508 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-16 18:04:16.508 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 87e0e78866e8446a8bf91c5fd7880ddb(String), 2020-06-16 18:04:16.507(Timestamp), 31011310200312009116(String), 92dc5e8124ba4c5396a3fa7c3d1dd8db(String), 2020-06-16 18:04:16.507(Timestamp) 
2020-06-16 18:04:16.519 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 2 
2020-06-16 18:10:10.676 [INFO ] com.benetech.rules.RulesApplication                - [logStarting:55] Starting RulesApplication v1.0-SNAPSHOT on DESKTOP-EOCO1V0 with PID 10716 (D:\51\python\project\instance\zyjk\EHR\controlRuleNew\config\healthRecordRules.jar started by ZY in D:\51\python\project\instance\zyjk\EHR\controlRuleNew) 
2020-06-16 18:10:10.679 [DEBUG] com.benetech.rules.RulesApplication                - [logStarting:56] Running with Spring Boot v2.2.1.RELEASE, Spring v5.2.1.RELEASE 
2020-06-16 18:10:10.680 [INFO ] com.benetech.rules.RulesApplication                - [logStartupProfileInfo:655] The following profiles are active: test 
2020-06-16 18:10:12.420 [INFO ] o.s.boot.web.embedded.tomcat.TomcatWebServer       - [initialize:92] Tomcat initialized with port(s): 8838 (http) 
2020-06-16 18:10:12.431 [INFO ] org.apache.coyote.http11.Http11NioProtocol         - [log:173] Initializing ProtocolHandler ["http-nio-8838"] 
2020-06-16 18:10:12.431 [INFO ] org.apache.catalina.core.StandardService           - [log:173] Starting service [Tomcat] 
2020-06-16 18:10:12.432 [INFO ] org.apache.catalina.core.StandardEngine            - [log:173] Starting Servlet engine: [Apache Tomcat/9.0.27] 
2020-06-16 18:10:12.496 [INFO ] o.a.c.c.C.[.[localhost].[/healthRecordRules]       - [log:173] Initializing Spring embedded WebApplicationContext 
2020-06-16 18:10:12.496 [INFO ] org.springframework.web.context.ContextLoader      - [prepareWebApplicationContext:284] Root WebApplicationContext: initialization completed in 1722 ms 
2020-06-16 18:10:12.576 [DEBUG] org.apache.ibatis.logging.LogFactory               - [setImplementation:135] Logging initialized using 'class org.apache.ibatis.logging.slf4j.Slf4jImpl' adapter. 
2020-06-16 18:10:12.814 [WARN ] org.mybatis.spring.SqlSessionFactoryBean           - [buildSqlSessionFactory:467] Can't find class in '[com.benetech.rules.*.entity]' package. Please check your configuration. 
2020-06-16 18:10:13.442 [INFO ] com.alibaba.druid.pool.DruidDataSource             - [init:930] {dataSource-1} inited 
2020-06-16 18:10:13.676 [DEBUG] c.b.r.m.e.mapper.RuleEngineMapper.getAllRules      - [debug:159] ==>  Preparing: select a.RuleId as ruleId, a.RuleSql as clazz from HrRule a join HrRuleProps b on a.RuleId = b.RuleId where -- RuleId in ('34278f71cf1d42c88158aaf637fa5203', '8d30baa03bfc4233a8f115c57a0ebf08', '63eb82a44bf64c96a0b9023fa2a3c9d9') a.RuleSql != '' and a.RuleSql is not null and b.Enable = 1  
2020-06-16 18:10:13.700 [DEBUG] c.b.r.m.e.mapper.RuleEngineMapper.getAllRules      - [debug:159] ==> Parameters:  
2020-06-16 18:10:13.777 [DEBUG] c.b.r.m.e.mapper.RuleEngineMapper.getAllRules      - [debug:159] <==      Total: 310 
2020-06-16 18:10:14.020 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [init:68] 加载规则：310 条 
2020-06-16 18:10:14.043 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.getAllCode    - [debug:159] ==>  Preparing: SELECT codeSysType AS type, code AS code, [value] AS value FROM tb_code_value WHERE code != '' AND [value] != ''  
2020-06-16 18:10:14.043 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.getAllCode    - [debug:159] ==> Parameters:  
2020-06-16 18:10:14.343 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-16 18:10:14.344 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 18:10:14.349 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-16 18:10:14.353 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-16 18:10:14.353 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 18:10:14.358 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-16 18:10:14.361 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-16 18:10:14.362 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-16 18:10:14.366 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 13 
2020-06-16 18:10:14.370 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-16 18:10:14.370 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:10:14.374 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-16 18:10:14.378 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 18:10:14.378 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:10:14.383 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 18:10:14.387 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-16 18:10:14.387 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-16 18:10:14.387 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 18:10:14.387 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 18:10:14.391 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-16 18:10:14.394 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 18:10:14.394 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 18:10:14.398 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-16 18:10:14.401 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 18:10:14.402 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:10:14.406 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-16 18:10:14.410 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 18:10:14.410 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:10:14.424 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 18:10:14.429 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-16 18:10:14.429 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-16 18:10:14.429 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 18:10:14.429 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 18:10:14.434 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-16 18:10:14.438 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 18:10:14.438 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 18:10:14.442 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-16 18:10:14.446 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 18:10:14.446 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:10:14.451 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-16 18:10:14.454 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-16 18:10:14.454 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:10:14.458 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-16 18:10:14.471 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:医疗费用支付方式未填写医疗费用支付方式为空值 
2020-06-16 18:10:14.472 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:RH超出字典范围RH不在字典范围内（1 阴性 2 阳性 3 不详 ） 
2020-06-16 18:10:14.474 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-16 18:10:14.475 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 87e0e78866e8446a8bf91c5fd7880ddb(String), 2020-06-16 18:10:14.474(Timestamp), 31011310200312009116(String), 92dc5e8124ba4c5396a3fa7c3d1dd8db(String), 2020-06-16 18:10:14.474(Timestamp) 
2020-06-16 18:10:14.515 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.getAllCode    - [debug:159] <==      Total: 44881 
2020-06-16 18:10:14.521 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 2 
2020-06-16 18:10:14.541 [INFO ] c.b.r.m.m.service.impl.EhrModelBuildServiceImpl    - [init:96] 初始化字典类型: 467 种 
2020-06-16 18:10:14.541 [INFO ] c.b.r.m.m.service.impl.EhrModelBuildServiceImpl    - [init:97] 初始化字典: 44881 条 
2020-06-16 18:10:14.542 [ERROR] c.b.r.m.process.service.impl.QcProcessServiceImpl  - [init:44] 初始化线程池 
2020-06-16 18:10:14.682 [INFO ] o.s.scheduling.concurrent.ThreadPoolTaskExecutor   - [initialize:171] Initializing ExecutorService 'applicationTaskExecutor' 
2020-06-16 18:10:14.933 [INFO ] org.apache.coyote.http11.Http11NioProtocol         - [log:173] Starting ProtocolHandler ["http-nio-8838"] 
2020-06-16 18:10:14.946 [INFO ] org.apache.coyote.http11.Http11NioProtocol         - [log:173] Pausing ProtocolHandler ["http-nio-8838"] 
2020-06-16 18:10:14.947 [INFO ] org.apache.catalina.core.StandardService           - [log:173] Stopping service [Tomcat] 
2020-06-16 18:10:14.951 [INFO ] org.apache.coyote.http11.Http11NioProtocol         - [log:173] Stopping ProtocolHandler ["http-nio-8838"] 
2020-06-16 18:10:14.952 [INFO ] org.apache.coyote.http11.Http11NioProtocol         - [log:173] Destroying ProtocolHandler ["http-nio-8838"] 
2020-06-16 18:10:14.955 [INFO ] o.s.b.a.l.ConditionEvaluationReportLoggingListener - [logMessage:136]     Error starting ApplicationContext. To display the conditions report re-run your application with 'debug' enabled. 
2020-06-16 18:10:14.957 [ERROR] o.s.b.diagnostics.LoggingFailureAnalysisReporter   - [report:40]     ***************************  APPLICATION FAILED TO START  ***************************    Description:    Web server failed to start. Port 8838 was already in use.    Action:    Identify and stop the process that's listening on port 8838 or configure this application to listen on another port.   
2020-06-16 18:10:14.959 [INFO ] o.s.scheduling.concurrent.ThreadPoolTaskExecutor   - [shutdown:208] Shutting down ExecutorService 'applicationTaskExecutor' 
2020-06-16 18:10:14.963 [INFO ] com.alibaba.druid.pool.DruidDataSource             - [close:1825] {dataSource-1} closed 
2020-06-16 18:11:34.906 [INFO ] com.benetech.rules.RulesApplication                - [logStarting:55] Starting RulesApplication v1.0-SNAPSHOT on DESKTOP-EOCO1V0 with PID 13744 (D:\51\python\project\instance\zyjk\EHR\controlRuleNew\config\healthRecordRules.jar started by ZY in D:\51\python\project\instance\zyjk\EHR\controlRuleNew) 
2020-06-16 18:11:34.912 [DEBUG] com.benetech.rules.RulesApplication                - [logStarting:56] Running with Spring Boot v2.2.1.RELEASE, Spring v5.2.1.RELEASE 
2020-06-16 18:11:34.912 [INFO ] com.benetech.rules.RulesApplication                - [logStartupProfileInfo:655] The following profiles are active: test 
2020-06-16 18:11:36.402 [INFO ] o.s.boot.web.embedded.tomcat.TomcatWebServer       - [initialize:92] Tomcat initialized with port(s): 8838 (http) 
2020-06-16 18:11:36.414 [INFO ] org.apache.coyote.http11.Http11NioProtocol         - [log:173] Initializing ProtocolHandler ["http-nio-8838"] 
2020-06-16 18:11:36.414 [INFO ] org.apache.catalina.core.StandardService           - [log:173] Starting service [Tomcat] 
2020-06-16 18:11:36.415 [INFO ] org.apache.catalina.core.StandardEngine            - [log:173] Starting Servlet engine: [Apache Tomcat/9.0.27] 
2020-06-16 18:11:36.483 [INFO ] o.a.c.c.C.[.[localhost].[/healthRecordRules]       - [log:173] Initializing Spring embedded WebApplicationContext 
2020-06-16 18:11:36.483 [INFO ] org.springframework.web.context.ContextLoader      - [prepareWebApplicationContext:284] Root WebApplicationContext: initialization completed in 1469 ms 
2020-06-16 18:11:36.564 [DEBUG] org.apache.ibatis.logging.LogFactory               - [setImplementation:135] Logging initialized using 'class org.apache.ibatis.logging.slf4j.Slf4jImpl' adapter. 
2020-06-16 18:11:36.816 [WARN ] org.mybatis.spring.SqlSessionFactoryBean           - [buildSqlSessionFactory:467] Can't find class in '[com.benetech.rules.*.entity]' package. Please check your configuration. 
2020-06-16 18:11:37.412 [INFO ] com.alibaba.druid.pool.DruidDataSource             - [init:930] {dataSource-1} inited 
2020-06-16 18:11:37.603 [DEBUG] c.b.r.m.e.mapper.RuleEngineMapper.getAllRules      - [debug:159] ==>  Preparing: select a.RuleId as ruleId, a.RuleSql as clazz from HrRule a join HrRuleProps b on a.RuleId = b.RuleId where -- RuleId in ('34278f71cf1d42c88158aaf637fa5203', '8d30baa03bfc4233a8f115c57a0ebf08', '63eb82a44bf64c96a0b9023fa2a3c9d9') a.RuleSql != '' and a.RuleSql is not null and b.Enable = 1  
2020-06-16 18:11:37.623 [DEBUG] c.b.r.m.e.mapper.RuleEngineMapper.getAllRules      - [debug:159] ==> Parameters:  
2020-06-16 18:11:37.704 [DEBUG] c.b.r.m.e.mapper.RuleEngineMapper.getAllRules      - [debug:159] <==      Total: 310 
2020-06-16 18:11:37.929 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [init:68] 加载规则：310 条 
2020-06-16 18:11:37.946 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.getAllCode    - [debug:159] ==>  Preparing: SELECT codeSysType AS type, code AS code, [value] AS value FROM tb_code_value WHERE code != '' AND [value] != ''  
2020-06-16 18:11:37.947 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.getAllCode    - [debug:159] ==> Parameters:  
2020-06-16 18:11:38.244 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.getAllCode    - [debug:159] <==      Total: 44881 
2020-06-16 18:11:38.269 [INFO ] c.b.r.m.m.service.impl.EhrModelBuildServiceImpl    - [init:96] 初始化字典类型: 467 种 
2020-06-16 18:11:38.269 [INFO ] c.b.r.m.m.service.impl.EhrModelBuildServiceImpl    - [init:97] 初始化字典: 44881 条 
2020-06-16 18:11:38.270 [ERROR] c.b.r.m.process.service.impl.QcProcessServiceImpl  - [init:44] 初始化线程池 
2020-06-16 18:11:38.402 [INFO ] o.s.scheduling.concurrent.ThreadPoolTaskExecutor   - [initialize:171] Initializing ExecutorService 'applicationTaskExecutor' 
2020-06-16 18:11:38.625 [INFO ] org.apache.coyote.http11.Http11NioProtocol         - [log:173] Starting ProtocolHandler ["http-nio-8838"] 
2020-06-16 18:11:38.636 [INFO ] org.apache.coyote.http11.Http11NioProtocol         - [log:173] Pausing ProtocolHandler ["http-nio-8838"] 
2020-06-16 18:11:38.636 [INFO ] org.apache.catalina.core.StandardService           - [log:173] Stopping service [Tomcat] 
2020-06-16 18:11:38.640 [INFO ] org.apache.coyote.http11.Http11NioProtocol         - [log:173] Stopping ProtocolHandler ["http-nio-8838"] 
2020-06-16 18:11:38.640 [INFO ] org.apache.coyote.http11.Http11NioProtocol         - [log:173] Destroying ProtocolHandler ["http-nio-8838"] 
2020-06-16 18:11:38.642 [INFO ] o.s.b.a.l.ConditionEvaluationReportLoggingListener - [logMessage:136]     Error starting ApplicationContext. To display the conditions report re-run your application with 'debug' enabled. 
2020-06-16 18:11:38.644 [ERROR] o.s.b.diagnostics.LoggingFailureAnalysisReporter   - [report:40]     ***************************  APPLICATION FAILED TO START  ***************************    Description:    Web server failed to start. Port 8838 was already in use.    Action:    Identify and stop the process that's listening on port 8838 or configure this application to listen on another port.   
2020-06-16 18:11:38.646 [INFO ] o.s.scheduling.concurrent.ThreadPoolTaskExecutor   - [shutdown:208] Shutting down ExecutorService 'applicationTaskExecutor' 
2020-06-16 18:11:38.651 [INFO ] com.alibaba.druid.pool.DruidDataSource             - [close:1825] {dataSource-1} closed 
2020-06-16 18:11:38.662 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-16 18:11:38.662 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 18:11:38.667 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-16 18:11:38.671 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-16 18:11:38.671 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 18:11:38.676 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-16 18:11:38.679 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-16 18:11:38.679 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-16 18:11:38.684 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 13 
2020-06-16 18:11:38.688 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-16 18:11:38.688 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:11:38.692 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-16 18:11:38.695 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 18:11:38.696 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:11:38.701 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 18:11:38.706 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-16 18:11:38.706 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-16 18:11:38.707 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 18:11:38.707 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 18:11:38.711 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-16 18:11:38.715 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 18:11:38.715 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 18:11:38.719 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-16 18:11:38.723 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 18:11:38.723 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:11:38.728 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-16 18:11:38.732 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 18:11:38.732 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:11:38.745 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 18:11:38.749 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-16 18:11:38.749 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-16 18:11:38.750 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 18:11:38.750 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 18:11:38.753 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-16 18:11:38.759 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 18:11:38.759 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 18:11:38.763 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-16 18:11:38.767 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 18:11:38.767 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:11:38.771 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-16 18:11:38.775 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-16 18:11:38.776 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:11:38.779 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-16 18:11:38.793 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:医疗费用支付方式未填写医疗费用支付方式为空值 
2020-06-16 18:11:38.793 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:RH超出字典范围RH不在字典范围内（1 阴性 2 阳性 3 不详 ） 
2020-06-16 18:11:38.796 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-16 18:11:38.796 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 87e0e78866e8446a8bf91c5fd7880ddb(String), 2020-06-16 18:11:38.796(Timestamp), 31011310200312009116(String), 92dc5e8124ba4c5396a3fa7c3d1dd8db(String), 2020-06-16 18:11:38.796(Timestamp) 
2020-06-16 18:11:38.841 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 2 
2020-06-16 18:11:42.333 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-16 18:11:42.333 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 18:11:42.341 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-16 18:11:42.345 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-16 18:11:42.346 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 18:11:42.350 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-16 18:11:42.355 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-16 18:11:42.356 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-16 18:11:42.360 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 14 
2020-06-16 18:11:42.365 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-16 18:11:42.366 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:11:42.371 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-16 18:11:42.375 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 18:11:42.375 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:11:42.381 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 18:11:42.385 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-16 18:11:42.385 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-16 18:11:42.386 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 18:11:42.386 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 18:11:42.391 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-16 18:11:42.397 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 18:11:42.398 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 18:11:42.403 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-16 18:11:42.408 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 18:11:42.409 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:11:42.414 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-16 18:11:42.419 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 18:11:42.420 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:11:42.434 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 18:11:42.438 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-16 18:11:42.438 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-16 18:11:42.439 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 18:11:42.439 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 18:11:42.444 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-16 18:11:42.448 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 18:11:42.448 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 18:11:42.452 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-16 18:11:42.456 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 18:11:42.456 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:11:42.461 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-16 18:11:42.465 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-16 18:11:42.466 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:11:42.471 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-16 18:11:42.487 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:RH超出字典范围RH不在字典范围内（1 阴性 2 阳性 3 不详 ） 
2020-06-16 18:11:42.490 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1)  
2020-06-16 18:11:42.490 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 92dc5e8124ba4c5396a3fa7c3d1dd8db(String), 2020-06-16 18:11:42.49(Timestamp) 
2020-06-16 18:11:42.504 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 1 
2020-06-16 18:11:48.425 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-16 18:11:48.425 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 18:11:48.431 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-16 18:11:48.435 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-16 18:11:48.436 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 18:11:48.440 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-16 18:11:48.445 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-16 18:11:48.445 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-16 18:11:48.450 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 13 
2020-06-16 18:11:48.454 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-16 18:11:48.454 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:11:48.458 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-16 18:11:48.462 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 18:11:48.463 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:11:48.468 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 18:11:48.472 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-16 18:11:48.472 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-16 18:11:48.472 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 18:11:48.473 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 18:11:48.477 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-16 18:11:48.481 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 18:11:48.482 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 18:11:48.486 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-16 18:11:48.491 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 18:11:48.492 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:11:48.496 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-16 18:11:48.501 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 18:11:48.502 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:11:48.515 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 18:11:48.520 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-16 18:11:48.520 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-16 18:11:48.521 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 18:11:48.521 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 18:11:48.526 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-16 18:11:48.529 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 18:11:48.530 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 18:11:48.535 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-16 18:11:48.540 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 18:11:48.541 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:11:48.545 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-16 18:11:48.550 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-16 18:11:48.551 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:11:48.556 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-16 18:11:48.571 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:药物过敏史未填写药物过敏史为空值 
2020-06-16 18:11:48.575 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:RH超出字典范围RH不在字典范围内（1 阴性 2 阳性 3 不详 ） 
2020-06-16 18:11:48.579 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-16 18:11:48.580 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 0e82a90122434b1989a6a6fd97ced399(String), 2020-06-16 18:11:48.579(Timestamp), 31011310200312009116(String), 92dc5e8124ba4c5396a3fa7c3d1dd8db(String), 2020-06-16 18:11:48.579(Timestamp) 
2020-06-16 18:11:48.606 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 2 
2020-06-16 18:14:38.631 [INFO ] com.benetech.rules.RulesApplication                - [logStarting:55] Starting RulesApplication v1.0-SNAPSHOT on DESKTOP-EOCO1V0 with PID 16276 (D:\51\python\project\instance\zyjk\EHR\controlRuleNew\config\healthRecordRules.jar started by ZY in D:\51\python\project\instance\zyjk\EHR\controlRuleNew) 
2020-06-16 18:14:38.635 [DEBUG] com.benetech.rules.RulesApplication                - [logStarting:56] Running with Spring Boot v2.2.1.RELEASE, Spring v5.2.1.RELEASE 
2020-06-16 18:14:38.636 [INFO ] com.benetech.rules.RulesApplication                - [logStartupProfileInfo:655] The following profiles are active: test 
2020-06-16 18:14:40.114 [INFO ] o.s.boot.web.embedded.tomcat.TomcatWebServer       - [initialize:92] Tomcat initialized with port(s): 8838 (http) 
2020-06-16 18:14:40.127 [INFO ] org.apache.coyote.http11.Http11NioProtocol         - [log:173] Initializing ProtocolHandler ["http-nio-8838"] 
2020-06-16 18:14:40.128 [INFO ] org.apache.catalina.core.StandardService           - [log:173] Starting service [Tomcat] 
2020-06-16 18:14:40.128 [INFO ] org.apache.catalina.core.StandardEngine            - [log:173] Starting Servlet engine: [Apache Tomcat/9.0.27] 
2020-06-16 18:14:40.210 [INFO ] o.a.c.c.C.[.[localhost].[/healthRecordRules]       - [log:173] Initializing Spring embedded WebApplicationContext 
2020-06-16 18:14:40.210 [INFO ] org.springframework.web.context.ContextLoader      - [prepareWebApplicationContext:284] Root WebApplicationContext: initialization completed in 1484 ms 
2020-06-16 18:14:40.291 [DEBUG] org.apache.ibatis.logging.LogFactory               - [setImplementation:135] Logging initialized using 'class org.apache.ibatis.logging.slf4j.Slf4jImpl' adapter. 
2020-06-16 18:14:40.545 [WARN ] org.mybatis.spring.SqlSessionFactoryBean           - [buildSqlSessionFactory:467] Can't find class in '[com.benetech.rules.*.entity]' package. Please check your configuration. 
2020-06-16 18:14:41.198 [INFO ] com.alibaba.druid.pool.DruidDataSource             - [init:930] {dataSource-1} inited 
2020-06-16 18:14:41.431 [DEBUG] c.b.r.m.e.mapper.RuleEngineMapper.getAllRules      - [debug:159] ==>  Preparing: select a.RuleId as ruleId, a.RuleSql as clazz from HrRule a join HrRuleProps b on a.RuleId = b.RuleId where -- RuleId in ('34278f71cf1d42c88158aaf637fa5203', '8d30baa03bfc4233a8f115c57a0ebf08', '63eb82a44bf64c96a0b9023fa2a3c9d9') a.RuleSql != '' and a.RuleSql is not null and b.Enable = 1  
2020-06-16 18:14:41.451 [DEBUG] c.b.r.m.e.mapper.RuleEngineMapper.getAllRules      - [debug:159] ==> Parameters:  
2020-06-16 18:14:41.537 [DEBUG] c.b.r.m.e.mapper.RuleEngineMapper.getAllRules      - [debug:159] <==      Total: 310 
2020-06-16 18:14:41.751 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [init:68] 加载规则：310 条 
2020-06-16 18:14:41.770 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.getAllCode    - [debug:159] ==>  Preparing: SELECT codeSysType AS type, code AS code, [value] AS value FROM tb_code_value WHERE code != '' AND [value] != ''  
2020-06-16 18:14:41.771 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.getAllCode    - [debug:159] ==> Parameters:  
2020-06-16 18:14:42.239 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.getAllCode    - [debug:159] <==      Total: 44881 
2020-06-16 18:14:42.268 [INFO ] c.b.r.m.m.service.impl.EhrModelBuildServiceImpl    - [init:96] 初始化字典类型: 467 种 
2020-06-16 18:14:42.269 [INFO ] c.b.r.m.m.service.impl.EhrModelBuildServiceImpl    - [init:97] 初始化字典: 44881 条 
2020-06-16 18:14:42.270 [ERROR] c.b.r.m.process.service.impl.QcProcessServiceImpl  - [init:44] 初始化线程池 
2020-06-16 18:14:42.426 [INFO ] o.s.scheduling.concurrent.ThreadPoolTaskExecutor   - [initialize:171] Initializing ExecutorService 'applicationTaskExecutor' 
2020-06-16 18:14:42.430 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-16 18:14:42.431 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 18:14:42.437 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-16 18:14:42.445 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-16 18:14:42.445 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 18:14:42.453 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-16 18:14:42.461 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-16 18:14:42.461 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-16 18:14:42.469 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 13 
2020-06-16 18:14:42.477 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-16 18:14:42.477 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:14:42.485 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-16 18:14:42.492 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 18:14:42.493 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:14:42.501 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 18:14:42.507 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-16 18:14:42.508 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-16 18:14:42.508 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 18:14:42.508 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 18:14:42.515 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-16 18:14:42.520 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 18:14:42.520 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 18:14:42.527 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-16 18:14:42.531 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 18:14:42.532 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:14:42.540 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-16 18:14:42.547 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 18:14:42.548 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:14:42.561 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 18:14:42.566 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-16 18:14:42.566 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-16 18:14:42.567 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 18:14:42.567 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 18:14:42.575 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-16 18:14:42.582 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 18:14:42.583 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 18:14:42.590 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-16 18:14:42.598 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 18:14:42.598 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:14:42.606 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-16 18:14:42.613 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-16 18:14:42.614 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:14:42.621 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-16 18:14:42.636 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:药物过敏史未填写药物过敏史为空值 
2020-06-16 18:14:42.640 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:RH超出字典范围RH不在字典范围内（1 阴性 2 阳性 3 不详 ） 
2020-06-16 18:14:42.643 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-16 18:14:42.644 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 0e82a90122434b1989a6a6fd97ced399(String), 2020-06-16 18:14:42.643(Timestamp), 31011310200312009116(String), 92dc5e8124ba4c5396a3fa7c3d1dd8db(String), 2020-06-16 18:14:42.643(Timestamp) 
2020-06-16 18:14:42.686 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 2 
2020-06-16 18:14:42.700 [INFO ] org.apache.coyote.http11.Http11NioProtocol         - [log:173] Starting ProtocolHandler ["http-nio-8838"] 
2020-06-16 18:14:42.717 [INFO ] org.apache.coyote.http11.Http11NioProtocol         - [log:173] Pausing ProtocolHandler ["http-nio-8838"] 
2020-06-16 18:14:42.718 [INFO ] org.apache.catalina.core.StandardService           - [log:173] Stopping service [Tomcat] 
2020-06-16 18:14:42.722 [INFO ] org.apache.coyote.http11.Http11NioProtocol         - [log:173] Stopping ProtocolHandler ["http-nio-8838"] 
2020-06-16 18:14:42.723 [INFO ] org.apache.coyote.http11.Http11NioProtocol         - [log:173] Destroying ProtocolHandler ["http-nio-8838"] 
2020-06-16 18:14:42.724 [INFO ] o.s.b.a.l.ConditionEvaluationReportLoggingListener - [logMessage:136]     Error starting ApplicationContext. To display the conditions report re-run your application with 'debug' enabled. 
2020-06-16 18:14:42.726 [ERROR] o.s.b.diagnostics.LoggingFailureAnalysisReporter   - [report:40]     ***************************  APPLICATION FAILED TO START  ***************************    Description:    Web server failed to start. Port 8838 was already in use.    Action:    Identify and stop the process that's listening on port 8838 or configure this application to listen on another port.   
2020-06-16 18:14:42.728 [INFO ] o.s.scheduling.concurrent.ThreadPoolTaskExecutor   - [shutdown:208] Shutting down ExecutorService 'applicationTaskExecutor' 
2020-06-16 18:14:42.731 [INFO ] com.alibaba.druid.pool.DruidDataSource             - [close:1825] {dataSource-1} closed 
2020-06-16 18:16:23.456 [INFO ] com.benetech.rules.RulesApplication                - [logStarting:55] Starting RulesApplication v1.0-SNAPSHOT on DESKTOP-EOCO1V0 with PID 12916 (D:\51\python\project\instance\zyjk\EHR\controlRuleNew\config\healthRecordRules.jar started by ZY in D:\51\python\project\instance\zyjk\EHR\controlRuleNew) 
2020-06-16 18:16:23.460 [DEBUG] com.benetech.rules.RulesApplication                - [logStarting:56] Running with Spring Boot v2.2.1.RELEASE, Spring v5.2.1.RELEASE 
2020-06-16 18:16:23.460 [INFO ] com.benetech.rules.RulesApplication                - [logStartupProfileInfo:655] The following profiles are active: test 
2020-06-16 18:16:24.977 [INFO ] o.s.boot.web.embedded.tomcat.TomcatWebServer       - [initialize:92] Tomcat initialized with port(s): 8838 (http) 
2020-06-16 18:16:24.989 [INFO ] org.apache.coyote.http11.Http11NioProtocol         - [log:173] Initializing ProtocolHandler ["http-nio-8838"] 
2020-06-16 18:16:24.989 [INFO ] org.apache.catalina.core.StandardService           - [log:173] Starting service [Tomcat] 
2020-06-16 18:16:24.990 [INFO ] org.apache.catalina.core.StandardEngine            - [log:173] Starting Servlet engine: [Apache Tomcat/9.0.27] 
2020-06-16 18:16:25.060 [INFO ] o.a.c.c.C.[.[localhost].[/healthRecordRules]       - [log:173] Initializing Spring embedded WebApplicationContext 
2020-06-16 18:16:25.060 [INFO ] org.springframework.web.context.ContextLoader      - [prepareWebApplicationContext:284] Root WebApplicationContext: initialization completed in 1512 ms 
2020-06-16 18:16:25.144 [DEBUG] org.apache.ibatis.logging.LogFactory               - [setImplementation:135] Logging initialized using 'class org.apache.ibatis.logging.slf4j.Slf4jImpl' adapter. 
2020-06-16 18:16:25.416 [WARN ] org.mybatis.spring.SqlSessionFactoryBean           - [buildSqlSessionFactory:467] Can't find class in '[com.benetech.rules.*.entity]' package. Please check your configuration. 
2020-06-16 18:16:26.049 [INFO ] com.alibaba.druid.pool.DruidDataSource             - [init:930] {dataSource-1} inited 
2020-06-16 18:16:26.281 [DEBUG] c.b.r.m.e.mapper.RuleEngineMapper.getAllRules      - [debug:159] ==>  Preparing: select a.RuleId as ruleId, a.RuleSql as clazz from HrRule a join HrRuleProps b on a.RuleId = b.RuleId where -- RuleId in ('34278f71cf1d42c88158aaf637fa5203', '8d30baa03bfc4233a8f115c57a0ebf08', '63eb82a44bf64c96a0b9023fa2a3c9d9') a.RuleSql != '' and a.RuleSql is not null and b.Enable = 1  
2020-06-16 18:16:26.299 [DEBUG] c.b.r.m.e.mapper.RuleEngineMapper.getAllRules      - [debug:159] ==> Parameters:  
2020-06-16 18:16:26.377 [DEBUG] c.b.r.m.e.mapper.RuleEngineMapper.getAllRules      - [debug:159] <==      Total: 310 
2020-06-16 18:16:26.619 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [init:68] 加载规则：310 条 
2020-06-16 18:16:26.634 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.getAllCode    - [debug:159] ==>  Preparing: SELECT codeSysType AS type, code AS code, [value] AS value FROM tb_code_value WHERE code != '' AND [value] != ''  
2020-06-16 18:16:26.634 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.getAllCode    - [debug:159] ==> Parameters:  
2020-06-16 18:16:27.126 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.getAllCode    - [debug:159] <==      Total: 44881 
2020-06-16 18:16:27.152 [INFO ] c.b.r.m.m.service.impl.EhrModelBuildServiceImpl    - [init:96] 初始化字典类型: 467 种 
2020-06-16 18:16:27.152 [INFO ] c.b.r.m.m.service.impl.EhrModelBuildServiceImpl    - [init:97] 初始化字典: 44881 条 
2020-06-16 18:16:27.152 [ERROR] c.b.r.m.process.service.impl.QcProcessServiceImpl  - [init:44] 初始化线程池 
2020-06-16 18:16:27.183 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==>  Preparing: select Name as name, Phone as phone, Province as registerProvinceName, ProvinceCode as registerProvinceCode, City as registerCityName, CityCode as registerCityCode, District as registerDistrictName, DistrictCode as registerDistrictCode, permanentNeighborhood as registerNeighborhoodName, permanentNeighborhoodCode as registerNeighborhoodCode, permanentVillageName as registerVillageName, permanentVillageCode as registerVillageCode, PermanentAddress as registerAddress, Neighborhood as currentNeighborhoodName, NeighborhoodCode as currentNeighborhoodCode, VillageName as currentVillageName, VillageCode as currentVillageCode, PresentAddress as currentAddress, ArchiveUnit as archiveUnit, Archiver as archiver, ResponsibleDoctor as responsibleDoctor, DateOfCreateArchive as dateOfCreateArchive from HrCover where ArchiveNum = ?  
2020-06-16 18:16:27.183 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 18:16:27.190 [DEBUG] c.b.r.m.m.m.CoverBuildMapper.queryByArchiveNum     - [debug:159] <==      Total: 1 
2020-06-16 18:16:27.194 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==>  Preparing: select Id as id, Name as name, Sex as sex, DateOfBirth as dateOfBirth, IdCard as idCard, WorkUnit as workUnit, Phone as phone, ContactsName as contactsName, ContactsPhone as contactsPhone, ResidenceType as residenceType, NationCode as nationCode, BloodType as bloodType, RhBloodType as rhBloodType, Degree as degree, Occupation as occupation, MaritalStatus as maritalStatus, HeredityHistoryFlag as heredityHistoryFlag, EnvironmentKitchenAeration as environmentKitchenAeration, EnvironmentFuelType as environmentFuelType, EnvironmentWater as environmentWater, EnvironmentToilet as environmentToilet, EnvironmentCorral as environmentCorral from HrPersonBasicInfo where archiveNum = ?  
2020-06-16 18:16:27.195 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] ==> Parameters: 31011310200312009116(String) 
2020-06-16 18:16:27.203 [DEBUG] c.b.r.m.m.m.B.queryByArchiveNum                    - [debug:159] <==      Total: 1 
2020-06-16 18:16:27.207 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==>  Preparing: select associationType as associationType, code as code, msg as msg, occurDate as occurDate from HrAssociationInfo where Pid = ? and TableSource = 'HrPersonBasicInfo'  
2020-06-16 18:16:27.208 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] ==> Parameters: 1(Integer) 
2020-06-16 18:16:27.218 [DEBUG] c.b.r.m.m.m.B.getAssociationInfo                   - [debug:159] <==      Total: 13 
2020-06-16 18:16:27.222 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==>  Preparing: select JMXM as name, SJHM as phone from QYYH where sfzh = ?  
2020-06-16 18:16:27.223 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:16:27.233 [DEBUG] c.b.r.modules.model.mapper.SignMapper.queryById    - [debug:159] <==      Total: 1 
2020-06-16 18:16:27.237 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.ipVisitStrNo as streamNo, t1.admissionDate as inMedicalDate, t1.dischargeDate as outMedicalDate, t2.sexCode as sex, t2.dateOfBirth as dateOfBirth, t1.name as name, t2.phoneNum as phone FROM tb_his_ip_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid LEFT JOIN t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 18:16:27.237 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:16:27.244 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 18:16:27.248 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:34] 获取ipData1 
2020-06-16 18:16:27.248 [ERROR] c.b.r.m.model.service.impl.IpBuildServiceImpl      - [buildHospitalInfo:35] 1 
2020-06-16 18:16:27.249 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 18:16:27.249 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 18:16:27.253 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 1 
2020-06-16 18:16:27.257 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 2  
2020-06-16 18:16:27.257 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 18:16:27.261 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.buildSurgery    - [debug:159] <==      Total: 0 
2020-06-16 18:16:27.265 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 18:16:27.266 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:16:27.270 [DEBUG] c.b.r.m.model.mapper.IpBuildMapper.queryIpLis      - [debug:159] <==      Total: 0 
2020-06-16 18:16:27.273 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==>  Preparing: SELECT t3.HospitalLevel as orgLevel, t1.orgCode as orgCode, t1.opVisitStrNo as streamNo, t1.visitTime as medicalDate, t1.name as name, t2.phoneNum as phone FROM tb_his_op_medical_record t1 LEFT JOIN tb_empi_index_root t2 ON t2.guid = t1.empiGuid left join t_dic_hospital_info t3 on t3.Hospital_id = t1.orgCode WHERE t2.idCardNo = ?  
2020-06-16 18:16:27.273 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:16:27.287 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryInfoList   - [debug:159] <==      Total: 1 
2020-06-16 18:16:27.291 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:31] 获取op的data 
2020-06-16 18:16:27.291 [ERROR] c.b.r.m.model.service.impl.OpBuildServiceImpl      - [buildOutpatientInfo:32] 1 
2020-06-16 18:16:27.291 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==>  Preparing: SELECT diagnosisCode as code, diagnosisName as name FROM tb_his_diagnosis WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 18:16:27.291 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 18:16:27.292 [INFO ] o.s.scheduling.concurrent.ThreadPoolTaskExecutor   - [initialize:171] Initializing ExecutorService 'applicationTaskExecutor' 
2020-06-16 18:16:27.295 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildDiagnosis  - [debug:159] <==      Total: 0 
2020-06-16 18:16:27.300 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==>  Preparing: SELECT operCode as code, operName as name FROM tb_his_operation WHERE visitStrNo = ? AND visitType = 1  
2020-06-16 18:16:27.301 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] ==> Parameters: 20190322594248000(String) 
2020-06-16 18:16:27.305 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.buildOperation  - [debug:159] <==      Total: 0 
2020-06-16 18:16:27.309 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==>  Preparing: select t1.name as name, t1.reportNo as reportNo, t1.reportDate as reportDate, t1.reportTypeCode as reportTypeCode, t1.visitType as visitType from tb_lis_report t1 LEFT JOIN tb_empi_index_root t2 on t1.empiGuid = t2.guid where t2.idCardNo = ?  
2020-06-16 18:16:27.310 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:16:27.314 [DEBUG] c.b.r.m.model.mapper.OpBuildMapper.queryOpLis      - [debug:159] <==      Total: 0 
2020-06-16 18:16:27.318 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==>  Preparing: select top 1 t1.name as name, t1.workUnitName as workUnitName, t1.orgCode as orgCode, t2.HospitalLevel as orgLevel, t1.systemCode as systemCode, t1.objectId as objectId from tb_empi_pat_info t1 LEFT JOIN t_dic_hospital_info t2 on t1.orgCode = t2.Hospital_id where t1.idCardNo = ?  
2020-06-16 18:16:27.319 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] ==> Parameters: 110101199003071970(String) 
2020-06-16 18:16:27.323 [DEBUG] c.b.r.m.model.mapper.PatInfoMapper.queryInfoById   - [debug:159] <==      Total: 0 
2020-06-16 18:16:27.335 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:药物过敏史未填写药物过敏史为空值 
2020-06-16 18:16:27.338 [INFO ] c.b.r.m.engine.service.impl.RuleEngineServiceImpl  - [onSuccess:96] 符合规则为:RH超出字典范围RH不在字典范围内（1 阴性 2 阳性 3 不详 ） 
2020-06-16 18:16:27.341 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==>  Preparing: insert into HrRuleRecord(RecordId, ArchiveNum, RuleId, RecordTime, Ispass) values (NEWID(), ?, ?, ?, 1) , (NEWID(), ?, ?, ?, 1)  
2020-06-16 18:16:27.342 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] ==> Parameters: 31011310200312009116(String), 0e82a90122434b1989a6a6fd97ced399(String), 2020-06-16 18:16:27.341(Timestamp), 31011310200312009116(String), 92dc5e8124ba4c5396a3fa7c3d1dd8db(String), 2020-06-16 18:16:27.341(Timestamp) 
2020-06-16 18:16:27.385 [DEBUG] c.b.r.m.m.mapper.EhrModelBuildMapper.saveResult    - [debug:159] <==    Updates: 2 
2020-06-16 18:16:27.568 [INFO ] org.apache.coyote.http11.Http11NioProtocol         - [log:173] Starting ProtocolHandler ["http-nio-8838"] 
2020-06-16 18:16:27.582 [INFO ] org.apache.coyote.http11.Http11NioProtocol         - [log:173] Pausing ProtocolHandler ["http-nio-8838"] 
2020-06-16 18:16:27.582 [INFO ] org.apache.catalina.core.StandardService           - [log:173] Stopping service [Tomcat] 
2020-06-16 18:16:27.586 [INFO ] org.apache.coyote.http11.Http11NioProtocol         - [log:173] Stopping ProtocolHandler ["http-nio-8838"] 
2020-06-16 18:16:27.586 [INFO ] org.apache.coyote.http11.Http11NioProtocol         - [log:173] Destroying ProtocolHandler ["http-nio-8838"] 
2020-06-16 18:16:27.588 [INFO ] o.s.b.a.l.ConditionEvaluationReportLoggingListener - [logMessage:136]     Error starting ApplicationContext. To display the conditions report re-run your application with 'debug' enabled. 
2020-06-16 18:16:27.591 [ERROR] o.s.b.diagnostics.LoggingFailureAnalysisReporter   - [report:40]     ***************************  APPLICATION FAILED TO START  ***************************    Description:    Web server failed to start. Port 8838 was already in use.    Action:    Identify and stop the process that's listening on port 8838 or configure this application to listen on another port.   
2020-06-16 18:16:27.594 [INFO ] o.s.scheduling.concurrent.ThreadPoolTaskExecutor   - [shutdown:208] Shutting down ExecutorService 'applicationTaskExecutor' 
2020-06-16 18:16:27.606 [INFO ] com.alibaba.druid.pool.DruidDataSource             - [close:1825] {dataSource-1} closed 
